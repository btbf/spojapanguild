{"config":{"lang":["ja"],"separator":"[\\s\\-\u3000\u3001\u3002\uff0c\uff0e]+","pipeline":["stemmer"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Cardano\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u306e\u69cb\u7bc9\u30fb\u904b\u7528\u306b\u95a2\u3059\u308b\u6280\u8853\u30de\u30cb\u30e5\u30a2\u30eb","text":""},{"location":"#_1","title":"\u306f\u3058\u3081\u306b","text":"<p>SPO JAPAN GUILD\u3067\u306f\u3001Cardano\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u5206\u6563\u5316\u4fc3\u9032\u3092\u76ee\u7684\u3068\u3057\u3066\u3001\u65e5\u672c\u8a9e\u306b\u3088\u308b\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u69cb\u7bc9\u30fb\u904b\u7528\u306e\u6280\u8853\u30de\u30cb\u30e5\u30a2\u30eb\u3092\u6574\u5099\u3057\u3066\u3044\u307e\u3059\u3002 \u3053\u306e\u30de\u30cb\u30e5\u30a2\u30eb\u3067\u306f\u3001SPO\u306b\u5fc5\u8981\u306a\u77e5\u8b58\u3084\u4f5c\u696d\u624b\u9806\u3092\u4f53\u7cfb\u7684\u306b\u7fd2\u5f97\u3067\u304d\u307e\u3059\u3002</p> <p>\u60c5\u5831</p> <p>\u6700\u7d42\u66f4\u65b0\u65e5\uff1a2026\u5e741\u670815\u65e5 \u30de\u30cb\u30e5\u30a2\u30eb\u30d0\u30fc\u30b8\u30e7\u30f3\uff1a<code>13.9.0</code> \u5bfe\u5fdc\u30ce\u30fc\u30c9\u30d0\u30fc\u30b8\u30e7\u30f3\uff1a<code>v10.5.3</code></p> <p>\u30b5\u30dd\u30fc\u30c8</p> <p>\u30b5\u30dd\u30fc\u30c8\u304c\u5fc5\u8981\u306a\u5834\u5408\u306f\u3001Discord\u306eSPO JAPAN GUILD\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u3067\u73fe\u5f79\u306eSPO\u306b\u76f8\u8ac7\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"#_2","title":"\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u3068\u306f","text":"<p>Cardano\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u30b3\u30f3\u30bb\u30f3\u30b5\u30b9\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306f\u3001PoS\uff08Proof of Stake\uff09\u3092\u63a1\u7528\u3057\u3066\u304a\u308a\u3001\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u306fCardano\u30ce\u30fc\u30c9\u3092\u904b\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u51e6\u7406\u3068\u30d6\u30ed\u30c3\u30af\u751f\u6210\u3092\u62c5\u3044\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3068\u5206\u6563\u5316\u3092\u652f\u3048\u307e\u3059\u3002</p>"},{"location":"#spo","title":"SPO\u3068\u306f","text":"<p>SPO\uff08Stake Pool Operator\uff09\u306f\u3001\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u3092\u904b\u7528\u3059\u308b\u30aa\u30da\u30ec\u30fc\u30bf\u30fc\u3092\u6307\u3057\u307e\u3059\u3002 \u30d6\u30ed\u30c3\u30af\u751f\u6210\u30ce\u30fc\u30c9\u304a\u3088\u3073\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u3092\u9069\u5207\u306b\u69cb\u6210\u30fb\u904b\u7528\u30fb\u76e3\u8996\u3057\u3001Cardano\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3068\u5b89\u5b9a\u6027\u3092\u7dad\u6301\u3057\u307e\u3059\u3002</p>"},{"location":"#spo_1","title":"SPO\u306b\u6c42\u3081\u3089\u308c\u308b\u30b9\u30ad\u30eb","text":"<p>Cardano\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u3092\u904b\u55b6\u3059\u308b\u306b\u306f\u3001\u6b21\u306e\u30b9\u30ad\u30eb\u304c\u5fc5\u8981\u3067\u3059\u3002</p> <p>\u30b9\u30ad\u30eb</p> <p>\u904b\u7528\u30b9\u30ad\u30eb\uff1a \u30fb Cardano\u30ce\u30fc\u30c9\u3092\u7d99\u7d9a\u7684\u306b\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3001\u5b9f\u884c\u3001\u7dad\u6301\u3059\u308b\u904b\u7528\u30b9\u30ad\u30eb \u30fb \u30ce\u30fc\u30c9\u309224\u6642\u9593365\u65e5\u7a3c\u50cd\u3055\u305b\u308b\u30b3\u30df\u30c3\u30c8\u30e1\u30f3\u30c8 \u30fb \u30b5\u30fc\u30d0\u76e3\u8996\u30fb\u969c\u5bb3\u5bfe\u5fdc\u30b9\u30ad\u30eb  </p> <p>\u6280\u8853\u30b9\u30ad\u30eb\uff1a \u30fb Linux\u30b5\u30fc\u30d0\u7ba1\u7406\u30b9\u30ad\u30eb\uff08\u904b\u7528\u30fb\u4fdd\u5b88\uff09 \u30fb \u30b5\u30fc\u30d0\u5f37\u5316\u30fb\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u5f37\u5316\u30b9\u30ad\u30eb \u30fb DevOps\u306b\u95a2\u3059\u308b\u77e5\u8b58  </p>"},{"location":"#spo_2","title":"SPO\u306e\u4e3b\u306a\u696d\u52d9","text":"<ul> <li>\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u69cb\u7bc9</li> <li>\u30b5\u30fc\u30d0\u30fc(\u30ce\u30fc\u30c9)\u76e3\u8996</li> <li>\u5272\u308a\u5f53\u3066\u3089\u308c\u305f\u30d6\u30ed\u30c3\u30af\u306e\u751f\u6210\uff08\u203b\u30ce\u30fc\u30c9\u8a2d\u5b9a\u304c\u6b63\u3057\u3051\u308c\u3070\u81ea\u52d5\u751f\u6210\u3055\u308c\u307e\u3059\uff09</li> <li>\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u4f5c\u696d\uff08\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u7b49\uff09</li> <li>\u30de\u30fc\u30b1\u30c6\u30a3\u30f3\u30b0\u30fb\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u8ca2\u732e\u6d3b\u52d5</li> </ul>"},{"location":"#_3","title":"\u904b\u7528\u30b3\u30b9\u30c8","text":"\u533a\u5206 \u5185\u5bb9 \u30d7\u30fc\u30eb\u767b\u9332\u6599(\u521d\u56de\u306e\u307f) 500 ADA \u30b9\u30c6\u30fc\u30af\u30ad\u30fc\u767b\u9332\u4fdd\u8a3c\u91d1(\u521d\u56de\u306e\u307f) 2 ADA \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u624b\u6570\u6599 \u6570 ADA \u30b5\u30fc\u30d0\u30fc\u4ee3\uff08\u6700\u5c0f\u69cb\u6210\uff1a\u8a083\u53f0\uff09/ \u6708 1\u53f0\u3042\u305f\u308a 16,000\u301c32,000\u5186"},{"location":"#spo_3","title":"SPO\u306e\u5831\u916c","text":"<p>\u2460 + (\u30d7\u30fc\u30eb\u7dcf\u5831\u916c - \u2460) * \u2461 = SPO\u306e\u5831\u916c</p> \u533a\u5206 \u5185\u5bb9 \u2460 \u56fa\u5b9a\u8cbb\uff08Fixed Cost\uff09 \u6700\u4f4e 170 ADA\u304b\u3089\u8a2d\u5b9a\u53ef\u80fd \u2461 \u5909\u52d5\u8cbb\uff08Variable Fee\uff09 0%\uff5e100% \u3067\u8a2d\u5b9a\u53ef\u80fd <p>\u6ce8\u610f</p> <p>\u56fa\u5b9a\u30fb\u5909\u52d5\u8cbb\u3092\u9ad8\u304f\u8a2d\u5b9a\u3057\u3059\u304e\u308b\u3068\u3001\u59d4\u4efb\u8005\u306e\u5831\u916c\u304c\u6e1b\u5c11\u3057\u307e\u3059\u3002</p>"},{"location":"#_4","title":"\u30b5\u30fc\u30d0\u30fc\u30b9\u30da\u30c3\u30af\u8981\u4ef6","text":"\u6700\u5c0f\u69cb\u6210\u63a8\u5968\u69cb\u6210 \u533a\u5206 \u8981\u4ef6 \u30b5\u30fc\u30d0\u30fc BP\u75281\u53f0 / \u30ea\u30ec\u30fc\u75282\u53f0 OS 64-bit Linux (Ubuntu 22.04 LTS) CPU 2GHz / 2\u30b3\u30a2\u4ee5\u4e0a\u306e Intel \u307e\u305f\u306f AMD\uff08x86_64\uff09 \u30e1\u30e2\u30ea 24GB \u30b9\u30c8\u30ec\u30fc\u30b8 350GB \u30cd\u30c3\u30c8\u30ef\u30fc\u30af 10Mbps \u5e2f\u57df 1\u6642\u9593\u3042\u305f\u308a1GB \u96fb\u529b 24\u6642\u9593365\u65e5\u5b89\u5b9a\u4f9b\u7d66 \u533a\u5206 \u8981\u4ef6 \u30b5\u30fc\u30d0\u30fc BP\u75281\u53f0 / \u30ea\u30ec\u30fc\u75282\u53f0 OS 64-bit Linux (Ubuntu 22.04 LTS) CPU 2GHz\u4ee5\u4e0a 4\u30b3\u30a2\u306e Intel \u307e\u305f\u306f AMD\uff08x86_64\uff09 \u30e1\u30e2\u30ea 24GB\u4ee5\u4e0a \u30b9\u30c8\u30ec\u30fc\u30b8 350GB\u4ee5\u4e0a \u30cd\u30c3\u30c8\u30ef\u30fc\u30af 100Mbps \u5e2f\u57df \u7121\u5236\u9650 \u96fb\u529b 24\u6642\u9593365\u65e5\u5b89\u5b9a\u4f9b\u7d66"},{"location":"#_5","title":"\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u74b0\u5883\u306e\u30b9\u30da\u30c3\u30af\u8981\u4ef6","text":"\u63a8\u5968\u69cb\u6210 \u533a\u5206 \u8981\u4ef6 OS 64-bit Linux (Ubuntu 24.04 LTS) CPU 2GHz\u4ee5\u4e0a 4\u30b3\u30a2\u306e Intel \u307e\u305f\u306f AMD\uff08x86_64\uff09 \u30e1\u30e2\u30ea 8GB\u4ee5\u4e0a \u30b9\u30c8\u30ec\u30fc\u30b8 100GB\u4ee5\u4e0a"},{"location":"#_6","title":"\u30b5\u30fc\u30d0\u30fc\u69cb\u6210\u4f8b","text":"<pre><code>flowchart BT\n    a2[\u30ea\u30ec\u30fc1] &amp; a3[\u30ea\u30ec\u30fc2] &lt;--&gt; a4[Cardano\u30cd\u30c3\u30c8\u30ef\u30fc\u30af]\n    subgraph ide1[\u30d7\u30fc\u30eb]\n        subgraph BP\n            a1[BP]\n        end\n            a1[BP] &lt;--&gt; a2[\u30ea\u30ec\u30fc1] &amp; a3[\u30ea\u30ec\u30fc2]\n    end\n    c1[PC] --&gt; ide1\n    c1[PC] --&gt; \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7</code></pre>"},{"location":"#_7","title":"\u30b5\u30fc\u30d0\u30fc\u9078\u5b9a\u306b\u3064\u3044\u3066\u306e\u65b9\u91dd","text":"<p>\u5f53\u30ae\u30eb\u30c9\u306e\u65b9\u91dd</p> <p>Cardano\u306f\u4e16\u754c\u3067\u6700\u3082\u5206\u6563\u5316\u3055\u308c\u305f\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u76ee\u6307\u3057\u3066\u304a\u308a\u3001\u5730\u7406\u7684\u306b\u5206\u6563\u3057\u305f\u30ce\u30fc\u30c9\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u5f62\u6210\u304c\u975e\u5e38\u306b\u91cd\u8981\u3067\u3059\u3002 \u3053\u306e\u7406\u5ff5\u306b\u57fa\u3065\u304d\u3001\u5f53\u30ae\u30eb\u30c9\u3067\u306f\u300c\u304a\u3059\u3059\u3081\u306e\u30b5\u30fc\u30d0\u30fc(VPS)\u696d\u8005\u300d\u306e\u60c5\u5831\u5171\u6709\u306f\u884c\u3063\u3066\u3044\u307e\u305b\u3093\u3002 \u305d\u306e\u305f\u3081\u3001\u5730\u57df\u30fb\u30d7\u30ed\u30d0\u30a4\u30c0\u30fb\u56de\u7dda\u54c1\u8cea\u30fb\u4fa1\u683c\u30fb\u4fe1\u983c\u6027\u3092\u6bd4\u8f03\u691c\u8a0e\u3057\u305f\u3046\u3048\u3067\u3001\u3054\u81ea\u8eab\u306e\u904b\u7528\u65b9\u91dd\u306b\u5408\u308f\u305b\u3066\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"changelogs/","title":"\u66f4\u65b0\u5c65\u6b74","text":""},{"location":"changelogs/#2026115-ver1390","title":"2026/1/15\u3000ver.13.9.0","text":"<ul> <li>Midnight\u30d0\u30ea\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u30de\u30cb\u30e5\u30a2\u30eb\u8ffd\u52a0</li> <li>Mithril Signer\u30ce\u30fc\u30c9\u306e\u8a2d\u5b9a\u30fb\u66f4\u65b0\u8ffd\u52a0</li> <li>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u74b0\u5883\u69cb\u7bc9\u30ea\u30cb\u30e5\u30fc\u30a2\u30eb</li> <li>Ubuntu\u521d\u671f\u8a2d\u5b9a\u624b\u9806\u4e00\u90e8\u5909\u66f4</li> <li>SJG TOOL v4.1.1\u30ea\u30ea\u30fc\u30b9</li> </ul>"},{"location":"changelogs/#20251128-ver-1389","title":"2025/11/28\u3000ver. 13.8.9","text":"<ul> <li>SJG TOOL v4.0.2\u30ea\u30ea\u30fc\u30b9</li> <li>Grafana\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a proxy_pass \u540d\u524d\u89e3\u6c7a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20251127-ver-1388","title":"2025/11/27\u3000ver. 13.8.8","text":"<ul> <li>cardano-node v10.5.3\u5bfe\u5fdc</li> <li>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806\u66f4\u65b0</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20251121-ver-1387","title":"2025/11/21\u3000ver. 13.8.7","text":"<ul> <li>cardano-node v10.5.2\u5bfe\u5fdc</li> <li>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806\u66f4\u65b0</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#2025118-ver-1386","title":"2025/11/8\u3000ver. 13.8.6","text":"<ul> <li>gLiveview 1.32.0\u5bfe\u5fdc</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#2025113-ver-1385","title":"2025/11/3\u3000ver. 13.8.5","text":"<ul> <li>SJG TOOL v4.0.0\u30ea\u30ea\u30fc\u30b9</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20251031-ver-1384","title":"2025/10/31\u3000ver. 13.8.4","text":"<ul> <li>SPO\u30cb\u30e5\u30fc\u30b9\u30ec\u30bf\u30fc\u767b\u9332\u624b\u9806\u8ffd\u52a0</li> </ul>"},{"location":"changelogs/#20250821-ver-1383","title":"2025/08/21\u3000ver. 13.8.3","text":"<ul> <li>cardano-node v10.5.1\u5bfe\u5fdc</li> <li>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806\u66f4\u65b0</li> <li>SJG TOOL v3.9.7\u30ea\u30ea\u30fc\u30b9</li> </ul>"},{"location":"changelogs/#20250817-ver-1382","title":"2025/08/17\u3000ver. 13.8.2","text":"<ul> <li>Glacier Drop SPO\u8acb\u6c42\u624b\u7d9a\u304d\u624b\u9806\u8ffd\u52a0</li> <li>SJG TOOL v3.9.6\u30ea\u30ea\u30fc\u30b9</li> </ul>"},{"location":"changelogs/#20250703-ver-1381","title":"2025/07/03\u3000ver. 13.8.1","text":"<ul> <li>Calidus Pool Key\u8a2d\u5b9a\u624b\u9806\u4fee\u6b63</li> <li>SJG TOOL v3.9.5\u30ea\u30ea\u30fc\u30b9</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20250526-ver-1380","title":"2025/05/26\u3000ver. 13.8.0","text":"<ul> <li>cardano-node v10.4.1\u5bfe\u5fdc</li> <li><code>query utxo</code>\u30b3\u30de\u30f3\u30c9\u306e\u4fee\u6b63 <code>--output-text</code>\u56fa\u5b9a\u5316\u3068<code>--out-file</code>\u6307\u5b9a</li> <li>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806\u66f4\u65b0</li> <li>SJG TOOL v3.9.4\u30ea\u30ea\u30fc\u30b9</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20250512-ver-1371","title":"2025/05/12\u3000ver. 13.7.1","text":"<ul> <li>Mithril-Client \u30d6\u30fc\u30c8\u30b9\u30c8\u30e9\u30c3\u30d7\u30b3\u30de\u30f3\u30c9\u3092\u4fee\u6b63</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20250430-ver-1370","title":"2025/04/30\u3000ver. 13.7.0","text":"<ul> <li>cardano-node v10.3.1\u5bfe\u5fdc</li> <li>GenesisMode\u6709\u52b9\u6642\u306b\u5fc5\u8981\u306aCheckpointsFile\u3092\u8ffd\u52a0</li> <li>\u30ce\u30fc\u30c9Config\u30d5\u30a1\u30a4\u30eb\u306b\u3064\u3044\u3066SJG\u72ec\u81ea\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u3078\u5909\u66f4</li> <li>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806\u66f4\u65b0</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20250327-ver-1361","title":"2025/03/27\u3000ver. 13.6.1","text":"<ul> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20250326-ver-1360","title":"2025/03/26\u3000ver. 13.6.0","text":"<ul> <li>cardano-node v10.2.1\u5bfe\u5fdc</li> <li>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806\u66f4\u65b0</li> <li>Calidus Pool Keys\u767a\u884c\u30de\u30cb\u30e5\u30a2\u30eb\u8ffd\u52a0</li> <li>SJG TOOL v3.9.3\u30ea\u30ea\u30fc\u30b9</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20250108-ver-1352","title":"2025/01/08\u3000ver. 13.5.2","text":"<ul> <li>cardano-node v10.1.4\u5bfe\u5fdc</li> </ul>"},{"location":"changelogs/#20250102-ver-1351","title":"2025/01/02\u3000ver. 13.5.1","text":"<ul> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20241205-ver-1350","title":"2024/12/05\u3000ver. 13.5.0","text":"<ul> <li>cardano-node v10.1.3\u5bfe\u5fdc</li> </ul>"},{"location":"changelogs/#20241006-ver-1345","title":"2024/10/06\u3000ver. 13.4.5","text":"<ul> <li>\u30b3\u30de\u30f3\u30c9\u306e\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20241001-ver-1344","title":"2024/10/01\u3000ver. 13.4.4","text":"<ul> <li>cardano-node v9.2.1\u5bfe\u5fdc</li> <li>\u30ac\u30d0\u30ca\u30f3\u30b9\u30a2\u30af\u30b7\u30e7\u30f3SPO\u6295\u7968 CLI\u30b3\u30de\u30f3\u30c9\u8ffd\u52a0</li> </ul>"},{"location":"changelogs/#20240928-ver-1343","title":"2024/09/28\u3000ver. 13.4.3","text":"<ul> <li><code>cardano-cli conway</code>\u5bfe\u5fdc</li> <li>SJG TOOL v3.8.0\u30ea\u30ea\u30fc\u30b9 SPO\u6295\u7968\u5b9f\u88c5</li> </ul>"},{"location":"changelogs/#20240903-ver-1342","title":"2024/09/03\u3000ver. 13.4.2","text":"<ul> <li>cardano-node v9.1.1\u5bfe\u5fdc</li> <li>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806\u66f4\u65b0</li> </ul>"},{"location":"changelogs/#20240806-ver-1341","title":"2024/08/06\u3000ver. 13.4.1","text":"<ul> <li>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u4eee\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\u30b3\u30de\u30f3\u30c9\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3092\u4fee\u6b63</li> <li>\u624b\u6570\u6599\u7b97\u51fa\u30b3\u30de\u30f3\u30c9\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3092\u4fee\u6b63</li> <li>SJG TOOL v3.7.5\u30ea\u30ea\u30fc\u30b9</li> </ul>"},{"location":"changelogs/#20240805-ver-1340","title":"2024/08/05\u3000ver. 13.4.0","text":"<ul> <li>cardano-node v9.1.0\u5bfe\u5fdc</li> <li>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806\u66f4\u65b0</li> <li>SJG TOOL v3.7.4\u30ea\u30ea\u30fc\u30b9</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20240629-ver-1332","title":"2024/06/29\u3000ver. 13.3.2","text":"<ul> <li>cardano-node v8.9.4\u5bfe\u5fdc</li> <li>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806\u66f4\u65b0</li> </ul>"},{"location":"changelogs/#20240603-ver-1331","title":"2024/06/03\u3000ver. 13.3.1","text":"<ul> <li>\u30ce\u30fc\u30c9\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb cnreload\u5b9f\u884c\u30b3\u30de\u30f3\u30c9\u5909\u66f4</li> </ul> <p>\u65e2\u5b58\u8a2d\u5b9a\u5024\u4fee\u6b63\u30b3\u30de\u30f3\u30c9 <pre><code>sed -i 's/alias cnreload=\"kill -HUP $(pidof cardano-node)\"/alias cnreload=\"pkill -HUP cardano-node\"/g' $HOME/.bashrc\nsource $HOME/.bashrc\n</code></pre> * SJG TOOL v3.7.3\u30ea\u30ea\u30fc\u30b9 * \u8efd\u5fae\u306a\u4fee\u6b63</p>"},{"location":"changelogs/#20240503-ver-1330","title":"2024/05/03\u3000ver. 13.3.0","text":"<ul> <li>cardano-node v8.9.2\u5bfe\u5fdc</li> <li>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806\u66f4\u65b0</li> <li>\u30ea\u30ec\u30fc\u3068BP\u3092\u63a5\u7d9a\u3059\u308b\u306b\u30c0\u30a4\u30ca\u30df\u30c3\u30afP2P\u89e3\u8aac\u3092\u8ffd\u52a0</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20240410-ver-1322","title":"2024/04/10\u3000ver. 13.2.2","text":"<ul> <li>mithril-client\u30b3\u30de\u30f3\u30c9\u4fee\u6b63</li> <li>SFTP\u30bd\u30d5\u30c8(FileZilla)\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20240324-ver-1321","title":"2024/03/24\u3000ver. 13.2.1","text":"<ul> <li>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806cncli.sh\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u30b3\u30de\u30f3\u30c9\u8ffd\u52a0</li> <li>SPO Block Notify v2.2.1\u30ea\u30ea\u30fc\u30b9</li> </ul>"},{"location":"changelogs/#20240322-ver-1320","title":"2024/03/22\u3000ver. 13.2.0","text":"<ul> <li>cardano-node v8.9.0\u5bfe\u5fdc</li> <li>\u4f9d\u5b58\u95a2\u4fc2\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7 <code>secp256k1</code> <code>Blst</code></li> <li>\u5168\u30ce\u30fc\u30c9\u30c0\u30a4\u30ca\u30df\u30c3\u30afP2P\u65b9\u5f0f\u3078\u79fb\u884c</li> <li>\u6700\u4f4e\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u65702\u4ee5\u4e0a\u3078\u5909\u66f4</li> <li>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806\u66f4\u65b0</li> <li>SPO Block Notify v2.2.0\u30ea\u30ea\u30fc\u30b9</li> <li>SPO Block Notify\u79fb\u884c\u30de\u30cb\u30e5\u30a2\u30eb\u66f4\u65b0</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20240310-ver-1312","title":"2024/03/10\u3000ver. 13.1.2","text":"<ul> <li>\u30ce\u30fc\u30c9\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306e\u74b0\u5883\u5909\u6570\u8aad\u307f\u8fbc\u307f\u5931\u6557\u3092\u4fee\u6b63</li> <li>\u30c6\u30b9\u30c8\u30cd\u30c3\u30c8faucetURL\u3092\u4fee\u6b63</li> <li>gLiveView\u5c0e\u5165\u4e0d\u5177\u5408\u3092\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20240228-ver-1311","title":"2024/02/28\u3000ver. 13.1.1","text":"<ul> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20240226-ver-1310","title":"2024/02/26\u3000ver. 13.1.0","text":"<ul> <li>SPO Block Notify\u8a2d\u5b9a\u66f4\u65b0</li> <li>SPO Block Notify\u79fb\u884c\u30de\u30cb\u30e5\u30a2\u30eb\u8ffd\u52a0</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20240127-ver-1301","title":"2024/01/27\u3000ver. 13.0.1","text":"<ul> <li>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806\u66f4\u65b0<ul> <li>cncli.sh \u540c\u671f\u30a8\u30e9\u30fc\u306e\u5bfe\u51e6\u6cd5\u8ffd\u52a0</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul> </li> </ul>"},{"location":"changelogs/#20240126-ver-1300","title":"2024/01/26\u3000ver. 13.0.0","text":"<ul> <li> <p>\u63a8\u5968\u30b5\u30fc\u30d0\u30fc\u30b9\u30da\u30c3\u30af\u5909\u66f4 RAM 16GB\u219224GB / SSD 200GB\u2192300GB</p> </li> <li> <p>Cardano-node8.7.3\u5bfe\u5fdc</p> </li> <li> <p>\u30ce\u30fc\u30c9\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u624b\u9806</p> <ul> <li>blst\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u8ffd\u52a0</li> <li>GHCUP\u5909\u6570\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5c0e\u5165</li> </ul> </li> <li> <p>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806\u66f4\u65b0</p> <ul> <li>cardano-node v8.7.3\u5bfe\u5fdc</li> <li>\u30d3\u30eb\u30c9\u6e08\u307f\u30d0\u30a4\u30ca\u30ea\u306e\u4f7f\u7528</li> <li>Mithril\u30d6\u30fc\u30c8\u30b9\u30c8\u30e9\u30c3\u30d7\u306e\u5c0e\u5165</li> </ul> </li> <li> <p>\u30b5\u30fc\u30d0\u30fc\u5f15\u8d8a\u3057\u624b\u9806\u8ffd\u52a0 \u30ea\u30ec\u30fc\u7528 / BP\u7528</p> </li> <li> <p>Grafana\u30a2\u30e9\u30fc\u30c8\u8a2d\u5b9a Grafana\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u5bfe\u5fdc</p> </li> <li> <p>SJG TOOL v3.7.0\u30ea\u30ea\u30fc\u30b9</p> <ul> <li>CLI 8.17.0.0\u5bfe\u5fdc</li> <li>\u30c7\u30a3\u30b9\u30af\u7a7a\u304d\u5bb9\u91cf\u3068DB\u5bb9\u91cf\u8868\u793a\u8ffd\u52a0</li> </ul> </li> </ul>"},{"location":"changelogs/#20240105-ver-1295","title":"2024/01/05\u3000ver. 12.9.5","text":"<ul> <li>\u30d7\u30fc\u30eb\u60c5\u5831(pool.cert)\u306e\u66f4\u65b0 \u30e1\u30bf\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u306bnonce\u5024\u3092\u8ffd\u52a0 \u30d7\u30fc\u30eb\u60c5\u5831\u66f4\u65b0\u6642\u306b\u304a\u3044\u3066\u30e1\u30bf\u30c7\u30fc\u30bfURL\u306e\u307f\u306e\u5909\u66f4\u3067\u3001\u540c\u4e00\u30d5\u30a1\u30a4\u30eb(\u30cf\u30c3\u30b7\u30e5\u5024)\u3092\u4f7f\u7528\u3057\u305f\u5834\u5408\u3001SMASH\u30b5\u30fc\u30d0\u30fc\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u8aad\u307f\u8fbc\u307f\u306b\u304a\u3044\u3066\u53c2\u7167\u30c7\u30fc\u30bf\u306e\u6574\u5408\u6027\u304c\u53d6\u308c\u305a\u3001KoiosAPI\u3067\u3082\u30c7\u30fc\u30bf\u53c2\u7167\u51fa\u6765\u306a\u3044\u305f\u3081\u30e1\u30bf\u30c7\u30fc\u30bf\u306bnonce\u5024\u3092\u8a2d\u5b9a\u3057\u7570\u306a\u308b\u30cf\u30c3\u30b7\u30e5\u5024\u3067\u30c1\u30a7\u30fc\u30f3\u306b\u767b\u9332\u3059\u308b\u4ed5\u69d8\u3078\u5909\u66f4\u3002</li> </ul>"},{"location":"changelogs/#20231230-ver-1294","title":"2023/12/30\u3000ver. 12.9.4","text":"<ul> <li>Ubuntu22.04\u4efb\u610f\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u624b\u9806 \u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20231220-ver-1293","title":"2023/12/20\u3000ver. 12.9.3","text":"<ul> <li>8.1.2\u7528\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u5143\u5909\u66f4</li> </ul>"},{"location":"changelogs/#20231129-ver-1292","title":"2023/11/29\u3000ver. 12.9.2","text":"<ul> <li>SJG TOOL v3.6.4\u30ea\u30ea\u30fc\u30b9</li> <li>\u30d7\u30fc\u30ebID\u30d5\u30a1\u30a4\u30eb\u540d\u5909\u66f4   stakepoolid_hex \u2192 pool.id   stakepoolid_bech32 \u2192 pool.id-bech32</li> </ul>"},{"location":"changelogs/#20231125-ver-1291","title":"2023/11/25\u3000ver. 12.9.1","text":"<ul> <li>\u30ce\u30fc\u30c9\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u6642\u306eP2P\u8a2d\u5b9a\u3092\u524a\u9664</li> </ul>"},{"location":"changelogs/#20231120-ver-1290","title":"2023/11/20\u3000ver. 12.9.0","text":"<ul> <li>R-Login\u4f7f\u7528\u6642\u306e\u63a8\u5968\u8a2d\u5b9a\u3092\u63b2\u8f09 Ubuntu\u521d\u671f\u8a2d\u5b9a</li> <li>Tracemempool\u521d\u671f\u5024\u5909\u66f4\u5bfe\u5fdc</li> <li>SPO\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u8b70\u4e8b\u9332\u30ea\u30f3\u30af\u63b2\u8f09 SJG\u30e9\u30fc\u30cb\u30f3\u30b0</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20231028-ver-1289","title":"2023/10/28\u3000ver. 12.8.9","text":"<ul> <li>minPoolCost\u5909\u66f4\u306b\u4f34\u3046\u8868\u8a18\u304a\u3088\u3073\u30b3\u30de\u30f3\u30c9\u4fee\u6b63</li> <li>Grafana\u30a2\u30e9\u30fc\u30c8\u8a2d\u5b9a\u306bKES\u6b8b\u65e5\u6570\u3068\u30c7\u30a3\u30b9\u30af\u5bb9\u91cf\u30a2\u30e9\u30fc\u30c8\u8a2d\u5b9a\u3092\u8ffd\u52a0</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20230927-ver-1288","title":"2023/09/27\u3000ver. 12.8.8","text":"<ul> <li>DB\u540c\u671f(Mithril)\u30d9\u30fc\u30bf\u7248\u624b\u9806\u8ffd\u52a0</li> </ul>"},{"location":"changelogs/#20230919-ver-1287","title":"2023/09/19\u3000ver. 12.8.7","text":"<ul> <li>Grafana\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb \u624b\u9806\u4fee\u6b63</li> <li>Grafana\u30ea\u30dd\u30b8\u30c8\u30ea \u66f4\u65b0\u624b\u9806\u8ffd\u52a0</li> <li>\u30ce\u30fc\u30c9\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb \u30ce\u30fc\u30c9\u30d3\u30eb\u30c9\u524d\u306bTMUX\u3092\u8ffd\u52a0</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20230811-ver-1286","title":"2023/08/11\u3000ver. 12.8.6","text":"<ul> <li>Ubuntu22.04\u4efb\u610f\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u624b\u9806 BP\u306b\u304a\u3051\u308bCNCLI\u518d\u30d3\u30eb\u30c9\u6ce8\u610f\u66f8\u304d\u3092\u8ffd\u52a0</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20230725-ver-1285","title":"2023/07/25\u3000ver. 12.8.5","text":"<ul> <li>Cardano-node8.1.2\u5bfe\u5fdc</li> <li>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806\u66f4\u65b0</li> </ul>"},{"location":"changelogs/#20230718-ver-1284","title":"2023/07/18\u3000ver. 12.8.4","text":"<ul> <li>SJG TOOL v3.6.0\u30ea\u30ea\u30fc\u30b9(Catalyst\u6709\u6a29\u8005\u767b\u9332\u6a5f\u80fd\u5b9f\u88c5)</li> <li>Catalyst\u6709\u6a29\u8005\u767b\u9332 Catalyst\u6709\u6a29\u8005\u767b\u9332\u3092\u8ffd\u52a0</li> </ul>"},{"location":"changelogs/#20230718-ver-1283","title":"2023/07/18\u3000ver. 12.8.3","text":"<ul> <li>KES\u66f4\u65b0 \u65e2\u5b58\u30d5\u30a1\u30a4\u30eb\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u624b\u9806\u8ffd\u52a0</li> <li>\u76e3\u8996\u30c4\u30fc\u30eb\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7 Prometheus.yml\u69cb\u6587\u30c1\u30a7\u30c3\u30af\u8ffd\u52a0</li> </ul>"},{"location":"changelogs/#20230627-ver-1282","title":"2023/06/27\u3000ver. 12.8.2","text":"<ul> <li>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806 2-6\u30922-5\u3078\u7d71\u5408</li> <li>Ubuntu22.04\u4efb\u610f\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u624b\u9806 \u300c3-3.\u30c7\u30fc\u30e2\u30f3\u518d\u8d77\u52d5\u81ea\u52d5\u5316\u300d\u3092\u8ffd\u52a0</li> <li>1.Ubuntu\u521d\u671f\u8a2d\u5b9a \u300cUbuntu22.04\u306e\u5834\u5408\u306e\u7279\u5225\u8a2d\u5b9a\u300d\u3092\u8ffd\u52a0</li> <li>Grafana\u30a2\u30e9\u30fc\u30c8\u8a2d\u5b9a 2-2\u4fee\u6b63</li> <li>7.\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u306e\u767b\u9332\u30e1\u30bf\u30c7\u30fc\u30bf\u306e\u4f5c\u6210\u65b9\u6cd5\u3092\u5909\u66f4</li> </ul>"},{"location":"changelogs/#20230620-ver-1281","title":"2023/06/20\u3000ver. 12.8.1","text":"<ul> <li>Ubuntu22.04\u4efb\u610f\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u624b\u9806\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u66f4\u65b0\u624b\u9806\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20230620-ver-1280","title":"2023/06/20\u3000ver. 12.8.0","text":"<ul> <li>Cardano-node8.1.1\u5bfe\u5fdc</li> <li>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806\u66f4\u65b0</li> <li>Ubuntu22.04\u4efb\u610f\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u624b\u9806\u8ffd\u52a0</li> <li>SJG\u30e9\u30fc\u30cb\u30f3\u30b0\u8cc7\u6599\u8ffd\u52a0</li> <li>[\u30c0\u30a4\u30ca\u30df\u30c3\u30afP2P\u8a2d\u5b9a]\u30c8\u30dd\u30ed\u30b8\u30fc\u30ea\u30ed\u30fc\u30c9\u7528\u74b0\u5883\u5909\u6570\u8ffd\u52a0</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20230518-ver-1271","title":"2023/05/18\u3000ver. 12.7.1","text":"<ul> <li>SJG TOOL v3.5\u30ea\u30ea\u30fc\u30b9(SPO\u6295\u7968\u6a5f\u80fd\u5b9f\u88c5)</li> <li>SPO\u6295\u7968\u30e1\u30a4\u30f3\u30cd\u30c3\u30c8\u624b\u9806\u8ffd\u52a0</li> </ul>"},{"location":"changelogs/#20230513-ver-1270","title":"2023/05/13\u3000ver. 12.7.0","text":"<ul> <li>Cardano-node8.0.0\u5bfe\u5fdc</li> <li>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806\u66f4\u65b0</li> </ul>"},{"location":"changelogs/#20230504-ver-1263","title":"2023/05/04\u3000ver. 12.6.3","text":"<ul> <li>SPO\u6295\u7968(\u30c6\u30b9\u30c8\u30cd\u30c3\u30c8)\u624b\u9806\u8ffd\u52a0</li> </ul>"},{"location":"changelogs/#20230413-ver-1262","title":"2023/04/13\u3000ver. 12.6.2","text":"<ul> <li>CNCLI 5.3.2 musl\u30d3\u30eb\u30c9\u5bfe\u5fdc</li> </ul>"},{"location":"changelogs/#20230404-ver-1261","title":"2023/04/04\u3000ver. 12.6.1","text":"<ul> <li>CNCLI 5.3.2\u5bfe\u5fdc</li> <li>P2P\u8a2d\u5b9a\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u8ffd\u52a0</li> </ul>"},{"location":"changelogs/#20230404-ver-1260","title":"2023/04/04\u3000ver. 12.6.0","text":"<ul> <li>Cardano-node1.35.7\u5bfe\u5fdc</li> <li>[\u30c0\u30a4\u30ca\u30df\u30c3\u30afP2P\u8a2d\u5b9a] \u30de\u30cb\u30e5\u30a2\u30eb\u8ffd\u52a0</li> <li>\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30c6\u30b9\u901a\u77e5 v1.9.3</li> <li>SJG\u30e9\u30fc\u30cb\u30f3\u30b0\u8cc7\u6599\u8ffd\u52a0</li> </ul>"},{"location":"changelogs/#20230307-ver-1251","title":"2023/03/07\u3000ver. 12.5.1","text":"<ul> <li>[\u76e3\u8996\u30c4\u30fc\u30eb\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7] prometheus.yml\u5185\u5bb9\u4fee\u6b63</li> <li>\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30c6\u30b9\u901a\u77e5 v1.9.0</li> </ul>"},{"location":"changelogs/#20230307-ver-1250","title":"2023/03/07\u3000ver. 12.5.0","text":"<ul> <li>Grafana\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u5f37\u5316\u8a2d\u5b9a\u8ffd\u52a0</li> <li>Grafana\u30a2\u30e9\u30fc\u30c8\u8a2d\u5b9a\u8ffd\u52a0</li> <li>\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30c6\u30b9\u901a\u77e5 v1.8.9 \u3000\u901a\u77e5\u8a2d\u5b9a\u6709\u7121\u691c\u77e5\u3001\u8d77\u52d5\u6642\u901a\u77e5\u6a5f\u80fd\u8ffd\u52a0</li> <li>CNCLI5.3.1\u5bfe\u5fdc</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20230210-ver-1248","title":"2023/02/10\u3000ver. 12.4.8","text":"<ul> <li>\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30c6\u30b9\u901a\u77e5 v1.8.6 \u3000\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u53d6\u5f97\u81ea\u52d5\u5316\u6a5f\u80fd\u8ffd\u52a0</li> </ul>"},{"location":"changelogs/#20230208-ver-1247","title":"2023/02/08\u3000ver. 12.4.7","text":"<ul> <li>\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30c6\u30b9\u901a\u77e5 v1.8 \u3000\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u53d6\u5f97\u81ea\u52d5\u5316\u6a5f\u80fd\u8ffd\u52a0</li> </ul>"},{"location":"changelogs/#20230204-ver-1246","title":"2023/02/04\u3000ver. 12.4.6","text":"<ul> <li>CNCLI5.3.0\u5bfe\u5fdc</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20230129-ver-1245","title":"2023/01/29\u3000ver. 12.4.5","text":"<ul> <li>Cardano-node1.35.5\u5bfe\u5fdc</li> <li>cncli.sh\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8</li> <li>\u30d6\u30ed\u30c3\u30af\u30ed\u30b0 \u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u53d6\u5f97\u624b\u9806\u3092\u5909\u66f4</li> <li>\u8ca2\u732e\u8005\u30da\u30fc\u30b8\u3092\u8ffd\u52a0</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20230123-ver-1244","title":"2023/01/23\u3000ver. 12.4.4","text":"<ul> <li>SJG\u30e9\u30fc\u30cb\u30f3\u30b0\u3092\u8ffd\u52a0</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20230105-ver-1243","title":"2023/01/05\u3000ver. 12.4.3","text":"<ul> <li>\u30ea\u30ec\u30fc\u30b5\u30fc\u30d0\u30fc\u5897\u8a2d\u30de\u30cb\u30e5\u30a2\u30eb\u3092\u8ffd\u52a0</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20221220-ver-1242","title":"2022/12/20\u3000ver. 12.4.2","text":"<ul> <li>\u6700\u65b0\u30ea\u30ea\u30fc\u30b91.35.4\u30d3\u30eb\u30c9\u5931\u6557\u306e\u56de\u907f\u30b3\u30de\u30f3\u30c9\u3092\u8ffd\u8a18</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20221203-ver-1241","title":"2022/12/03\u3000ver. 12.4.1","text":"<ul> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20221202-ver-1240","title":"2022/12/02\u3000ver. 12.4.0","text":"<ul> <li>Cardano-node1.35.4\u5bfe\u5fdc</li> <li>prometheus-node-exporter1.5.0\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806\u8ffd\u52a0     (9.\u76e3\u8996\u30c4\u30fc\u30eb\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3001\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8)</li> <li>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u4f5c\u6210 \u30da\u30fc\u30b8\u65b0\u8a2d\u3002Version7\u5bfe\u5fdc</li> <li>1.Ubuntu\u521d\u671f\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u8a2d\u5b9a\u306e\u4e00\u90e8\u3092\u5909\u66f4     (\u8a2d\u5b9a\u304c\u5fc5\u8981\u306a\u5404\u30da\u30fc\u30b8(3-\u30ea\u30ec\u30fc/BP\u306e\u63a5\u7d9a\u30019.\u76e3\u8996\u30c4\u30fc\u30eb\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7)\u3078\u79fb\u52d5)</li> <li>\u30ea\u30ec\u30fc2\u53f0\u76ee\u4ee5\u964d\u306e\u8a2d\u5b9a\u624b\u9806\u3092\u5404\u30da\u30fc\u30b8\u306b\u8ffd\u52a0</li> <li>Grafana\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u66f4\u65b0\u3002     (KoiosAPI\u3092\u5229\u7528\u3057\u30c6\u30a3\u30c3\u30ab\u30fc\u540d\u3001\u30d7\u30fc\u30eb\u59d4\u4efb\u91cf\u3001\u59d4\u4efb\u8005\u6570\u60c5\u5831\u8868\u793a)</li> <li>\u30d7\u30fc\u30eb\u904b\u7528\u30ac\u30a4\u30c9\u30ab\u30c6\u30b4\u30ea\u3092\u6574\u7406</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20221017-ver-1236","title":"2022/10/17\u3000ver. 12.3.6","text":"<ul> <li>2. \u30ce\u30fc\u30c9\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb \u30ce\u30fc\u30c9\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u5143URL\u3092\u5909\u66f4</li> <li>config\u30d5\u30a1\u30a4\u30eb\u4fee\u6b63\u5185\u5bb9\u30b3\u30de\u30f3\u30c9\u5316</li> <li>\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u3067\u3082\u30ed\u30b0\u51fa\u529b\u3059\u308b\u3088\u3046\u624b\u9806\u4fee\u6b63</li> <li>\u63a5\u7d9a\u3059\u308b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af(\u30e1\u30a4\u30f3\u30cd\u30c3\u30c8/\u30c6\u30b9\u30c8\u30cd\u30c3\u30c8)\u3092\u9078\u629e\u53ef\u80fd\u306b\u3059\u308b\u30b3\u30de\u30f3\u30c9\u3092\u8ffd\u52a0</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20220910-ver-1235","title":"2022/09/10\u3000ver. 12.3.5","text":"<ul> <li>9.\u76e3\u8996\u30c4\u30fc\u30eb\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7 (\u9805\u76ee9\u306eJSON\u30d5\u30a1\u30a4\u30eb\u3092\u5909\u66f4)</li> <li>SPO JAPAN GUILD TOOL v3.3.0 \u30ea\u30ea\u30fc\u30b9</li> </ul>"},{"location":"changelogs/#20220828-ver-1234","title":"2022/08/28\u3000ver. 12.3.4","text":"<ul> <li>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806\u5185\u3001\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7secp256k1\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20220827-ver-1233","title":"2022/08/27\u3000ver. 12.3.3","text":"<ul> <li>logMonitor.sh\u53d6\u5f97\u5148\u3092\u5909\u66f4 </li> </ul>"},{"location":"changelogs/#20220827-ver-1232","title":"2022/08/27\u3000ver. 12.3.2","text":"<ul> <li>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806\u4e00\u90e8\u4fee\u6b63 </li> <li>SSH\u8a8d\u8a3c\u9375\u30d5\u30a1\u30a4\u30eb\u751f\u6210\u30b3\u30fc\u30c9\u3092SHA2\u306b\u5909\u66f4</li> </ul>"},{"location":"changelogs/#20220825-ver-1231","title":"2022/08/25\u3000ver. 12.3.1","text":"<ul> <li>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806\u4e00\u90e8\u4fee\u6b63 </li> </ul>"},{"location":"changelogs/#20220825-ver-1230","title":"2022/08/25\u3000ver. 12.3.0","text":"<ul> <li>cardano-node v1.35.3 \u306b\u5bfe\u5fdc</li> <li>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u4f5c\u6210\u624b\u9806\u66f4\u65b0</li> <li>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806\u66f4\u65b0</li> <li>SFTP\u30bd\u30d5\u30c8\u8a2d\u5b9a\u624b\u9806\u8ffd\u52a0    </li> </ul>"},{"location":"changelogs/#20220724-ver-1220","title":"2022/07/24\u3000ver. 12.2.0","text":"<ul> <li>RSYNC+SSH\u30b5\u30fc\u30d0\u30fc\u9593\u8ee2\u9001\u8a2d\u5b9a\u624b\u9806\u8ffd\u52a0</li> </ul>"},{"location":"changelogs/#20220606-ver-1211","title":"2022/06/06\u3000ver. 12.1.1","text":"<ul> <li>env\u30d5\u30a1\u30a4\u30eb\u306eCCLI\u884c\u306bRTS\u30d5\u30e9\u30b0\u3092\u8ffd\u52a0</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20220530-ver-121","title":"2022/05/30\u3000ver. 12.1","text":"<ul> <li>\u30ce\u30fc\u30c9\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u30b3\u30fc\u30c9\u3092\u4fee\u6b63  \u3000\u30ce\u30fc\u30c9\u8d77\u52d5\u30b3\u30de\u30f3\u30c9\u306b\u30ac\u30d9\u30fc\u30b8\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u554f\u984c\u306b\u5bfe\u5fdc\u3057\u305fRTS\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u8ffd\u52a0</li> </ul>"},{"location":"changelogs/#20220510-ver-120","title":"2022/05/10\u3000ver. 12.0","text":"<ul> <li>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u4f5c\u6210\u624b\u9806\u3092\u8ffd\u52a0  </li> <li>Linux\u30b3\u30de\u30f3\u30c9\u96c6\u3092\u8ffd\u52a0</li> <li>SJG Tool\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7</li> <li>\u305d\u306e\u4ed6\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20220420-ver-114","title":"2022/04/20\u3000ver. 11.4","text":"<ul> <li>\u30ce\u30fc\u30c9\u8d77\u52d5\u30fb\u518d\u8d77\u52d5\u30fb\u505c\u6b62\u30a8\u30a4\u30ea\u30a2\u30b9\u30b3\u30de\u30f3\u30c9\u8ffd\u52a0 (2-\u30ce\u30fc\u30c9\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb)</li> <li>\u5bc4\u4ed8\u5148\u30a2\u30c9\u30ec\u30b9\u306bada $handle\u3092\u8ffd\u52a0</li> </ul>"},{"location":"changelogs/#20220414-ver-113","title":"2022/04/14\u3000ver. 11.3","text":"<ul> <li>SPO JAPAN GUILD TOOL\u3092\u30ea\u30ea\u30fc\u30b9</li> </ul>"},{"location":"changelogs/#20220407-ver-112","title":"2022/04/07\u3000ver. 11.2","text":"<ul> <li>payment.addr\u306b\u30cd\u30a4\u30c6\u30a3\u30d6\u30c8\u30fc\u30af\u30f3\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u5834\u5408\u306eTx\u9001\u4fe1\u30a8\u30e9\u30fc\u4fee\u6b63 \u30d7\u30fc\u30eb\u60c5\u5831\u306e\u66f4\u65b0 / \u8cc7\u91d1\u5f15\u304d\u51fa\u3057 / \u30d7\u30fc\u30eb\u5ec3\u6b62 </li> <li>\u904b\u7528\u30ac\u30a4\u30c9\u5185\u30ea\u30f3\u30af\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20220311-ver-111","title":"2022/03/11\u3000ver. 11.1","text":"<ul> <li>[8-P2P\u30c8\u30dd\u30ed\u30b8\u30fc\u8a2d\u5b9a] \u306b[\u30ce\u30fc\u30c9\u8d77\u52d5\u6700\u7d42\u8abf\u6574]\u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\u3002</li> </ul>"},{"location":"changelogs/#20220307-ver-110","title":"2022/03/07\u3000ver. 11.0","text":"<ul> <li>cardano-node v1.34.1 \u306b\u5bfe\u5fdc</li> </ul>"},{"location":"changelogs/#20220301-ver-100","title":"2022/03/01\u3000ver. 10.0","text":"<ul> <li>\u30ab\u30eb\u30c0\u30ce\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u69cb\u7bc9\u624b\u9806\u65e5\u672c\u8a9e\u7ffb\u8a33\u3092\u5237\u65b0\u3057\u3001\u300cSPO JAPAN GUILD DOCS\u300d\u3068\u3057\u3066\u751f\u307e\u308c\u5909\u308f\u308a\u307e\u3057\u305f\uff01</li> </ul>"},{"location":"contributors/","title":"\u8ca2\u732e\u8005\u4e00\u89a7","text":""},{"location":"contributors/#_2","title":"\u5275\u8a2d\u30fb\u904b\u55b6\u8005","text":"<p>BTBF  | Pool: [XSP]X-StakePool / [XSP2]X-StakePool <code>\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u904b\u55b6</code>/<code>\u6280\u8853\u30b5\u30dd\u30fc\u30c8</code>/<code>\u30c4\u30fc\u30eb\u958b\u767a</code>/<code>\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u6574\u5099</code> \u62c5\u5f53</p>"},{"location":"contributors/#_3","title":"\u4e3b\u306a\u8ca2\u732e\u8005","text":"<p><code>\u30c7\u30a3\u30b9\u30b3\u30fc\u30c9\u5185\u30b5\u30dd\u30fc\u30c8</code> <code>\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u5bc4\u7a3f\u30fb\u4fee\u6b63</code> <code>\u6280\u8853\u691c\u8a3c\u4f5c\u696d</code>\u306a\u3069\u306b\u3054\u5354\u529b\u9802\u3044\u305f\u7686\u69d8\u3067\u3059\u3002</p> <p>\u30fbSAKAKIBARA  | Pool: [1JPN] \u65e5\u672c\u58f1\u30d7\u30fc\u30eb \u30fbAkyo  | Pool:[AKYO] AKYO\ud83e\udd41 \u30fbSMAN  | Pool:[SA8] SMAN8 \u30fbAICHI  | Pool:[AICHI] Aichi Stake Pool / [TOKAI] Tokai Stake Pool \u30fbNori  | Pool:[1STEP] 1STEP \u30fbSUGAR  | Pool:[SUGAR] Sugar Stake Pool \u30fbMOBC  | Pool: [MOBC] MOBC StakePoolServer And More...  </p>"},{"location":"learning/","title":"SJG\u30e9\u30fc\u30cb\u30f3\u30b0","text":"<p>SJG\u30e9\u30fc\u30cb\u30f3\u30b0\u3068\u306f\uff1f</p> <p>\u3053\u3061\u3089\u306e\u5185\u5bb9\u306fSJG\u30c7\u30a3\u30b9\u30b3\u30fc\u30c9\u3067\u6bce\u9031\u571f\u66dc\u65e521\u6642\u304b\u3089\u958b\u50ac\u306eSPO\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u5185\u3067\u4e0d\u5b9a\u671f\u306b\u5b9f\u65bd\u3057\u3066\u3044\u308bSJG\u30e9\u30fc\u30cb\u30f3\u30b0\u6559\u6750\u3067\u3059\u3002\u30d7\u30fc\u30eb\u30aa\u30da\u30ec\u30fc\u30b7\u30e7\u30f3\u306b\u304a\u3051\u308b\u57fa\u790e\u77e5\u8b58\u3092\u5171\u6709\u3057SPO\u306e\u30ec\u30d9\u30eb\u30a2\u30c3\u30d7\u3092\u56f3\u308a\u307e\u3059\u3002</p> <p>SPO\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u8b70\u4e8b\u9332\u306f\u3053\u3061\u3089</p>"},{"location":"learning/#1","title":"\u7b2c1\u56de \u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u3068\u30dd\u30fc\u30c8\u306e\u57fa\u790e\u77e5\u8b58","text":""},{"location":"learning/#2","title":"\u7b2c2\u56de \u30ab\u30eb\u30c0\u30ce\u30fb\u30d7\u30ed\u30c8\u30b3\u30eb\u30d1\u30e9\u30e1\u30fc\u30bf","text":""},{"location":"learning/#3","title":"\u7b2c3\u56de \u30d6\u30ed\u30c3\u30af\u30ed\u30b0\u30b5\u30fc\u30d3\u30b9\u306e\u95a2\u4fc2\u6027","text":""},{"location":"learning/#4","title":"\u7b2c4\u56de \u30ea\u30ec\u30fc\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30c8\u30dd\u30ed\u30b8\u30fc","text":""},{"location":"learning/#5","title":"\u7b2c5\u56de \u76e3\u8996\u30e1\u30c8\u30ea\u30af\u30b9","text":""},{"location":"learning/#6-cardano-cli","title":"\u7b2c6\u56de cardano-cli\u306e\u4f7f\u3044\u65b9","text":""},{"location":"learning/#7-p2p","title":"\u7b2c7\u56de \u30c0\u30a4\u30ca\u30df\u30c3\u30afP2P","text":""},{"location":"learning/#8","title":"\u7b2c8\u56de \u30ce\u30fc\u30c9\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0","text":""},{"location":"faq/blocklog/","title":"\u3088\u304f\u3042\u308b\u8cea\u554f\uff1a\u30d6\u30ed\u30c3\u30af\u30ed\u30b0\u95a2\u9023","text":""},{"location":"faq/blocklog/#q1","title":"Q1. \u30d6\u30ed\u30c3\u30af\u751f\u6210\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u539f\u56e0\u306f\u4f55\u3067\u3057\u3087\u3046\u304b\uff1f","text":"A. \u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u78ba\u8a8d\u3057\u307e\u3059 Stolen\u306e\u5834\u5408Ghosted\u306e\u5834\u5408Missed\u306e\u5834\u5408Invalid\u306e\u5834\u5408 <p>\u901a\u79f0\uff1a\u30b9\u30ed\u30c3\u30c8\u30d0\u30c8\u30eb\uff08SlotBattle / Stolen\uff09</p> <p>\u30b9\u30ed\u30c3\u30c8\u30d0\u30c8\u30eb\u3068\u306f\u3001\u8907\u6570\u306e\u30d7\u30fc\u30eb\u306b\u540c\u3058\u30b9\u30ed\u30c3\u30c8\u304c\u5272\u308a\u5f53\u3066\u3089\u308c\u305f\u6642\u306b\u767a\u751f\u3059\u308b\u73fe\u8c61\u3067\u3059\u3002 Cardano\u3067\u306f\u30011\u30b9\u30ed\u30c3\u30c8\u306b\u3064\u304d1\u30d6\u30ed\u30c3\u30af\u3057\u304b\u63a1\u7528\u3055\u308c\u306a\u3044\u305f\u3081\u3001\u3069\u306e\u30d7\u30fc\u30eb\u306e\u30d6\u30ed\u30c3\u30af\u304c\u9078\u3070\u308c\u308b\u304b\u3092VRF\u306e\u30e9\u30f3\u30c0\u30e0\u5024\u3067\u6c7a\u5b9a\u3057\u307e\u3059\u3002 \u5404\u30d7\u30fc\u30eb\u304c\u751f\u6210\u3059\u308bVRF\u5024\u3092\u6bd4\u8f03\u3057\u3001\u6700\u3082\u5024\u304c\u5c0f\u3055\u3044\u30d7\u30fc\u30eb\u306e\u30d6\u30ed\u30c3\u30af\u304c\u63a1\u7528\u3055\u308c\u307e\u3059\u3002 VRF\u306e\u6bd4\u8f03\u306f\u5b8c\u5168\u306b\u30e9\u30f3\u30c0\u30e0\u3067\u3042\u308b\u305f\u3081\u3001\u30b9\u30c6\u30fc\u30af\u91cf\u306b\u3088\u308b\u512a\u4f4d\u6027\u306f\u306a\u304f\u3001\u904b\u6b21\u7b2c\u3067\u7d50\u679c\u304c\u6c7a\u307e\u308a\u307e\u3059\u3002</p> <p>\u901a\u79f0\uff1a\u30cf\u30a4\u30c8\u30d0\u30c8\u30eb\uff08HeightBattle / Ghosted\uff09</p> <p>Ghosted\u306f\u3001\u4e3b\u306b\u6b21\u306e2\u3064\u306e\u7406\u7531\u3067\u767a\u751f\u3057\u307e\u3059\u3002  </p> \u539f\u56e01\uff1aVRF\u5024\u306b\u3088\u308b\u5224\u5b9a(\u904b\u8981\u7d20) <p>\u30d6\u30ed\u30c3\u30af\u4f1d\u64ad\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u5dee\u304c\u5f71\u97ff\u3057\u307e\u3059\u3002 Cardano\u3067\u306f\u300c\u30d6\u30ed\u30c3\u30af\u304c5\u79d2\u4ee5\u5185\u306b\u4f1d\u64ad\u3059\u308c\u3070\u5b89\u5168\u300d\u3068\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u30d6\u30ed\u30c3\u30af\u30b5\u30a4\u30ba\u3084\u30b9\u30af\u30ea\u30d7\u30c8\u30e1\u30e2\u30ea\u306e\u5897\u52a0\u306b\u4f34\u3044\u3001\u4f1d\u64ad\u901f\u5ea6\u304c\u9045\u304f\u306a\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002 \u305d\u306e\u7d50\u679c\u3001\u540c\u3058\u30b9\u30ed\u30c3\u30c8\u5468\u8fba\uff081~3\u79d2\u4ee5\u5185\uff09\u306b\u8907\u6570\u306e\u30d7\u30fc\u30eb\u306b\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u304c\u5272\u308a\u5f53\u3066\u3089\u308c\u308b\u3068\u3001\u4f1d\u64ad\u306e\u9045\u3044\u30d6\u30ed\u30c3\u30af\u304c\u4e0d\u5229\u306b\u306a\u308a\u3001VRF\u5024\u306e\u6bd4\u8f03\u306b\u3088\u3063\u3066\u3069\u306e\u30d6\u30ed\u30c3\u30af\u3092\u63a1\u7528\u3059\u308b\u304b\u304c\u6c7a\u5b9a\u3055\u308c\u307e\u3059\u3002 \u3053\u308c\u306f\u3001\u5730\u7406\u7684\u306a\u4f1d\u64ad\u901f\u5ea6\u306e\u5dee\u306b\u3088\u308b\u4e0d\u516c\u5e73\u3092\u907f\u3051\u308b\u305f\u3081\u306e\u4ed5\u7d44\u307f\u3067\u3059\u3002  </p> \u539f\u56e02\uff1a\u30b5\u30fc\u30d0\u30fc\u6642\u9593\u306e\u30ba\u30ec <p>Cardano\u306f\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u540c\u671f\u304c\u5fc5\u9808\u306e\u305f\u3081\u3001\u30b5\u30fc\u30d0\u30fc\u5185\u90e8\u6642\u8a08\u304cNTP\u30b5\u30fc\u30d0\u30fc\u3068\u6b63\u78ba\u306b\u540c\u671f\u3057\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 \u4e88\u5b9a\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3067\u9023\u7d9a\u3057\u3066Ghosted\u304c\u767a\u751f\u3059\u308b\u5834\u5408\u306f\u3001BP\u304a\u3088\u3073\u30ea\u30ec\u30fc\u306eChrony\u8a2d\u5b9a\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <pre><code>chronyc tracking\n</code></pre> <p>\u300cLeap status\u300d\u304c Normal\uff1a\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002 \u300cLeap status\u300d\u304c Not synchronized\uff1a\u554f\u984c\u304c\u3042\u308a\u307e\u3059\u3002</p> <p>\u78ba\u8a8d\u65b9\u6cd5 </p> <p>Missed\u3068\u306a\u3063\u305f\u30b9\u30ed\u30c3\u30c8\u756a\u53f7\u3092\u7528\u3044\u3066\u3001\u30ed\u30b0\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002  </p> <p>\u4f8b\uff1a<code>55901248</code>\u3092\u5b9f\u969b\u306eMissed\u306e\u30b9\u30ed\u30c3\u30c8\u756a\u53f7\u306b\u7f6e\u304d\u63db\u3048\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <pre><code>cd $NODE_HOME/logs\ncat node*.json | grep 55901248\n</code></pre> slotsMissed\u3068\u306f\uff1f <p>BP\u30ce\u30fc\u30c9\u306f\u6bce\u79d2\u3001\u30b9\u30ed\u30c3\u30c8\u30ea\u30fc\u30c0\u30fc\u304b\u3069\u3046\u304b\u3092\u78ba\u8a8d\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u30ce\u30fc\u30c9\u72b6\u614b\u3084\u30b5\u30fc\u30d0\u30fc\u8ca0\u8377\u306b\u3088\u308a\u30c1\u30a7\u30c3\u30af\u304c\u5931\u6557\u3059\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002 \u3053\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u304c\u91cd\u306a\u308b\u3068\u30d6\u30ed\u30c3\u30af\u751f\u6210\u3067\u304d\u305a<code>Missed</code>\u306b\u306a\u308a\u307e\u3059\u3002 \u73fe\u72b6\u3067\u306f\u3001\u30ce\u30fc\u30c9\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u306bRTS\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3067\u8efd\u6e1b\u53ef\u80fd\u3067\u3059\u3002 \u305f\u3060\u3057\u3001\u5951\u7d04\u30b5\u30fc\u30d0\u30fc\u306e\u5185\u90e8\u4ed5\u69d8\uff08CPU\u5272\u308a\u5f53\u3066\u306a\u3069\uff09\u306b\u3088\u3063\u3066\u3082\u767a\u751f\u7387\u304c\u5909\u308f\u308b\u305f\u3081\u3001<code>slotsMissed</code>\u304c\u591a\u3044\u5834\u5408\u306f\u30b5\u30fc\u30d0\u30fc\u4e57\u63db\u3048\u3082\u691c\u8a0e\u3057\u3066\u304f\u3060\u3055\u3044\u3002\uff08\u30b5\u30fc\u30d0\u30fc\u5185\u90e8\u4f7f\u7528\u306f\u30aa\u30da\u30ec\u30fc\u30bf\u30fc\u5074\u3067\u5909\u66f4\u3067\u304d\u307e\u305b\u3093\u3002\uff09</p> \u8a72\u5f53\u30b9\u30ed\u30c3\u30c8\u306e\u30ed\u30b0\u304c\u8868\u793a\u3055\u308c\u308b\u5834\u5408 <p>\u30d6\u30ed\u30c3\u30af\u4f1d\u64ad\u306e\u9045\u5ef6\u304c\u539f\u56e0\u306e\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002 1\u79d2\uff5e3\u79d2\u4ee5\u5185\u306b\u8907\u6570\u306e\u30d7\u30fc\u30eb\u3078\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u304c\u5272\u308a\u5f53\u3066\u3089\u308c\u308b\u3068\u3001\u81ea\u30d7\u30fc\u30eb\u306e\u30d6\u30ed\u30c3\u30af\u751f\u6210\u6642\u307e\u3067\u306b\u6700\u65b0\u30d6\u30ed\u30c3\u30af\u3092\u53d7\u4fe1\u3067\u304d\u305a <code>Missed</code>\u304c\u767a\u751f\u3057\u3084\u3059\u304f\u306a\u308a\u307e\u3059\u3002  </p> \u8a72\u5f53\u30b9\u30ed\u30c3\u30c8\u306e\u30ed\u30b0\u304c\u8868\u793a\u3055\u308c\u306a\u3044\u5834\u5408 <p>\u30ce\u30fc\u30c9\u304c\u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3\u3057\u3066\u3044\u305f\u304b\u3001<code>slotsMissed</code>\u304c\u767a\u751f\u3057\u3066\u3044\u305f\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002 \u30ea\u30ec\u30fc1\u53f0\u69cb\u6210\u306e\u5834\u5408\u3001\u305d\u306e\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u304c\u843d\u3061\u308b\u3068BP\u306f\u3001\u30d6\u30ed\u30c3\u30af\u3092\u751f\u6210\u3067\u304d\u307e\u305b\u3093\u3002 \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u304c\u7a3c\u50cd\u3057\u3066\u3044\u3066\u3082\u3001BP\u30ce\u30fc\u30c9\u304c\u505c\u6b62\u3057\u3066\u3044\u308c\u3070\u540c\u69d8\u306b\u751f\u6210\u4e0d\u53ef\u3068\u306a\u308a\u307e\u3059\u3002 Grafana\u306a\u3069\u3067\u30ce\u30fc\u30c9\u7a3c\u50cd\u72b6\u614b\u3092\u76e3\u8996\u3057\u3001\u505c\u6b62\u6642\u306b\u30b9\u30de\u30db\u3078\u901a\u77e5\u3055\u308c\u308b\u3088\u3046\u8a2d\u5b9a\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002 \u307e\u305f\u3001Missed\u3068\u306a\u3063\u305f\u30b9\u30ed\u30c3\u30c8\u306e\u524d\u5f8c\u300120~30\u30b9\u30ed\u30c3\u30c8\u3092\u691c\u7d22\u3057\u3066\u30ed\u30b0\u304c\u51fa\u3066\u304f\u308b\u5834\u5408\u306f\u3001\u30ce\u30fc\u30c9\u81ea\u4f53\u306f\u7a3c\u50cd\u3057\u3066\u3044\u305f\u53ef\u80fd\u6027\u304c\u9ad8\u3044\u3067\u3059\u3002</p> <p>\u78ba\u8a8d\u65b9\u6cd5</p> <p>KES\u66f4\u65b0\u3084\u904b\u7528\u8a3c\u660e\u66f8\uff08opcert\uff09\u306e\u767a\u884c\u306b\u5931\u6557\u3057\u3066\u3044\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u306e\u3067<code>logmonitor</code> \u306b\u8868\u793a\u3055\u308c\u308bbase64\u30b3\u30fc\u30c9\u3092\u30c7\u30b3\u30fc\u30c9\u3057\u3066\u3001\u539f\u56e0\u3092\u7279\u5b9a\u3057\u307e\u3059\u3002</p> <p>\u307e\u305a<code>logmonitor</code>\u306etmux\u30bb\u30c3\u30b7\u30e7\u30f3\u306b\u30a2\u30bf\u30c3\u30c1\u3057\u307e\u3059\u3002 <pre><code>tmux a -t logmonitor\n</code></pre></p> <p>\u30ed\u30b0\u30e2\u30cb\u30bf\u30fc\u306b\u8868\u793a\u3055\u308c\u3066\u3044\u308b<code>echo \uff5e | base64 -d | jq -r</code>\u307e\u3067\u306e\u30b3\u30de\u30f3\u30c9\u3092\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 \u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u306f\u4e00\u4f8b\u3067\u3059\u3002  </p> <p>echo eyJ0aHJlYWQiOiIxMzUiLCJzZXYiOiJFcnJvciIsImRhdGEiOnsidmFsIjp7ImtpbmQiOiJUcmFjZUZvcmdlZEludmFsaWRCbG9jayIsInNsb3QiOjQ5MTY1ODc5LCJyZWFzb24iOnsia2luZCI6IlZhbGlkYXRpb25FcnJvciIsImVycm9yIjp7ImtpbmQiOiJIZWFkZXJQcm90b2NvbEVycm9yIiwiZXJyb3IiOnsiZmFpbHVyZXMiOlt7Im9wQ2VydEV4cGVjdGVkS0VTRXZvbHV0aW9ucyI6IjI1Iiwia2luZCI6IkludmFsaWRLZXNTaWduYXR1cmVPQ0VSVCIsIm9wQ2VydEtFU1N0YXJ0UGVyaW9kIjoiMzU0Iiwib3BDZXJ0S0VTQ3VycmVudFBlcmlvZCI6IjM3OSIsImVycm9yIjoiUmVqZWN0In1dLCJraW5kIjoiQ2hhaW5UcmFuc2l0aW9uRXJyb3IifX19fSwiY3JlZGVudGlhbHMiOiJDYXJkYW5vIn0sImxvYyI6bnVsbCwiZW52IjoiMS4zMi4xOjRmNjVmIiwibXNnIjoiIiwiYXBwIjpbXSwiaG9zdCI6ImlwLTE3Mi0yIiwiYXQiOiIyMDIxLTEyLTI4VDIyOjU2OjEwLjQzWiIsIm5zIjpbImNhcmRhbm8ubm9kZS5Gb3JnZSJdLCJwaWQiOiIzODY1MzAifQ== | base64 -d | jq -r</p> <p><code>Ctrl+b d</code>\u3067tmux\u304b\u3089\u30c7\u30bf\u30c3\u30c1\u3057\u305f\u5f8c\u3001\u5148\u307b\u3069\u30b3\u30d4\u30fc\u3057\u305f\u30b3\u30de\u30f3\u30c9\u3092\u30b7\u30a7\u30eb\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002  </p> <p>\u51fa\u529b\u3055\u308c\u305fJSON\u306e<code>\"error\":\"failures\":\"kind\":</code>\u306a\u3069\u306e\u5024\u304c\u5931\u6557\u3057\u305f\u7406\u7531\u3092\u793a\u3057\u3066\u3044\u307e\u3059\u3002</p> <p><pre>{\n        \"thread\": \"135\",\n        \"sev\": \"Error\",\n        \"data\": {\n            \"val\": {\n            \"kind\": \"TraceForgedInvalidBlock\",\n            \"slot\": 49165879,\n            \"reason\": {\n                \"kind\": \"ValidationError\",\n                \"error\": {\n                \"kind\": \"HeaderProtocolError\",\n                \"error\": {\n                    \"failures\": [\n                    {\n                        \"opCertExpectedKESEvolutions\": \"25\",\n                        \"kind\": \"InvalidKesSignatureOCERT\",\n                        \"opCertKESStartPeriod\": \"354\",\n                        \"opCertKESCurrentPeriod\": \"379\",\n                        \"error\": \"Reject\"\n                    }\n                    ],\n                    \"kind\": \"ChainTransitionError\"\n                }\n                }\n            }\n            },\n            \"credentials\": \"Cardano\"\n        },\n        \"loc\": null,\n        \"env\": \"1.32.1:4f65f\",\n        \"msg\": \"\",\n        \"app\": [],\n        \"host\": \"ip-172-2\",\n        \"at\": \"2021-12-28T22:56:10.43Z\",\n        \"ns\": [\n            \"cardano.node.Forge\"\n        ],\n        \"pid\": \"386530\"\n    }</pre></p>"},{"location":"faq/blocklog/#q2-sns","title":"Q2. \u5272\u308a\u5f53\u3066\u3089\u308c\u305f\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3092SNS\u3067\u516c\u958b\u3057\u3066\u3082\u3044\u3044\u3067\u3059\u304b\uff1f","text":"A. NG\u3067\u3059 <p>\u672a\u6765\u306e\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3092\u516c\u958b\u3059\u308b\u3068\u3001\u305d\u306e\u6642\u9593\u3092\u72d9\u3063\u3066\u60aa\u610f\u306e\u3042\u308b\u653b\u6483\u3092\u53d7\u3051\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002 \u3053\u306e\u305f\u3081\u3001\u4e88\u5b9a\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3092\u516c\u958b\u3059\u308b\u884c\u70ba\u306fCardano\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3092\u640d\u306a\u3046\u91cd\u5927\u306a\u554f\u984c\u3068\u306a\u308b\u305f\u3081\u3001\u7d76\u5bfe\u306b\u516c\u958b\u3057\u3066\u306f\u3044\u3051\u307e\u305b\u3093\u3002</p>"},{"location":"faq/monitoring/","title":"\u3088\u304f\u3042\u308b\u8cea\u554f\uff1a\u30ce\u30fc\u30c9\u76e3\u8996\u95a2\u9023","text":""},{"location":"faq/monitoring/#q1-grafana","title":"Q1. Grafana\u306e\u30ed\u30b0\u30a4\u30f3\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5fd8\u308c\u307e\u3057\u305f","text":"A. \u30ed\u30b0\u30a4\u30f3\u306b\u5fc5\u8981\u306a\u60c5\u5831\u3092\u521d\u671f\u5316\u3057\u307e\u3059 <p>Grafana\u5c0e\u5165\u30b5\u30fc\u30d0\u30fc\u306b\u3066\u4ee5\u4e0b\u3092\u5b9f\u65bd\u3057\u307e\u3059\u3002 <pre><code>sudo sqlite3 /var/lib/grafana/grafana.db\n</code></pre></p> <pre><code>update user set password = '59acf18b94d7eb0694c61e60ce44c110c7a683ac6a8f09580d626f90f4a242000746579358d77dd9e570e83fa24faa88a8a6', salt = 'F3FAxVm33R' where login = 'admin';\n</code></pre> <p><pre><code>.quit\n</code></pre> \u5b9f\u884c\u5f8c\u3001\u4ee5\u4e0b\u306e\u60c5\u5831\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u518d\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>Username: <code>admin</code>  password: <code>admin</code></p>"},{"location":"faq/node/","title":"\u3088\u304f\u3042\u308b\u8cea\u554f\uff1a\u30ce\u30fc\u30c9\u95a2\u9023","text":""},{"location":"faq/node/#q1","title":"Q1. \u30ce\u30fc\u30c9\u304c\u8d77\u52d5\u30fb\u540c\u671f\u3057\u307e\u305b\u3093","text":"A. \u8d77\u52d5\u30ed\u30b0\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044 <p>\u30ce\u30fc\u30c9\u306e\u8d77\u52d5\u30ed\u30b0\u3092\u78ba\u8a8d\u3057\u3001\u30a8\u30e9\u30fc\u304c\u51fa\u3066\u3044\u306a\u3044\u304b\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002 <pre><code>journalctl --unit=cardano-node --follow\n</code></pre></p> <p>\u6ce8\u610f</p> <p>\u30ce\u30fc\u30c9\u304c\u5b8c\u5168\u540c\u671f\u3059\u308b\u524d\u306b\u3001\u8d77\u52d5\u30fb\u518d\u8d77\u52d5\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001DB\u306e\u518d\u30c1\u30a7\u30c3\u30af\u304c\u518d\u5ea6\u767a\u751f\u3057\u3001\u540c\u671f\u304c\u3055\u3089\u306b\u9045\u304f\u306a\u308a\u307e\u3059\u306e\u3067\u3054\u6ce8\u610f\u304f\u3060\u3055\u3044\u3002</p> \u300cInvalidYaml (Just (YamlParseException\u300d\u304c\u8868\u793a\u3055\u308c\u308b\u5834\u5408 <ul> <li><code>mainnet-config.json</code> \u306b\u69cb\u6587\u30a8\u30e9\u30fc\u304c\u3042\u308b\u305f\u3081\u30d5\u30a1\u30a4\u30eb\u5185\u5bb9\u3092\u898b\u76f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002 <p><code>,</code> <code>{}</code> <code>()</code>\u306a\u3069\u306e\u8a18\u53f7\u304c\u4e0d\u8db3\u3057\u3066\u3044\u305f\u308a\u3001\u4f59\u5206\u306b\u8a18\u8ff0\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002</p> </li> </ul> <p>\u4fee\u6b63\u5f8c\u3001\u30ce\u30fc\u30c9\u3092\u518d\u8d77\u52d5\u3057\u3066\u304f\u3060\u3055\u3044\u3002 <pre><code>sudo systemctl reload-or-restart cardano-node\n</code></pre></p> <p>JSON\u69cb\u6587\u30c1\u30a7\u30c3\u30af\u30c4\u30fc\u30eb\uff08\u30e9\u30c3\u30b3\u30c4\u30fc\u30eb\u30ba\uff09 \u203b \u3053\u306e\u30c4\u30fc\u30eb\u3092\u4f7f\u3046\u3068JSON\u306e\u69cb\u6587\u30a8\u30e9\u30fc\uff08\u4e0d\u8db3\u30fb\u904e\u5270\u306a\u8a18\u53f7\u306a\u3069\uff09\u3092\u30c1\u30a7\u30c3\u30af\u3067\u304d\u307e\u3059\u3002</p> \u300cIs your topology file formatted correctly?\u300d \u304c\u8868\u793a\u3055\u308c\u308b\u5834\u5408 <ul> <li><code>mainnet-topology.json</code> \u306b\u69cb\u6587\u30a8\u30e9\u30fc\u304c\u3042\u308b\u305f\u3081\u30d5\u30a1\u30a4\u30eb\u5185\u5bb9\u3092\u898b\u76f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> </ul> <p>\u4fee\u6b63\u5f8c\u3001\u30ce\u30fc\u30c9\u3092\u518d\u8d77\u52d5\u3057\u3066\u304f\u3060\u3055\u3044\u3002 <pre><code>sudo systemctl reload-or-restart cardano-node\n</code></pre></p> Progress: xx.xx%\u306e\u8868\u793a\u304c\u3042\u308b\u5834\u5408 <ul> <li>\u524d\u56de\u30ce\u30fc\u30c9\u304c\u30e1\u30e2\u30ea\u4e0d\u8db3\u306a\u3069\u3067\u5f37\u5236\u7d42\u4e86\u3057\u305f\u305f\u3081\u3001DB\u306e\u518d\u30c1\u30a7\u30c3\u30af\u304c\u884c\u308f\u308c\u3066\u3044\u307e\u3059\u3002 \u540c\u671f\u307e\u3067\u306b\u7d0420\u5206\u4ee5\u4e0a\u304b\u304b\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u306e\u3067\u3001\u305d\u306e\u307e\u307e\u304a\u5f85\u3061\u304f\u3060\u3055\u3044\u3002</li> </ul> BP\u304c\u540c\u671f\u3057\u306a\u3044\u5834\u5408 <p>\u30ea\u30ec\u30fc\u3068\u306e\u63a5\u7d9a\u72b6\u614b\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002  </p> <ul> <li>BP\u5074\u306e<code>mainnet-topology.json</code></li> <li>BP\u5074\u306e\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u8a2d\u5b9a</li> <li>\u30ea\u30ec\u30fc\u306e\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u8a2d\u5b9a</li> <li>\u5951\u7d04\u30b5\u30fc\u30d0\u30fc\u7279\u6709\u306e\u4ed5\u69d8\uff08\u901a\u4fe1\u5236\u9650\u306a\u3069\uff09</li> </ul>"},{"location":"faq/node/#q2","title":"Q2. \u30ce\u30fc\u30c9\u304c\u518d\u8d77\u52d5\u3092\u7e70\u308a\u8fd4\u3057\u307e\u3059","text":"A. \u30c7\u30a3\u30b9\u30af\u7a7a\u304d\u5bb9\u91cf\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044 <p><pre><code>df -h /usr\n</code></pre> \u623b\u308a\u5024\u306e<code>Use%</code>\u304c100%\u306b\u8fd1\u3044\u5834\u5408\u3001\u30ce\u30fc\u30c9\u306eDB\u3092\u66f4\u65b0\u3059\u308b\u305f\u3081\u306e\u7a7a\u304d\u5bb9\u91cf\u304c\u4e0d\u8db3\u3057\u3066\u304a\u308a\u3001\u30ce\u30fc\u30c9\u304c\u518d\u8d77\u52d5\u3092\u7e70\u308a\u8fd4\u3057\u307e\u3059\u3002 \u5951\u7d04\u4e2d\u306eVPS\u306e\u30b5\u30fc\u30d0\u30fc\u30b9\u30da\u30c3\u30af\u3092\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"midnight/","title":"Midnight\u30d0\u30ea\u30c7\u30fc\u30bf\u30fc\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u30de\u30cb\u30e5\u30a2\u30eb","text":"<p>\u672c\u30de\u30cb\u30e5\u30a2\u30eb\u306f\u3001Midnight \u30e1\u30a4\u30f3\u30cd\u30c3\u30c8\u74b0\u5883\u306b\u304a\u3051\u308b\u672c\u756a\u904b\u7528\u3092\u60f3\u5b9a\u3057\u3001 \u8981\u6c42\u3055\u308c\u308b\u9ad8\u6c34\u6e96\u306e\u30de\u30b7\u30f3\u30b9\u30da\u30c3\u30af\u304a\u3088\u3073\u5404\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u9593\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8981\u4ef6\u306b\u5bfe\u5fdc\u3059\u308b\u305f\u3081\u3001 Midnight \u30d0\u30ea\u30c7\u30fc\u30bf\u30fc\u5168\u4f53\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u69cb\u6210\u3092 systemd \u30d9\u30fc\u30b9\u3067\u8a2d\u8a08\u30fb\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002  </p>"},{"location":"midnight/#_1","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u672c\u30de\u30cb\u30e5\u30a2\u30eb\u3092\u5b9f\u65bd\u3059\u308b\u524d\u306b\u3001\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u74b0\u5883\u69cb\u7bc9\u3068Cardano Preview \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306b\u304a\u3044\u3066\u3001 Cardano \u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u306e\u69cb\u7bc9\u304b\u3089\u30d6\u30ed\u30c3\u30af\u751f\u6210\u307e\u3067\u306e\u4e00\u9023\u306e\u4f5c\u696d\u3092\u5b8c\u4e86\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u524d\u63d0\u3068\u3057\u307e\u3059\u3002</p> <ul> <li>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u74b0\u5883\u69cb\u7bc9</li> <li>\u30ab\u30eb\u30c0\u30ce\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u69cb\u7bc9\u30ac\u30a4\u30c9</li> <li>SPOKIT <p>SPOKIT \u306f\u3001\u30ce\u30fc\u30b3\u30de\u30f3\u30c9\u3067 Cardano \u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u306e\u69cb\u7bc9\u30fb\u7ba1\u7406\u3092\u884c\u3048\u308b Cardano SPO Tool Kit \u3067\u3059\u3002</p> </li> </ul> <p>\u30d2\u30f3\u30c8</p> <p>\u30d7\u30fc\u30eb\u69cb\u7bc9\u5f8c\u306f\u3001Preview tADA Faucet\u3092\u5229\u7528\u3057\u3066\u30d7\u30fc\u30eb\u59d4\u4efb\u3092\u884c\u3063\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u5bfe\u8c61\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5225\u306e\u5fc5\u8981\u30b5\u30fc\u30d0\u30fc\u53f0\u6570\u306f\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u3067\u3059\u3002  </p> <ul> <li>Preview\uff1a4 \u53f0  </li> <li>Mainnet\uff1a5 \u53f0</li> </ul>"},{"location":"midnight/#midnight_1","title":"Midnight\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5225\u306e\u74b0\u5883\u5bfe\u5fdc\u8868","text":"\u30cd\u30c3\u30c8\u30ef\u30fc\u30af \u30ce\u30fc\u30c9\u30d0\u30fc\u30b8\u30e7\u30f3 Ubuntu \u4f9d\u5b58\u95a2\u4fc2 testnet-02(\u73fe\u884c) node-0.12.0 22.04 glibc 2.35 midnight-preview(\u8fd1\u65e5\u79fb\u884c) node-0.18.0 24.04 glibc 2.39 <p>midnight-node <code>v0.12.0</code>\u306b\u3064\u3044\u3066</p> <p>midnight-node <code>v0.12.0</code>\u30d0\u30a4\u30ca\u30ea\u306f\u5358\u72ec\u516c\u958b\u3055\u308c\u3066\u304a\u3089\u305a\u3001\u72ec\u81ea\u306b<code>midnight-node-docker</code>\u304b\u3089\u62bd\u51fa\u3057\u305f\u3082\u306e\u3068\u306a\u308a\u307e\u3059\u3002  </p> <p>Midnight\u304b\u3089<code>Preview</code>\u3078\u306e\u79fb\u884c\u30a2\u30ca\u30a6\u30f3\u30b9\u304c\u3042\u308a\u6b21\u7b2c\u3001\u30ea\u30dd\u30b8\u30c8\u30ea\u516c\u958b\u4e2d\u306e <code>v0.18.0</code>\u3078\u79fb\u884c\u3057\u307e\u3059\u3002</p>"},{"location":"midnight/#_2","title":"\u63a8\u5968\u69cb\u6210","text":""},{"location":"midnight/#preview","title":"Preview","text":"<p>Cardano\u30ce\u30fc\u30c9\u7a3c\u50cd\u30b5\u30fc\u30d0\u30fc\uff1a</p> \u5f79\u5272 \u30b5\u30fc\u30d3\u30b9 CPU \u30e1\u30e2\u30ea \u30b9\u30c8\u30ec\u30fc\u30b8 \u5099\u8003 \u30d6\u30ed\u30c3\u30af\u751f\u6210\u30ce\u30fc\u30c9 cardano-node \u22654 vCPU \u22658 GB \u2265100 GB SSD \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9 cardano-node \u22654 vCPU \u22658 GB \u2265100 GB SSD <p>Cardano\u30a4\u30f3\u30c7\u30af\u30b5\u30fc\u30b5\u30fc\u30d0\u30fc\uff1a</p> \u5f79\u5272 \u30b5\u30fc\u30d3\u30b9 CPU \u30e1\u30e2\u30ea \u30b9\u30c8\u30ec\u30fc\u30b8 \u5099\u8003 DB\u57fa\u76e4 cardano-node + cardano-db-sync + PostgreSQL \u22654 vCPU \u226516 GB \u2265100 GB SSD Relay / Midnight BP \u3068\u540c\u4e00\u30ea\u30fc\u30b8\u30e7\u30f3 <p>Midnight\u30ce\u30fc\u30c9\u7a3c\u50cd\u30b5\u30fc\u30d0\u30fc\uff1a</p> \u5f79\u5272 \u30b5\u30fc\u30d3\u30b9 CPU \u30e1\u30e2\u30ea \u30b9\u30c8\u30ec\u30fc\u30b8 \u5099\u8003 Midnight \u30d6\u30ed\u30c3\u30af\u751f\u6210\u30ce\u30fc\u30c9 midnight-node \u22654 vCPU \u22658 GB \u2265100 GB SSD PostgreSQL \u3068\u540c\u4e00\u30ea\u30fc\u30b8\u30e7\u30f3 Mainnet(\u53c2\u8003) <p>Cardano\u30ce\u30fc\u30c9\u7a3c\u50cd\u30b5\u30fc\u30d0\u30fc\uff1a</p> \u5f79\u5272 \u30b5\u30fc\u30d3\u30b9 CPU \u30e1\u30e2\u30ea \u30b9\u30c8\u30ec\u30fc\u30b8 \u5099\u8003 \u30d6\u30ed\u30c3\u30af\u751f\u6210\u30ce\u30fc\u30c9 cardano-node \u22654 vCPU 32 GB 350 GB SSD \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9-1 cardano-node \u22654 vCPU 32 GB 350 GB SSD \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9-2 cardano-node \u22654 vCPU 32 GB 350 GB SSD \u5197\u9577\u7528 <p>Cardano\u30a4\u30f3\u30c7\u30af\u30b5\u30fc\u30b5\u30fc\u30d0\u30fc\uff1a</p> \u5f79\u5272 \u30b5\u30fc\u30d3\u30b9 CPU \u30e1\u30e2\u30ea \u30b9\u30c8\u30ec\u30fc\u30b8 IOPS \u5099\u8003 DB\u57fa\u76e4 cardano-node + cardano-db-sync + PostgreSQL 4\u301c8 vCPU \u226564 GB 1 TB NVMe SSD \u63a8\u5968\uff08\u6700\u4f4e 700 GB\uff09 \u226560k IOPS Relay / Midnight BP \u3068\u540c\u4e00\u30ea\u30fc\u30b8\u30e7\u30f3 <p>Midnight\u30ce\u30fc\u30c9\u7a3c\u50cd\u30b5\u30fc\u30d0\u30fc\uff1a</p> \u5f79\u5272 \u30b5\u30fc\u30d3\u30b9 CPU \u30e1\u30e2\u30ea \u30b9\u30c8\u30ec\u30fc\u30b8 \u5099\u8003 Midnight \u30d6\u30ed\u30c3\u30af\u751f\u6210\u30ce\u30fc\u30c9 midnight-node 4\u301c8 vCPU 32 GB 200\u301c500 GB SSD PostgreSQL \u3068\u540c\u4e00\u30ea\u30fc\u30b8\u30e7\u30f3"},{"location":"midnight/#_3","title":"\u30b7\u30b9\u30c6\u30e0\u5168\u4f53\u69cb\u6210\u56f3","text":"<pre><code>flowchart BT\n\n    %% =========================\n    %% Midnight Validator\n    %% =========================\n    subgraph mv[Midnight\u30d0\u30ea\u30c7\u30fc\u30bf\u30fc]\n        direction TB\n\n        subgraph idx[\u30a4\u30f3\u30c7\u30af\u30b5\u30fc\u30b5\u30fc\u30d0\u30fc]\n            cn[cardano-node]\n            dbs[cardano-db-sync]\n            pg[(PostgreSQL)]\n\n            %% Indexer internal (P2P / local)\n            cn &lt;--&gt; dbs\n            dbs &lt;--&gt; pg\n        end\n\n        subgraph mnbox[Midnight\u30b5\u30fc\u30d0\u30fc]\n            mn[midnight-node]\n        end\n\n        %% midnight-node reads indexed state\n        mn &lt;--&gt; pg\n    end\n\n\n    %% =========================\n    %% Stake Pool - Preview (Single Relay)\n    %% =========================\n    net[Cardano\u30cd\u30c3\u30c8\u30ef\u30fc\u30af]\n\n    subgraph pool[Cardano \u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb]\n        direction TB\n\n        %% Single Relay node\n        subgraph relay_box[\u30ea\u30ec\u30fc\u30b5\u30fc\u30d0\u30fc]\n            r1[\u30ea\u30ec\u30fc1]\n        end\n\n        %% Block Producer\n        subgraph bpgrp[\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b5\u30fc\u30d0\u30fc]\n            bp[\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30ce\u30fc\u30c9]\n        end\n\n        %% P2P inside pool\n        bp &lt;--&gt; r1\n    end\n\n    %% P2P to Cardano network\n    r1 &lt;--&gt; net\n\n\n    %% =========================\n    %% Operator PC\n    %% =========================\n    pc[PC\uff08SSH / \u30aa\u30f3\u30e9\u30a4\u30f3\uff09]\n\n    %% SSH access paths (operation only)\n    pc -.-&gt;|SSH| r1\n    pc -.-&gt;|SSH| bp\n    pc -.-&gt;|SSH| mn\n    pc -.-&gt;|SSH| cn\n\n\n    %% =========================\n    %% Air-gapped Offline Machine\n    %% =========================\n    ag[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\uff08\u30aa\u30d5\u30e9\u30a4\u30f3\uff09]\n\n    %% Physical offline transfer ONLY\n    pc -. \"\u7269\u7406\u30aa\u30d5\u30e9\u30a4\u30f3\u5a92\u4f53\uff08\u751f\u6210\u3055\u308c\u305f\u79d8\u5bc6\u9375\uff0f\u7f72\u540d\u6e08\u307f\u30d5\u30a1\u30a4\u30eb\u7b49\uff09\" .-&gt; ag</code></pre> Mainnet <pre><code>flowchart BT\n\n    %% =========================\n    %% Midnight Validator\n    %% =========================\n    subgraph mv[Midnight\u30d0\u30ea\u30c7\u30fc\u30bf\u30fc]\n        direction TB\n\n        subgraph idx[\u30a4\u30f3\u30c7\u30af\u30b5\u30fc\u30b5\u30fc\u30d0\u30fc]\n            cn[cardano-node]\n            dbs[cardano-db-sync]\n            pg[(PostgreSQL)]\n\n            %% Indexer internal (P2P / local)\n            cn &lt;--&gt; dbs\n            dbs &lt;--&gt; pg\n        end\n\n        subgraph mnbox[Midnight\u30b5\u30fc\u30d0\u30fc]\n            mn[midnight-node]\n        end\n\n        %% midnight-node reads indexed state\n        mn &lt;--&gt; pg\n    end\n\n\n    %% =========================\n    %% Stake Pool - Mainnet (Two Relays)\n    %% =========================\n    net[Cardano\u30cd\u30c3\u30c8\u30ef\u30fc\u30af]\n\n    subgraph pool[Cardano \u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb]\n        direction TB\n\n        %% Relay nodes\n        subgraph relay1_box[\u30ea\u30ec\u30fc\u30b5\u30fc\u30d0\u30fc]\n            r1[\u30ea\u30ec\u30fc1]\n        end\n\n        subgraph relay2_box[\u30ea\u30ec\u30fc\u30b5\u30fc\u30d0\u30fc]\n            r2[\u30ea\u30ec\u30fc2]\n        end\n\n        %% Block Producer\n        subgraph bpgrp[\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b5\u30fc\u30d0\u30fc]\n            bp[\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30ce\u30fc\u30c9]\n        end\n\n        %% P2P inside pool\n        bp &lt;--&gt; r1\n        bp &lt;--&gt; r2\n    end\n\n    %% P2P to Cardano network\n    r1 &lt;--&gt; net\n    r2 &lt;--&gt; net\n\n\n    %% =========================\n    %% Operator PC\n    %% =========================\n    pc[PC\uff08SSH / \u30aa\u30f3\u30e9\u30a4\u30f3\uff09]\n\n    %% SSH access paths (operation only)\n    pc -.-&gt;|SSH| r1\n    pc -.-&gt;|SSH| r2\n    pc -.-&gt;|SSH| bp\n    pc -.-&gt;|SSH| mn\n    pc -.-&gt;|SSH| cn\n\n\n    %% =========================\n    %% Air-gapped Offline Machine\n    %% =========================\n    ag[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\uff08\u30aa\u30d5\u30e9\u30a4\u30f3\uff09]\n\n    %% Physical offline transfer ONLY\n    pc -. \"\u7269\u7406\u30aa\u30d5\u30e9\u30a4\u30f3\u5a92\u4f53\uff08\u751f\u6210\u3055\u308c\u305f\u79d8\u5bc6\u9375\uff0f\u7f72\u540d\u6e08\u307f\u30d5\u30a1\u30a4\u30eb\u7b49\uff09\" .-&gt; ag</code></pre> <p>\u672c\u30de\u30cb\u30e5\u30a2\u30eb\u3067\u306f\u3001<code>Ogmios</code>\u306f\u30d1\u30fc\u30c8\u30ca\u30fc\u30c1\u30a7\u30fc\u30f3\u767b\u9332\u6642\u306e\u307f\u5fc5\u8981\u3068\u306a\u308b\u305f\u3081\u3001\u30ed\u30fc\u30ab\u30eb\u904b\u7528\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u306b\u306f\u542b\u3081\u305a\u30d1\u30d6\u30ea\u30c3\u30af\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002</p>"},{"location":"midnight/cardano-indexer-setup/","title":"Cardano\u30a4\u30f3\u30c7\u30af\u30b5\u30fc\u30b5\u30fc\u30d0\u30fc\u69cb\u7bc9","text":"<p>\u672c\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u3001Cardano\u30a4\u30f3\u30c7\u30af\u30b5\u30fc\u30b5\u30fc\u30d0\u30fc\uff08<code>cardano-node</code> \u3001 <code>cardano-db-sync</code> \u3001 <code>PostgreSQL</code>\uff09 \u3092\u69cb\u7bc9\u3059\u308b\u305f\u3081\u306e\u624b\u9806\u3067\u3059\u3002  </p>"},{"location":"midnight/cardano-indexer-setup/#_1","title":"\u4e8b\u524d\u6e96\u5099","text":"\u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u3067\u306e\u4e8b\u524d\u6e96\u5099 <p>SSH\u63a5\u7d9a\u3067\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u5834\u5408\u306f\u3001\u4e8b\u524d\u306b\u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u3067SSH\u8a8d\u8a3c\u30ad\u30fc\u3092\u4f5c\u6210\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> Windows\u306e\u5834\u5408Mac\u306e\u5834\u5408 <p>1. \u7ba1\u7406\u8005\u30e2\u30fc\u30c9\u3067\u30bf\u30fc\u30df\u30ca\u30eb\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002 </p> <p><code>Win + X</code> \u3092\u62bc\u4e0b\u3057\u3001\u30bf\u30fc\u30df\u30ca\u30eb\uff08\u7ba1\u7406\u8005\uff09\u3092\u9078\u629e\u3057\u3001SSH\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306e\u6709\u7121\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>Get-WindowsCapability -Online | Where-Object Name -like 'OpenSSH.Client*'\n</code></pre></p> <p><code>State : Installed</code>\u3067\u3042\u308c\u3070\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002</p> <code>State : NotPresent</code>\u306e\u5834\u5408 <p>\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u8ffd\u52a0\u3057\u3066\u304f\u3060\u3055\u3044\u3002 <pre><code>Add-WindowsCapability -Online -Name OpenSSH.Client~~~~0.0.1.0\n</code></pre></p> <p>2. SSH\u9375\u751f\u6210 <pre><code>mkdir ~/.ssh -Force\nssh-keygen -t ed25519 -N \"\" -C \"ssh_connect\" -f ~/.ssh/ssh_ed25519\n</code></pre></p> <p>3. \u516c\u958b\u9375\u30d5\u30a1\u30a4\u30eb\u540d\u306e\u5909\u66f4 <pre><code>cd ~/.ssh\nmv ssh_ed25519.pub authorized_keys\n</code></pre></p> <p>1. \u30bf\u30fc\u30df\u30ca\u30eb\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002 </p> <p><code>\u2318 + Space\uff08Command + Space\uff09</code>\u3092\u62bc\u4e0b\u3057\u3001\u300c<code>terminal</code>\u300d\u3068\u5165\u529b\u3057\u3001Enter\u3092\u62bc\u4e0b\u3057\u307e\u3059\u3002</p> <p>2. SSH\u9375\u751f\u6210 <pre><code>mkdir -p ~/.ssh\nssh-keygen -t ed25519 -N \"\" -C \"ssh_connect\" -f ~/.ssh/ssh_ed25519\n</code></pre></p> <p>3. \u516c\u958b\u9375\u30d5\u30a1\u30a4\u30eb\u540d\u306e\u5909\u66f4 <pre><code>cd ~/.ssh\nmv ssh_ed25519.pub authorized_keys\n</code></pre></p> <p>\u6ce8\u610f</p> <p>\u4ee5\u4e0b\u306e\u9375\u306f\u7d76\u5bfe\u306b\u7d1b\u5931\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044\u3002 \u7d1b\u5931\u3059\u308b\u3068\u30b5\u30fc\u30d0\u30fc\u3078\u63a5\u7d9a\u3067\u304d\u306a\u304f\u306a\u308a\u307e\u3059\u3002  </p> <p><code>ssh_ed25519</code> \uff08\u79d8\u5bc6\u9375\uff09 <code>authorized_keys</code> \uff08\u516c\u958b\u9375\uff09</p> <p>\u30b5\u30fc\u30d0\u30fc\u3067\u306e\u4e8b\u524d\u6e96\u5099</p> <p>\u65e5\u5e38\u904b\u7528\u3067\u306f<code>root</code>\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f7f\u7528\u305b\u305a\u3001sudo\u6a29\u9650\u3092\u4ed8\u4e0e\u3057\u305f\u4e00\u822c\u30e6\u30fc\u30b6\u30fc\u3067\u64cd\u4f5c\u3057\u307e\u3059\u3002</p> <p>\u65b0\u3057\u3044\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002  </p> <p>\u4efb\u610f\u306e\u30a2\u30eb\u30d5\u30a1\u30d9\u30c3\u30c8\u6587\u5b57\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002 \u3053\u306e\u4f8b\u3067\u306f<code>cardano</code> \u30e6\u30fc\u30b6\u30fc\u3068\u3057\u3066\u4ee5\u964d\u9032\u3081\u307e\u3059\u3002</p> <pre><code>adduser cardano\n</code></pre> <pre><code>New password:           # \u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\nRetype new password:    # \u78ba\u8a8d\u306e\u305f\u3081\u518d\u5165\u529b\n\nEnter the new value, or press ENTER for the default\n        Full Name []:   # \u30d5\u30eb\u30cd\u30fc\u30e0\u7b49\u306e\u60c5\u5831\u3092\u8a2d\u5b9a\uff08\u4e0d\u8981\u3067\u3042\u308c\u3070\u30d6\u30e9\u30f3\u30af\u3067\u3082\u554f\u984c\u3042\u308a\u307e\u305b\u3093\uff09\n        Room Number []:\n        Work Phone []:\n        Home Phone []:\n        Other []:\nIs the information correct? [Y/n] : y\n</code></pre> <p><code>cardano</code>\u306bsudo\u6a29\u9650\u3092\u4ed8\u4e0e\u3057\u307e\u3059\u3002 <pre><code>usermod -aG sudo cardano\n</code></pre></p> <p>root\u304b\u3089\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u307e\u3059\u3002 <pre><code>exit\n</code></pre></p> <p>\u30d2\u30f3\u30c8</p> <p>\u30bf\u30fc\u30df\u30ca\u30eb\u30bd\u30d5\u30c8\u306e\u63a5\u7d9a\u30e6\u30fc\u30b6\u30fc\u3092\u3001\u4e0a\u8a18\u3067\u4f5c\u6210\u3057\u305f\u30e6\u30fc\u30b6\u30fc\u540d\uff08<code>cardano</code>\uff09\u304a\u3088\u3073\u30d1\u30b9\u30ef\u30fc\u30c9\u306b\u5909\u66f4\u3057\u3066\u518d\u63a5\u7d9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"midnight/cardano-indexer-setup/#1-spokit","title":"1. SPOKIT\u5c0e\u5165\u8a2d\u5b9a","text":"<p>\u5f53\u30c4\u30fc\u30eb\u306fUbuntu\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a\u304b\u3089cardano-node\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306a\u3069\u3001\u30ce\u30fc\u30b3\u30de\u30f3\u30c9\u3067 Cardano \u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u306e\u69cb\u7bc9\u30fb\u7ba1\u7406\u3092\u884c\u3048\u308b Cardano SPO Tool Kit \u3067\u3059</p>"},{"location":"midnight/cardano-indexer-setup/#1-1","title":"1-1. \u521d\u671f\u8a2d\u5b9a","text":"<p>\u30d1\u30b9\u30ef\u30fc\u30c9\u5165\u529b\u306b\u3064\u3044\u3066</p> <p>\u7ba1\u7406\u8005\u6a29\u9650\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u6c42\u3081\u3089\u308c\u305f\u5834\u5408\u306f\u3001\u30e6\u30fc\u30b6\u30fc\u4f5c\u6210\u6642\u306b\u8a2d\u5b9a\u3057\u305f\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <ol> <li> <p><code>SPOKIT</code>\u3092\u5c0e\u5165\u3057\u3066\u521d\u671f\u8a2d\u5b9a\u304b\u3089\u30ce\u30fc\u30c9\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u307e\u3067\u884c\u3044\u307e\u3059\u3002 <pre><code>wget -qO- https://spokit.spojapanguild.net/install.sh | bash\n</code></pre></p> <p>\u30ad\u30fc\u30dc\u30fc\u30c9\u306e<code>\u2191</code>\u3068<code>\u2193</code>\u3001<code>\u2190</code>\u3068<code>\u2192</code>\u3067\u30ab\u30fc\u30bd\u30eb\u3092\u79fb\u52d5\u3067\u304d\u307e\u3059\u3002</p> </li> <li> <p>\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9\u30bf\u30a4\u30d7\u3067\u306f\u300c<code>\u30ea\u30ec\u30fc</code>\u300d\u3092\u9078\u629e\u3057\u3066 Enter </p> </li> <li> <p>\u63a5\u7d9a\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3067\u306f\u300c<code>Preview-Testnet</code>\u300d\u3092\u9078\u629e\u3057\u3066 Enter </p> </li> <li> <p>\u4f5c\u696d\u30c7\u30a3\u30ec\u30af\u30c8\u30eaPATH\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3092\u6307\u5b9a\u3059\u308b\u306e\u3067\u305d\u306e\u307e\u307e Enter</p> </li> <li> <p>\u300c<code>\u306f\u3044</code>\u300d\u3092\u9078\u629e\u3057\u3001 Enter</p> </li> <li> <p>\u300c<code>source</code>\u300d\u30b3\u30de\u30f3\u30c9\u3092\u5fc5\u305a\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002 </p> </li> </ol>"},{"location":"midnight/cardano-indexer-setup/#1-2-ubuntu","title":"1-2. Ubuntu\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a","text":"<p>Ubuntu\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a\u30e2\u30fc\u30c9\u306b\u3064\u3044\u3066</p> <p>\u3053\u306e\u30e2\u30fc\u30c9\u3067\u306f\u3001Cardano\u30ce\u30fc\u30c9\u5b9f\u884c\u306b\u63a8\u5968\u3055\u308c\u308bUbuntu\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002  </p> <ol> <li>\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002 \u5b9f\u884c\u30b3\u30de\u30f3\u30c9<pre><code>spokit ubuntu\n</code></pre> <p>\u300c<code>Enter...</code>\u300d\u3068\u8868\u793a\u3055\u308c\u305f\u3089 Enter \u30ad\u30fc\u3092\u62bc\u4e0b\u3057\u3001\u4ee5\u964d\u306f\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u6307\u793a\u306b\u5f93\u3063\u3066\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002 \u30c7\u30d5\u30a9\u30eb\u30c8\u306f\u300c<code>\u306f\u3044</code>\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002  </p> </li> </ol>"},{"location":"midnight/cardano-indexer-setup/#1-3","title":"1-3. \u30ce\u30fc\u30c9\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<ol> <li> <p>\u30d7\u30fc\u30eb\u69cb\u7bc9\u3059\u308b\u305f\u3081\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002 \u5b9f\u884c\u30b3\u30de\u30f3\u30c9<pre><code>spokit pool\n</code></pre></p> </li> <li> <p>\u300c<code>\u30ce\u30fc\u30c9\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb</code>\u300d\u3092\u9078\u629e\u3057\u3066 Enter </p> </li> <li> <p>\u4ee5\u964d\u306f\u30ce\u30fc\u30c9\u306e\u30dd\u30fc\u30c8\u756a\u53f7\u8a2d\u5b9a\u307e\u3067\u9032\u3081\u3001\u6dfb\u4ed8\u753b\u50cf\u306e\u3088\u3046\u306b\u3001\u6700\u7d42\u884c\u306b \u300c<code>&gt; \u623b\u308b</code>\u300d \u304c\u8868\u793a\u3055\u308c\u308b\u72b6\u614b\u306b\u306a\u308b\u307e\u3067\u5f85\u6a5f\u3057\u307e\u3059\u3002 </p> </li> <li> <p>\u300c<code>&gt; \u623b\u308b</code>\u300d\u304c\u8868\u793a\u3055\u308c\u305f\u3089 Enter \u3092\u62bc\u4e0b\u5f8c\u3001\u300c<code>[q] \u7d42\u4e86</code>\u300d\u3092\u9078\u629e\u3057\u3001SPOKIT\u30a6\u30a3\u30b6\u30fc\u30c9\u3092\u9589\u3058\u307e\u3059\u3002  </p> </li> <li> <p>\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3001Cardano \u30ce\u30fc\u30c9\u306e\u8d77\u52d5\u72b6\u614b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>glive\n</code></pre> </p> <p>gLive \u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308c\u3070\u3001\u30ce\u30fc\u30c9\u306f\u6b63\u5e38\u306b\u8d77\u52d5\u3057\u3066\u3044\u307e\u3059\u3002 preview.cardanoscan\u306a\u3069\u306e\u30a8\u30af\u30b9\u30d7\u30ed\u30fc\u30e9\u30fc\u3067\u30a8\u30dd\u30c3\u30af\u3084\u30b9\u30ed\u30c3\u30c8\u3092\u78ba\u8a8d\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002</p> </li> </ol> <p>\u30d2\u30f3\u30c8</p> <p>glive\u3092\u9589\u3058\u305f\u3089\u30d6\u30e9\u30b1\u30c3\u30c8\u30e2\u30fc\u30c9\u7121\u52b9\u5316\u3092\u53cd\u6620\u3055\u305b\u308b\u305f\u3081\u306b\u4e00\u5ea6\u30bf\u30fc\u30df\u30ca\u30eb\u3092\u9589\u3058\u3066\u3001\u305d\u306e\u5f8c\u518d\u63a5\u7d9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <pre><code>exit\n</code></pre>"},{"location":"midnight/cardano-indexer-setup/#2-postgresql","title":"2. PostgreSQL\u306e\u8a2d\u5b9a","text":""},{"location":"midnight/cardano-indexer-setup/#2-1-postgresql","title":"2-1. PostgreSQL\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>PostgreSQL 17 \u3092\u4f7f\u7528\u3057\u307e\u3059\u3002 \u9806\u306b\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p><pre><code>sudo apt update\n</code></pre> <pre><code>sudo apt install -y curl ca-certificates\n</code></pre> <pre><code>sudo install -d /usr/share/postgresql-common/pgdg\n</code></pre> <pre><code>sudo curl -s -o /usr/share/postgresql-common/pgdg/apt.postgresql.org.asc --fail https://www.postgresql.org/media/keys/ACCC4CF8.asc\n</code></pre> <pre><code>sudo sh -c 'echo \"deb [signed-by=/usr/share/postgresql-common/pgdg/apt.postgresql.org.asc] \\\n  https://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main\" \\\n  &gt; /etc/apt/sources.list.d/pgdg.list'\n</code></pre> <pre><code>sudo apt update\n</code></pre> <pre><code>sudo apt -y install postgresql-17 postgresql-server-dev-17 postgresql-contrib libghc-hdbc-postgresql-dev\n</code></pre></p> <p>\u4f9d\u5b58\u95a2\u4fc2\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb</p> <pre><code>sudo apt install git jq bc automake tmux nano rsync htop curl build-essential pkg-config libffi-dev libgmp-dev libssl-dev libtinfo-dev libsystemd-dev zlib1g-dev make g++ wget libncursesw5 libtool autoconf liblmdb-dev openssl prometheus-node-exporter -y\n</code></pre>"},{"location":"midnight/cardano-indexer-setup/#2-2-postgresql","title":"2-2. PostgreSQL \u521d\u671f\u8a2d\u5b9a","text":"<p>\u63a5\u7d9a\u7528<code>.pgpass.restore</code>\u3068<code>.pgpass</code>\u306e\u4f5c\u6210 <pre><code>DBSYNC_USER=\"$(whoami)\"\nDBSYNC_PASS=\"$(uuidgen | tr -d '-' | head -c 16)\"\n\ncat &lt;&lt;EOF &gt; \"$HOME/.pgpass.restore\"\n/var/run/postgresql:5432:cexplorer:*:*\nEOF\n\nchmod 600 \"$HOME/.pgpass.restore\"\n</code></pre> <pre><code>DBSYNC_HOST=\"$(curl -s https://api.ipify.org)\"\n\ncat &lt;&lt;EOF &gt; \"$HOME/.pgpass\"\n${DBSYNC_HOST}:5432:cexplorer:${DBSYNC_USER}:${DBSYNC_PASS}\nEOF\n\nchmod 600 \"$HOME/.pgpass\"\n</code></pre></p> <p><code>.pgpass</code>\u3068<code>.pgpass.restore</code>\u30d5\u30a1\u30a4\u30eb\u306b\u3064\u3044\u3066</p> <p>postgreSQL\u306b\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306e\u30e6\u30fc\u30b6\u30fcID\u3068\u30e9\u30f3\u30c0\u30e0\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u8a18\u8f09\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u306e\u305f\u3081\u3001\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u63a8\u5968\u3057\u307e\u3059\u3002</p> <p>PostgreSQL\u7528\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f5c\u6210 <pre><code>sudo -u postgres psql -c \"CREATE ROLE \\\"${DBSYNC_USER}\\\" LOGIN SUPERUSER PASSWORD '${DBSYNC_PASS}';\"\n</code></pre> \u623b\u308a\u5024<pre><code>CREATE ROLE\n</code></pre></p> <p>db-sync\u7528\u30c6\u30fc\u30d6\u30eb\u4f5c\u6210 <pre><code>sudo -u postgres psql -d postgres -c \"CREATE DATABASE cexplorer;\"\n</code></pre> \u623b\u308a\u5024<pre><code>CREATE DATABASE\n</code></pre></p> <p>SSL\u4f5c\u6210</p> <p>SSL/TLS \u901a\u4fe1\u306b\u3064\u3044\u3066</p> <p>PostgreSQL \u3092\u5916\u90e8\u30b5\u30fc\u30d0\u30fc\u3067\u5229\u7528\u3059\u308b\u5834\u5408\u3001SSL/TLS \u901a\u4fe1\u304c\u5fc5\u9808\u3067\u3059\u3002</p> <p>\u30b5\u30fc\u30d0\u30fc\u8a3c\u660e\u66f8\u4f5c\u6210 <pre><code>cd $HOME\nopenssl req -new -x509 -days 3650 -nodes -keyout server.key -out server.crt -subj \"/CN=postgresql\"\n</code></pre></p> <p>\u6a29\u9650\u30fb\u30d1\u30b9\u518d\u914d\u7f6e <pre><code>sudo mkdir -p /etc/postgresql/ssl\n</code></pre> <pre><code>sudo mv server.key server.crt /etc/postgresql/ssl/\n</code></pre> <pre><code>sudo chown postgres:postgres /etc/postgresql/ssl/server.key /etc/postgresql/ssl/server.crt\n</code></pre> <pre><code>sudo chmod 600 /etc/postgresql/ssl/server.key\n</code></pre> <pre><code>sudo chmod 644 /etc/postgresql/ssl/server.crt\n</code></pre></p> <p>postgresql\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u8a2d\u5b9a</p> <p>\u8a2d\u5b9a\u6982\u8981</p> <ul> <li>cardano-db-sync / Midnight-node \u5c02\u7528\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0</li> </ul> <pre><code>sudo sed -i /etc/postgresql/17/main/postgresql.conf \\\n    -e \"s|ssl_cert_file = '.*'|ssl_cert_file = '/etc/postgresql/ssl/server.crt'|\" \\\n    -e \"s|ssl_key_file = '.*'|ssl_key_file  = '/etc/postgresql/ssl/server.key'|\" \\\n    -e \"s/^#\\?listen_addresses *= *.*/listen_addresses = '*'/\" \\\n    -e \"s|^#\\?[[:space:]]*synchronous_commit[[:space:]]*=.*|synchronous_commit = off|\" \\\n    -e 's!shared_buffers = 128MB!shared_buffers = 2GB!' \\\n    -e 's!#effective_cache_size = 4GB!effective_cache_size = 8GB!' \\\n    -e 's!#work_mem = 4MB!work_mem = 16MB!' \\\n    -e 's!#maintenance_work_mem = 64MB!maintenance_work_mem = 512MB!' \\\n    -e 's!max_wal_size = 1GB!max_wal_size = 4GB!' \\\n    -e 's!min_wal_size = 80MB!min_wal_size = 1GB!'\n</code></pre> <p>postgresql\u518d\u8d77\u52d5 <pre><code>sudo systemctl restart postgresql\n</code></pre></p> <p>\u8a2d\u5b9a\u5024\u78ba\u8a8d <pre><code>sudo -u postgres psql -tAc \"SHOW config_file; SHOW listen_addresses; SHOW synchronous_commit; SHOW shared_buffers;\"\n</code></pre> \u623b\u308a\u5024<pre><code>/etc/postgresql/17/main/postgresql.conf\n*\noff\n2GB\n</code></pre></p>"},{"location":"midnight/cardano-indexer-setup/#3-cardano-db-sync","title":"3. cardano-db-sync\u306e\u8a2d\u5b9a","text":""},{"location":"midnight/cardano-indexer-setup/#3-1","title":"3-1. \u4f9d\u5b58\u95a2\u4fc2\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>TMUX\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u5c55\u958b <pre><code>tmux new -s build\n</code></pre></p>"},{"location":"midnight/cardano-indexer-setup/#libsodium","title":"libsodium\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>\u30ea\u30d3\u30b8\u30e7\u30f3\u306e\u53d6\u5f97 <pre><code>REV=$(curl -sL https://github.com/input-output-hk/iohk-nix/releases/latest/download/INFO \\\n  | awk '$1 == \"debian.libsodium-vrf.deb\" { rev = gensub(/.*-(.*)\\.deb/, \"\\\\1\", \"g\", $2); print rev }')\necho $REV\n</code></pre></p> <p>\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9 <pre><code>cd $HOME/git\ngit clone https://github.com/IntersectMBO/libsodium\ncd libsodium\ngit checkout $REV\n</code></pre></p> <p>\u30d3\u30eb\u30c9 <pre><code>./autogen.sh\nsleep 1\n./configure\nmake\nmake check\nsudo make install\n</code></pre></p>"},{"location":"midnight/cardano-indexer-setup/#secp256k1","title":"Secp256k1\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>\u30ea\u30d3\u30b8\u30e7\u30f3\u306e\u53d6\u5f97 <pre><code>REV=$(curl -L https://github.com/input-output-hk/iohk-nix/releases/latest/download/INFO \\\n  | awk '$1 == \"debian.libsecp256k1.deb\" { rev = gensub(/.*-(.*)\\.deb/, \"\\\\1\", \"g\", $2); print rev }')\necho $REV\n</code></pre></p> <p>\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9 <pre><code>cd $HOME/git\ngit clone https://github.com/bitcoin-core/secp256k1\ncd secp256k1\ngit checkout $REV\n</code></pre></p> <p>\u30d3\u30eb\u30c9 <pre><code>./autogen.sh\nsleep 1\n./configure --enable-module-schnorrsig --enable-experimental\nmake\nmake check\nsudo make install\n</code></pre></p> <p>\u52d5\u7684\u30ea\u30f3\u30ab\u8a2d\u5b9a <pre><code>echo \"/usr/local/lib\" | sudo tee /etc/ld.so.conf.d/local-lib.conf\nsudo ldconfig\n</code></pre> \u78ba\u8a8d <pre><code>ldconfig -p | grep libsecp256k1\n</code></pre> \u623b\u308a\u5024<pre><code>libsecp256k1.so.2 (libc6,x86-64) =&gt; /usr/local/lib/libsecp256k1.so.2\nlibsecp256k1.so (libc6,x86-64) =&gt; /usr/local/lib/libsecp256k1.so\n</code></pre></p>"},{"location":"midnight/cardano-indexer-setup/#blst","title":"blst\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>\u30ea\u30d3\u30b8\u30e7\u30f3\u306e\u53d6\u5f97 <pre><code>REV=$(curl -L https://github.com/input-output-hk/iohk-nix/releases/latest/download/INFO \\\n  | awk '$1 == \"debian.libblst.deb\" { rev = gensub(/.*-(.*)\\.deb/, \"\\\\1\", \"g\", $2); print rev }')\necho $REV\n</code></pre></p> <p>\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9 <pre><code>cd $HOME/git\ngit clone https://github.com/supranational/blst\ncd blst\ngit checkout v$REV\n</code></pre></p> <p>\u30d3\u30eb\u30c9 <pre><code>./build.sh\n</code></pre></p> <p>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb <pre><code>cat &gt; libblst.pc &lt;&lt; EOF\nprefix=/usr/local\nexec_prefix=\\${prefix}\nlibdir=\\${exec_prefix}/lib\nincludedir=\\${prefix}/include\n\nName: libblst\nDescription: Multilingual BLS12-381 signature library\nURL: https://github.com/supranational/blst\nVersion: 0.3.10\nCflags: -I\\${includedir}\nLibs: -L\\${libdir} -lblst\nEOF\n</code></pre> <pre><code>sudo cp libblst.pc /usr/local/lib/pkgconfig/\n</code></pre> <pre><code>sudo cp bindings/blst_aux.h bindings/blst.h bindings/blst.hpp  /usr/local/include/\n</code></pre> <pre><code>sudo cp libblst.a /usr/local/lib\n</code></pre> <pre><code>sudo chmod u=rw,go=r /usr/local/{lib/{libblst.a,pkgconfig/libblst.pc},include/{blst.{h,hpp},blst_aux.h}}\n</code></pre></p>"},{"location":"midnight/cardano-indexer-setup/#ghcup","title":"GHCUP\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5909\u6570\u8a2d\u5b9a <pre><code>cd $HOME\nexport BOOTSTRAP_HASKELL_GHC_VERSION=9.6.7\nexport BOOTSTRAP_HASKELL_CABAL_VERSION=3.12.1.0\nexport BOOTSTRAP_HASKELL_NO_UPGRADE=1\nexport BOOTSTRAP_HASKELL_NONINTERACTIVE=1\nexport BOOTSTRAP_HASKELL_INSTALL_STACK=1\nexport BOOTSTRAP_HASKELL_ADJUST_BASHRC=1\nunset BOOTSTRAP_HASKELL_INSTALL_HLS\n</code></pre></p> <p>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb <pre><code>curl --proto '=https' --tlsv1.2 -sSf https://get-ghcup.haskell.org | bash\n</code></pre></p> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>source ~/.bashrc\ncabal update\ncabal --version\nghc --version\n</code></pre> \u623b\u308a\u5024<pre><code>$ cabal --version\ncabal-install version 3.12.1.0\ncompiled using version 3.12.1.0 of the Cabal library \n\n$ ghc --version\nThe Glorious Glasgow Haskell Compilation System, version 9.6.7\n</code></pre></p>"},{"location":"midnight/cardano-indexer-setup/#3-2-db-sync","title":"3-2. db-sync\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb <pre><code>cd ~/git\ngit clone https://github.com/intersectmbo/cardano-db-sync\ncd cardano-db-sync\n</code></pre></p> <p>\u6700\u65b0\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u9069\u7528 <pre><code>git fetch --tags --all\ngit checkout tags/13.6.0.5\n</code></pre></p> <p>\u30d3\u30eb\u30c9GHC\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u660e\u793a <pre><code>grep -q '^with-compiler:' cabal.project.local 2&gt;/dev/null \\\n  || echo 'with-compiler: ghc-9.6.7' &gt;&gt; cabal.project.local\n</code></pre></p> <p>\u30d3\u30eb\u30c9 <pre><code>cabal update\ncabal build all\n</code></pre></p> <p>db-sync \u30d0\u30a4\u30ca\u30ea\u30fc\u30d5\u30a1\u30a4\u30eb\u30b3\u30d4\u30fc <pre><code>mkdir -p ~/.local/bin\ncp -p \\\n  \"$(find . -name cardano-db-sync -executable -type f)\" \\\n  ~/.local/bin/\n</code></pre></p> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>cardano-db-sync --version\n</code></pre> \u623b\u308a\u5024<pre><code>cardano-db-sync 13.6.0.5 - linux-x86_64 - ghc-9.6  \ngit revision cb61094c82254464fc9de777225e04d154d9c782\n</code></pre></p>"},{"location":"midnight/cardano-indexer-setup/#3-3","title":"3-3. \u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9","text":"<p>cardano-db-sync\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u8a73\u7d30</p> <ul> <li>\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\uff1aPreview</li> <li>\u30a8\u30dd\u30c3\u30af\uff1a1165</li> <li>\u30d6\u30ed\u30c3\u30af\u9ad8\uff1a3910501</li> <li>DL\u30b5\u30a4\u30ba\uff1a\u7d04 3.58 GB</li> </ul> <pre><code>cd $NODE_HOME\ncurl -LO https://spojapanguild.net/db-sync/${NODE_CONFIG}/db-sync-snapshot-schema-13.6-block-3910501-x86_64.tgz\n</code></pre> <p>\u30c1\u30a7\u30c3\u30af\u30b5\u30e0\u30d5\u30a1\u30a4\u30eb\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9 <pre><code>curl -LO https://spojapanguild.net/db-sync/${NODE_CONFIG}/db-sync-snapshot-schema-13.6-block-3910501-x86_64.tgz.sha256sum\n</code></pre></p> <p>\u30d5\u30a1\u30a4\u30eb\u691c\u8a3c <pre><code>sha256sum -c db-sync-snapshot-schema-13.6-block-3910501-x86_64.tgz.sha256sum\n</code></pre> \u623b\u308a\u5024<pre><code>db-sync-snapshot-schema-13.6-block-3910501-x86_64.tgz: OK\n</code></pre></p> <p>\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u5fa9\u5143 <pre><code>mkdir -p $NODE_HOME/ledger-state\ncd ~/git/cardano-db-sync\nPGPASSFILE=$HOME/.pgpass.restore scripts/postgresql-setup.sh --restore-snapshot $NODE_HOME/db-sync-snapshot-schema-13.6-block-3910501-x86_64.tgz $NODE_HOME/ledger-state\n</code></pre> \u623b\u308a\u5024<pre><code>db/4135.dat.gz\n100700514-355a474701.lstate.gz\nAll good!\n</code></pre></p> <p>\u5fa9\u5143\u306b\u306f \u6570\u5341\u5206\u7a0b\u5ea6\u304b\u304b\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002</p> <p>TMUX\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u9589\u3058\u307e\u3059\u3002 <pre><code>exit\n</code></pre></p>"},{"location":"midnight/cardano-indexer-setup/#3-4-db-sync","title":"3-4. db-sync\u74b0\u5883\u8a2d\u5b9a","text":"<p>Schema\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u4f5c\u6210 <pre><code>ln -s ~/git/cardano-db-sync/schema $NODE_HOME\n</code></pre></p> <p>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9 <pre><code>cd $NODE_HOME\nwget -q https://book.world.dev.cardano.org/environments/${NODE_CONFIG}/db-sync-config.json -O ${NODE_CONFIG}-db-sync-config.json\n</code></pre></p> <p>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u4fee\u6b63 <pre><code>sed -i $NODE_HOME/${NODE_CONFIG}-db-sync-config.json \\\n    -e 's!\"NodeConfigFile\": \"config.json\"!\"NodeConfigFile\": \"'${NODE_CONFIG}'-config.json\"!'\n</code></pre></p> <p>\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u4f5c\u6210 <pre><code>cat &gt; $NODE_HOME/startDbSync.sh &lt;&lt; EOF \n#!/bin/bash\nPGPASSFILE=$HOME/.pgpass.restore\nexport PGPASSFILE\n$HOME/.local/bin/cardano-db-sync \\\\\n--config $NODE_HOME/${NODE_CONFIG}-db-sync-config.json \\\\\n--socket-path $NODE_HOME/db/socket \\\\\n--state-dir $NODE_HOME/ledger-state \\\\\n--schema-dir $NODE_HOME/schema/\nEOF\n</code></pre></p> <p>\u6a29\u9650\u8a2d\u5b9a <pre><code>chmod 755 $NODE_HOME/startDbSync.sh\n</code></pre></p> <p>db-sync\u3000systemd\u30b5\u30fc\u30d3\u30b9\u5316 (\u4efb\u610f)</p> \u5168\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/cardano-db-sync.service &lt;&lt; EOF \n[Unit]\nDescription=Cardano DB Sync\nAfter=network.target postgresql.service\n\n[Service]\nType=simple\nUser=${USER}\nWorkingDirectory=${NODE_HOME}\nExecStart=/bin/bash -l -c \"exec ${NODE_HOME}/startDbSync.sh\"\nKillSignal=SIGINT\nRestartKillSignal=SIGINT\nTimeoutStopSec=300\nLimitNOFILE=32768\nRestart=always\nRestartSec=5\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=db-sync\n\n[Install]\nWantedBy=multi-user.target\nEOF\n</code></pre> <p><pre><code>sudo cp $NODE_HOME/cardano-db-sync.service /etc/systemd/system/cardano-db-sync.service\n</code></pre> <pre><code>sudo chmod 644 /etc/systemd/system/cardano-db-sync.service\n</code></pre></p> <p>systemd\u6709\u52b9\u5316 <pre><code>sudo systemctl daemon-reload &amp;&amp; sudo systemctl enable --now cardano-db-sync\n</code></pre></p>"},{"location":"midnight/cardano-indexer-setup/#3-5","title":"3-5. \u52d5\u4f5c\u78ba\u8a8d","text":"<p><pre><code>sudo systemctl status cardano-db-sync --no-pager\n</code></pre> \u623b\u308a\u5024<pre><code>\u25cf cardano-db-sync.service - Cardano DB Sync\n     Loaded: loaded (/etc/systemd/system/cardano-db-sync.service; enabled; vendor preset: enabled)\n     Active: active (running) since Tue 2026-01-13 14:06:17 CET; 20s ago\n   Main PID: 203020 (startDbSync.sh)\n      Tasks: 16 (limit: 9386)\n     Memory: 713.7M\n        CPU: 8.336s\n</code></pre></p> <p><code>Active: active</code>\u3067\u3042\u308b\u3053\u3068</p> <p>\u30c1\u30a7\u30fc\u30f3\u540c\u671f\u78ba\u8a8d \u30dc\u30c3\u30af\u30b9\u5185\u306e\u30b3\u30d4\u30fc\u30dc\u30bf\u30f3\u3067\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>sudo -u postgres psql -d cexplorer -c \"\nSELECT 100 * (\n  EXTRACT(EPOCH FROM (MAX(time) AT TIME ZONE 'UTC')) -\n  EXTRACT(EPOCH FROM (MIN(time) AT TIME ZONE 'UTC'))\n) / (\n  EXTRACT(EPOCH FROM (NOW() AT TIME ZONE 'UTC')) -\n  EXTRACT(EPOCH FROM (MIN(time) AT TIME ZONE 'UTC'))\n) AS sync_percent\nFROM public.block;\n\"\n</code></pre></p> <p>db-sync\u304c\u540c\u671f\u3059\u308b\u307e\u3067\u304a\u5f85\u3061\u4e0b\u3055\u3044 \u623b\u308a\u5024<pre><code>    sync_percent     \n---------------------\n 99.9999\n</code></pre></p> <p>\u8a08\u7b97\u4e0a<code>100</code>\u306b\u306a\u3089\u306a\u3044\u306e\u3067<code>99.9999</code>\u3067\u5b8c\u5168\u540c\u671f\u3057\u3066\u3044\u307e\u3059\u3002</p> <p>\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u524a\u9664 <pre><code>rm -f $NODE_HOME/db-sync-snapshot-schema-*-block-*-x86_64.*\n</code></pre></p> <p>db-sync\u306e\u30ed\u30b0\u78ba\u8a8d</p> <pre><code>sudo journalctl -u cardano-db-sync -f\n</code></pre> <p>\u4ee5\u4e0a\u3067Cardano\u30a4\u30f3\u30c7\u30af\u30b5\u30fc\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f\u3002</p>"},{"location":"midnight/midnight-node-options/","title":"Midnight-node \u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u4e00\u89a7","text":"English\u65e5\u672c\u8a9e <pre><code>./midnight-node --help\nThe `run` command used to run a node\n\nUsage: midnight-node [OPTIONS]\n\n--validator\n    Enable validator mode.\n\n    The node will be started with the authority role and actively participate in any consensus task that it can (e.g. depending on availability of local keys).\n\n--no-grandpa\n    Disable GRANDPA.\n\n    Disables voter when running in validator mode, otherwise disable the GRANDPA observer.\n\n--rpc-external\n    Listen to all RPC interfaces (default: local).\n\n    Not all RPC methods are safe to be exposed publicly.\n\n    Use an RPC proxy server to filter out dangerous methods. More details: &lt;https://docs.substrate.io/build/remote-procedure-calls/#public-rpc-interfaces&gt;.\n\n    Use `--unsafe-rpc-external` to suppress the warning if you understand the risks.\n\n--unsafe-rpc-external\n    Listen to all RPC interfaces.\n\n    Same as `--rpc-external`.\n\n--rpc-methods &lt;METHOD SET&gt;\n    RPC methods to expose.\n\n    [default: auto]\n\n    Possible values:\n    - auto:   Expose every RPC method only when RPC is listening on `localhost`, otherwise serve only safe RPC methods\n    - safe:   Allow only a safe subset of RPC methods\n    - unsafe: Expose every RPC method (even potentially unsafe ones)\n\n--rpc-rate-limit &lt;RPC_RATE_LIMIT&gt;\n    RPC rate limiting (calls/minute) for each connection.\n\n    This is disabled by default.\n\n    For example `--rpc-rate-limit 10` will maximum allow 10 calls per minute per connection.\n\n--rpc-rate-limit-whitelisted-ips &lt;RPC_RATE_LIMIT_WHITELISTED_IPS&gt;...\n    Disable RPC rate limiting for certain ip addresses.\n\n    Each IP address must be in CIDR notation such as `1.2.3.4/24`.\n\n--rpc-rate-limit-trust-proxy-headers\n    Trust proxy headers for disable rate limiting.\n\n    By default the rpc server will not trust headers such `X-Real-IP`, `X-Forwarded-For` and `Forwarded` and this option will make the rpc server to trust these headers.\n\n    For instance this may be secure if the rpc server is behind a reverse proxy and that the proxy always sets these headers.\n\n--rpc-max-request-size &lt;RPC_MAX_REQUEST_SIZE&gt;\n    Set the maximum RPC request payload size for both HTTP and WS in megabytes\n\n    [default: 15]\n\n--rpc-max-response-size &lt;RPC_MAX_RESPONSE_SIZE&gt;\n    Set the maximum RPC response payload size for both HTTP and WS in megabytes\n\n    [default: 15]\n\n--rpc-max-subscriptions-per-connection &lt;RPC_MAX_SUBSCRIPTIONS_PER_CONNECTION&gt;\n    Set the maximum concurrent subscriptions per connection\n\n    [default: 1024]\n\n--rpc-port &lt;PORT&gt;\n    Specify JSON-RPC server TCP port\n\n--experimental-rpc-endpoint &lt;EXPERIMENTAL_RPC_ENDPOINT&gt;...\n    EXPERIMENTAL: Specify the JSON-RPC server interface and this option which can be enabled\n    several times if you want expose several RPC interfaces with different configurations.\n\n    The format for this option is:\n    `--experimental-rpc-endpoint\" listen-addr=&lt;ip:port&gt;,&lt;key=value&gt;,...\"` where each option is\n    separated by a comma and `listen-addr` is the only required param.\n\n    The following options are available:\n    \u2022 listen-addr: The socket address (ip:port) to listen on. Be careful to not expose the\n        server to the public internet unless you know what you're doing. (required)\n    \u2022 disable-batch-requests: Disable batch requests (optional)\n    \u2022 max-connections: The maximum number of concurrent connections that the server will\n        accept (optional)\n    \u2022 max-request-size: The maximum size of a request body in megabytes (optional)\n    \u2022 max-response-size: The maximum size of a response body in megabytes (optional)\n    \u2022 max-subscriptions-per-connection: The maximum number of subscriptions per connection\n        (optional)\n    \u2022 max-buffer-capacity-per-connection: The maximum buffer capacity per connection\n        (optional)\n    \u2022 max-batch-request-len: The maximum number of requests in a batch (optional)\n    \u2022 cors: The CORS allowed origins, this can enabled more than once (optional)\n    \u2022 methods: Which RPC methods to allow, valid values are \"safe\", \"unsafe\" and \"auto\"\n        (optional)\n    \u2022 optional: If the listen address is optional i.e the interface is not required to be\n        available For example this may be useful if some platforms doesn't support ipv6\n        (optional)\n    \u2022 rate-limit: The rate limit in calls per minute for each connection (optional)\n    \u2022 rate-limit-trust-proxy-headers: Trust proxy headers for disable rate limiting (optional)\n    \u2022 rate-limit-whitelisted-ips: Disable rate limiting for certain ip addresses, this can be\n    enabled more than once (optional)  \u2022 retry-random-port: If the port is already in use,\n    retry with a random port (optional)\n\n    Use with care, this flag is unstable and subject to change.\n\n--rpc-max-connections &lt;COUNT&gt;\n    Maximum number of RPC server connections\n\n    [default: 100]\n\n--rpc-message-buffer-capacity-per-connection &lt;RPC_MESSAGE_BUFFER_CAPACITY_PER_CONNECTION&gt;\n    The number of messages the RPC server is allowed to keep in memory.\n\n    If the buffer becomes full then the server will not process new messages until the connected client start reading the underlying messages.\n\n    This applies per connection which includes both JSON-RPC methods calls and subscriptions.\n\n    [default: 64]\n\n--rpc-disable-batch-requests\n    Disable RPC batch requests\n\n--rpc-max-batch-request-len &lt;LEN&gt;\n    Limit the max length per RPC batch request\n\n--rpc-cors &lt;ORIGINS&gt;\n    Specify browser *origins* allowed to access the HTTP &amp; WS RPC servers.\n\n    A comma-separated list of origins (protocol://domain or special `null` value). Value of `all` will disable origin validation. Default is to allow localhost and &lt;https://polkadot.js.org&gt; origins.\n    When running in `--dev` mode the default is to allow all origins.\n\n--name &lt;NAME&gt;\n    The human-readable name for this node.\n\n    It's used as network node name.\n\n--no-telemetry\n    Disable connecting to the Substrate telemetry server.\n\n    Telemetry is on by default on global chains.\n\n--telemetry-url &lt;URL VERBOSITY&gt;\n    The URL of the telemetry server to connect to.\n\n    This flag can be passed multiple times as a means to specify multiple telemetry endpoints. Verbosity levels range from 0-9, with 0 denoting the least verbosity.\n\n    Expected format is 'URL VERBOSITY', e.g. `--telemetry-url 'wss://foo/bar 0'`.\n\n--prometheus-port &lt;PORT&gt;\n    Specify Prometheus exporter TCP Port\n\n--prometheus-external\n    Expose Prometheus exporter on all interfaces.\n\n    Default is local.\n\n--no-prometheus\n    Do not expose a Prometheus exporter endpoint.\n\n    Prometheus metric endpoint is enabled by default.\n\n--max-runtime-instances &lt;MAX_RUNTIME_INSTANCES&gt;\n    The size of the instances cache for each runtime [max: 32].\n\n    Values higher than 32 are illegal.\n\n    [default: 8]\n\n--runtime-cache-size &lt;RUNTIME_CACHE_SIZE&gt;\n    Maximum number of different runtimes that can be cached\n\n    [default: 2]\n\n--offchain-worker &lt;ENABLED&gt;\n    Execute offchain workers on every block\n\n    [default: when-authority]\n\n    Possible values:\n    - always:         Always have offchain worker enabled\n    - never:          Never enable the offchain worker\n    - when-authority: Only enable the offchain worker when running as a validator (or collator, if this is a parachain node)\n\n--enable-offchain-indexing &lt;ENABLE_OFFCHAIN_INDEXING&gt;\n    Enable offchain indexing API.\n\n    Allows the runtime to write directly to offchain workers DB during block import.\n\n    [default: false]\n    [possible values: true, false]\n\n--chain &lt;CHAIN_SPEC&gt;\n    Specify the chain specification.\n\n    It can be one of the predefined ones (dev, local, or staging) or it can be a path to a file with the chainspec (such as one exported by the `build-spec` subcommand).\n\n--dev\n    Specify the development chain.\n\n    This flag sets `--chain=dev`, `--force-authoring`, `--rpc-cors=all`, `--alice`, and `--tmp` flags, unless explicitly overridden. It also disables local peer discovery (see --no-mdns and\n    --discover-local)\n\n-d, --base-path &lt;PATH&gt;\n        Specify custom base path\n\n-l, --log &lt;LOG_PATTERN&gt;...\n    Sets a custom logging filter (syntax: `&lt;target&gt;=&lt;level&gt;`).\n\n    Log levels (least to most verbose) are `error`, `warn`, `info`, `debug`, and `trace`.\n\n    By default, all targets log `info`. The global log level can be set with `-l&lt;level&gt;`.\n\n    Multiple `&lt;target&gt;=&lt;level&gt;` entries can be specified and separated by a comma.\n\n    *Example*: `--log error,sync=debug,grandpa=warn`. Sets Global log level to `error`, sets `sync` target to debug and grandpa target to `warn`.\n\n--detailed-log-output\n    Enable detailed log output.\n\n    Includes displaying the log target, log level and thread name.\n\n    This is automatically enabled when something is logged with any higher level than `info`.\n\n--disable-log-color\n    Disable log color output\n\n--enable-log-reloading\n    Enable feature to dynamically update and reload the log filter.\n\n    Be aware that enabling this feature can lead to a performance decrease up to factor six or more. Depending on the global logging level the performance decrease changes.\n\n    The `system_addLogFilter` and `system_resetLogFilter` RPCs will have no effect with this option not being set.\n\n--tracing-targets &lt;TARGETS&gt;\n    Sets a custom profiling filter.\n\n    Syntax is the same as for logging (`--log`).\n\n--tracing-receiver &lt;RECEIVER&gt;\n    Receiver to process tracing messages\n\n    [default: log]\n\n    Possible values:\n    - log: Output the tracing records using the log\n\n--state-pruning &lt;PRUNING_MODE&gt;\n    Specify the state pruning mode.\n\n    This mode specifies when the block's state (ie, storage) should be pruned (ie, removed) from the database. This setting can only be set on the first creation of the database. Every subsequent run\n    will load the pruning mode from the database and will error if the stored mode doesn't match this CLI value. It is fine to drop this CLI flag for subsequent runs. The only exception is that\n    `NUMBER` can change between subsequent runs (increasing it will not lead to restoring pruned state).\n\n    Possible values:\n\n    - archive: Keep the data of all blocks.\n\n    - archive-canonical: Keep only the data of finalized blocks.\n\n    - NUMBER: Keep the data of the last NUMBER of finalized blocks.\n\n    [default: 256]\n\n--blocks-pruning &lt;PRUNING_MODE&gt;\n    Specify the blocks pruning mode.\n\n    This mode specifies when the block's body (including justifications) should be pruned (ie, removed) from the database.\n\n    Possible values:\n\n    - archive: Keep the data of all blocks.\n\n    - archive-canonical: Keep only the data of finalized blocks.\n\n    - NUMBER: Keep the data of the last NUMBER of finalized blocks.\n\n    [default: archive-canonical]\n\n--database &lt;DB&gt;\n    Select database backend to use\n\n    Possible values:\n    - paritydb:              ParityDb. &lt;https://github.com/paritytech/parity-db/&gt;\n    - auto:                  Detect whether there is an existing database. Use it, if there is, if not, create new instance of ParityDb\n    - paritydb-experimental: ParityDb. &lt;https://github.com/paritytech/parity-db/&gt;\n\n--db-cache &lt;MiB&gt;\n    Limit the memory the database cache can use\n\n--wasm-execution &lt;METHOD&gt;\n    Method for executing Wasm runtime code\n\n    [default: compiled]\n\n    Possible values:\n    - interpreted-i-know-what-i-do: Uses an interpreter which now is deprecated\n    - compiled:                     Uses a compiled runtime\n\n--wasmtime-instantiation-strategy &lt;STRATEGY&gt;\n    The WASM instantiation method to use.\n\n    Only has an effect when `wasm-execution` is set to `compiled`. The copy-on-write strategies are only supported on Linux. If the copy-on-write variant of a strategy is unsupported the executor will\n    fall back to the non-CoW equivalent. The fastest (and the default) strategy available is `pooling-copy-on-write`. The `legacy-instance-reuse` strategy is deprecated and will be removed in the\n    future. It should only be used in case of issues with the default instantiation strategy.\n\n    [default: pooling-copy-on-write]\n\n    Possible values:\n    - pooling-copy-on-write:           Pool the instances to avoid initializing everything from scratch on each instantiation. Use copy-on-write memory when possible\n    - recreate-instance-copy-on-write: Recreate the instance from scratch on every instantiation. Use copy-on-write memory when possible\n    - pooling:                         Pool the instances to avoid initializing everything from scratch on each instantiation\n    - recreate-instance:               Recreate the instance from scratch on every instantiation. Very slow\n\n--wasm-runtime-overrides &lt;PATH&gt;\n    Specify the path where local WASM runtimes are stored.\n\n    These runtimes will override on-chain runtimes when the version matches.\n\n--execution-syncing &lt;STRATEGY&gt;\n    Runtime execution strategy for importing blocks during initial sync\n\n    Possible values:\n    - native:           Execute with native build (if available, WebAssembly otherwise)\n    - wasm:             Only execute with the WebAssembly build\n    - both:             Execute with both native (where available) and WebAssembly builds\n    - native-else-wasm: Execute with the native build if possible; if it fails, then execute with WebAssembly\n\n--execution-import-block &lt;STRATEGY&gt;\n    Runtime execution strategy for general block import (including locally authored blocks)\n\n    Possible values:\n    - native:           Execute with native build (if available, WebAssembly otherwise)\n    - wasm:             Only execute with the WebAssembly build\n    - both:             Execute with both native (where available) and WebAssembly builds\n    - native-else-wasm: Execute with the native build if possible; if it fails, then execute with WebAssembly\n\n--execution-block-construction &lt;STRATEGY&gt;\n    Runtime execution strategy for constructing blocks\n\n    Possible values:\n    - native:           Execute with native build (if available, WebAssembly otherwise)\n    - wasm:             Only execute with the WebAssembly build\n    - both:             Execute with both native (where available) and WebAssembly builds\n    - native-else-wasm: Execute with the native build if possible; if it fails, then execute with WebAssembly\n\n--execution-offchain-worker &lt;STRATEGY&gt;\n    Runtime execution strategy for offchain workers\n\n    Possible values:\n    - native:           Execute with native build (if available, WebAssembly otherwise)\n    - wasm:             Only execute with the WebAssembly build\n    - both:             Execute with both native (where available) and WebAssembly builds\n    - native-else-wasm: Execute with the native build if possible; if it fails, then execute with WebAssembly\n\n--execution-other &lt;STRATEGY&gt;\n    Runtime execution strategy when not syncing, importing or constructing blocks\n\n    Possible values:\n    - native:           Execute with native build (if available, WebAssembly otherwise)\n    - wasm:             Only execute with the WebAssembly build\n    - both:             Execute with both native (where available) and WebAssembly builds\n    - native-else-wasm: Execute with the native build if possible; if it fails, then execute with WebAssembly\n\n--execution &lt;STRATEGY&gt;\n    The execution strategy that should be used by all execution contexts\n\n    Possible values:\n    - native:           Execute with native build (if available, WebAssembly otherwise)\n    - wasm:             Only execute with the WebAssembly build\n    - both:             Execute with both native (where available) and WebAssembly builds\n    - native-else-wasm: Execute with the native build if possible; if it fails, then execute with WebAssembly\n\n--trie-cache-size &lt;Bytes&gt;\n    Specify the state cache size.\n\n    Providing `0` will disable the cache.\n\n    [default: 67108864]\n\n--state-cache-size &lt;STATE_CACHE_SIZE&gt;\n    DEPRECATED: switch to `--trie-cache-size`\n\n--bootnodes &lt;ADDR&gt;...\n    Specify a list of bootnodes\n\n--reserved-nodes &lt;ADDR&gt;...\n    Specify a list of reserved node addresses\n\n--reserved-only\n    Whether to only synchronize the chain with reserved nodes.\n\n    Also disables automatic peer discovery. TCP connections might still be established with non-reserved nodes. In particular, if you are a validator your node might still connect to other validator\n    nodes and collator nodes regardless of whether they are defined as reserved nodes.\n\n--public-addr &lt;PUBLIC_ADDR&gt;...\n    Public address that other nodes will use to connect to this node.\n\n    This can be used if there's a proxy in front of this node.\n\n--listen-addr &lt;LISTEN_ADDR&gt;...\n    Listen on this multiaddress.\n\n    By default: If `--validator` is passed: `/ip4/0.0.0.0/tcp/&lt;port&gt;` and `/ip6/[::]/tcp/&lt;port&gt;`. Otherwise: `/ip4/0.0.0.0/tcp/&lt;port&gt;/ws` and `/ip6/[::]/tcp/&lt;port&gt;/ws`.\n\n--port &lt;PORT&gt;\n    Specify p2p protocol TCP port\n\n--no-private-ip\n    Always forbid connecting to private IPv4/IPv6 addresses.\n\n    The option doesn't apply to addresses passed with `--reserved-nodes` or `--bootnodes`. Enabled by default for chains marked as \"live\" in their chain specifications.\n\n    Address allocation for private networks is specified by [RFC1918](https://tools.ietf.org/html/rfc1918)).\n\n--allow-private-ip\n    Always accept connecting to private IPv4/IPv6 addresses.\n\n    Enabled by default for chains marked as \"local\" in their chain specifications, or when `--dev` is passed.\n\n    Address allocation for private networks is specified by [RFC1918](https://tools.ietf.org/html/rfc1918)).\n\n--out-peers &lt;COUNT&gt;\n    Number of outgoing connections we're trying to maintain\n\n    [default: 8]\n\n--in-peers &lt;COUNT&gt;\n    Maximum number of inbound full nodes peers\n\n    [default: 32]\n\n--in-peers-light &lt;COUNT&gt;\n    Maximum number of inbound light nodes peers\n\n    [default: 100]\n\n--no-mdns\n    Disable mDNS discovery (default: true).\n\n    By default, the network will use mDNS to discover other nodes on the local network. This disables it. Automatically implied when using --dev.\n\n--max-parallel-downloads &lt;COUNT&gt;\n    Maximum number of peers from which to ask for the same blocks in parallel.\n\n    This allows downloading announced blocks from multiple peers. Decrease to save traffic and risk increased latency.\n\n    [default: 5]\n\n--node-key &lt;KEY&gt;\n    Secret key to use for p2p networking.\n\n    The value is a string that is parsed according to the choice of `--node-key-type` as follows:\n\n    - `ed25519`: the value is parsed as a hex-encoded Ed25519 32 byte secret key (64 hex chars)\n\n    The value of this option takes precedence over `--node-key-file`.\n\n    WARNING: Secrets provided as command-line arguments are easily exposed. Use of this option should be limited to development and testing. To use an externally managed secret key, use\n    `--node-key-file` instead.\n\n--node-key-type &lt;TYPE&gt;\n    Crypto primitive to use for p2p networking.\n\n    The secret key of the node is obtained as follows:\n\n    - If the `--node-key` option is given, the value is parsed as a secret key according to the type. See the documentation for `--node-key`.\n\n    - If the `--node-key-file` option is given, the secret key is read from the specified file. See the documentation for `--node-key-file`.\n\n    - Otherwise, the secret key is read from a file with a predetermined, type-specific name from the chain-specific network config directory inside the base directory specified by `--base-dir`. If\n    this file does not exist, it is created with a newly generated secret key of the chosen type.\n\n    The node's secret key determines the corresponding public key and hence the node's peer ID in the context of libp2p.\n\n    [default: ed25519]\n\n    Possible values:\n    - ed25519: Use ed25519\n\n--node-key-file &lt;FILE&gt;\n    File from which to read the node's secret key to use for p2p networking.\n\n    The contents of the file are parsed according to the choice of `--node-key-type` as follows:\n\n    - `ed25519`: the file must contain an unencoded 32 byte or hex encoded Ed25519 secret key.\n\n    If the file does not exist, it is created with a newly generated secret key of the chosen type.\n\n--unsafe-force-node-key-generation\n    Forces key generation if node-key-file file does not exist.\n\n    This is an unsafe feature for production networks, because as an active authority other authorities may depend on your node having a stable identity and they might not being able to reach you if\n    your identity changes after entering the active set.\n\n    For minimal node downtime if no custom `node-key-file` argument is provided the network-key is usually persisted accross nodes restarts, in the `network` folder from directory provided in\n    `--base-path`\n\n    Warning!! If you ever run the node with this argument, make sure you remove it for the subsequent restarts.\n\n--discover-local\n    Enable peer discovery on local networks.\n\n    By default this option is `true` for `--dev` or when the chain type is `Local`/`Development` and false otherwise.\n\n--kademlia-disjoint-query-paths\n    Require iterative Kademlia DHT queries to use disjoint paths.\n\n    Disjoint paths increase resiliency in the presence of potentially adversarial nodes.\n\n    See the S/Kademlia paper for more information on the high level design as well as its security improvements.\n\n--kademlia-replication-factor &lt;KADEMLIA_REPLICATION_FACTOR&gt;\n    Kademlia replication factor.\n\n    Determines to how many closest peers a record is replicated to.\n\n    Discovery mechanism requires successful replication to all `kademlia_replication_factor` peers to consider record successfully put.\n\n    [default: 20]\n\n--ipfs-server\n    Join the IPFS network and serve transactions over bitswap protocol\n\n--sync &lt;SYNC_MODE&gt;\n    Blockchain syncing mode.\n\n    [default: full]\n\n    Possible values:\n    - full:        Full sync. Download and verify all blocks\n    - fast:        Download blocks without executing them. Download latest state with proofs\n    - fast-unsafe: Download blocks without executing them. Download latest state without proofs\n    - warp:        Prove finality and download the latest state\n\n--max-blocks-per-request &lt;COUNT&gt;\n    Maximum number of blocks per request.\n\n    Try reducing this number from the default value if you have a slow network connection and observe block requests timing out.\n\n    [default: 64]\n\n--network-backend &lt;NETWORK_BACKEND&gt;\n    Network backend used for P2P networking.\n\n    litep2p network backend is considered experimental and isn't as stable as the libp2p\n    network backend.\n\n    [default: libp2p]\n\n    Possible values:\n    - libp2p:  Use libp2p for P2P networking\n    - litep2p: Use litep2p for P2P networking\n\n--pool-limit &lt;COUNT&gt;\n    Maximum number of transactions in the transaction pool\n\n    [default: 8192]\n\n--pool-kbytes &lt;COUNT&gt;\n    Maximum number of kilobytes of all transactions stored in the pool\n\n    [default: 20480]\n\n--tx-ban-seconds &lt;SECONDS&gt;\n    How long a transaction is banned for.\n\n    If it is considered invalid. Defaults to 1800s.\n\n--keystore-path &lt;PATH&gt;\n    Specify custom keystore path\n\n--password-interactive\n    Use interactive shell for entering the password used by the keystore\n\n--password &lt;PASSWORD&gt;\n    Password used by the keystore.\n\n    This allows appending an extra user-defined secret to the seed.\n\n--password-filename &lt;PATH&gt;\n    File that contains the password used by the keystore\n\n--alice\n    Shortcut for `--name Alice --validator`.\n\n    Session keys for `Alice` are added to keystore.\n\n--bob\n    Shortcut for `--name Bob --validator`.\n\n    Session keys for `Bob` are added to keystore.\n\n--charlie\n    Shortcut for `--name Charlie --validator`.\n\n    Session keys for `Charlie` are added to keystore.\n\n--dave\n    Shortcut for `--name Dave --validator`.\n\n    Session keys for `Dave` are added to keystore.\n\n--eve\n    Shortcut for `--name Eve --validator`.\n\n    Session keys for `Eve` are added to keystore.\n\n--ferdie\n    Shortcut for `--name Ferdie --validator`.\n\n    Session keys for `Ferdie` are added to keystore.\n\n--one\n    Shortcut for `--name One --validator`.\n\n    Session keys for `One` are added to keystore.\n\n--two\n    Shortcut for `--name Two --validator`.\n\n    Session keys for `Two` are added to keystore.\n\n--force-authoring\n    Enable authoring even when offline\n\n--tmp\n    Run a temporary node.\n\n    A temporary directory will be created to store the configuration and will be deleted at the end of the process.\n\n    Note: the directory is random per process execution. This directory is used as base path which includes: database, node key and keystore.\n\n    When `--dev` is given and no explicit `--base-path`, this option is implied.\n\n-h, --help\n        Print help (see a summary with '-h')\n\n================================================================================\nChainSpecCfg\n================================================================================\n\nNAME:          genesis_utxo\nHELP:          chain-spec generation: partner chain parameter for genesis_utxo\nTYPE:          Option &lt; UtxoId &gt;\nDEFAULT:       \nSOURCES:       \nCURRENT_VALUE: &lt;unset&gt;\n\nNAME:          addresses_json\nHELP:          This file is an output of the partner-chains-cli provided by partnerchains.\n            It's required to provide configuration at runtime for the node.\nTYPE:          Option &lt; String &gt;\nDEFAULT:       \nSOURCES:       \nCURRENT_VALUE: &lt;unset&gt;\n\n================================================================================\nMetaCfg\n================================================================================\n\nNAME:          cfg_preset\nHELP:          Use a preset of default config values\nTYPE:          Option &lt; CfgPreset &gt;\nDEFAULT:       \nSOURCES:       \nCURRENT_VALUE: &lt;unset&gt;\n\nNAME:          show_config\nHELP:          Show configuration on startup\nTYPE:          bool\nDEFAULT:       false\nSOURCES:       default\nCURRENT_VALUE: false\n\nNAME:          show_secrets\nHELP:          Show secrets in configuration\nTYPE:          bool\nDEFAULT:       false\nSOURCES:       default\nCURRENT_VALUE: false\n\n================================================================================\nMidnightCfg\n================================================================================\n\nNAME:          wipe_chain_state\nHELP:          On start-up, wipe the chain\nTYPE:          bool\nDEFAULT:       false\nSOURCES:       default\nCURRENT_VALUE: false\n\nNAME:          seed_phrase\nHELP:          Seed for key to be inserted to the keystore for this node's authoring functions.\n            This automatically generates the required key triple of (`aura`, `grandpa`, `cross_chain`).\nTYPE:          Option &lt; String &gt;\nDEFAULT:       \nSOURCES:       \nCURRENT_VALUE: &lt;unset&gt;\n\nNAME:          use_main_chain_follower_mock\nHELP:          Mock ariadne parameters\nTYPE:          bool\nDEFAULT:       false\nSOURCES:       default\nCURRENT_VALUE: false\n\nNAME:          main_chain_follower_mock_registrations_file\nHELP:          Required if use_main_chain_follower_mock is true\n            Used in the sidechains library\nTYPE:          Option &lt; String &gt;\nDEFAULT:       \nSOURCES:       \nCURRENT_VALUE: &lt;unset&gt;\n\nNAME:          mc__first_epoch_timestamp_millis\nHELP:          see partner-chains EpochConfig\nTYPE:          u64\nDEFAULT:       1666656000000\nSOURCES:       default\nCURRENT_VALUE: 1666656000000\n\nNAME:          mc__first_epoch_number\nHELP:          see partner-chains EpochConfig\nTYPE:          u32\nDEFAULT:       0\nSOURCES:       default\nCURRENT_VALUE: 0\n\nNAME:          mc__epoch_duration_millis\nHELP:          see partner-chains EpochConfig\nTYPE:          u64\nDEFAULT:       86400000\nSOURCES:       default\nCURRENT_VALUE: 86400000\n\nNAME:          mc__first_slot_number\nHELP:          see partner-chains EpochConfig\nTYPE:          u64\nDEFAULT:       0\nSOURCES:       default\nCURRENT_VALUE: 0\n\nNAME:          db_sync_postgres_connection_string\nHELP:          see partner-chains ConnectionConfig\nTYPE:          Option &lt; String &gt;\nDEFAULT:       \nSOURCES:       \nCURRENT_VALUE: &lt;unset&gt;\n\nNAME:          cardano_security_parameter\nHELP:          see partner-chains CandidateDataSourceCacheConfig and DbSyncBlockDataSourceConfig\nTYPE:          Option &lt; u32 &gt;\nDEFAULT:       432\nSOURCES:       default\nCURRENT_VALUE: 432\n\nNAME:          cardano_active_slots_coeff\nHELP:          see partner-chains DbSyncBlockDataSourceConfig\nTYPE:          Option &lt; f64 &gt;\nDEFAULT:       0.05\nSOURCES:       default\nCURRENT_VALUE: 0.05\n\nNAME:          block_stability_margin\nHELP:          see partner-chains DbSyncBlockDataSourceConfig\nTYPE:          Option &lt; u32 &gt;\nDEFAULT:       0\nSOURCES:       default\nCURRENT_VALUE: 0\n\nNAME:          proposed_wasm_file\nHELP:          An optional proposal of a new runtime file for the Midnight runtime.\n            The spec version and code hash will be extracted from this file, otherwise, the default path will be used.\n            If not in the default path, the node will not vote in favor of a WASM to promote for a runtime upgrade\nTYPE:          Option &lt; String &gt;\nDEFAULT:       \nSOURCES:       \nCURRENT_VALUE: &lt;unset&gt;\n\nNAME:          storage_cache_size\nHELP:          Size of ledger storage cache (number of nodes)\nTYPE:          usize\nDEFAULT:       0\nSOURCES:       default\nCURRENT_VALUE: 0\n\n================================================================================\nStorageMonitorParamsCfg\n================================================================================\n\nNAME:          threshold\nHELP:          Required available space on database storage\nTYPE:          u64\nDEFAULT:       512\nSOURCES:       default\nCURRENT_VALUE: 512\n\nNAME:          polling_period\nHELP:          How often available space is polled\nTYPE:          u32\nDEFAULT:       5\nSOURCES:       default\nCURRENT_VALUE: 5\n\n================================================================================\nSubstrateCfg\n================================================================================\n\nNAME:          argv\nHELP:          REMOVED: USE \"args\" INSTEAD\n            The arguments passed to the node, including the binary\nTYPE:          Vec &lt; String &gt;\nDEFAULT:       \nSOURCES:       default\nCURRENT_VALUE: \"\"\n\nNAME:          args\nHELP:          The arguments passed to the node\nTYPE:          Vec &lt; String &gt;\nDEFAULT:       \nSOURCES:       cli\nCURRENT_VALUE: \"--help, \"\n\nNAME:          append_args\nHELP:          Extra arguments to append to args\nTYPE:          Vec &lt; String &gt;\nDEFAULT:       \nSOURCES:       default\nCURRENT_VALUE: \"\"\n\nNAME:          base_path\nHELP:          Optional override for base_path. --base-path in argv takes precedence\nTYPE:          Option &lt; String &gt;\nDEFAULT:       \nSOURCES:       \nCURRENT_VALUE: &lt;unset&gt;\n\nNAME:          node_key\nHELP:          Optional override for node_key. --node-key in argv takes precedence\nTYPE:          Option &lt; String &gt;\nDEFAULT:       \nSOURCES:       \nCURRENT_VALUE: &lt;unset&gt;\n\nNAME:          chain\nHELP:          Optional override for chain. --chain in argv takes precedence\nTYPE:          Option &lt; String &gt;\nDEFAULT:       \nSOURCES:       \nCURRENT_VALUE: &lt;unset&gt;\n\nNAME:          validator\nHELP:          Override for --validator in argv\nTYPE:          bool\nDEFAULT:       false\nSOURCES:       default\nCURRENT_VALUE: false\n\nNAME:          bootnodes\nHELP:          Appends to the list of bootnodes\nTYPE:          Vec &lt; MultiaddrWithPeerId &gt;\nDEFAULT:       \nSOURCES:       default\nCURRENT_VALUE: \"\"\n\nNAME:          trie_cache_size\nHELP:          Override for --trie_cache_size. --trie-cache-size in argv takes precedence (unless set to default value).\nTYPE:          Option &lt; usize &gt;\nDEFAULT:       0\nSOURCES:       default\nCURRENT_VALUE: 0\n\nCONFIG PRESET: None\nVALIDATION RESULT: Configuration failed to validate: config error: {\"errors\":[\"db_sync_postgres_connection_string must be defined if ariadne is enabled (i.e. if use_main_chain_follower_mock is false)\"],\"properties\":{}}\n*note:* To show secret values, set SHOW_SECRETS=1\n\nMidnight blockchain node. Run without &lt;COMMAND&gt; to start the node. To see full config options, run with no args with env-var SHOW_CONFIG=TRUE or run --help\n\nUsage: midnight-node &lt;COMMAND&gt;\n\nCommands:\nkey                      Key management cli utilities\nsidechain-params         Returns sidechain parameters\nregistration-status      Returns registration status for a given mainchain public key and epoch number. If registration has been included in Cardano block in epoch N, then it should be returned by this\n                        command if epoch greater than N+1 is provided. If this command won't show your registration after a few minutes after it has been included in a cardano block, you can start\n                        debugging for unsuccessful registration\nariadne-parameters       Returns ariadne parameters effective at given mainchain epoch number. Parameters are effective two epochs after the block their change is included in\nregistration-signatures  Generates registration signatures for partner chains committee candidates\nsmart-contracts          Commands for interacting with Partner Chain smart contracts on Cardano\nwizards                  Partner Chains text \"wizards\" for setting up chain\nbuild-spec               Build a chain specification\ncheck-block              Validate blocks\nexport-blocks            Export blocks\nexport-state             Export the state of a given block into a chain spec\nimport-blocks            Import blocks\npurge-chain              Remove the whole chain\nrevert                   Revert the chain to a previous state\nbenchmark                Sub-commands concerned with benchmarking\nchain-info               Db meta columns information\nhelp                     Print this message or the help of the given subcommand(s)\n\nOptions:\n-h, --help     Print help\n-V, --version  Print version\n</code></pre> <pre><code>./midnight-node --help\n\u30ce\u30fc\u30c9\u3092\u8d77\u52d5\u3059\u308b\u305f\u3081\u306b\u4f7f\u3046 `run` \u30b3\u30de\u30f3\u30c9\n\n\u4f7f\u7528\u6cd5: midnight-node [OPTIONS]\n\n--validator\n    \u30d0\u30ea\u30c7\u30fc\u30bf\u30fc\u30e2\u30fc\u30c9\u3092\u6709\u52b9\u306b\u3059\u308b\u3002\n\n    \u30ce\u30fc\u30c9\u306f\u30aa\u30fc\u30bd\u30ea\u30c6\u30a3\u30ed\u30fc\u30eb\u3067\u8d77\u52d5\u3057\u3001\u53ef\u80fd\u306a\u9650\u308a\uff08\u4f8b: \u30ed\u30fc\u30ab\u30eb\u30ad\u30fc\u306e\u53ef\u7528\u6027\u306b\u5fdc\u3058\u3066\uff09\u5408\u610f\u30bf\u30b9\u30af\u306b\u7a4d\u6975\u7684\u306b\u53c2\u52a0\u3059\u308b\u3002\n\n--no-grandpa\n    GRANDPA \u3092\u7121\u52b9\u5316\u3059\u308b\u3002\n\n    \u30d0\u30ea\u30c7\u30fc\u30bf\u30fc\u30e2\u30fc\u30c9\u3067\u306f\u6295\u7968\u8005\u3092\u7121\u52b9\u5316\u3057\u3001\u305d\u3046\u3067\u306a\u3044\u5834\u5408\u306f GRANDPA \u30aa\u30d6\u30b6\u30fc\u30d0\u30fc\u3092\u7121\u52b9\u5316\u3059\u308b\u3002\n\n--rpc-external\n    \u3059\u3079\u3066\u306e RPC \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3067\u5f85\u3061\u53d7\u3051\u308b\uff08\u30c7\u30d5\u30a9\u30eb\u30c8: \u30ed\u30fc\u30ab\u30eb\uff09\u3002\n\n    \u3059\u3079\u3066\u306e RPC \u30e1\u30bd\u30c3\u30c9\u304c\u5b89\u5168\u306b\u516c\u958b\u3067\u304d\u308b\u308f\u3051\u3067\u306f\u306a\u3044\u3002\n\n    \u5371\u967a\u306a\u30e1\u30bd\u30c3\u30c9\u3092\u9664\u5916\u3059\u308b\u305f\u3081\u306b RPC \u30d7\u30ed\u30ad\u30b7\u30b5\u30fc\u30d0\u30fc\u3092\u4f7f\u7528\u3059\u308b\u3002\u8a73\u7d30: &lt;https://docs.substrate.io/build/remote-procedure-calls/#public-rpc-interfaces&gt;\u3002\n\n    \u30ea\u30b9\u30af\u3092\u7406\u89e3\u3057\u3066\u3044\u308b\u5834\u5408\u306f `--unsafe-rpc-external` \u3067\u8b66\u544a\u3092\u6291\u5236\u3067\u304d\u308b\u3002\n\n--unsafe-rpc-external\n    \u3059\u3079\u3066\u306e RPC \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3067\u5f85\u3061\u53d7\u3051\u308b\u3002\n\n    `--rpc-external` \u3068\u540c\u3058\u3002\n\n--rpc-methods &lt;METHOD SET&gt;\n    \u516c\u958b\u3059\u308b RPC \u30e1\u30bd\u30c3\u30c9\u3002\n\n    [default: auto]\n\n    \u53ef\u80fd\u306a\u5024:\n    - auto:   RPC \u304c `localhost` \u3067\u5f85\u3061\u53d7\u3051\u308b\u5834\u5408\u306e\u307f\u3059\u3079\u3066\u306e RPC \u30e1\u30bd\u30c3\u30c9\u3092\u516c\u958b\u3057\u3001\u305d\u308c\u4ee5\u5916\u306f\u5b89\u5168\u306a RPC \u30e1\u30bd\u30c3\u30c9\u306e\u307f\u63d0\u4f9b\u3059\u308b\n    - safe:   \u5b89\u5168\u306a RPC \u30e1\u30bd\u30c3\u30c9\u306e\u30b5\u30d6\u30bb\u30c3\u30c8\u306e\u307f\u8a31\u53ef\u3059\u308b\n    - unsafe: \u3059\u3079\u3066\u306e RPC \u30e1\u30bd\u30c3\u30c9\uff08\u6f5c\u5728\u7684\u306b\u5b89\u5168\u3067\u306a\u3044\u3082\u306e\u3082\u542b\u3080\uff09\u3092\u516c\u958b\u3059\u308b\n\n--rpc-rate-limit &lt;RPC_RATE_LIMIT&gt;\n    \u5404\u63a5\u7d9a\u3054\u3068\u306e RPC \u30ec\u30fc\u30c8\u5236\u9650\uff08\u547c\u3073\u51fa\u3057/\u5206\uff09\u3002\n\n    \u3053\u308c\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u7121\u52b9\u3002\n\n    \u4f8b: `--rpc-rate-limit 10` \u306f\u63a5\u7d9a\u3042\u305f\u308a 1 \u5206\u306b\u6700\u5927 10 \u56de\u306e\u547c\u3073\u51fa\u3057\u306e\u307f\u8a31\u53ef\u3059\u308b\u3002\n\n--rpc-rate-limit-whitelisted-ips &lt;RPC_RATE_LIMIT_WHITELISTED_IPS&gt;...\n    \u7279\u5b9a\u306e IP \u30a2\u30c9\u30ec\u30b9\u306b\u5bfe\u3059\u308b RPC \u30ec\u30fc\u30c8\u5236\u9650\u3092\u7121\u52b9\u5316\u3059\u308b\u3002\n\n    \u5404 IP \u30a2\u30c9\u30ec\u30b9\u306f `1.2.3.4/24` \u306e\u3088\u3046\u306a CIDR \u8868\u8a18\u3067\u3042\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\n--rpc-rate-limit-trust-proxy-headers\n    \u30ec\u30fc\u30c8\u5236\u9650\u306e\u7121\u52b9\u5316\u306e\u305f\u3081\u306b\u30d7\u30ed\u30ad\u30b7\u30d8\u30c3\u30c0\u30fc\u3092\u4fe1\u983c\u3059\u308b\u3002\n\n    \u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f RPC \u30b5\u30fc\u30d0\u30fc\u306f `X-Real-IP`\u3001`X-Forwarded-For`\u3001`Forwarded` \u306a\u3069\u306e\u30d8\u30c3\u30c0\u30fc\u3092\u4fe1\u983c\u305b\u305a\u3001\u3053\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u6307\u5b9a\u3059\u308b\u3068\u4fe1\u983c\u3059\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n    \u4f8b\u3048\u3070\u3001RPC \u30b5\u30fc\u30d0\u30fc\u304c\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u306e\u80cc\u5f8c\u306b\u3042\u308a\u3001\u30d7\u30ed\u30ad\u30b7\u304c\u5e38\u306b\u3053\u308c\u3089\u306e\u30d8\u30c3\u30c0\u30fc\u3092\u8a2d\u5b9a\u3059\u308b\u5834\u5408\u306b\u5b89\u5168\u3067\u3042\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u3002\n\n--rpc-max-request-size &lt;RPC_MAX_REQUEST_SIZE&gt;\n    HTTP \u3068 WS \u306e\u4e21\u65b9\u3067 RPC \u30ea\u30af\u30a8\u30b9\u30c8\u306e\u30da\u30a4\u30ed\u30fc\u30c9\u6700\u5927\u30b5\u30a4\u30ba\u3092\u30e1\u30ac\u30d0\u30a4\u30c8\u5358\u4f4d\u3067\u8a2d\u5b9a\u3059\u308b\n\n    [default: 15]\n\n--rpc-max-response-size &lt;RPC_MAX_RESPONSE_SIZE&gt;\n    HTTP \u3068 WS \u306e\u4e21\u65b9\u3067 RPC \u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u30da\u30a4\u30ed\u30fc\u30c9\u6700\u5927\u30b5\u30a4\u30ba\u3092\u30e1\u30ac\u30d0\u30a4\u30c8\u5358\u4f4d\u3067\u8a2d\u5b9a\u3059\u308b\n\n    [default: 15]\n\n--rpc-max-subscriptions-per-connection &lt;RPC_MAX_SUBSCRIPTIONS_PER_CONNECTION&gt;\n    \u63a5\u7d9a\u3042\u305f\u308a\u306e\u6700\u5927\u540c\u6642\u30b5\u30d6\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3\u6570\u3092\u8a2d\u5b9a\u3059\u308b\n\n    [default: 1024]\n\n--rpc-port &lt;PORT&gt;\n    JSON-RPC \u30b5\u30fc\u30d0\u30fc\u306e TCP \u30dd\u30fc\u30c8\u3092\u6307\u5b9a\u3059\u308b\n\n--experimental-rpc-endpoint &lt;EXPERIMENTAL_RPC_ENDPOINT&gt;...\n    \u5b9f\u9a13\u7684: JSON-RPC \u30b5\u30fc\u30d0\u30fc\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u6307\u5b9a\u3059\u308b\u3002\u3053\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u8907\u6570\u56de\u6307\u5b9a\u3067\u304d\u3001\u7570\u306a\u308b\u8a2d\u5b9a\u3067\u8907\u6570\u306e RPC \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u516c\u958b\u3067\u304d\u308b\u3002\n\n    \u3053\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u5f62\u5f0f:\n    `--experimental-rpc-endpoint\" listen-addr=&lt;ip:port&gt;,&lt;key=value&gt;,...\"`\u3002\u5404\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u30ab\u30f3\u30de\u3067\u533a\u5207\u3089\u308c\u3001`listen-addr` \u304c\u552f\u4e00\u306e\u5fc5\u9808\u30d1\u30e9\u30e1\u30fc\u30bf\u3002\n\n    \u5229\u7528\u53ef\u80fd\u306a\u30aa\u30d7\u30b7\u30e7\u30f3:\n    \u2022 listen-addr: \u5f85\u3061\u53d7\u3051\u308b\u30bd\u30b1\u30c3\u30c8\u30a2\u30c9\u30ec\u30b9\uff08ip:port\uff09\u3002\u3088\u307b\u3069\u7406\u89e3\u3057\u3066\u3044\u306a\u3044\u9650\u308a\u3001\u516c\u958b\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u3078\u306e\u516c\u958b\u306f\u907f\u3051\u308b\u3053\u3068\u3002\uff08\u5fc5\u9808\uff09\n    \u2022 disable-batch-requests: \u30d0\u30c3\u30c1\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u7121\u52b9\u5316\uff08\u4efb\u610f\uff09\n    \u2022 max-connections: \u30b5\u30fc\u30d0\u30fc\u304c\u53d7\u3051\u5165\u308c\u308b\u540c\u6642\u63a5\u7d9a\u306e\u6700\u5927\u6570\uff08\u4efb\u610f\uff09\n    \u2022 max-request-size: \u30ea\u30af\u30a8\u30b9\u30c8\u672c\u6587\u306e\u6700\u5927\u30b5\u30a4\u30ba\uff08\u30e1\u30ac\u30d0\u30a4\u30c8\uff09\uff08\u4efb\u610f\uff09\n    \u2022 max-response-size: \u30ec\u30b9\u30dd\u30f3\u30b9\u672c\u6587\u306e\u6700\u5927\u30b5\u30a4\u30ba\uff08\u30e1\u30ac\u30d0\u30a4\u30c8\uff09\uff08\u4efb\u610f\uff09\n    \u2022 max-subscriptions-per-connection: \u63a5\u7d9a\u3042\u305f\u308a\u306e\u6700\u5927\u30b5\u30d6\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3\u6570\uff08\u4efb\u610f\uff09\n    \u2022 max-buffer-capacity-per-connection: \u63a5\u7d9a\u3042\u305f\u308a\u306e\u6700\u5927\u30d0\u30c3\u30d5\u30a1\u5bb9\u91cf\uff08\u4efb\u610f\uff09\n    \u2022 max-batch-request-len: \u30d0\u30c3\u30c1\u5185\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u6700\u5927\u4ef6\u6570\uff08\u4efb\u610f\uff09\n    \u2022 cors: \u8a31\u53ef\u3059\u308b CORS \u30aa\u30ea\u30b8\u30f3\u3002\u3053\u306e\u9805\u76ee\u306f\u8907\u6570\u56de\u6709\u52b9\u5316\u3067\u304d\u308b\uff08\u4efb\u610f\uff09\n    \u2022 methods: \u8a31\u53ef\u3059\u308b RPC \u30e1\u30bd\u30c3\u30c9\u3002`safe`\u3001`unsafe`\u3001`auto` \u304c\u6709\u52b9\uff08\u4efb\u610f\uff09\n    \u2022 optional: \u5f85\u3061\u53d7\u3051\u30a2\u30c9\u30ec\u30b9\u304c\u4efb\u610f\u3001\u3064\u307e\u308a\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u304c\u5229\u7528\u3067\u304d\u306a\u304f\u3066\u3082\u3088\u3044\u3002\u4f8b: \u4e00\u90e8\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3067 ipv6 \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u306a\u3044\u5834\u5408\u306b\u6709\u7528\uff08\u4efb\u610f\uff09\n    \u2022 rate-limit: \u5404\u63a5\u7d9a\u306e\u547c\u3073\u51fa\u3057/\u5206\u306e\u30ec\u30fc\u30c8\u5236\u9650\uff08\u4efb\u610f\uff09\n    \u2022 rate-limit-trust-proxy-headers: \u30ec\u30fc\u30c8\u5236\u9650\u306e\u7121\u52b9\u5316\u306e\u305f\u3081\u306b\u30d7\u30ed\u30ad\u30b7\u30d8\u30c3\u30c0\u30fc\u3092\u4fe1\u983c\u3059\u308b\uff08\u4efb\u610f\uff09\n    \u2022 rate-limit-whitelisted-ips: \u7279\u5b9a\u306e IP \u30a2\u30c9\u30ec\u30b9\u306b\u5bfe\u3059\u308b\u30ec\u30fc\u30c8\u5236\u9650\u3092\u7121\u52b9\u5316\u3002\u3053\u306e\u9805\u76ee\u306f\u8907\u6570\u56de\u6709\u52b9\u5316\u3067\u304d\u308b\uff08\u4efb\u610f\uff09\n    \u2022 retry-random-port: \u30dd\u30fc\u30c8\u304c\u65e2\u306b\u4f7f\u7528\u4e2d\u306e\u5834\u5408\u3001\u30e9\u30f3\u30c0\u30e0\u306a\u30dd\u30fc\u30c8\u3067\u518d\u8a66\u884c\uff08\u4efb\u610f\uff09\n\n    \u6ce8\u610f\u3057\u3066\u4f7f\u7528\u3059\u308b\u3053\u3068\u3002\u3053\u306e\u30d5\u30e9\u30b0\u306f\u4e0d\u5b89\u5b9a\u3067\u3001\u5909\u66f4\u3055\u308c\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u3002\n\n--rpc-max-connections &lt;COUNT&gt;\n    RPC \u30b5\u30fc\u30d0\u30fc\u63a5\u7d9a\u306e\u6700\u5927\u6570\n\n    [default: 100]\n\n--rpc-message-buffer-capacity-per-connection &lt;RPC_MESSAGE_BUFFER_CAPACITY_PER_CONNECTION&gt;\n    RPC \u30b5\u30fc\u30d0\u30fc\u304c\u30e1\u30e2\u30ea\u5185\u306b\u4fdd\u6301\u3067\u304d\u308b\u30e1\u30c3\u30bb\u30fc\u30b8\u6570\u3002\n\n    \u30d0\u30c3\u30d5\u30a1\u304c\u6e80\u676f\u306b\u306a\u308b\u3068\u3001\u63a5\u7d9a\u3057\u3066\u3044\u308b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u57fa\u76e4\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u8aad\u307f\u59cb\u3081\u308b\u307e\u3067\u3001\u65b0\u3057\u3044\u30e1\u30c3\u30bb\u30fc\u30b8\u306f\u51e6\u7406\u3055\u308c\u306a\u3044\u3002\n\n    \u3053\u308c\u306f JSON-RPC \u306e\u30e1\u30bd\u30c3\u30c9\u547c\u3073\u51fa\u3057\u3068\u30b5\u30d6\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3\u306e\u4e21\u65b9\u3092\u542b\u3080\u63a5\u7d9a\u5358\u4f4d\u3067\u9069\u7528\u3055\u308c\u308b\u3002\n\n    [default: 64]\n\n--rpc-disable-batch-requests\n    RPC \u30d0\u30c3\u30c1\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u7121\u52b9\u5316\u3059\u308b\n\n--rpc-max-batch-request-len &lt;LEN&gt;\n    RPC \u30d0\u30c3\u30c1\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u6700\u5927\u9577\u3092\u5236\u9650\u3059\u308b\n\n--rpc-cors &lt;ORIGINS&gt;\n    HTTP &amp; WS RPC \u30b5\u30fc\u30d0\u30fc\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\u3059\u308b\u30d6\u30e9\u30a6\u30b6\u306e *origin* \u3092\u6307\u5b9a\u3059\u308b\u3002\n\n    \u30aa\u30ea\u30b8\u30f3\u306e\u30ab\u30f3\u30de\u533a\u5207\u308a\u30ea\u30b9\u30c8\uff08protocol://domain \u307e\u305f\u306f\u7279\u5225\u306a `null` \u5024\uff09\u3002`all` \u306f\u30aa\u30ea\u30b8\u30f3\u691c\u8a3c\u3092\u7121\u52b9\u5316\u3059\u308b\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306f localhost \u3068 &lt;https://polkadot.js.org&gt; \u306e\u30aa\u30ea\u30b8\u30f3\u3092\u8a31\u53ef\u3059\u308b\u3002\n    `--dev` \u30e2\u30fc\u30c9\u3067\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u5168\u30aa\u30ea\u30b8\u30f3\u3092\u8a31\u53ef\u3059\u308b\u3002\n\n--name &lt;NAME&gt;\n    \u3053\u306e\u30ce\u30fc\u30c9\u306e\u4eba\u9593\u304c\u8aad\u3081\u308b\u540d\u524d\u3002\n\n    \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u4e0a\u306e\u30ce\u30fc\u30c9\u540d\u3068\u3057\u3066\u4f7f\u7528\u3055\u308c\u308b\u3002\n\n--no-telemetry\n    Substrate \u30c6\u30ec\u30e1\u30c8\u30ea\u30fc\u30b5\u30fc\u30d0\u30fc\u3078\u306e\u63a5\u7d9a\u3092\u7121\u52b9\u5316\u3059\u308b\u3002\n\n    \u30b0\u30ed\u30fc\u30d0\u30eb\u30c1\u30a7\u30fc\u30f3\u3067\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u30c6\u30ec\u30e1\u30c8\u30ea\u30fc\u304c\u6709\u52b9\u3002\n\n--telemetry-url &lt;URL VERBOSITY&gt;\n    \u63a5\u7d9a\u5148\u306e\u30c6\u30ec\u30e1\u30c8\u30ea\u30fc\u30b5\u30fc\u30d0\u30fc URL\u3002\n\n    \u8907\u6570\u56de\u6307\u5b9a\u3057\u3066\u8907\u6570\u306e\u30c6\u30ec\u30e1\u30c8\u30ea\u30fc\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u6307\u5b9a\u3067\u304d\u308b\u3002\u5197\u9577\u5ea6\u306f 0-9 \u3067\u30010 \u304c\u6700\u3082\u4f4e\u3044\u3002\n\n    \u671f\u5f85\u3055\u308c\u308b\u5f62\u5f0f\u306f 'URL VERBOSITY'\u3001\u4f8b: `--telemetry-url 'wss://foo/bar 0'`\u3002\n\n--prometheus-port &lt;PORT&gt;\n    Prometheus \u30a8\u30af\u30b9\u30dd\u30fc\u30bf\u30fc\u306e TCP \u30dd\u30fc\u30c8\u3092\u6307\u5b9a\u3059\u308b\n\n--prometheus-external\n    \u3059\u3079\u3066\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3067 Prometheus \u30a8\u30af\u30b9\u30dd\u30fc\u30bf\u30fc\u3092\u516c\u958b\u3059\u308b\u3002\n\n    \u30c7\u30d5\u30a9\u30eb\u30c8\u306f\u30ed\u30fc\u30ab\u30eb\u3002\n\n--no-prometheus\n    Prometheus \u30a8\u30af\u30b9\u30dd\u30fc\u30bf\u30fc\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u516c\u958b\u3057\u306a\u3044\u3002\n\n    Prometheus \u306e\u30e1\u30c8\u30ea\u30af\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u6709\u52b9\u3002\n\n--max-runtime-instances &lt;MAX_RUNTIME_INSTANCES&gt;\n    \u5404\u30e9\u30f3\u30bf\u30a4\u30e0\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30ad\u30e3\u30c3\u30b7\u30e5\u30b5\u30a4\u30ba [max: 32]\u3002\n\n    32 \u3092\u8d85\u3048\u308b\u5024\u306f\u4e0d\u6b63\u3002\n\n    [default: 8]\n\n--runtime-cache-size &lt;RUNTIME_CACHE_SIZE&gt;\n    \u30ad\u30e3\u30c3\u30b7\u30e5\u53ef\u80fd\u306a\u7570\u306a\u308b\u30e9\u30f3\u30bf\u30a4\u30e0\u306e\u6700\u5927\u6570\n\n    [default: 2]\n\n--offchain-worker &lt;ENABLED&gt;\n    \u5404\u30d6\u30ed\u30c3\u30af\u3067\u30aa\u30d5\u30c1\u30a7\u30fc\u30f3\u30ef\u30fc\u30ab\u30fc\u3092\u5b9f\u884c\u3059\u308b\n\n    [default: when-authority]\n\n    \u53ef\u80fd\u306a\u5024:\n    - always:         \u5e38\u306b\u30aa\u30d5\u30c1\u30a7\u30fc\u30f3\u30ef\u30fc\u30ab\u30fc\u3092\u6709\u52b9\u306b\u3059\u308b\n    - never:          \u30aa\u30d5\u30c1\u30a7\u30fc\u30f3\u30ef\u30fc\u30ab\u30fc\u3092\u6709\u52b9\u306b\u3057\u306a\u3044\n    - when-authority: \u30d0\u30ea\u30c7\u30fc\u30bf\u30fc\uff08\u307e\u305f\u306f\u3001\u3053\u308c\u306f\u30d1\u30e9\u30c1\u30a7\u30fc\u30f3\u30ce\u30fc\u30c9\u306a\u3089\u30b3\u30ec\u30fc\u30bf\u30fc\uff09\u3068\u3057\u3066\u5b9f\u884c\u3057\u3066\u3044\u308b\u5834\u5408\u306e\u307f\u6709\u52b9\u306b\u3059\u308b\n\n--enable-offchain-indexing &lt;ENABLE_OFFCHAIN_INDEXING&gt;\n    \u30aa\u30d5\u30c1\u30a7\u30fc\u30f3\u30a4\u30f3\u30c7\u30af\u30b7\u30f3\u30b0 API \u3092\u6709\u52b9\u5316\u3059\u308b\u3002\n\n    \u30d6\u30ed\u30c3\u30af\u53d6\u308a\u8fbc\u307f\u4e2d\u306b\u30e9\u30f3\u30bf\u30a4\u30e0\u304c\u30aa\u30d5\u30c1\u30a7\u30fc\u30f3\u30ef\u30fc\u30ab\u30fc DB \u3078\u76f4\u63a5\u66f8\u304d\u8fbc\u3081\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n\n    [default: false]\n    [possible values: true, false]\n\n--chain &lt;CHAIN_SPEC&gt;\n    \u30c1\u30a7\u30fc\u30f3\u4ed5\u69d8\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n    \u4e8b\u524d\u5b9a\u7fa9\u6e08\u307f\uff08dev\u3001local\u3001staging\uff09\u306e\u3044\u305a\u308c\u304b\u3001\u307e\u305f\u306f chainspec \u3092\u542b\u3080\u30d5\u30a1\u30a4\u30eb\u3078\u306e\u30d1\u30b9\uff08`build-spec` \u30b5\u30d6\u30b3\u30de\u30f3\u30c9\u3067\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3057\u305f\u3082\u306e\u306a\u3069\uff09\u3092\u6307\u5b9a\u3067\u304d\u308b\u3002\n\n--dev\n    \u958b\u767a\u7528\u30c1\u30a7\u30fc\u30f3\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n    \u3053\u306e\u30d5\u30e9\u30b0\u306f\u660e\u793a\u7684\u306b\u4e0a\u66f8\u304d\u3055\u308c\u306a\u3044\u9650\u308a\u3001`--chain=dev`\u3001`--force-authoring`\u3001`--rpc-cors=all`\u3001`--alice`\u3001`--tmp` \u3092\u8a2d\u5b9a\u3059\u308b\u3002\u307e\u305f\u30ed\u30fc\u30ab\u30eb\u30d4\u30a2\u63a2\u7d22\u3092\u7121\u52b9\u5316\u3059\u308b\uff08--no-mdns \u304a\u3088\u3073\n    --discover-local \u3092\u53c2\u7167\uff09\u3002\n\n-d, --base-path &lt;PATH&gt;\n        \u30ab\u30b9\u30bf\u30e0\u306e\u30d9\u30fc\u30b9\u30d1\u30b9\u3092\u6307\u5b9a\u3059\u308b\n\n-l, --log &lt;LOG_PATTERN&gt;...\n        \u30ab\u30b9\u30bf\u30e0\u306e\u30ed\u30b0\u30d5\u30a3\u30eb\u30bf\u30fc\u3092\u8a2d\u5b9a\u3059\u308b\uff08\u69cb\u6587: `&lt;target&gt;=&lt;level&gt;`\uff09\u3002\n\n        \u30ed\u30b0\u30ec\u30d9\u30eb\uff08\u4f4e\u3044\u2192\u9ad8\u3044\uff09\u306f `error`\u3001`warn`\u3001`info`\u3001`debug`\u3001`trace`\u3002\n\n        \u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u5168\u30bf\u30fc\u30b2\u30c3\u30c8\u304c `info`\u3002\u30b0\u30ed\u30fc\u30d0\u30eb\u30ed\u30b0\u30ec\u30d9\u30eb\u306f `-l&lt;level&gt;` \u3067\u8a2d\u5b9a\u3067\u304d\u308b\u3002\n\n        \u8907\u6570\u306e `&lt;target&gt;=&lt;level&gt;` \u3092\u6307\u5b9a\u3067\u304d\u3001\u30ab\u30f3\u30de\u3067\u533a\u5207\u308b\u3002\n\n        *\u4f8b*: `--log error,sync=debug,grandpa=warn`\u3002\u30b0\u30ed\u30fc\u30d0\u30eb\u30ed\u30b0\u30ec\u30d9\u30eb\u3092 `error` \u306b\u3057\u3001`sync` \u30bf\u30fc\u30b2\u30c3\u30c8\u3092 debug\u3001grandpa \u30bf\u30fc\u30b2\u30c3\u30c8\u3092 warn \u306b\u3059\u308b\u3002\n\n--detailed-log-output\n    \u8a73\u7d30\u306a\u30ed\u30b0\u51fa\u529b\u3092\u6709\u52b9\u5316\u3059\u308b\u3002\n\n    \u30ed\u30b0\u30bf\u30fc\u30b2\u30c3\u30c8\u3001\u30ed\u30b0\u30ec\u30d9\u30eb\u3001\u30b9\u30ec\u30c3\u30c9\u540d\u306e\u8868\u793a\u3092\u542b\u3080\u3002\n\n    \u4f55\u304b\u304c `info` \u3088\u308a\u9ad8\u3044\u30ec\u30d9\u30eb\u3067\u30ed\u30b0\u3055\u308c\u308b\u3068\u81ea\u52d5\u7684\u306b\u6709\u52b9\u306b\u306a\u308b\u3002\n\n--disable-log-color\n    \u30ed\u30b0\u306e\u8272\u51fa\u529b\u3092\u7121\u52b9\u5316\u3059\u308b\n\n--enable-log-reloading\n    \u30ed\u30b0\u30d5\u30a3\u30eb\u30bf\u30fc\u3092\u52d5\u7684\u306b\u66f4\u65b0\u30fb\u518d\u8aad\u307f\u8fbc\u307f\u3059\u308b\u6a5f\u80fd\u3092\u6709\u52b9\u5316\u3059\u308b\u3002\n\n    \u3053\u306e\u6a5f\u80fd\u3092\u6709\u52b9\u306b\u3059\u308b\u3068\u3001\u6700\u5927 6 \u500d\u4ee5\u4e0a\u306e\u6027\u80fd\u4f4e\u4e0b\u304c\u8d77\u304d\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u3002\u30b0\u30ed\u30fc\u30d0\u30eb\u30ed\u30b0\u30ec\u30d9\u30eb\u306b\u5fdc\u3058\u3066\u6027\u80fd\u4f4e\u4e0b\u306e\u5ea6\u5408\u3044\u306f\u5909\u308f\u308b\u3002\n\n    \u3053\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u3001`system_addLogFilter` \u3068 `system_resetLogFilter` RPC \u306f\u52b9\u679c\u304c\u306a\u3044\u3002\n\n--tracing-targets &lt;TARGETS&gt;\n    \u30ab\u30b9\u30bf\u30e0\u306e\u30d7\u30ed\u30d5\u30a1\u30a4\u30ea\u30f3\u30b0\u30d5\u30a3\u30eb\u30bf\u30fc\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\n    \u69cb\u6587\u306f\u30ed\u30b0\uff08`--log`\uff09\u3068\u540c\u3058\u3002\n\n--tracing-receiver &lt;RECEIVER&gt;\n    \u30c8\u30ec\u30fc\u30b7\u30f3\u30b0\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u53d7\u4fe1\u5148\n\n    [default: log]\n\n    \u53ef\u80fd\u306a\u5024:\n    - log: \u30ed\u30b0\u3092\u4f7f\u3063\u3066\u30c8\u30ec\u30fc\u30b7\u30f3\u30b0\u30ec\u30b3\u30fc\u30c9\u3092\u51fa\u529b\u3059\u308b\n\n--state-pruning &lt;PRUNING_MODE&gt;\n    \u72b6\u614b\u306e\u30d7\u30eb\u30fc\u30cb\u30f3\u30b0\u30e2\u30fc\u30c9\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n    \u3053\u306e\u30e2\u30fc\u30c9\u306f\u3001\u30d6\u30ed\u30c3\u30af\u306e\u72b6\u614b\uff08\u3059\u306a\u308f\u3061\u30b9\u30c8\u30ec\u30fc\u30b8\uff09\u3092\u3044\u3064\u30d7\u30eb\u30fc\u30cb\u30f3\u30b0\uff08\u524a\u9664\uff09\u3059\u308b\u304b\u3092\u6307\u5b9a\u3059\u308b\u3002\u3053\u306e\u8a2d\u5b9a\u306f\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u4f5c\u6210\u6642\u306e\u307f\u8a2d\u5b9a\u53ef\u80fd\u3002\u305d\u306e\u5f8c\u306e\u5b9f\u884c\u3067\u306f DB \u306b\u4fdd\u5b58\u3055\u308c\u305f\u30d7\u30eb\u30fc\u30cb\u30f3\u30b0\u30e2\u30fc\u30c9\u304c\u8aad\u307f\u8fbc\u307e\u308c\u3001CLI \u306e\u5024\u304c\u4e00\u81f4\u3057\u306a\u3044\u5834\u5408\u306f\u30a8\u30e9\u30fc\u306b\u306a\u308b\u3002\u4ee5\u964d\u306e\u5b9f\u884c\u3067\u3053\u306e CLI \u30d5\u30e9\u30b0\u3092\u5916\u3057\u3066\u3082\u554f\u984c\u306a\u3044\u3002\u552f\u4e00\u306e\u4f8b\u5916\u3068\u3057\u3066\u3001`NUMBER` \u306f\u5f8c\u7d9a\u306e\u5b9f\u884c\u3067\u5909\u66f4\u3067\u304d\u308b\uff08\u5897\u3084\u3057\u3066\u3082\u30d7\u30eb\u30fc\u30cb\u30f3\u30b0\u6e08\u307f\u72b6\u614b\u306f\u5fa9\u5143\u3055\u308c\u306a\u3044\uff09\u3002\n\n    \u53ef\u80fd\u306a\u5024:\n\n    - archive: \u3059\u3079\u3066\u306e\u30d6\u30ed\u30c3\u30af\u306e\u30c7\u30fc\u30bf\u3092\u4fdd\u6301\u3059\u308b\u3002\n\n    - archive-canonical: \u78ba\u5b9a\u6e08\u307f\u30d6\u30ed\u30c3\u30af\u306e\u30c7\u30fc\u30bf\u306e\u307f\u4fdd\u6301\u3059\u308b\u3002\n\n    - NUMBER: \u76f4\u8fd1 NUMBER \u4ef6\u306e\u78ba\u5b9a\u6e08\u307f\u30d6\u30ed\u30c3\u30af\u306e\u30c7\u30fc\u30bf\u306e\u307f\u4fdd\u6301\u3059\u308b\u3002\n\n    [default: 256]\n\n--blocks-pruning &lt;PRUNING_MODE&gt;\n    \u30d6\u30ed\u30c3\u30af\u306e\u30d7\u30eb\u30fc\u30cb\u30f3\u30b0\u30e2\u30fc\u30c9\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n    \u3053\u306e\u30e2\u30fc\u30c9\u306f\u3001\u30d6\u30ed\u30c3\u30af\u306e\u672c\u6587\uff08justifications \u3092\u542b\u3080\uff09\u3092\u3044\u3064\u30d7\u30eb\u30fc\u30cb\u30f3\u30b0\uff08\u524a\u9664\uff09\u3059\u308b\u304b\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n    \u53ef\u80fd\u306a\u5024:\n\n    - archive: \u3059\u3079\u3066\u306e\u30d6\u30ed\u30c3\u30af\u306e\u30c7\u30fc\u30bf\u3092\u4fdd\u6301\u3059\u308b\u3002\n\n    - archive-canonical: \u78ba\u5b9a\u6e08\u307f\u30d6\u30ed\u30c3\u30af\u306e\u30c7\u30fc\u30bf\u306e\u307f\u4fdd\u6301\u3059\u308b\u3002\n\n    - NUMBER: \u76f4\u8fd1 NUMBER \u4ef6\u306e\u78ba\u5b9a\u6e08\u307f\u30d6\u30ed\u30c3\u30af\u306e\u30c7\u30fc\u30bf\u306e\u307f\u4fdd\u6301\u3059\u308b\u3002\n\n    [default: archive-canonical]\n\n--database &lt;DB&gt;\n    \u4f7f\u7528\u3059\u308b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u3092\u9078\u629e\u3059\u308b\n\n    \u53ef\u80fd\u306a\u5024:\n    - paritydb:              ParityDb\u3002&lt;https://github.com/paritytech/parity-db/&gt;\n    - auto:                  \u65e2\u5b58\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u304c\u3042\u308b\u304b\u691c\u51fa\u3057\u3001\u3042\u308c\u3070\u305d\u308c\u3092\u4f7f\u3044\u3001\u306a\u3051\u308c\u3070\u65b0\u3057\u3044 ParityDb \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\u3059\u308b\n    - paritydb-experimental: ParityDb\u3002&lt;https://github.com/paritytech/parity-db/&gt;\n\n--db-cache &lt;MiB&gt;\n    \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30ad\u30e3\u30c3\u30b7\u30e5\u304c\u4f7f\u7528\u3067\u304d\u308b\u30e1\u30e2\u30ea\u3092\u5236\u9650\u3059\u308b\n\n--wasm-execution &lt;METHOD&gt;\n    Wasm \u30e9\u30f3\u30bf\u30a4\u30e0\u30b3\u30fc\u30c9\u306e\u5b9f\u884c\u65b9\u6cd5\n\n    [default: compiled]\n\n    \u53ef\u80fd\u306a\u5024:\n    - interpreted-i-know-what-i-do: \u73fe\u5728\u306f\u975e\u63a8\u5968\u306e\u30a4\u30f3\u30bf\u30fc\u30d7\u30ea\u30bf\u30fc\u3092\u4f7f\u7528\u3059\u308b\n    - compiled:                     \u30b3\u30f3\u30d1\u30a4\u30eb\u6e08\u307f\u30e9\u30f3\u30bf\u30a4\u30e0\u3092\u4f7f\u7528\u3059\u308b\n\n--wasmtime-instantiation-strategy &lt;STRATEGY&gt;\n    WASM \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\u65b9\u6cd5\u3002\n\n    `wasm-execution` \u304c `compiled` \u306e\u3068\u304d\u306e\u307f\u6709\u52b9\u3002copy-on-write \u306e\u6226\u7565\u306f Linux \u306e\u307f\u3067\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u308b\u3002copy-on-write \u7248\u306e\u6226\u7565\u304c\u672a\u30b5\u30dd\u30fc\u30c8\u306e\u5834\u5408\u3001\u30a8\u30b0\u30bc\u30ad\u30e5\u30fc\u30bf\u30fc\u306f\u975e CoW \u7248\u306b\u30d5\u30a9\u30fc\u30eb\u30d0\u30c3\u30af\u3059\u308b\u3002\u5229\u7528\u53ef\u80fd\u306a\u6700\u901f\uff08\u304b\u3064\u30c7\u30d5\u30a9\u30eb\u30c8\uff09\u306e\u6226\u7565\u306f `pooling-copy-on-write`\u3002`legacy-instance-reuse` \u306f\u975e\u63a8\u5968\u3067\u5c06\u6765\u524a\u9664\u3055\u308c\u308b\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u6226\u7565\u306b\u554f\u984c\u304c\u3042\u308b\u5834\u5408\u306e\u307f\u4f7f\u7528\u3059\u308b\u3053\u3068\u3002\n\n    [default: pooling-copy-on-write]\n\n    \u53ef\u80fd\u306a\u5024:\n    - pooling-copy-on-write:           \u5404\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\u3067\u306e\u521d\u671f\u5316\u3092\u907f\u3051\u308b\u305f\u3081\u306b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u30d7\u30fc\u30eb\u3059\u308b\u3002\u53ef\u80fd\u306a\u3089 copy-on-write \u30e1\u30e2\u30ea\u3092\u4f7f\u7528\u3059\u308b\n    - recreate-instance-copy-on-write: \u5404\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\u306e\u305f\u3073\u306b\u6700\u521d\u304b\u3089\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\u3059\u308b\u3002\u53ef\u80fd\u306a\u3089 copy-on-write \u30e1\u30e2\u30ea\u3092\u4f7f\u7528\u3059\u308b\n    - pooling:                         \u5404\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\u3067\u306e\u521d\u671f\u5316\u3092\u907f\u3051\u308b\u305f\u3081\u306b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u30d7\u30fc\u30eb\u3059\u308b\n    - recreate-instance:               \u5404\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\u306e\u305f\u3073\u306b\u6700\u521d\u304b\u3089\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\u3059\u308b\u3002\u975e\u5e38\u306b\u9045\u3044\n\n--wasm-runtime-overrides &lt;PATH&gt;\n    \u30ed\u30fc\u30ab\u30eb\u306e WASM \u30e9\u30f3\u30bf\u30a4\u30e0\u3092\u683c\u7d0d\u3059\u308b\u30d1\u30b9\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n    \u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u4e00\u81f4\u3059\u308b\u5834\u5408\u3001\u3053\u308c\u3089\u306e\u30e9\u30f3\u30bf\u30a4\u30e0\u304c\u30aa\u30f3\u30c1\u30a7\u30fc\u30f3\u306e\u30e9\u30f3\u30bf\u30a4\u30e0\u3092\u4e0a\u66f8\u304d\u3059\u308b\u3002\n\n--execution-syncing &lt;STRATEGY&gt;\n    \u521d\u671f\u540c\u671f\u6642\u306e\u30d6\u30ed\u30c3\u30af\u53d6\u308a\u8fbc\u307f\u306b\u304a\u3051\u308b\u30e9\u30f3\u30bf\u30a4\u30e0\u5b9f\u884c\u6226\u7565\n\n    \u53ef\u80fd\u306a\u5024:\n    - native:           \u30cd\u30a4\u30c6\u30a3\u30d6\u30d3\u30eb\u30c9\u3067\u5b9f\u884c\uff08\u5229\u7528\u53ef\u80fd\u306a\u3089\u3001\u305d\u3046\u3067\u306a\u3051\u308c\u3070 WebAssembly\uff09\n    - wasm:             WebAssembly \u30d3\u30eb\u30c9\u306e\u307f\u3067\u5b9f\u884c\n    - both:             \u30cd\u30a4\u30c6\u30a3\u30d6\uff08\u5229\u7528\u53ef\u80fd\u306a\u3089\uff09\u3068 WebAssembly \u306e\u4e21\u65b9\u3067\u5b9f\u884c\n    - native-else-wasm: \u53ef\u80fd\u306a\u3089\u30cd\u30a4\u30c6\u30a3\u30d6\u30d3\u30eb\u30c9\u3067\u5b9f\u884c\u3057\u3001\u5931\u6557\u3057\u305f\u3089 WebAssembly \u3067\u5b9f\u884c\n\n--execution-import-block &lt;STRATEGY&gt;\n    \u4e00\u822c\u7684\u306a\u30d6\u30ed\u30c3\u30af\u53d6\u308a\u8fbc\u307f\uff08\u30ed\u30fc\u30ab\u30eb\u3067\u751f\u6210\u3057\u305f\u30d6\u30ed\u30c3\u30af\u3092\u542b\u3080\uff09\u306b\u304a\u3051\u308b\u30e9\u30f3\u30bf\u30a4\u30e0\u5b9f\u884c\u6226\u7565\n\n    \u53ef\u80fd\u306a\u5024:\n    - native:           \u30cd\u30a4\u30c6\u30a3\u30d6\u30d3\u30eb\u30c9\u3067\u5b9f\u884c\uff08\u5229\u7528\u53ef\u80fd\u306a\u3089\u3001\u305d\u3046\u3067\u306a\u3051\u308c\u3070 WebAssembly\uff09\n    - wasm:             WebAssembly \u30d3\u30eb\u30c9\u306e\u307f\u3067\u5b9f\u884c\n    - both:             \u30cd\u30a4\u30c6\u30a3\u30d6\uff08\u5229\u7528\u53ef\u80fd\u306a\u3089\uff09\u3068 WebAssembly \u306e\u4e21\u65b9\u3067\u5b9f\u884c\n    - native-else-wasm: \u53ef\u80fd\u306a\u3089\u30cd\u30a4\u30c6\u30a3\u30d6\u30d3\u30eb\u30c9\u3067\u5b9f\u884c\u3057\u3001\u5931\u6557\u3057\u305f\u3089 WebAssembly \u3067\u5b9f\u884c\n\n--execution-block-construction &lt;STRATEGY&gt;\n    \u30d6\u30ed\u30c3\u30af\u69cb\u7bc9\u306b\u304a\u3051\u308b\u30e9\u30f3\u30bf\u30a4\u30e0\u5b9f\u884c\u6226\u7565\n\n    \u53ef\u80fd\u306a\u5024:\n    - native:           \u30cd\u30a4\u30c6\u30a3\u30d6\u30d3\u30eb\u30c9\u3067\u5b9f\u884c\uff08\u5229\u7528\u53ef\u80fd\u306a\u3089\u3001\u305d\u3046\u3067\u306a\u3051\u308c\u3070 WebAssembly\uff09\n    - wasm:             WebAssembly \u30d3\u30eb\u30c9\u306e\u307f\u3067\u5b9f\u884c\n    - both:             \u30cd\u30a4\u30c6\u30a3\u30d6\uff08\u5229\u7528\u53ef\u80fd\u306a\u3089\uff09\u3068 WebAssembly \u306e\u4e21\u65b9\u3067\u5b9f\u884c\n    - native-else-wasm: \u53ef\u80fd\u306a\u3089\u30cd\u30a4\u30c6\u30a3\u30d6\u30d3\u30eb\u30c9\u3067\u5b9f\u884c\u3057\u3001\u5931\u6557\u3057\u305f\u3089 WebAssembly \u3067\u5b9f\u884c\n\n--execution-offchain-worker &lt;STRATEGY&gt;\n    \u30aa\u30d5\u30c1\u30a7\u30fc\u30f3\u30ef\u30fc\u30ab\u30fc\u306b\u304a\u3051\u308b\u30e9\u30f3\u30bf\u30a4\u30e0\u5b9f\u884c\u6226\u7565\n\n    \u53ef\u80fd\u306a\u5024:\n    - native:           \u30cd\u30a4\u30c6\u30a3\u30d6\u30d3\u30eb\u30c9\u3067\u5b9f\u884c\uff08\u5229\u7528\u53ef\u80fd\u306a\u3089\u3001\u305d\u3046\u3067\u306a\u3051\u308c\u3070 WebAssembly\uff09\n    - wasm:             WebAssembly \u30d3\u30eb\u30c9\u306e\u307f\u3067\u5b9f\u884c\n    - both:             \u30cd\u30a4\u30c6\u30a3\u30d6\uff08\u5229\u7528\u53ef\u80fd\u306a\u3089\uff09\u3068 WebAssembly \u306e\u4e21\u65b9\u3067\u5b9f\u884c\n    - native-else-wasm: \u53ef\u80fd\u306a\u3089\u30cd\u30a4\u30c6\u30a3\u30d6\u30d3\u30eb\u30c9\u3067\u5b9f\u884c\u3057\u3001\u5931\u6557\u3057\u305f\u3089 WebAssembly \u3067\u5b9f\u884c\n\n--execution-other &lt;STRATEGY&gt;\n    \u540c\u671f\u30fb\u53d6\u308a\u8fbc\u307f\u30fb\u69cb\u7bc9\u4ee5\u5916\u3067\u306e\u30e9\u30f3\u30bf\u30a4\u30e0\u5b9f\u884c\u6226\u7565\n\n    \u53ef\u80fd\u306a\u5024:\n    - native:           \u30cd\u30a4\u30c6\u30a3\u30d6\u30d3\u30eb\u30c9\u3067\u5b9f\u884c\uff08\u5229\u7528\u53ef\u80fd\u306a\u3089\u3001\u305d\u3046\u3067\u306a\u3051\u308c\u3070 WebAssembly\uff09\n    - wasm:             WebAssembly \u30d3\u30eb\u30c9\u306e\u307f\u3067\u5b9f\u884c\n    - both:             \u30cd\u30a4\u30c6\u30a3\u30d6\uff08\u5229\u7528\u53ef\u80fd\u306a\u3089\uff09\u3068 WebAssembly \u306e\u4e21\u65b9\u3067\u5b9f\u884c\n    - native-else-wasm: \u53ef\u80fd\u306a\u3089\u30cd\u30a4\u30c6\u30a3\u30d6\u30d3\u30eb\u30c9\u3067\u5b9f\u884c\u3057\u3001\u5931\u6557\u3057\u305f\u3089 WebAssembly \u3067\u5b9f\u884c\n\n--execution &lt;STRATEGY&gt;\n    \u3059\u3079\u3066\u306e\u5b9f\u884c\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3067\u4f7f\u7528\u3059\u308b\u5b9f\u884c\u6226\u7565\n\n    \u53ef\u80fd\u306a\u5024:\n    - native:           \u30cd\u30a4\u30c6\u30a3\u30d6\u30d3\u30eb\u30c9\u3067\u5b9f\u884c\uff08\u5229\u7528\u53ef\u80fd\u306a\u3089\u3001\u305d\u3046\u3067\u306a\u3051\u308c\u3070 WebAssembly\uff09\n    - wasm:             WebAssembly \u30d3\u30eb\u30c9\u306e\u307f\u3067\u5b9f\u884c\n    - both:             \u30cd\u30a4\u30c6\u30a3\u30d6\uff08\u5229\u7528\u53ef\u80fd\u306a\u3089\uff09\u3068 WebAssembly \u306e\u4e21\u65b9\u3067\u5b9f\u884c\n    - native-else-wasm: \u53ef\u80fd\u306a\u3089\u30cd\u30a4\u30c6\u30a3\u30d6\u30d3\u30eb\u30c9\u3067\u5b9f\u884c\u3057\u3001\u5931\u6557\u3057\u305f\u3089 WebAssembly \u3067\u5b9f\u884c\n\n--trie-cache-size &lt;Bytes&gt;\n    \u72b6\u614b\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u30b5\u30a4\u30ba\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n    `0` \u3092\u6307\u5b9a\u3059\u308b\u3068\u30ad\u30e3\u30c3\u30b7\u30e5\u3092\u7121\u52b9\u5316\u3059\u308b\u3002\n\n    [default: 67108864]\n\n--state-cache-size &lt;STATE_CACHE_SIZE&gt;\n    \u975e\u63a8\u5968: `--trie-cache-size` \u306b\u5207\u308a\u66ff\u3048\u308b\u3053\u3068\n\n--bootnodes &lt;ADDR&gt;...\n    \u30d6\u30fc\u30c8\u30ce\u30fc\u30c9\u306e\u30ea\u30b9\u30c8\u3092\u6307\u5b9a\u3059\u308b\n\n--reserved-nodes &lt;ADDR&gt;...\n    \u4e88\u7d04\u30ce\u30fc\u30c9\u30a2\u30c9\u30ec\u30b9\u306e\u30ea\u30b9\u30c8\u3092\u6307\u5b9a\u3059\u308b\n\n--reserved-only\n    \u4e88\u7d04\u30ce\u30fc\u30c9\u306e\u307f\u3068\u30c1\u30a7\u30fc\u30f3\u3092\u540c\u671f\u3059\u308b\u304b\u3069\u3046\u304b\u3002\n\n    \u81ea\u52d5\u30d4\u30a2\u63a2\u7d22\u3082\u7121\u52b9\u5316\u3059\u308b\u3002TCP \u63a5\u7d9a\u306f\u975e\u4e88\u7d04\u30ce\u30fc\u30c9\u3068\u3082\u78ba\u7acb\u3055\u308c\u3046\u308b\u3002\u7279\u306b\u30d0\u30ea\u30c7\u30fc\u30bf\u30fc\u306e\u5834\u5408\u3001\u4e88\u7d04\u30ce\u30fc\u30c9\u3068\u3057\u3066\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u306b\u95a2\u308f\u3089\u305a\u3001\u4ed6\u306e\u30d0\u30ea\u30c7\u30fc\u30bf\u30fc\u30ce\u30fc\u30c9\u3084\u30b3\u30ec\u30fc\u30bf\u30fc\n    \u30ce\u30fc\u30c9\u306b\u63a5\u7d9a\u3059\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u3002\n\n--public-addr &lt;PUBLIC_ADDR&gt;...\n    \u4ed6\u306e\u30ce\u30fc\u30c9\u304c\u3053\u306e\u30ce\u30fc\u30c9\u306b\u63a5\u7d9a\u3059\u308b\u969b\u306b\u4f7f\u3046\u516c\u958b\u30a2\u30c9\u30ec\u30b9\u3002\n\n    \u3053\u306e\u30ce\u30fc\u30c9\u306e\u524d\u6bb5\u306b\u30d7\u30ed\u30ad\u30b7\u304c\u3042\u308b\u5834\u5408\u306b\u4f7f\u7528\u3067\u304d\u308b\u3002\n\n--listen-addr &lt;LISTEN_ADDR&gt;...\n    \u3053\u306e\u30de\u30eb\u30c1\u30a2\u30c9\u30ec\u30b9\u3067\u5f85\u3061\u53d7\u3051\u308b\u3002\n\n    \u30c7\u30d5\u30a9\u30eb\u30c8: `--validator` \u304c\u6e21\u3055\u308c\u305f\u5834\u5408\u306f `/ip4/0.0.0.0/tcp/&lt;port&gt;` \u3068 `/ip6/[::]/tcp/&lt;port&gt;`\u3002\u305d\u308c\u4ee5\u5916\u306f `/ip4/0.0.0.0/tcp/&lt;port&gt;/ws` \u3068 `/ip6/[::]/tcp/&lt;port&gt;/ws`\u3002\n\n--port &lt;PORT&gt;\n    p2p \u30d7\u30ed\u30c8\u30b3\u30eb\u306e TCP \u30dd\u30fc\u30c8\u3092\u6307\u5b9a\u3059\u308b\n\n--no-private-ip\n    \u5e38\u306b\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8 IPv4/IPv6 \u30a2\u30c9\u30ec\u30b9\u3078\u306e\u63a5\u7d9a\u3092\u7981\u6b62\u3059\u308b\u3002\n\n    `--reserved-nodes` \u307e\u305f\u306f `--bootnodes` \u3067\u6e21\u3055\u308c\u305f\u30a2\u30c9\u30ec\u30b9\u306b\u306f\u9069\u7528\u3055\u308c\u306a\u3044\u3002\u30c1\u30a7\u30fc\u30f3\u4ed5\u69d8\u3067 \"live\" \u3068\u30de\u30fc\u30af\u3055\u308c\u305f\u30c1\u30a7\u30fc\u30f3\u3067\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u6709\u52b9\u3002\n\n    \u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u30a2\u30c9\u30ec\u30b9\u5272\u308a\u5f53\u3066\u306f [RFC1918](https://tools.ietf.org/html/rfc1918)) \u3067\u898f\u5b9a\u3055\u308c\u308b\u3002\n\n--allow-private-ip\n    \u5e38\u306b\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8 IPv4/IPv6 \u30a2\u30c9\u30ec\u30b9\u3078\u306e\u63a5\u7d9a\u3092\u8a31\u53ef\u3059\u308b\u3002\n\n    \u30c1\u30a7\u30fc\u30f3\u4ed5\u69d8\u3067 \"local\" \u3068\u30de\u30fc\u30af\u3055\u308c\u305f\u30c1\u30a7\u30fc\u30f3\u3001\u307e\u305f\u306f `--dev` \u304c\u6307\u5b9a\u3055\u308c\u305f\u5834\u5408\u306b\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u6709\u52b9\u3002\n\n    \u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u30a2\u30c9\u30ec\u30b9\u5272\u308a\u5f53\u3066\u306f [RFC1918](https://tools.ietf.org/html/rfc1918)) \u3067\u898f\u5b9a\u3055\u308c\u308b\u3002\n\n--out-peers &lt;COUNT&gt;\n    \u7dad\u6301\u3057\u3088\u3046\u3068\u3059\u308b\u9001\u4fe1\u63a5\u7d9a\u6570\n\n    [default: 8]\n\n--in-peers &lt;COUNT&gt;\n    \u53d7\u4fe1\u3059\u308b\u30d5\u30eb\u30ce\u30fc\u30c9\u30d4\u30a2\u306e\u6700\u5927\u6570\n\n    [default: 32]\n\n--in-peers-light &lt;COUNT&gt;\n    \u53d7\u4fe1\u3059\u308b\u30e9\u30a4\u30c8\u30ce\u30fc\u30c9\u30d4\u30a2\u306e\u6700\u5927\u6570\n\n    [default: 100]\n\n--no-mdns\n    mDNS \u63a2\u7d22\u3092\u7121\u52b9\u5316\u3059\u308b\uff08\u30c7\u30d5\u30a9\u30eb\u30c8: true\uff09\u3002\n\n    \u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306f\u30ed\u30fc\u30ab\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u4e0a\u306e\u4ed6\u30ce\u30fc\u30c9\u3092 mDNS \u3067\u63a2\u7d22\u3059\u308b\u3002\u3053\u308c\u3092\u7121\u52b9\u5316\u3059\u308b\u3002`--dev` \u4f7f\u7528\u6642\u306f\u81ea\u52d5\u7684\u306b\u6307\u5b9a\u3055\u308c\u308b\u3002\n\n--max-parallel-downloads &lt;COUNT&gt;\n    \u540c\u3058\u30d6\u30ed\u30c3\u30af\u3092\u4e26\u5217\u306b\u8981\u6c42\u3059\u308b\u30d4\u30a2\u306e\u6700\u5927\u6570\u3002\n\n    \u8907\u6570\u30d4\u30a2\u304b\u3089\u901a\u77e5\u3055\u308c\u305f\u30d6\u30ed\u30c3\u30af\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3067\u304d\u308b\u3002\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u3092\u7bc0\u7d04\u3057\u3001\u9045\u5ef6\u304c\u5897\u3048\u308b\u30ea\u30b9\u30af\u3092\u4e0b\u3052\u308b\u306b\u306f\u5024\u3092\u5c0f\u3055\u304f\u3059\u308b\u3002\n\n    [default: 5]\n\n--node-key &lt;KEY&gt;\n    p2p \u30cd\u30c3\u30c8\u30ef\u30fc\u30ad\u30f3\u30b0\u306b\u4f7f\u3046\u79d8\u5bc6\u9375\u3002\n\n    \u5024\u306f `--node-key-type` \u306e\u9078\u629e\u306b\u5f93\u3063\u3066\u6b21\u306e\u3088\u3046\u306b\u89e3\u6790\u3055\u308c\u308b:\n\n    - `ed25519`: \u5024\u306f hex \u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f Ed25519 32 \u30d0\u30a4\u30c8\u79d8\u5bc6\u9375\uff0864 hex \u6587\u5b57\uff09\u3068\u3057\u3066\u89e3\u6790\u3055\u308c\u308b\n\n    \u3053\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u5024\u306f `--node-key-file` \u3088\u308a\u512a\u5148\u3055\u308c\u308b\u3002\n\n    \u8b66\u544a: \u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u5f15\u6570\u3068\u3057\u3066\u6e21\u3057\u305f\u79d8\u5bc6\u60c5\u5831\u306f\u5bb9\u6613\u306b\u9732\u51fa\u3059\u308b\u3002\u3053\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u4f7f\u7528\u306f\u958b\u767a\u3084\u30c6\u30b9\u30c8\u306b\u9650\u5b9a\u3059\u308b\u3053\u3068\u3002\u5916\u90e8\u3067\u7ba1\u7406\u3055\u308c\u305f\u79d8\u5bc6\u9375\u3092\u4f7f\u3046\u306b\u306f `--node-key-file` \u3092\u4f7f\u3046\u3002\n\n--node-key-type &lt;TYPE&gt;\n    p2p \u30cd\u30c3\u30c8\u30ef\u30fc\u30ad\u30f3\u30b0\u306b\u4f7f\u3046\u6697\u53f7\u30d7\u30ea\u30df\u30c6\u30a3\u30d6\u3002\n\n    \u30ce\u30fc\u30c9\u306e\u79d8\u5bc6\u9375\u306f\u4ee5\u4e0b\u306e\u624b\u9806\u3067\u53d6\u5f97\u3055\u308c\u308b:\n\n    - `--node-key` \u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u6307\u5b9a\u3055\u308c\u305f\u5834\u5408\u3001\u5024\u306f\u305d\u306e\u30bf\u30a4\u30d7\u306b\u5f93\u3063\u3066\u79d8\u5bc6\u9375\u3068\u3057\u3066\u89e3\u6790\u3055\u308c\u308b\u3002`--node-key` \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u53c2\u7167\u3002\n\n    - `--node-key-file` \u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u6307\u5b9a\u3055\u308c\u305f\u5834\u5408\u3001\u79d8\u5bc6\u9375\u306f\u6307\u5b9a\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u8aad\u307f\u8fbc\u307e\u308c\u308b\u3002`--node-key-file` \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u53c2\u7167\u3002\n\n    - \u305d\u308c\u4ee5\u5916\u306f\u3001`--base-dir` \u3067\u6307\u5b9a\u3055\u308c\u305f\u30d9\u30fc\u30b9\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u306e\u30c1\u30a7\u30fc\u30f3\u56fa\u6709\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u8a2d\u5b9a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u3042\u308b\u3001\u30bf\u30a4\u30d7\u5225\u306e\u65e2\u5b9a\u30d5\u30a1\u30a4\u30eb\u540d\u304b\u3089\u79d8\u5bc6\u9375\u3092\u8aad\u307f\u8fbc\u3080\u3002\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u5b58\u5728\u3057\u306a\u3044\u5834\u5408\u3001\u9078\u629e\u3057\u305f\u30bf\u30a4\u30d7\u306e\u65b0\u3057\u3044\u79d8\u5bc6\u9375\u304c\u751f\u6210\u3055\u308c\u308b\u3002\n\n    \u30ce\u30fc\u30c9\u306e\u79d8\u5bc6\u9375\u306f\u5bfe\u5fdc\u3059\u308b\u516c\u958b\u9375\u3092\u6c7a\u5b9a\u3057\u3001libp2p \u306e\u6587\u8108\u306b\u304a\u3051\u308b\u30ce\u30fc\u30c9\u306e\u30d4\u30a2 ID \u3092\u6c7a\u5b9a\u3059\u308b\u3002\n\n    [default: ed25519]\n\n    \u53ef\u80fd\u306a\u5024:\n    - ed25519: ed25519 \u3092\u4f7f\u7528\u3059\u308b\n\n--node-key-file &lt;FILE&gt;\n    p2p \u30cd\u30c3\u30c8\u30ef\u30fc\u30ad\u30f3\u30b0\u306b\u4f7f\u3046\u30ce\u30fc\u30c9\u306e\u79d8\u5bc6\u9375\u3092\u8aad\u307f\u8fbc\u3080\u30d5\u30a1\u30a4\u30eb\u3002\n\n    \u30d5\u30a1\u30a4\u30eb\u306e\u5185\u5bb9\u306f `--node-key-type` \u306e\u9078\u629e\u306b\u5f93\u3063\u3066\u6b21\u306e\u3088\u3046\u306b\u89e3\u6790\u3055\u308c\u308b:\n\n    - `ed25519`: \u30d5\u30a1\u30a4\u30eb\u306b\u306f\u672a\u30a8\u30f3\u30b3\u30fc\u30c9\u306e 32 \u30d0\u30a4\u30c8\u3001\u307e\u305f\u306f hex \u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f Ed25519 \u79d8\u5bc6\u9375\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\n    \u30d5\u30a1\u30a4\u30eb\u304c\u5b58\u5728\u3057\u306a\u3044\u5834\u5408\u3001\u9078\u629e\u3057\u305f\u30bf\u30a4\u30d7\u306e\u65b0\u3057\u3044\u79d8\u5bc6\u9375\u304c\u751f\u6210\u3055\u308c\u308b\u3002\n\n--unsafe-force-node-key-generation\n    node-key-file \u304c\u5b58\u5728\u3057\u306a\u3044\u5834\u5408\u306b\u9375\u751f\u6210\u3092\u5f37\u5236\u3059\u308b\u3002\n\n    \u3053\u308c\u306f\u672c\u756a\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306b\u306f\u5b89\u5168\u3067\u306a\u3044\u6a5f\u80fd\u3002\u30a2\u30af\u30c6\u30a3\u30d6\u306a\u30aa\u30fc\u30bd\u30ea\u30c6\u30a3\u3068\u3057\u3066\u3001\u4ed6\u306e\u30aa\u30fc\u30bd\u30ea\u30c6\u30a3\u306f\u5b89\u5b9a\u3057\u305f\u30a2\u30a4\u30c7\u30f3\u30c6\u30a3\u30c6\u30a3\u306b\u4f9d\u5b58\u3059\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u3001\u30a2\u30af\u30c6\u30a3\u30d6\u30bb\u30c3\u30c8\u306b\u53c2\u52a0\u3057\u305f\u5f8c\u306b ID \u304c\u5909\u308f\u308b\u3068\u5230\u9054\u3067\u304d\u306a\u304f\u306a\u308b\u3053\u3068\u304c\u3042\u308b\u3002\n\n    \u30ab\u30b9\u30bf\u30e0 `node-key-file` \u5f15\u6570\u304c\u63d0\u4f9b\u3055\u308c\u306a\u3044\u5834\u5408\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30ad\u30fc\u306f\u901a\u5e38\u3001`--base-path` \u3067\u6307\u5b9a\u3055\u308c\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u306e `network` \u30d5\u30a9\u30eb\u30c0\u30fc\u306b\u30ce\u30fc\u30c9\u518d\u8d77\u52d5\u9593\u3067\u4fdd\u6301\u3055\u308c\u308b\u3002\n\n    \u8b66\u544a!! \u3053\u306e\u5f15\u6570\u3092\u6307\u5b9a\u3057\u3066\u30ce\u30fc\u30c9\u3092\u5b9f\u884c\u3057\u305f\u5834\u5408\u3001\u6b21\u56de\u4ee5\u964d\u306e\u518d\u8d77\u52d5\u3067\u306f\u5fc5\u305a\u524a\u9664\u3059\u308b\u3053\u3068\u3002\n\n--discover-local\n    \u30ed\u30fc\u30ab\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3067\u306e\u30d4\u30a2\u63a2\u7d22\u3092\u6709\u52b9\u5316\u3059\u308b\u3002\n\n    \u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001`--dev` \u304c\u6307\u5b9a\u3055\u308c\u305f\u5834\u5408\u3001\u307e\u305f\u306f\u30c1\u30a7\u30fc\u30f3\u30bf\u30a4\u30d7\u304c `Local`/`Development` \u306e\u5834\u5408\u306f `true`\u3001\u305d\u308c\u4ee5\u5916\u306f false\u3002\n\n--kademlia-disjoint-query-paths\n    \u53cd\u5fa9\u7684\u306a Kademlia DHT \u30af\u30a8\u30ea\u3067\u4e92\u3044\u306b\u4ea4\u308f\u3089\u306a\u3044\u30d1\u30b9\u306e\u4f7f\u7528\u3092\u8981\u6c42\u3059\u308b\u3002\n\n    \u4e92\u3044\u306b\u4ea4\u308f\u3089\u306a\u3044\u30d1\u30b9\u306f\u3001\u6f5c\u5728\u7684\u306b\u6575\u5bfe\u7684\u306a\u30ce\u30fc\u30c9\u306e\u5b58\u5728\u4e0b\u3067\u306e\u56de\u5fa9\u529b\u3092\u9ad8\u3081\u308b\u3002\n\n    \u9ad8\u30ec\u30d9\u30eb\u8a2d\u8a08\u3068\u305d\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u6539\u5584\u306b\u3064\u3044\u3066\u306f S/Kademlia \u8ad6\u6587\u3092\u53c2\u7167\u3002\n\n--kademlia-replication-factor &lt;KADEMLIA_REPLICATION_FACTOR&gt;\n    Kademlia \u306e\u30ec\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u4fc2\u6570\u3002\n\n    \u30ec\u30b3\u30fc\u30c9\u304c\u6700\u3082\u8fd1\u3044\u3069\u306e\u30d4\u30a2\u306b\u8907\u88fd\u3055\u308c\u308b\u304b\u3092\u6c7a\u5b9a\u3059\u308b\u3002\n\n    Discovery \u30e1\u30ab\u30cb\u30ba\u30e0\u306f\u3001\u3059\u3079\u3066\u306e `kademlia_replication_factor` \u30d4\u30a2\u3078\u306e\u8907\u88fd\u304c\u6210\u529f\u3057\u305f\u5834\u5408\u306e\u307f\u3001\u30ec\u30b3\u30fc\u30c9\u304c\u6b63\u5e38\u306b\u6295\u5165\u3055\u308c\u305f\u3068\u307f\u306a\u3059\u3002\n\n    [default: 20]\n\n--ipfs-server\n    IPFS \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306b\u53c2\u52a0\u3057\u3001bitswap \u30d7\u30ed\u30c8\u30b3\u30eb\u3067\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u63d0\u4f9b\u3059\u308b\n\n--sync &lt;SYNC_MODE&gt;\n    \u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u306e\u540c\u671f\u30e2\u30fc\u30c9\u3002\n\n    [default: full]\n\n    \u53ef\u80fd\u306a\u5024:\n    - full:        \u30d5\u30eb\u540c\u671f\u3002\u3059\u3079\u3066\u306e\u30d6\u30ed\u30c3\u30af\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u691c\u8a3c\u3059\u308b\n    - fast:        \u30d6\u30ed\u30c3\u30af\u3092\u5b9f\u884c\u305b\u305a\u306b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u3002\u8a3c\u660e\u4ed8\u304d\u3067\u6700\u65b0\u306e\u72b6\u614b\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\n    - fast-unsafe: \u30d6\u30ed\u30c3\u30af\u3092\u5b9f\u884c\u305b\u305a\u306b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u3002\u8a3c\u660e\u306a\u3057\u3067\u6700\u65b0\u306e\u72b6\u614b\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\n    - warp:        \u6700\u7d42\u6027\u3092\u8a3c\u660e\u3057\u3001\u6700\u65b0\u306e\u72b6\u614b\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\n\n--max-blocks-per-request &lt;COUNT&gt;\n    1 \u30ea\u30af\u30a8\u30b9\u30c8\u3042\u305f\u308a\u306e\u6700\u5927\u30d6\u30ed\u30c3\u30af\u6570\u3002\n\n    \u4f4e\u901f\u306a\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u63a5\u7d9a\u3067\u30d6\u30ed\u30c3\u30af\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u304c\u898b\u3089\u308c\u308b\u5834\u5408\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u304b\u3089\u6e1b\u3089\u3059\u3053\u3068\u3092\u8a66\u3059\u3002\n\n    [default: 64]\n\n--network-backend &lt;NETWORK_BACKEND&gt;\n    P2P \u30cd\u30c3\u30c8\u30ef\u30fc\u30ad\u30f3\u30b0\u306b\u4f7f\u3046\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u3002\n\n    litep2p \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u306f\u5b9f\u9a13\u7684\u3067\u3001libp2p \u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u307b\u3069\u5b89\u5b9a\u3057\u3066\u3044\u306a\u3044\u3002\n\n    [default: libp2p]\n\n    \u53ef\u80fd\u306a\u5024:\n    - libp2p:  P2P \u30cd\u30c3\u30c8\u30ef\u30fc\u30ad\u30f3\u30b0\u306b libp2p \u3092\u4f7f\u3046\n    - litep2p: P2P \u30cd\u30c3\u30c8\u30ef\u30fc\u30ad\u30f3\u30b0\u306b litep2p \u3092\u4f7f\u3046\n\n--pool-limit &lt;COUNT&gt;\n    \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30d7\u30fc\u30eb\u5185\u306e\u6700\u5927\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u6570\n\n    [default: 8192]\n\n--pool-kbytes &lt;COUNT&gt;\n    \u30d7\u30fc\u30eb\u306b\u4fdd\u5b58\u3055\u308c\u308b\u5168\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306e\u6700\u5927\u30ad\u30ed\u30d0\u30a4\u30c8\u6570\n\n    [default: 20480]\n\n--tx-ban-seconds &lt;SECONDS&gt;\n    \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306e\u7981\u6b62\u671f\u9593\u3002\n\n    \u7121\u52b9\u3068\u5224\u65ad\u3055\u308c\u305f\u5834\u5408\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306f 1800 \u79d2\u3002\n\n--keystore-path &lt;PATH&gt;\n    \u30ab\u30b9\u30bf\u30e0\u306e\u30ad\u30fc\u30b9\u30c8\u30a2\u30d1\u30b9\u3092\u6307\u5b9a\u3059\u308b\n\n--password-interactive\n    \u30ad\u30fc\u30b9\u30c8\u30a2\u3067\u4f7f\u3046\u30d1\u30b9\u30ef\u30fc\u30c9\u5165\u529b\u306b\u5bfe\u8a71\u30b7\u30a7\u30eb\u3092\u4f7f\u3046\n\n--password &lt;PASSWORD&gt;\n    \u30ad\u30fc\u30b9\u30c8\u30a2\u306b\u4f7f\u3046\u30d1\u30b9\u30ef\u30fc\u30c9\u3002\n\n    \u3053\u308c\u306b\u3088\u308a\u30b7\u30fc\u30c9\u306b\u30e6\u30fc\u30b6\u30fc\u5b9a\u7fa9\u306e\u8ffd\u52a0\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u4ed8\u52a0\u3067\u304d\u308b\u3002\n\n--password-filename &lt;PATH&gt;\n    \u30ad\u30fc\u30b9\u30c8\u30a2\u306b\u4f7f\u3046\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u5165\u3063\u305f\u30d5\u30a1\u30a4\u30eb\n\n--alice\n    `--name Alice --validator` \u306e\u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8\u3002\n\n    `Alice` \u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u30ad\u30fc\u304c\u30ad\u30fc\u30b9\u30c8\u30a2\u306b\u8ffd\u52a0\u3055\u308c\u308b\u3002\n\n--bob\n    `--name Bob --validator` \u306e\u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8\u3002\n\n    `Bob` \u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u30ad\u30fc\u304c\u30ad\u30fc\u30b9\u30c8\u30a2\u306b\u8ffd\u52a0\u3055\u308c\u308b\u3002\n\n--charlie\n    `--name Charlie --validator` \u306e\u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8\u3002\n\n    `Charlie` \u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u30ad\u30fc\u304c\u30ad\u30fc\u30b9\u30c8\u30a2\u306b\u8ffd\u52a0\u3055\u308c\u308b\u3002\n\n--dave\n    `--name Dave --validator` \u306e\u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8\u3002\n\n    `Dave` \u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u30ad\u30fc\u304c\u30ad\u30fc\u30b9\u30c8\u30a2\u306b\u8ffd\u52a0\u3055\u308c\u308b\u3002\n\n--eve\n    `--name Eve --validator` \u306e\u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8\u3002\n\n    `Eve` \u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u30ad\u30fc\u304c\u30ad\u30fc\u30b9\u30c8\u30a2\u306b\u8ffd\u52a0\u3055\u308c\u308b\u3002\n\n--ferdie\n    `--name Ferdie --validator` \u306e\u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8\u3002\n\n    `Ferdie` \u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u30ad\u30fc\u304c\u30ad\u30fc\u30b9\u30c8\u30a2\u306b\u8ffd\u52a0\u3055\u308c\u308b\u3002\n\n--one\n    `--name One --validator` \u306e\u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8\u3002\n\n    `One` \u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u30ad\u30fc\u304c\u30ad\u30fc\u30b9\u30c8\u30a2\u306b\u8ffd\u52a0\u3055\u308c\u308b\u3002\n\n--two\n    `--name Two --validator` \u306e\u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8\u3002\n\n    `Two` \u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u30ad\u30fc\u304c\u30ad\u30fc\u30b9\u30c8\u30a2\u306b\u8ffd\u52a0\u3055\u308c\u308b\u3002\n\n--force-authoring\n    \u30aa\u30d5\u30e9\u30a4\u30f3\u6642\u3067\u3082\u30d6\u30ed\u30c3\u30af\u751f\u6210\u3092\u6709\u52b9\u306b\u3059\u308b\n\n--tmp\n    \u4e00\u6642\u30ce\u30fc\u30c9\u3068\u3057\u3066\u5b9f\u884c\u3059\u308b\u3002\n\n    \u8a2d\u5b9a\u306e\u4fdd\u5b58\u7528\u306b\u4e00\u6642\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u4f5c\u6210\u3055\u308c\u3001\u30d7\u30ed\u30bb\u30b9\u7d42\u4e86\u6642\u306b\u524a\u9664\u3055\u308c\u308b\u3002\n\n    \u6ce8: \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f\u30d7\u30ed\u30bb\u30b9\u5b9f\u884c\u3054\u3068\u306b\u30e9\u30f3\u30c0\u30e0\u3002\u3053\u308c\u306f\u30d9\u30fc\u30b9\u30d1\u30b9\u3068\u3057\u3066\u4f7f\u7528\u3055\u308c\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3001\u30ce\u30fc\u30c9\u30ad\u30fc\u3001\u30ad\u30fc\u30b9\u30c8\u30a2\u3092\u542b\u3080\u3002\n\n    `--dev` \u304c\u6307\u5b9a\u3055\u308c\u3001\u660e\u793a\u7684\u306a `--base-path` \u304c\u306a\u3044\u5834\u5408\u3001\u3053\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u6697\u9ed9\u7684\u306b\u6307\u5b9a\u3055\u308c\u308b\u3002\n\n-h, --help\n        \u30d8\u30eb\u30d7\u3092\u8868\u793a\u3059\u308b\uff08'-h' \u3067\u6982\u8981\uff09\n\n================================================================================\nChainSpecCfg\n================================================================================\n\nNAME:          genesis_utxo\nHELP:          chain-spec \u751f\u6210: genesis_utxo \u306e\u305f\u3081\u306e\u30d1\u30fc\u30c8\u30ca\u30fc\u30c1\u30a7\u30fc\u30f3\u30d1\u30e9\u30e1\u30fc\u30bf\nTYPE:          Option &lt; UtxoId &gt;\nDEFAULT:       \nSOURCES:       \nCURRENT_VALUE: &lt;unset&gt;\n\nNAME:          addresses_json\nHELP:          partnerchains \u304c\u63d0\u4f9b\u3059\u308b partner-chains-cli \u306e\u51fa\u529b\u30d5\u30a1\u30a4\u30eb\u3002\n            \u5b9f\u884c\u6642\u306b\u30ce\u30fc\u30c9\u3078\u8a2d\u5b9a\u3092\u63d0\u4f9b\u3059\u308b\u305f\u3081\u306b\u5fc5\u8981\u3002\nTYPE:          Option &lt; String &gt;\nDEFAULT:       \nSOURCES:       \nCURRENT_VALUE: &lt;unset&gt;\n\n================================================================================\nMetaCfg\n================================================================================\n\nNAME:          cfg_preset\nHELP:          \u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u5024\u306e\u30d7\u30ea\u30bb\u30c3\u30c8\u3092\u4f7f\u7528\u3059\u308b\nTYPE:          Option &lt; CfgPreset &gt;\nDEFAULT:       \nSOURCES:       \nCURRENT_VALUE: &lt;unset&gt;\n\nNAME:          show_config\nHELP:          \u8d77\u52d5\u6642\u306b\u8a2d\u5b9a\u3092\u8868\u793a\u3059\u308b\nTYPE:          bool\nDEFAULT:       false\nSOURCES:       default\nCURRENT_VALUE: false\n\nNAME:          show_secrets\nHELP:          \u8a2d\u5b9a\u306b\u542b\u307e\u308c\u308b\u79d8\u5bc6\u60c5\u5831\u3092\u8868\u793a\u3059\u308b\nTYPE:          bool\nDEFAULT:       false\nSOURCES:       default\nCURRENT_VALUE: false\n\n================================================================================\nMidnightCfg\n================================================================================\n\nNAME:          wipe_chain_state\nHELP:          \u8d77\u52d5\u6642\u306b\u30c1\u30a7\u30fc\u30f3\u3092\u6d88\u53bb\u3059\u308b\nTYPE:          bool\nDEFAULT:       false\nSOURCES:       default\nCURRENT_VALUE: false\n\nNAME:          seed_phrase\nHELP:          \u3053\u306e\u30ce\u30fc\u30c9\u306e\u30aa\u30fc\u30b5\u30ea\u30f3\u30b0\u6a5f\u80fd\u3067\u4f7f\u3046\u30ad\u30fc\u3092\u30ad\u30fc\u30b9\u30c8\u30a2\u306b\u633f\u5165\u3059\u308b\u305f\u3081\u306e\u30b7\u30fc\u30c9\u3002\n            \u3053\u308c\u306f\u5fc5\u8981\u306a\u30ad\u30fc\u4e09\u3064\u7d44\uff08`aura`\u3001`grandpa`\u3001`cross_chain`\uff09\u3092\u81ea\u52d5\u751f\u6210\u3059\u308b\u3002\nTYPE:          Option &lt; String &gt;\nDEFAULT:       \nSOURCES:       \nCURRENT_VALUE: &lt;unset&gt;\n\nNAME:          use_main_chain_follower_mock\nHELP:          ariadne \u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u30e2\u30c3\u30af\nTYPE:          bool\nDEFAULT:       false\nSOURCES:       default\nCURRENT_VALUE: false\n\nNAME:          main_chain_follower_mock_registrations_file\nHELP:          use_main_chain_follower_mock \u304c true \u306e\u5834\u5408\u306b\u5fc5\u8981\n            sidechains \u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u4f7f\u7528\u3055\u308c\u308b\nTYPE:          Option &lt; String &gt;\nDEFAULT:       \nSOURCES:       \nCURRENT_VALUE: &lt;unset&gt;\n\nNAME:          mc__first_epoch_timestamp_millis\nHELP:          partner-chains \u306e EpochConfig \u3092\u53c2\u7167\nTYPE:          u64\nDEFAULT:       1666656000000\nSOURCES:       default\nCURRENT_VALUE: 1666656000000\n\nNAME:          mc__first_epoch_number\nHELP:          partner-chains \u306e EpochConfig \u3092\u53c2\u7167\nTYPE:          u32\nDEFAULT:       0\nSOURCES:       default\nCURRENT_VALUE: 0\n\nNAME:          mc__epoch_duration_millis\nHELP:          partner-chains \u306e EpochConfig \u3092\u53c2\u7167\nTYPE:          u64\nDEFAULT:       86400000\nSOURCES:       default\nCURRENT_VALUE: 86400000\n\nNAME:          mc__first_slot_number\nHELP:          partner-chains \u306e EpochConfig \u3092\u53c2\u7167\nTYPE:          u64\nDEFAULT:       0\nSOURCES:       default\nCURRENT_VALUE: 0\n\nNAME:          db_sync_postgres_connection_string\nHELP:          partner-chains \u306e ConnectionConfig \u3092\u53c2\u7167\nTYPE:          Option &lt; String &gt;\nDEFAULT:       \nSOURCES:       \nCURRENT_VALUE: &lt;unset&gt;\n\nNAME:          cardano_security_parameter\nHELP:          partner-chains \u306e CandidateDataSourceCacheConfig \u3068 DbSyncBlockDataSourceConfig \u3092\u53c2\u7167\nTYPE:          Option &lt; u32 &gt;\nDEFAULT:       432\nSOURCES:       default\nCURRENT_VALUE: 432\n\nNAME:          cardano_active_slots_coeff\nHELP:          partner-chains \u306e DbSyncBlockDataSourceConfig \u3092\u53c2\u7167\nTYPE:          Option &lt; f64 &gt;\nDEFAULT:       0.05\nSOURCES:       default\nCURRENT_VALUE: 0.05\n\nNAME:          block_stability_margin\nHELP:          partner-chains \u306e DbSyncBlockDataSourceConfig \u3092\u53c2\u7167\nTYPE:          Option &lt; u32 &gt;\nDEFAULT:       0\nSOURCES:       default\nCURRENT_VALUE: 0\n\nNAME:          proposed_wasm_file\nHELP:          Midnight \u30e9\u30f3\u30bf\u30a4\u30e0\u306e\u65b0\u3057\u3044\u30e9\u30f3\u30bf\u30a4\u30e0\u30d5\u30a1\u30a4\u30eb\u306e\u4efb\u610f\u63d0\u6848\u3002\n            \u30b9\u30da\u30c3\u30af\u30d0\u30fc\u30b8\u30e7\u30f3\u3068\u30b3\u30fc\u30c9\u30cf\u30c3\u30b7\u30e5\u304c\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u62bd\u51fa\u3055\u308c\u3001\u305d\u3046\u3067\u306a\u3051\u308c\u3070\u30c7\u30d5\u30a9\u30eb\u30c8\u30d1\u30b9\u304c\u4f7f\u7528\u3055\u308c\u308b\u3002\n            \u30c7\u30d5\u30a9\u30eb\u30c8\u30d1\u30b9\u306b\u306a\u3044\u5834\u5408\u3001\u30ce\u30fc\u30c9\u306f\u30e9\u30f3\u30bf\u30a4\u30e0\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u306e\u305f\u3081\u306b\u6607\u683c\u3059\u3079\u304d WASM \u306b\u8cdb\u6210\u7968\u3092\u6295\u3058\u306a\u3044\nTYPE:          Option &lt; String &gt;\nDEFAULT:       \nSOURCES:       \nCURRENT_VALUE: &lt;unset&gt;\n\nNAME:          storage_cache_size\nHELP:          \u30ec\u30b8\u30e3\u30fc\u306e\u30b9\u30c8\u30ec\u30fc\u30b8\u30ad\u30e3\u30c3\u30b7\u30e5\u30b5\u30a4\u30ba\uff08\u30ce\u30fc\u30c9\u6570\uff09\nTYPE:          usize\nDEFAULT:       0\nSOURCES:       default\nCURRENT_VALUE: 0\n\n================================================================================\nStorageMonitorParamsCfg\n================================================================================\n\nNAME:          threshold\nHELP:          \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30b9\u30c8\u30ec\u30fc\u30b8\u306e\u5fc5\u8981\u306a\u7a7a\u304d\u5bb9\u91cf\nTYPE:          u64\nDEFAULT:       512\nSOURCES:       default\nCURRENT_VALUE: 512\n\nNAME:          polling_period\nHELP:          \u7a7a\u304d\u5bb9\u91cf\u3092\u30dd\u30fc\u30ea\u30f3\u30b0\u3059\u308b\u983b\u5ea6\nTYPE:          u32\nDEFAULT:       5\nSOURCES:       default\nCURRENT_VALUE: 5\n\n================================================================================\nSubstrateCfg\n================================================================================\n\nNAME:          argv\nHELP:          \u524a\u9664\u6e08\u307f: \u4ee3\u308f\u308a\u306b \"args\" \u3092\u4f7f\u7528\n            \u30d0\u30a4\u30ca\u30ea\u3092\u542b\u3080\u3001\u30ce\u30fc\u30c9\u306b\u6e21\u3055\u308c\u308b\u5f15\u6570\nTYPE:          Vec &lt; String &gt;\nDEFAULT:       \nSOURCES:       default\nCURRENT_VALUE: \"\"\n\nNAME:          args\nHELP:          \u30ce\u30fc\u30c9\u306b\u6e21\u3055\u308c\u308b\u5f15\u6570\nTYPE:          Vec &lt; String &gt;\nDEFAULT:       \nSOURCES:       cli\nCURRENT_VALUE: \"--help, \"\n\nNAME:          append_args\nHELP:          args \u306b\u8ffd\u52a0\u3059\u308b\u8ffd\u52a0\u5f15\u6570\nTYPE:          Vec &lt; String &gt;\nDEFAULT:       \nSOURCES:       default\nCURRENT_VALUE: \"\"\n\nNAME:          base_path\nHELP:          base_path \u306e\u4efb\u610f\u306e\u4e0a\u66f8\u304d\u3002argv \u306e --base-path \u304c\u512a\u5148\u3055\u308c\u308b\nTYPE:          Option &lt; String &gt;\nDEFAULT:       \nSOURCES:       \nCURRENT_VALUE: &lt;unset&gt;\n\nNAME:          node_key\nHELP:          node_key \u306e\u4efb\u610f\u306e\u4e0a\u66f8\u304d\u3002argv \u306e --node-key \u304c\u512a\u5148\u3055\u308c\u308b\nTYPE:          Option &lt; String &gt;\nDEFAULT:       \nSOURCES:       \nCURRENT_VALUE: &lt;unset&gt;\n\nNAME:          chain\nHELP:          chain \u306e\u4efb\u610f\u306e\u4e0a\u66f8\u304d\u3002argv \u306e --chain \u304c\u512a\u5148\u3055\u308c\u308b\nTYPE:          Option &lt; String &gt;\nDEFAULT:       \nSOURCES:       \nCURRENT_VALUE: &lt;unset&gt;\n\nNAME:          validator\nHELP:          argv \u306e --validator \u306e\u4e0a\u66f8\u304d\nTYPE:          bool\nDEFAULT:       false\nSOURCES:       default\nCURRENT_VALUE: false\n\nNAME:          bootnodes\nHELP:          \u30d6\u30fc\u30c8\u30ce\u30fc\u30c9\u306e\u30ea\u30b9\u30c8\u306b\u8ffd\u52a0\u3059\u308b\nTYPE:          Vec &lt; MultiaddrWithPeerId &gt;\nDEFAULT:       \nSOURCES:       default\nCURRENT_VALUE: \"\"\n\nNAME:          trie_cache_size\nHELP:          --trie_cache_size \u306e\u4e0a\u66f8\u304d\u3002argv \u306e --trie-cache-size \u304c\u512a\u5148\u3055\u308c\u308b\uff08\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306b\u8a2d\u5b9a\u3055\u308c\u306a\u3044\u9650\u308a\uff09\u3002\nTYPE:          Option &lt; usize &gt;\nDEFAULT:       0\nSOURCES:       default\nCURRENT_VALUE: 0\n\nCONFIG PRESET: None\nVALIDATION RESULT: \u8a2d\u5b9a\u306e\u691c\u8a3c\u306b\u5931\u6557: config error: {\"errors\":[\"ariadne \u304c\u6709\u52b9\uff08use_main_chain_follower_mock \u304c false\uff09\u306e\u5834\u5408\u306f db_sync_postgres_connection_string \u3092\u5b9a\u7fa9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\"],\"properties\":{}}\n*note:* \u79d8\u5bc6\u60c5\u5831\u306e\u5024\u3092\u8868\u793a\u3059\u308b\u306b\u306f\u3001SHOW_SECRETS=1 \u3092\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\n\nMidnight \u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u30ce\u30fc\u30c9\u3002&lt;COMMAND&gt; \u306a\u3057\u3067\u5b9f\u884c\u3059\u308b\u3068\u30ce\u30fc\u30c9\u304c\u8d77\u52d5\u3059\u308b\u3002\u5168\u8a2d\u5b9a\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u898b\u308b\u306b\u306f\u3001\u5f15\u6570\u306a\u3057\u3067\u74b0\u5883\u5909\u6570 SHOW_CONFIG=TRUE \u3092\u6307\u5b9a\u3059\u308b\u304b --help \u3092\u5b9f\u884c\u3059\u308b\n\n\u4f7f\u7528\u6cd5: midnight-node &lt;COMMAND&gt;\n\n\u30b3\u30de\u30f3\u30c9:\nkey                      \u9375\u7ba1\u7406 CLI \u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\nsidechain-params         \u30b5\u30a4\u30c9\u30c1\u30a7\u30fc\u30f3\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u8fd4\u3059\nregistration-status      \u6307\u5b9a\u3057\u305f\u30e1\u30a4\u30f3\u30c1\u30a7\u30fc\u30f3\u516c\u958b\u9375\u3068\u30a8\u30dd\u30c3\u30af\u756a\u53f7\u306e\u767b\u9332\u72b6\u6cc1\u3092\u8fd4\u3059\u3002\u767b\u9332\u304c\u30a8\u30dd\u30c3\u30af N \u306e Cardano \u30d6\u30ed\u30c3\u30af\u306b\u542b\u307e\u308c\u3066\u3044\u308b\u5834\u5408\u3001N+1 \u3088\u308a\u5927\u304d\u3044\u30a8\u30dd\u30c3\u30af\u3092\u6307\u5b9a\u3059\u308b\u3068\u8fd4\u3055\u308c\u308b\u3002\u6570\u5206\u7d4c\u3063\u3066\u3082\n                        \u767b\u9332\u304c\u8868\u793a\u3055\u308c\u306a\u3044\u5834\u5408\u306f\u3001\u767b\u9332\u5931\u6557\u306e\u30c7\u30d0\u30c3\u30b0\u3092\u958b\u59cb\u3067\u304d\u308b\nariadne-parameters       \u6307\u5b9a\u3057\u305f\u30e1\u30a4\u30f3\u30c1\u30a7\u30fc\u30f3\u306e\u30a8\u30dd\u30c3\u30af\u756a\u53f7\u3067\u6709\u52b9\u306a ariadne \u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u8fd4\u3059\u3002\u30d1\u30e9\u30e1\u30fc\u30bf\u306f\u5909\u66f4\u304c\u542b\u307e\u308c\u305f\u30d6\u30ed\u30c3\u30af\u306e 2 \u30a8\u30dd\u30c3\u30af\u5f8c\u306b\u6709\u52b9\u306b\u306a\u308b\nregistration-signatures  \u30d1\u30fc\u30c8\u30ca\u30fc\u30c1\u30a7\u30fc\u30f3\u306e\u59d4\u54e1\u4f1a\u5019\u88dc\u5411\u3051\u767b\u9332\u7f72\u540d\u3092\u751f\u6210\u3059\u308b\nsmart-contracts          Cardano \u4e0a\u306e Partner Chain \u30b9\u30de\u30fc\u30c8\u30b3\u30f3\u30c8\u30e9\u30af\u30c8\u3068\u3084\u308a\u53d6\u308a\u3059\u308b\u305f\u3081\u306e\u30b3\u30de\u30f3\u30c9\nwizards                  \u30c1\u30a7\u30fc\u30f3\u8a2d\u5b9a\u306e\u305f\u3081\u306e Partner Chains \u30c6\u30ad\u30b9\u30c8 \"wizards\"\nbuild-spec               \u30c1\u30a7\u30fc\u30f3\u4ed5\u69d8\u3092\u30d3\u30eb\u30c9\u3059\u308b\ncheck-block              \u30d6\u30ed\u30c3\u30af\u3092\u691c\u8a3c\u3059\u308b\nexport-blocks            \u30d6\u30ed\u30c3\u30af\u3092\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3059\u308b\nexport-state             \u6307\u5b9a\u3057\u305f\u30d6\u30ed\u30c3\u30af\u306e\u72b6\u614b\u3092\u30c1\u30a7\u30fc\u30f3\u4ed5\u69d8\u306b\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3059\u308b\nimport-blocks            \u30d6\u30ed\u30c3\u30af\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b\npurge-chain              \u30c1\u30a7\u30fc\u30f3\u5168\u4f53\u3092\u524a\u9664\u3059\u308b\nrevert                   \u30c1\u30a7\u30fc\u30f3\u3092\u4ee5\u524d\u306e\u72b6\u614b\u306b\u623b\u3059\nbenchmark                \u30d9\u30f3\u30c1\u30de\u30fc\u30af\u306b\u95a2\u3059\u308b\u30b5\u30d6\u30b3\u30de\u30f3\u30c9\nchain-info               DB \u30e1\u30bf\u30ab\u30e9\u30e0\u60c5\u5831\nhelp                     \u3053\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u3001\u307e\u305f\u306f\u6307\u5b9a\u3057\u305f\u30b5\u30d6\u30b3\u30de\u30f3\u30c9\u306e\u30d8\u30eb\u30d7\u3092\u8868\u793a\u3059\u308b\n\n\u30aa\u30d7\u30b7\u30e7\u30f3:\n-h, --help     \u30d8\u30eb\u30d7\u3092\u8868\u793a\n-V, --version  \u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u8868\u793a\n</code></pre>"},{"location":"midnight/midnight-node-server-setup/","title":"Midnight\u30ce\u30fc\u30c9\u7a3c\u50cd\u30b5\u30fc\u30d0\u30fc\u69cb\u7bc9","text":"<p>\u672c\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u3001Midnight\u30d0\u30ea\u30c7\u30fc\u30bf\u30fc\u30b5\u30fc\u30d0\u30fc\u3067\u884c\u3046Midnight-node\u7528\u30b5\u30fc\u30d0\u30fc\u69cb\u7bc9\u3068SPO\u30d0\u30ea\u30c7\u30fc\u30bf\u30fc\u767b\u9332\u306e\u624b\u9806\u3067\u3059\u3002  </p>"},{"location":"midnight/midnight-node-server-setup/#_1","title":"\u4e8b\u524d\u6e96\u5099","text":"<p>\u672c\u30de\u30cb\u30e5\u30a2\u30eb\u3067\u306f\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u3068Midnight\u30b5\u30fc\u30d0\u30fc\u3092\u4f7f\u7528\u3057\u3066\u624b\u9806\u3092\u9032\u3081\u3066\u3044\u304d\u307e\u3059\u3002</p> Midnight\u30b5\u30fc\u30d0\u30fc <p>\u30b5\u30fc\u30d0\u30fc\u3067\u306e\u4e8b\u524d\u6e96\u5099</p> <p>\u65e5\u5e38\u904b\u7528\u3067\u306f<code>root</code>\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f7f\u7528\u305b\u305a\u3001sudo\u6a29\u9650\u3092\u4ed8\u4e0e\u3057\u305f\u4e00\u822c\u30e6\u30fc\u30b6\u30fc\u3067\u64cd\u4f5c\u3057\u307e\u3059\u3002</p> <p>\u65b0\u3057\u3044\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002  </p> <p>\u4efb\u610f\u306e\u30a2\u30eb\u30d5\u30a1\u30d9\u30c3\u30c8\u6587\u5b57\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002 \u3053\u306e\u4f8b\u3067\u306f<code>midnightd</code> \u30e6\u30fc\u30b6\u30fc\u3068\u3057\u3066\u4ee5\u964d\u9032\u3081\u307e\u3059\u3002</p> <pre><code>adduser midnightd\n</code></pre> <pre><code>New password:           # \u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\nRetype new password:    # \u78ba\u8a8d\u306e\u305f\u3081\u518d\u5165\u529b\n\nEnter the new value, or press ENTER for the default\n        Full Name []:   # \u30d5\u30eb\u30cd\u30fc\u30e0\u7b49\u306e\u60c5\u5831\u3092\u8a2d\u5b9a\uff08\u4e0d\u8981\u3067\u3042\u308c\u3070\u30d6\u30e9\u30f3\u30af\u3067\u3082\u554f\u984c\u3042\u308a\u307e\u305b\u3093\uff09\n        Room Number []:\n        Work Phone []:\n        Home Phone []:\n        Other []:\nIs the information correct? [Y/n] : y\n</code></pre> <p><code>midnightd</code>\u306bsudo\u6a29\u9650\u3092\u4ed8\u4e0e\u3057\u307e\u3059\u3002 <pre><code>usermod -aG sudo midnightd\n</code></pre></p> <p>root\u304b\u3089\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u307e\u3059\u3002 <pre><code>exit\n</code></pre></p> <p>\u30d2\u30f3\u30c8</p> <p>\u30bf\u30fc\u30df\u30ca\u30eb\u30bd\u30d5\u30c8\u306e\u63a5\u7d9a\u30e6\u30fc\u30b6\u30fc\u3092\u3001\u4e0a\u8a18\u3067\u4f5c\u6210\u3057\u305f\u30e6\u30fc\u30b6\u30fc\u540d\uff08<code>midnightd</code>\uff09\u304a\u3088\u3073\u30d1\u30b9\u30ef\u30fc\u30c9\u306b\u5909\u66f4\u3057\u3066\u518d\u63a5\u7d9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"midnight/midnight-node-server-setup/#1-spokit","title":"1. SPOKIT\u5c0e\u5165\u8a2d\u5b9a","text":""},{"location":"midnight/midnight-node-server-setup/#1-1","title":"1-1. \u521d\u671f\u8a2d\u5b9a","text":"<p>\u30d1\u30b9\u30ef\u30fc\u30c9\u5165\u529b\u306b\u3064\u3044\u3066</p> <p>\u7ba1\u7406\u8005\u6a29\u9650\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u6c42\u3081\u3089\u308c\u305f\u5834\u5408\u306f\u3001\u30e6\u30fc\u30b6\u30fc\u4f5c\u6210\u6642\u306b\u8a2d\u5b9a\u3057\u305f\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <ol> <li> <p><code>SPOKIT</code>\u3092\u5c0e\u5165\u3057\u3066Ubuntu\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a\u306e\u307f\u884c\u3044\u307e\u3059\u3002 <pre><code>wget -qO- https://spokit.spojapanguild.net/install.sh | bash\n</code></pre></p> <p>\u30ad\u30fc\u30dc\u30fc\u30c9\u306e<code>\u2191</code>\u3068<code>\u2193</code>\u3001<code>\u2190</code>\u3068<code>\u2192</code>\u3067\u30ab\u30fc\u30bd\u30eb\u3092\u79fb\u52d5\u3067\u304d\u307e\u3059\u3002</p> </li> <li> <p>\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9\u30bf\u30a4\u30d7\u3067\u306f\u300c<code>\u30ea\u30ec\u30fc</code>\u300d\u3092\u9078\u629e\u3057\u3066 Enter </p> </li> <li> <p>\u63a5\u7d9a\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3067\u306f\u300c<code>Preview-Testnet</code>\u300d\u3092\u9078\u629e\u3057\u3066 Enter </p> </li> <li> <p>\u4f5c\u696d\u30c7\u30a3\u30ec\u30af\u30c8\u30eaPATH\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3092\u6307\u5b9a\u3059\u308b\u306e\u3067\u305d\u306e\u307e\u307e Enter</p> </li> <li> <p>\u300c<code>\u306f\u3044</code>\u300d\u3092\u9078\u629e\u3057\u3001 Enter</p> </li> <li> <p>\u300c<code>source</code>\u300d\u30b3\u30de\u30f3\u30c9\u3092\u5fc5\u305a\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002 </p> </li> </ol>"},{"location":"midnight/midnight-node-server-setup/#1-2-ubuntu","title":"1-2. Ubuntu\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a","text":"<p>Ubuntu\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a\u30e2\u30fc\u30c9\u306b\u3064\u3044\u3066</p> <p>\u3053\u306e\u30e2\u30fc\u30c9\u3067\u306f\u3001Cardano\u30ce\u30fc\u30c9\u5b9f\u884c\u306b\u63a8\u5968\u3055\u308c\u308bUbuntu\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002  </p> <ol> <li> <p>\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002 \u5b9f\u884c\u30b3\u30de\u30f3\u30c9<pre><code>spokit ubuntu\n</code></pre></p> <p>\u300c<code>Enter...</code>\u300d\u3068\u8868\u793a\u3055\u308c\u305f\u3089 Enter \u30ad\u30fc\u3092\u62bc\u4e0b\u3057\u3001\u4ee5\u964d\u306f\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u6307\u793a\u306b\u5f93\u3063\u3066\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002 \u30c7\u30d5\u30a9\u30eb\u30c8\u306f\u300c<code>\u306f\u3044</code>\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002  </p> </li> <li> <p>\u4e0a\u8a18\u8a2d\u5b9a\u5f8c\u3001\u4e0d\u8981\u306a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u524a\u9664\u3057\u307e\u3059\u3002 <pre><code>rm -rf $HOME/cnode\n</code></pre></p> </li> </ol> <p>\u30d2\u30f3\u30c8</p> <p>\u30d6\u30e9\u30b1\u30c3\u30c8\u30e2\u30fc\u30c9\u7121\u52b9\u5316\u3092\u53cd\u6620\u3055\u305b\u308b\u305f\u3081\u306b\u4e00\u5ea6\u30bf\u30fc\u30df\u30ca\u30eb\u3092\u9589\u3058\u3066\u3001\u305d\u306e\u5f8c\u518d\u63a5\u7d9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <pre><code>exit\n</code></pre>"},{"location":"midnight/midnight-node-server-setup/#2-midnight-node","title":"2. midnight-node\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":""},{"location":"midnight/midnight-node-server-setup/#2-1","title":"2-1. \u74b0\u5883\u5909\u6570\u8a2d\u5b9a","text":"Midnight\u30b5\u30fc\u30d0\u30fc <p>\u8a2d\u5b9a</p> <pre><code>grep -q '^export MIDNIGHT_NETWORK=' \"$HOME/.bashrc\" || printf '\\nexport MIDNIGHT_NETWORK=testnet-02\\n' &gt;&gt; \"$HOME/.bashrc\"\nsource \"$HOME/.bashrc\"\n</code></pre>"},{"location":"midnight/midnight-node-server-setup/#2-2-midnight-node","title":"2-2. midnight-node\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9","text":"Midnight\u30b5\u30fc\u30d0\u30fc <pre><code>mkdir -p $HOME/midnight\ncd $HOME/midnight\nwget -q --show-progress https://spojapanguild.net/node_config/midnight/${MIDNIGHT_NETWORK}/midnight-node0.12.0.gz\n</code></pre> <p>midnight-node\u89e3\u51cd <pre><code>gunzip -c midnight-node0.12.0.gz &gt; midnight-node &amp;&amp; rm midnight-node0.12.0.gz\n</code></pre></p> <pre><code>chmod +x midnight-node\n</code></pre> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>./midnight-node --version\n</code></pre></p> <p>midnight-node 0.12.0</p> <p>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9 <pre><code>wget -q --show-progress https://spojapanguild.net/node_config/midnight/${MIDNIGHT_NETWORK}/pc-chain-config.json\nwget -q --show-progress https://spojapanguild.net/node_config/midnight/${MIDNIGHT_NETWORK}/chain-spec.json\nwget -q --show-progress https://spojapanguild.net/node_config/midnight/${MIDNIGHT_NETWORK}/addresses.json\n</code></pre></p>"},{"location":"midnight/midnight-node-server-setup/#3","title":"3. \u9375\u30fb\u30a2\u30c9\u30ec\u30b9\u306e\u751f\u6210","text":""},{"location":"midnight/midnight-node-server-setup/#3-1","title":"3-1. \u652f\u6255\u3044\u7528\u9375\u306e\u751f\u6210","text":"\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 <p>\u74b0\u5883\u5909\u6570\u306e\u8a2d\u5b9a\u5f8c\u3001\u652f\u6255\u3044\u7528\u9375\u3092\u751f\u6210 <pre><code>grep -q '^export MIDNIGHT_NETWORK=' \"$HOME/.bashrc\" || printf '\\nexport MIDNIGHT_NETWORK=testnet-02\\n' &gt;&gt; \"$HOME/.bashrc\"\nsource \"$HOME/.bashrc\"\n</code></pre> <pre><code>mkdir -p $HOME/midnight\n</code></pre> <pre><code>cd $HOME/midnight\ncardano-cli conway address key-gen \\\n  --verification-key-file midnight-payment.vkey \\\n  --signing-key-file midnight-payment.skey\n</code></pre></p> <p>midnight-payment\u30da\u30a2\u30ad\u30fc\u306b\u3064\u3044\u3066</p> <p>\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3092\u8003\u616e\u3057\u3066\u3001\u3053\u3053\u3067\u751f\u6210\u3057\u305fmidnight-payment\u30da\u30a2\u30ad\u30fc\u306f\u30ab\u30eb\u30c0\u30ce\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u306b\u7d10\u3065\u304fpayment\u30da\u30a2\u30ad\u30fc\u3068\u306f\u5225\u306e\u3082\u306e\u306b\u306a\u308a\u307e\u3059\u3002\u5225\u9014\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u63a8\u5968\u3057\u307e\u3059\u3002</p>"},{"location":"midnight/midnight-node-server-setup/#3-2","title":"3-2. \u30d1\u30fc\u30c8\u30ca\u30fc\u30c1\u30a7\u30fc\u30f3\u7528\u9375\u306e\u751f\u6210","text":"<p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>Midnight\u30b5\u30fc\u30d0\u30fc\u3067\u53d6\u5f97\u3057\u305f\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u90e1\u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306e<code>$HOME/midnight</code>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3078\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002</p> <ul> <li><code>addresses.json</code></li> <li><code>chain-spec.json</code></li> <li><code>midnight-node</code></li> <li><code>pc-chain-config.json</code></li> </ul> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 <p><pre><code>cd $HOME/midnight\nchmod +x midnight-node\n</code></pre> <pre><code>./midnight-node --version\n</code></pre></p> <p>midnight-node 0.12.0</p> <p>\u30d1\u30fc\u30c8\u30ca\u30fc\u30c1\u30a7\u30fc\u30f3\u7528\u306e\u9375\u3092\u751f\u6210 <pre><code>CFG_PRESET=${MIDNIGHT_NETWORK} ./midnight-node wizards generate-keys\n</code></pre> \u9375\u306f\u73fe\u5728\u306e<code>$HOME/midnight</code>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u4fdd\u5b58\u3059\u308b\u306e\u3067\u305d\u306e\u307e\u307e Enter \u30a6\u30a3\u30b6\u30fc\u30c9\u8868\u793a\u53c2\u8003<pre><code>This \ud83e\uddd9 wizard will generate the following keys and save them to your node's keystore:\n\u2192  an ECDSA Cross-chain key\n\u2192  an ED25519 Grandpa key\n\u2192  an SR25519 Aura key\nIt will also generate a network key for your node if needed.\n\n? node base path (./data) \u2190\u3053\u3053\u3067Enter\n</code></pre></p> \u30ad\u30fc\u30d5\u30a1\u30a4\u30eb\u69cb\u6210<pre><code>data/\n\u2514\u2500\u2500 chains\n    \u2514\u2500\u2500 undeployed\n        \u251c\u2500\u2500 keystore\n        \u2502   \u251c\u2500\u2500 6175728281... # sidechain key\n        \u2502   \u251c\u2500\u2500 63726367cd... # aura key\n        \u2502   \u2514\u2500\u2500 677a322ca6... # grandpa key\n        \u2514\u2500\u2500 network\n            \u2514\u2500\u2500 secret_ed25519 # network (node) key\n</code></pre> <p><code>$HOME/midnight</code>\u914d\u4e0b\u306b<code>./data</code>\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002</p> <p>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u540d\u306e\u5909\u66f4 <pre><code>mv ./data/chains/undeployed/ ./data/chains/partner_chains_template\n</code></pre></p>"},{"location":"midnight/midnight-node-server-setup/#3-3","title":"3-3. \u652f\u6255\u3044\u7528\u30a8\u30f3\u30bf\u30fc\u30d7\u30e9\u30a4\u30ba\u30a2\u30c9\u30ec\u30b9\u4f5c\u6210","text":"\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 <p>\u30a8\u30f3\u30bf\u30fc\u30d7\u30e9\u30a4\u30ba\u30a2\u30c9\u30ec\u30b9\u306e\u751f\u6210 <pre><code>cd $HOME/midnight\ncardano-cli conway address build \\\n  $NODE_NETWORK \\\n  --payment-verification-key-file midnight-payment.vkey \\\n  --out-file midnight-payment.addr\n</code></pre></p> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u304b\u3089\u3001\u4ee5\u4e0b\u306e\u5185\u5bb9\u4e00\u5f0f\u3092Midnight\u30b5\u30fc\u30d0\u30fc\u306e<code>$HOME/midnight</code>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002</p> <ul> <li><code>data</code></li> <li><code>midnight-payment.addr</code></li> <li><code>midnight-payment.skey</code></li> <li><code>midnight-payment.vkey</code></li> <li><code>partner-chains-public-keys.json</code></li> <li><code>pc-resources-config.json</code></li> </ul> Midnight\u30b5\u30fc\u30d0\u30fc <p>tADA Faucet\u304b\u3089<code>tADA</code>\u3092\u4ee5\u4e0b\u306e\u30a8\u30f3\u30bf\u30fc\u30d7\u30e9\u30a4\u30ba\u30a2\u30c9\u30ec\u30b9\u306b\u9001\u91d1\u3057\u307e\u3059\u3002  </p> <p><pre><code>cd $HOME/midnight\necho $(cat midnight-payment.addr)\n</code></pre> </p> <p>\u5165\u91d1\u3092\u78ba\u8a8d\u3059\u308b\u305f\u3081\u3001preview.cardanoscan\u306a\u3069\u306e\u30a8\u30af\u30b9\u30d7\u30ed\u30fc\u30e9\u30fc\u3067\u652f\u6255\u3044\u30a2\u30c9\u30ec\u30b9\u3092\u691c\u7d22\u3057\u3001tADA\u304c\u5c4a\u3044\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"midnight/midnight-node-server-setup/#4","title":"4. \u30d0\u30ea\u30c7\u30fc\u30bf\u30fc\u767b\u9332","text":""},{"location":"midnight/midnight-node-server-setup/#4-1-1","title":"4-1. \u767b\u9332\u30a6\u30a3\u30b6\u30fc\u30c9 1","text":"<p>\u4e8b\u524d\u8aac\u660e\uff1aregister1 \u5b9f\u884c\u6642\u306e\u5165\u529b\u5185\u5bb9</p> <p>\u4ee5\u4e0b\u306f\u3001<code>register1</code> \u5b9f\u884c\u6642\u306b\u8868\u793a\u3055\u308c\u308b\u5165\u529b\u9805\u76ee\u306e\u5168\u4f53\u50cf\u3067\u3059\u3002 \u5b9f\u969b\u306e\u5165\u529b\u306f\u6b21\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u3092\u53c2\u7167\u3057\u3001\u3053\u3053\u3067\u306f\u6d41\u308c\u3092\u628a\u63e1\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p></p> <ol> <li>\u767b\u9332\u30a6\u30a3\u30b6\u30fc\u30c9 1 \u306e\u30b3\u30de\u30f3\u30c9\u5b9f\u884c</li> <li><code>&gt; Ogmios protocol (http/https)</code> \u2192 <code>https</code></li> <li><code>&gt; Ogmios hostname (localhost)</code> \u2192 <code>ogmios.testnet-02.midnight.network</code></li> <li><code>&gt; Ogmios port</code> \u2192 <code>443</code></li> <li><code>&gt; path to the payment verification file</code> \u2192 <code>midnight-payment.vkey</code></li> <li><code>? Select UTXO to use for registration</code> \u2192  Enter </li> <li><code>midnight-node wizards register2</code>\u306e\u30b3\u30de\u30f3\u30c9\u304c\u51fa\u529b\u3055\u308c\u308b\u306e\u3067\u30e1\u30e2\u5e33\u306a\u3069\u306b\u30b3\u30d4\u30fc</li> </ol> Midnight\u30b5\u30fc\u30d0\u30fc <ol> <li> <p>\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002 <pre><code>cd $HOME/midnight\nCFG_PRESET=${MIDNIGHT_NETWORK} ./midnight-node wizards register1\n</code></pre></p> </li> <li> <p><code>&gt; Ogmios protocol (http/https)</code>\u3067\u306f\u3001<code>https</code> \u3092\u9078\u629e\u3057\u3066 Enter <pre><code>  http\n&gt; https\n</code></pre></p> </li> <li> <p><code>&gt; Ogmios hostname (localhost)</code>\u3067\u306f\u3001\u4ee5\u4e0b\u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u5165\u529b\u3057\u3066 Enter <pre><code>ogmios.testnet-02.midnight.network\n</code></pre></p> </li> <li> <p><code>&gt; Ogmios port</code>\u3067\u306f\u3001<code>443</code> \u3092\u5165\u529b\u3057\u3066 Enter <pre><code>443\n</code></pre></p> </li> <li> <p><code>&gt; path to the payment verification file</code>\u3067\u306f\u3001\u4ee5\u4e0b\u3092\u5165\u529b\u3057\u3066 Enter <pre><code>midnight-payment.vkey\n</code></pre> </p> </li> <li> <p><code>? Select UTXO to use for registration</code>\u3067\u306f\u3001\u305d\u306e\u307e\u307e Enter </p> </li> <li> <p>\u51fa\u529b\u3055\u308c\u305f<code>register2</code>\u306e\u30b3\u30de\u30f3\u30c9\u3092\u3001\u3059\u3079\u3066 Copy \u3057\u307e\u3059\u3002 </p> <p>\u30b3\u30d4\u30fc\u3057\u305f\u30b3\u30de\u30f3\u30c9\u3092\u30e1\u30e2\u5e33\u306a\u3069\u306b\u8cbc\u308a\u4ed8\u3051\u4fdd\u5b58\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> </li> </ol>"},{"location":"midnight/midnight-node-server-setup/#4-2-2","title":"4-2. \u767b\u9332\u30a6\u30a3\u30b6\u30fc\u30c9 2","text":"<p>\u4e8b\u524d\u8aac\u660e\uff1aregister2 \u5b9f\u884c\u6642\u306e\u5165\u529b\u5185\u5bb9</p> <p>\u4ee5\u4e0b\u306f\u3001<code>register2</code> \u5b9f\u884c\u6642\u306b\u8868\u793a\u3055\u308c\u308b\u5165\u529b\u9805\u76ee\u306e\u5168\u4f53\u50cf\u3067\u3059\u3002 \u5b9f\u969b\u306e\u5165\u529b\u306f\u6b21\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u3092\u53c2\u7167\u3057\u3001\u3053\u3053\u3067\u306f\u6d41\u308c\u3092\u628a\u63e1\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <ol> <li>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306e<code>$HOME/cold-keys</code>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u30ed\u30c3\u30af\u89e3\u9664\u3057\u3001<code>$HOME/midnight</code>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5</li> <li>\u30d7\u30fc\u30eb\u306e\u79d8\u5bc6\u9375\u30d5\u30a1\u30a4\u30eb\u306e\u7d76\u5bfe\u30d1\u30b9\u3092\u8868\u793a\u3057\u3001\u63a7\u3048\u3066\u304a\u304f</li> <li>\u767b\u9332\u30a6\u30a3\u30b6\u30fc\u30c9 2 \u306e\u30b3\u30de\u30f3\u30c9\u5b9f\u884c</li> <li>\u30d7\u30fc\u30eb\u306e\u79d8\u5bc6\u9375\u30d5\u30a1\u30a4\u30eb\u306e\u7d76\u5bfe\u30d1\u30b9\u3092\u5165\u529b</li> <li><code>midnight-node wizards register3</code>\u306e\u30b3\u30de\u30f3\u30c9\u304c\u51fa\u529b\u3055\u308c\u308b\u306e\u3067\u30e1\u30e2\u5e33\u306a\u3069\u306b\u30b3\u30d4\u30fc</li> <li><code>$HOME/cold-keys</code>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u30ed\u30c3\u30af\u3057\u307e\u3059\u3002</li> </ol> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 <ol> <li> <p><code>$HOME/cold-keys</code>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u30ed\u30c3\u30af\u3092\u89e3\u9664\u3057\u3001<code>$HOME/midnight</code>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3057\u307e\u3059\u3002 <pre><code>chmod u+rwx $HOME/cold-keys\n</code></pre> <pre><code>cd $HOME/midnight\n</code></pre></p> </li> <li> <p>\u30d7\u30fc\u30eb\u306e\u79d8\u5bc6\u9375\u30d5\u30a1\u30a4\u30eb\u306e\u7d76\u5bfe\u30d1\u30b9\u3092\u8868\u793a\u3057\u307e\u3059\u3002 <pre><code>echo $HOME/cold-keys/node.skey\n</code></pre></p> <p>/home/$USER/cold-keys/node.skey \u8868\u793a\u3055\u308c\u305f\u30d1\u30b9\u3092\u30e1\u30e2\u5e33\u306a\u3069\u306b\u30b3\u30d4\u30fc\u3057\u3066\u63a7\u3048\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002</p> </li> <li> <p><code>register1</code>\u3067\u30b3\u30d4\u30fc\u3057\u305f\u30b3\u30de\u30f3\u30c9\u306e<code>/home/$USER/midnight</code>\u3092\u524a\u9664\u3057\u3066<code>CFG_PRESET=${MIDNIGHT_NETWORK} .</code>\u306b\u66f8\u304d\u63db\u3048\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002 \u53c2\u8003\u30b3\u30de\u30f3\u30c9<pre><code>CFG_PRESET=${MIDNIGHT_NETWORK} ./midnight-node wizards register2 \\\n  --genesis-utxo 46876a2250ec0e523eccc30b0fc6d6fa55c61dd200b83140acaab291edeb0b11#0 \\\n  --registration-utxo d7ebd0b5f215ede15d25fc00c5e9fbfb24b36ffdf428f93fc83cde84440be376#0 \\\n  --aura-pub-key 0x0a66c6e1ca29d332a3b1738471bb4f27d4425b3001bbc9003757c2213b40b508 \\\n  --grandpa-pub-key 0xca364cd1c9a63988d9da8adc5e336220ee93fc6b9d65bca280133a55e21dc5f1 \\\n  --sidechain-pub-key 0x03de3d4544b1789d22aae9b4ae24d9e85282a300f690f7c0a534434f7f62362153 \\\n  --sidechain-signature d03d7900805e9aeb465278ca2f67465521d8c2abc680a5650e85105f407825df75de19df6cc45bac92b66250ccd2b51e3d93922925aa7e09f3b0a3e53bf7763b\n</code></pre></p> </li> <li> <p><code>node.skey</code>\u306ePATH\u3092\u5165\u529b\u3057\u3066 Enter \u53c2\u8003<pre><code>/home/$USER/cold-keys/node.skey\n</code></pre> </p> </li> <li> <p>\u51fa\u529b\u3055\u308c\u305f<code>register3</code>\u306e\u30b3\u30de\u30f3\u30c9\u3092\u3001\u3059\u3079\u3066 Copy \u3057\u307e\u3059\u3002 </p> <p>\u30b3\u30d4\u30fc\u3057\u305f\u30b3\u30de\u30f3\u30c9\u3092\u30e1\u30e2\u5e33\u306a\u3069\u306b\u8cbc\u308a\u4ed8\u3051\u4fdd\u5b58\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> </li> <li> <p><code>$HOME/cold-keys</code>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u30ed\u30c3\u30af\u3057\u307e\u3059\u3002 <pre><code>chmod a-rwx $HOME/cold-keys\n</code></pre></p> </li> </ol>"},{"location":"midnight/midnight-node-server-setup/#4-3-3","title":"4-3. \u767b\u9332\u30a6\u30a3\u30b6\u30fc\u30c9 3","text":"<p>\u4e8b\u524d\u8aac\u660e\uff1aregister3 \u5b9f\u884c\u6642\u306e\u5165\u529b\u5185\u5bb9</p> <p>\u4ee5\u4e0b\u306f\u3001<code>register3</code> \u5b9f\u884c\u6642\u306b\u8868\u793a\u3055\u308c\u308b\u5165\u529b\u9805\u76ee\u306e\u5168\u4f53\u50cf\u3067\u3059\u3002 \u5b9f\u969b\u306e\u5165\u529b\u306f\u6b21\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u3092\u53c2\u7167\u3057\u3001\u3053\u3053\u3067\u306f\u6d41\u308c\u3092\u628a\u63e1\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <ol> <li><code>$HOME/midnight</code>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5</li> <li>\u767b\u9332\u30a6\u30a3\u30b6\u30fc\u30c9 3 \u306e\u30b3\u30de\u30f3\u30c9\u5b9f\u884c</li> <li><code>? Path to mainchain payment signing key file</code> \u2192 <code>midnight-payment.skey</code></li> <li><code>&gt; Ogmios protocol (http/https)</code> \u2192 <code>https</code></li> <li><code>&gt; Ogmios hostname (localhost)</code> \u2192 <code>ogmios.testnet-02.midnight.network</code></li> <li><code>&gt; Ogmios port</code> \u2192 <code>443</code></li> <li><code>Show registration status?(Y/n)</code>\u304c\u8868\u793a\u3055\u308c\u305f\u3089 <code>n</code> \u3092\u5165\u529b  </li> </ol> <p>\u305d\u306e\u5f8c\u30aa\u30f3\u30c1\u30a7\u30fc\u30f3\u767b\u9332\u78ba\u8a8d</p> Midnight\u30b5\u30fc\u30d0\u30fc <ol> <li> <p><code>$HOME/midnight</code>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5 <pre><code>cd $HOME/midnight\n</code></pre></p> </li> <li> <p>\u30b3\u30d4\u30fc\u3057\u305f\u30b3\u30de\u30f3\u30c9\u306e<code>/home/$USER/midnight</code>\u3092\u524a\u9664\u3057\u3066<code>CFG_PRESET=${MIDNIGHT_NETWORK} .</code>\u306b\u66f8\u304d\u63db\u3048\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002 \u53c2\u8003\u30b3\u30de\u30f3\u30c9<pre><code>CFG_PRESET=${MIDNIGHT_NETWORK} ./midnight-node wizards register3 \\\n  --genesis-utxo 46876a2250ec0e523eccc30b0fc6d6fa55c61dd200b83140acaab291edeb0b11#0 \\\n  --registration-utxo d7ebd0b5f215ede15d25fc00c5e9fbfb24b36ffdf428f93fc83cde84440be376#0 \\\n  --aura-pub-key 0x0a66c6e1ca29d332a3b1738471bb4f27d4425b3001bbc9003757c2213b40b508 \\\n  --grandpa-pub-key 0xca364cd1c9a63988d9da8adc5e336220ee93fc6b9d65bca280133a55e21dc5f1 \\\n  --partner-chain-pub-key 0x03de3d4544b1789d22aae9b4ae24d9e85282a300f690f7c0a534434f7f62362153 \\\n  --partner-chain-signature d03d7900805e9aeb465278ca2f67465521d8c2abc680a5650e85105f407825df75de19df6cc45bac92b66250ccd2b51e3d93922925aa7e09f3b0a3e53bf7763b \\\n  --spo-public-key 7ca8511e4b96c6d443304753685ea89660212e556a2c3c903fb10c99df292a72 \\\n  --spo-signature 019ec2205223ba0f47a26f3e732e2c00e623eb1af546339a36c8136a792d37c6f2d36e76efa03a401e0be6559488d94e09368257f19886be95f8496f56460803\n</code></pre></p> </li> <li> <p><code>? Path to mainchain payment signing key file</code>\u3067\u306f\u3001\u4ee5\u4e0b\u3092\u5165\u529b\u3057\u3066 Enter <pre><code>midnight-payment.skey\n</code></pre> </p> </li> <li> <p>Ogmios protocol\u3067\u306f <code>https</code> \u3092\u9078\u629e\u3057\u3066 Enter <pre><code>  http\n&gt; https\n</code></pre></p> </li> <li> <p>Ogmios hostname\u3067\u306f\u4ee5\u4e0b\u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u5165\u529b\u3057\u3066 Enter <pre><code>ogmios.testnet-02.midnight.network\n</code></pre></p> </li> <li> <p>Ogmios port\u3067\u306f <code>443</code> \u3092\u5165\u529b\u3057\u3066 Enter <pre><code>443\n</code></pre></p> </li> <li> <p><code>Show registration status?(Y/n)</code>\u304c\u8868\u793a\u3055\u308c\u308b\u307e\u3067\u5c11\u3057\u5f85\u3061\u3001\u8868\u793a\u3055\u308c\u305f\u3089 <code>n</code> \u3092\u5165\u529b\u5f8c Enter </p> </li> </ol>"},{"location":"midnight/midnight-node-server-setup/#5","title":"5. \u30aa\u30f3\u30c1\u30a7\u30fc\u30f3\u767b\u9332\u78ba\u8a8d","text":"Midnight\u30b5\u30fc\u30d0\u30fc <p>\u30a8\u30dd\u30c3\u30af\u78ba\u8a8d \u5168\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>NEXT_EPOCH=$(curl -s -L -X POST -H \"Content-Type: application/json\" -d '{\n  \"jsonrpc\": \"2.0\",\n  \"method\": \"sidechain_getStatus\",\n  \"params\": [],\n  \"id\": 1\n}' https://rpc.${MIDNIGHT_NETWORK}.midnight.network \\\n| jq '.result.mainchain.epoch + 2')\necho $NEXT_EPOCH\n</code></pre></p> <p>\u767b\u9332\u78ba\u8a8d \u5168\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>SIDECHAIN_KEY=$(jq -r '.sidechain_pub_key' ${HOME}/midnight/partner-chains-public-keys.json)\n\ncurl -s -L -X POST -H \"Content-Type: application/json\" -d \"{\n  \\\"jsonrpc\\\": \\\"2.0\\\",\n  \\\"method\\\": \\\"sidechain_getAriadneParameters\\\",\n  \\\"params\\\": [$NEXT_EPOCH],\n  \\\"id\\\": 1\n}\" https://rpc.${MIDNIGHT_NETWORK}.midnight.network \\\n| jq --arg key \"$SIDECHAIN_KEY\" '\n  .result.candidateRegistrations\n  | to_entries[]\n  | . as $e\n  | $e.value[]\n  | select(.sidechainPubKey == $key)\n  | {\n      mainchainPubKey: $e.key,\n      sidechainPubKey,\n      auraPubKey,\n      grandpaPubKey,\n      stakeDelegation,\n      isValid\n    }\n'\n</code></pre></p> <p><code>\"isValid\": true</code>\u304c\u78ba\u8a8d\u3067\u304d\u308c\u3070\u3001\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002 \u623b\u308a\u5024<pre><code>{\n  \"mainchainPubKey\": \"***************\",\n  \"sidechainPubKey\": \"***************\",\n  \"auraPubKey\": \"***************\",\n  \"grandpaPubKey\": \"***************\",\n  \"stakeDelegation\": ***************,\n  \"isValid\": true\n}\n</code></pre></p> <p>isValid: false\u3068\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u5834\u5408</p> <p>\u30a2\u30af\u30c6\u30a3\u30d6\u30b9\u30c6\u30fc\u30af\u304c <code>0</code> \u306e\u5834\u5408\u3001<code>isValid: false</code> \u3068\u306a\u308b\u305f\u3081\u3001\u4ee5\u4e0b\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>Cardano \u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u306e\u6709\u52b9\u30b9\u30c6\u30fc\u30af\u78ba\u8a8d\u65b9\u6cd5</p> <ul> <li> <p>SPOKIT \u306e\u5834\u5408\uff1a <code>spokit</code> &gt; \u300c\u30d7\u30fc\u30eb\u60c5\u5831\u7ba1\u7406\u300d&gt; \u300c\u30d6\u30ed\u30c3\u30af\u751f\u6210\u72b6\u614b\u30c1\u30a7\u30c3\u30af\u300d&gt; \u6709\u52b9\u30b9\u30c6\u30fc\u30af\u5024  </p> </li> <li> <p>Cardanoscan \u306e\u5834\u5408: \u81ea\u8eab\u306ePool ID\u3092\u691c\u7d22\u3057\u3001Active Stake\u306e\u5024\u3092\u78ba\u8a8d  </p> </li> </ul> <p>Active Stake\u306e\u53cd\u6620\u30bf\u30a4\u30df\u30f3\u30b0 (n + 2\u30a8\u30dd\u30c3\u30af)</p> <p>\u53cd\u6620\u307e\u3067\u306e\u76ee\u5b89\uff1a Preview\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3067\u306f\u7d04 2 \u65e5\u5f8c\u3001\u30e1\u30a4\u30f3\u30cd\u30c3\u30c8\u3067\u306f\u7d04 10 \u65e5\u5f8c\u306b\u53cd\u6620\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"midnight/start-midnight-node/","title":"Midnight\u30d0\u30ea\u30c7\u30fc\u30bf\u30fc\u30e2\u30fc\u30c9\u3067\u8d77\u52d5","text":"<p>\u672c\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u3001Midnight\u30b5\u30fc\u30d0\u30fc\u3067\u884c\u3046Midnight-node\u8d77\u52d5\u306e\u624b\u9806\u3067\u3059\u3002  </p>"},{"location":"midnight/start-midnight-node/#1-postgresql","title":"1. PostgreSQL \u63a5\u7d9a\u8a2d\u5b9a","text":"<p>\u3053\u3053\u3067\u306fMidnight\u30b5\u30fc\u30d0\u30fc\u306e\u30b3\u30de\u30f3\u30c9\u304b\u3089\u306f\u3058\u3081\u3001\u30a4\u30f3\u30c7\u30af\u30b5\u30fc\u30b5\u30fc\u30d0\u30fc\u306e\u30bf\u30d6\u306b\u9032\u3093\u3067\u304f\u3060\u3055\u3044\u3002</p> Midnight\u30b5\u30fc\u30d0\u30fc\u30a4\u30f3\u30c7\u30af\u30b5\u30fc\u30b5\u30fc\u30d0\u30fc <pre><code>FW_ALLOW_HOST=\"$(curl -s https://api.ipify.org)\"\necho \"FW_ALLOW_HOST=${FW_ALLOW_HOST}\"\n</code></pre> <p>\u4e0a\u8a18\u3001\u30b3\u30de\u30f3\u30c9\u3067\u51fa\u529b\u3055\u308c\u305f\u623b\u308a\u5024\u3092\u30b3\u30d4\u30fc\u3057\u3066\u3001\u30a4\u30f3\u30c7\u30af\u30b5\u30fc\u30b5\u30fc\u30d0\u30fc\u3067\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <pre><code>FW_ALLOW_HOST=***.**.**.**\n</code></pre> <p>Midnight\u30b5\u30fc\u30d0\u30fc\u3067\u30b3\u30d4\u30fc\u3057\u305f\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</p> <p>postgreSQL\u30dd\u30fc\u30c8\u8a31\u53ef <pre><code>sudo ufw allow from ${FW_ALLOW_HOST} to any port 5432\n</code></pre></p> <p>\u623b\u308a\u5024\uff1a Rule added</p> <pre><code>sudo ufw reload\n</code></pre> <p>\u623b\u308a\u5024\uff1aFirewall reloaded</p> <p>postgreSQL\u30ed\u30b0\u30a4\u30f3\u8a31\u53ef\u8a2d\u5b9a <pre><code>echo \"hostssl cexplorer $(whoami) ${FW_ALLOW_HOST}/32 scram-sha-256\" | \\\nsudo tee -a /etc/postgresql/17/main/pg_hba.conf &gt; /dev/null\n</code></pre> <pre><code>sudo grep -n \"hostssl cexplorer\" /etc/postgresql/17/main/pg_hba.conf\n</code></pre> \u623b\u308a\u5024<pre><code>133:hostssl cexplorer &lt;\u30a4\u30f3\u30c7\u30af\u30b5\u30fc\u30b5\u30fc\u30d0\u30fc\u306e\u30e6\u30fc\u30b6\u30fc\u540d&gt; &lt;Midnight\u30b5\u30fc\u30d0\u30fc\u306eIP&gt;/32 scram-sha-256\n</code></pre></p> <p>postgresql\u518d\u8d77\u52d5 <pre><code>sudo systemctl restart postgresql\n</code></pre></p> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a4\u30f3\u30c7\u30af\u30b5\u30fc\u30b5\u30fc\u30d0\u30fc\u306e<code>$HOME</code>\u76f4\u4e0b\u306b\u3042\u308b<code>.pgpass</code>\u3092Midnight\u30b5\u30fc\u30d0\u30fc\u306e<code>$HOME</code>\u76f4\u4e0b\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[\u30a4\u30f3\u30c7\u30af\u30b5\u30fc\u30b5\u30fc\u30d0\u30fc] --&gt;|.pgpass| B[Midnight\u30b5\u30fc\u30d0\u30fc];</code></pre> <code>.pgpass</code>\u30d5\u30a1\u30a4\u30eb\u306f\u5fc5\u305a<code>$HOME</code>(\u30e6\u30fc\u30b6\u30fc\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u76f4\u4e0b)\u306b\u914d\u7f6e\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"midnight/start-midnight-node/#1-1-postgresql","title":"1-1. PostgreSQL\u63a5\u7d9a\u30c1\u30a7\u30c3\u30af","text":"Midnight\u30b5\u30fc\u30d0\u30fc <p><code>.pgpass</code>\u30d5\u30a1\u30a4\u30eb\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u5909\u66f4 <pre><code>chmod 600 $HOME/.pgpass\n</code></pre></p> <p>PostgreSQL 17 \u3092\u4f7f\u7528\u3059\u308b\u305f\u3081\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002 \u9806\u306b\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p><pre><code>sudo apt update\n</code></pre> <pre><code>sudo apt install -y curl ca-certificates\n</code></pre> <pre><code>sudo install -d /usr/share/postgresql-common/pgdg\n</code></pre> <pre><code>sudo curl -s -o /usr/share/postgresql-common/pgdg/apt.postgresql.org.asc --fail https://www.postgresql.org/media/keys/ACCC4CF8.asc\n</code></pre> <pre><code>sudo sh -c 'echo \"deb [signed-by=/usr/share/postgresql-common/pgdg/apt.postgresql.org.asc] \\\n  https://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main\" \\\n  &gt; /etc/apt/sources.list.d/pgdg.list'\n</code></pre> <pre><code>sudo apt update\n</code></pre> <pre><code>sudo apt install postgresql-client-17 -y\n</code></pre></p> <p><pre><code>psql --version\n</code></pre> \u623b\u308a\u5024<pre><code>psql (PostgreSQL) 17.7 (Ubuntu 17.7-3.pgdg22.04+1)\n</code></pre></p> <p>\u63a5\u7d9a\u30c6\u30b9\u30c8 <pre><code>PGPASS_LINE=$(cat $HOME/.pgpass)\nDBSYNC_HOST=$(echo \"$PGPASS_LINE\" | cut -d: -f1)\nDBSYNC_USER=$(echo \"$PGPASS_LINE\" | cut -d: -f4)\npsql \"postgresql://${DBSYNC_USER}@${DBSYNC_HOST}:5432/cexplorer?sslmode=require\"\n</code></pre> \u623b\u308a\u5024<pre><code>psql (17.7 (Ubuntu 17.7-3.pgdg22.04+1))\nSSL connection (protocol: TLSv1.3, cipher: TLS_AES_256_GCM_SHA384, compression: off, ALPN: postgresql)\n# \u2191\u3053\u306e\u6587\u8a00\u304c\u3042\u308c\u3070SSL/TSL\u901a\u4fe1\u304c\u78ba\u7acb\u3057\u3066\u3044\u307e\u3059\u3002\nType \"help\" for help.\n\ncexplorer=# \\q\n</code></pre></p> <p>SSL/TSL\u901a\u4fe1\u306e\u78ba\u7acb\u304c\u78ba\u8a8d\u3067\u304d\u305f\u3089\u3001<code>\\q</code>\u3092\u5165\u529b\u5f8c\u3001  Enter</p>"},{"location":"midnight/start-midnight-node/#2-midnight","title":"2. Midnight \u8d77\u52d5\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210","text":"Midnight\u30b5\u30fc\u30d0\u30fc <p>postgreSQL\u63a5\u7d9a\u60c5\u5831\u53d6\u5f97 <pre><code>PGPASS_LINE=$(cat $HOME/.pgpass)\nDBSYNC_HOST=$(echo \"$PGPASS_LINE\" | cut -d: -f1)\nDBSYNC_USER=$(echo \"$PGPASS_LINE\" | cut -d: -f4)\n</code></pre></p> \u5168\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $HOME/midnight/.env &lt;&lt; EOF\n\n#\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\nCFG_PRESET=${MIDNIGHT_NETWORK}\n\n#Midnight\u30ad\u30fc\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\nBASE_PATH='$HOME/midnight/data'\n\n#\u30d1\u30fc\u30c8\u30ca\u30fc\u30c1\u30a7\u30fc\u30f3\u56fa\u6709\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u30d5\u30a1\u30a4\u30eb\nADDRESSES_JSON=$HOME/midnight/addresses.json\n\n#Midnight\u8d77\u52d5\u30dd\u30fc\u30c8\u756a\u53f7\nMIDNIGHT_PORT=30333\n\n#cardano-db-sync\u30c7\u30fc\u30bf\u53d6\u5f97 PostgreSQL\u63a5\u7d9aURI\nDB_SYNC_POSTGRES_CONNECTION_STRING=\"postgresql://${DBSYNC_USER}@${DBSYNC_HOST}:5432/cexplorer?sslmode=require\"\n\n#Midnight-node\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30ad\u30fc\nNODE_KEY=\"$(cat $HOME/midnight/data/chains/partner_chains_template/network/secret_ed25519)\"\n\n#\u30ab\u30eb\u30c0\u30ce\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\nCARDANO_SECURITY_PARAMETER=432\n\n#P2P\u63a5\u7d9a\u5148\nBOOTNODES=\"/dns/boot-node-01.${MIDNIGHT_NETWORK}.midnight.network/tcp/30333/ws/p2p/12D3KooWMjUq13USCvQR9Y6yFzYNYgTQBLNAcmc8psAuPx2UUdnB \\\\\n        /dns/boot-node-02.${MIDNIGHT_NETWORK}.midnight.network/tcp/30333/ws/p2p/12D3KooWR1cHBUWPCqk3uqhwZqUFekfWj8T7ozK6S18DUT745v4d \\\\\n        /dns/boot-node-03.${MIDNIGHT_NETWORK}.midnight.network/tcp/30333/ws/p2p/12D3KooWQxxUgq7ndPfAaCFNbAxtcKYxrAzTxDfRGNktF75SxdX5\"\n\n#\u8ffd\u52a0\u30aa\u30d7\u30b7\u30e7\u30f3\nAPPEND_ARGS=\"--validator --allow-private-ip --pool-limit 10 --trie-cache-size 0 --prometheus-external --rpc-methods=auto --rpc-port 9944 --public-addr /ip4/$(curl -4 -s ifconfig.me)/tcp/30333 --keystore-path=$HOME/midnight/data/chains/partner_chains_template/keystore/\"\n\n#\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30b9\u30da\u30c3\u30af\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\nCHAIN=$HOME/midnight/chain-spec.json\nEOF\n</code></pre>"},{"location":"midnight/start-midnight-node/#2-1midnight-node","title":"2-1.Midnight-node\u8d77\u52d5\u8a2d\u5b9a","text":"<p>systemd\u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210 \u5168\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $HOME/midnight/midnight-node.service &lt;&lt; EOF \n[Unit]\nDescription     = Midnight Node Service\nWants           = network-online.target\nAfter           = network-online.target \n\n[Service]\nType=simple\nUser=${USER}\nWorkingDirectory=${HOME}/midnight\nEnvironmentFile=${HOME}/midnight/.env\nExecStart=\"${HOME}/midnight/midnight-node\"\nKillSignal=SIGINT\nRestartKillSignal=SIGINT\nTimeoutStopSec=300\nLimitNOFILE=32768\nRestart=always\nRestartSec=5\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=midnight-node\n\n[Install]\nWantedBy=multi-user.target\nEOF\n</code></pre></p> <p><pre><code>sudo cp $HOME/midnight/midnight-node.service /etc/systemd/system/midnight-node.service\n</code></pre> <pre><code>sudo chmod 644 /etc/systemd/system/midnight-node.service\n</code></pre></p> <p>\u30b5\u30fc\u30d3\u30b9\u6709\u52b9\u5316 <pre><code>sudo systemctl daemon-reload &amp;&amp; sudo systemctl enable --now midnight-node\n</code></pre></p> <p>Midnight\u30ce\u30fc\u30c9\u52d5\u4f5c\u78ba\u8a8d <pre><code>sudo systemctl status midnight-node --no-pager\n</code></pre> \u623b\u308a\u5024<pre><code>\u25cf midnight-node.service - Midnight Node Service\n     Loaded: loaded (/etc/systemd/system/midnight-node.service; enabled; vendor preset: enabled)\n     Active: active (running) since Tue 2025-12-30 07:18:14 UTC; 4h 42min ago\n   Main PID: 212117 (midnight-node)\n      Tasks: 18 (limit: 18679)\n     Memory: 3.0G\n        CPU: 3h 3min 55.713s\n</code></pre></p> <p>Active: active \u3067\u3042\u308b\u3053\u3068</p> <p>\u30ed\u30b0\u78ba\u8a8d <pre><code>sudo journalctl -u midnight-node -f\n</code></pre></p> \u30ed\u30b0<pre><code>2025-12-31 05:56:14 Midnight Node    \n2025-12-31 05:56:14 \u270c\ufe0f  version 0.12.0-29935d2f    \n2025-12-31 05:56:14 \u2764\ufe0f  by Substrate DevHub &lt;https://github.com/substrate-developer-hub&gt;, 2017-2025    \n2025-12-31 05:56:14 \ud83d\udccb Chain specification: testnet-02-1    \n2025-12-31 05:56:14 \ud83c\udff7  Node name: madly-drug-7531    \n2025-12-31 05:56:14 \ud83d\udc64 Role: AUTHORITY    \n2025-12-31 05:56:14 \ud83d\udcbe Database: ParityDb at /home/midnightd/midnight/data/chains/testnet-02/paritydb/full    \n2025-12-31 05:56:14 Creating idx_tx_out_address index. This may take a while.  \n</code></pre> <p>\u2191 \u521d\u56de\u8d77\u52d5\u6642\u306f\u3001\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u4f5c\u6210\u306e\u305f\u3081\u51e6\u7406\u306b\u6642\u9593\u304c\u304b\u304b\u308a\u307e\u3059\u3002 \u30ed\u30b0\u304c\u518d\u3073\u51fa\u529b\u3055\u308c\u59cb\u3081\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u305f\u3089\u3001\u6b21\u306e\u624b\u9806\u3078\u9032\u3093\u3067\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"midnight/start-midnight-node/#3-midnight-monitor","title":"3. Midnight-Monitor\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>Midnight-monitor</p> <ul> <li>LiveView\u30ce\u30fc\u30c9\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0</li> <li>Midnight-Blocklog \u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u76e3\u8996\u30e2\u30fc\u30c9</li> </ul> <p></p> Midnight\u30b5\u30fc\u30d0\u30fc <p>LiveView\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9 <pre><code>cd $HOME/midnight\nwget -O ./LiveView.sh  https://raw.githubusercontent.com/btbf/Midnight-Live-View/refs/heads/main/LiveView.sh\nchmod +x LiveView.sh\n</code></pre></p> <p>Midnight-blocklog\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb <pre><code>curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh\n</code></pre></p> <p>1) Proceed with standard installation (default - just press enter) 1\u3092\u9078\u629e\u3059\u308b\u306e\u3067 Enter</p> <p><pre><code>source \"$HOME/.cargo/env\"\nrustup toolchain install stable\nrustup default stable\n</code></pre> \u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>rustc -V\ncargo -V\n</code></pre> \u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d<pre><code>$ rustc -V\nrustc 1.92.0 (ded5c06cf 2025-12-08)\n\n$ cargo -V\ncargo 1.92.0 (344c4567c 2025-10-21)\n</code></pre></p> <p><pre><code>sudo apt update\n</code></pre> <pre><code>sudo apt install -y build-essential pkg-config libssl-dev\n</code></pre></p> <pre><code>cd $HOME\nrelease=\"$(curl -s https://api.github.com/repos/btbf/Midnight-blocklog/releases/latest | jq -r '.tag_name')\"\n</code></pre> <pre><code>git clone https://github.com/btbf/Midnight-blocklog.git\ncd Midnight-blocklog\ngit checkout ${release}\ncargo install --path . --bin mblog --locked --force\n</code></pre> <p><pre><code>mblog --version\n</code></pre> \u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d<pre><code>mblog 0.3.2\n</code></pre></p> <p>\u4f9d\u5b58\u95a2\u4fc2\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb <pre><code>sudo apt install -y tmux nano ruby-rubygems\n</code></pre> <pre><code>sudo gem install tmuxinator\n</code></pre></p> <p>\u74b0\u5883\u5909\u6570\u8ffd\u52a0 <pre><code>echo export EDITOR='nano' &gt;&gt; $HOME/.bashrc\necho alias mux=tmuxinator &gt;&gt; $HOME/.bashrc\nsource $HOME/.bashrc\n</code></pre></p> <p>bash\u4fdd\u7ba1\u30d5\u30a1\u30a4\u30ebDL <pre><code>sudo wget https://raw.githubusercontent.com/tmuxinator/tmuxinator/master/completion/tmuxinator.bash -O /etc/bash_completion.d/tmuxinator.bash\n</code></pre></p> <p>tmux\u30d1\u30cd\u30eb\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30ebDL \u5168\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>mkdir -p $HOME/.config/tmuxinator\n\ncat &gt; $HOME/.config/tmuxinator/midnight-monitor.yml &lt;&lt; EOF \n---\nname: midnight-monitor\nproject_root: \"$HOME/midnight\"\nwindows:\n- bash:\n    layout: even-horizontal\n    panes:\n    - cd $HOME/midnight; ./LiveView.sh\n    - mblog block --keystore-path $HOME/midnight/data/chains/partner_chains_template/keystore --tz Asia/Tokyo --db $HOME/midnight/mblog.db --watch\nEOF\n</code></pre></p> <p>\u30e2\u30cb\u30bf\u30fc\u30d1\u30cd\u30eb\u306e\u64cd\u4f5c\u65b9\u6cd5</p> <ul> <li> <p>\u30e2\u30cb\u30bf\u30fc\u30d1\u30cd\u30eb\u306e\u8d77\u52d5\uff08\u65b0\u898f\u8d77\u52d5\uff0f\u30a2\u30bf\u30c3\u30c1\uff09 <pre><code>mux midnight-monitor\n</code></pre></p> <p><code>midnight-monitor</code> \u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u8d77\u52d5\u3057\u3001\u30e2\u30cb\u30bf\u30fc\u30d1\u30cd\u30eb\u306b\u63a5\u7d9a\u3057\u307e\u3059\u3002 \u3059\u3067\u306b\u30bb\u30c3\u30b7\u30e7\u30f3\u304c\u5b58\u5728\u3059\u308b\u5834\u5408\u306f\u3001\u305d\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u306b\u63a5\u7d9a\uff08\u30a2\u30bf\u30c3\u30c1\uff09\u3055\u308c\u307e\u3059\u3002</p> </li> <li> <p>\u30e2\u30cb\u30bf\u30fc\u30d1\u30cd\u30eb\u3092\u4e00\u6642\u7684\u306b\u96e2\u308c\u308b\uff08\u30c7\u30bf\u30c3\u30c1\uff09</p> <p>Ctrl + B (\u96e2\u3057\u3066) D  \u30e2\u30cb\u30bf\u30fc\u30d1\u30cd\u30eb\u3092\u7d42\u4e86\u305b\u305a\u3001\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u52d5\u4f5c\u3055\u305b\u307e\u3059\u3002</p> </li> <li> <p>\u30e2\u30cb\u30bf\u30fc\u30d1\u30cd\u30eb\u3092\u518d\u8d77\u52d5\u3059\u308b\uff08\u8a2d\u5b9a\u5909\u66f4\u5f8c\u306a\u3069\uff09 <pre><code>mux stop midnight-monitor\nmux midnight-monitor\n</code></pre></p> <p>\u65e2\u5b58\u306e <code>midnight-monitor</code> \u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u505c\u6b62\u3057\u3001 \u8a2d\u5b9a\u3092\u53cd\u6620\u3059\u308b\u305f\u3081\u306b\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u65b0\u3057\u304f\u8d77\u52d5\u3057\u76f4\u3057\u307e\u3059\u3002</p> </li> </ul> <p>\u30aa\u30f3\u30c1\u30a7\u30fc\u30f3\u767b\u9332\u306e\u53cd\u6620\u306b\u3064\u3044\u3066</p> <p>\u30aa\u30f3\u30c1\u30a7\u30fc\u30f3\u767b\u9332\u306f\u5373\u6642\u53cd\u6620\u3055\u308c\u307e\u305b\u3093\u3002 \u30a8\u30dd\u30c3\u30af\u66f4\u65b0\u5f8c\u306b\u6709\u52b9\u5316\u3055\u308c\u308b\u4ed5\u69d8\u306e\u305f\u3081\u3001\u53cd\u6620\u307e\u3067\u5f85\u3061\u6642\u9593\u304c\u767a\u751f\u3057\u307e\u3059\u3002  </p> <ul> <li>Preview\uff1a\u7d04 2 \u65e5\u5f8c  </li> <li>Mainnet\uff1a\u7d04 10 \u65e5\u5f8c  </li> </ul> <p>\u3053\u306e\u671f\u9593\u4e2d\u306f <code>\u274c Not Registered</code> \u3068\u8868\u793a\u3055\u308c\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u7570\u5e38\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002 \u4e0a\u8a18\u306e\u53cd\u6620\u30bf\u30a4\u30df\u30f3\u30b0\u307e\u3067\u3057\u3070\u3089\u304f\u304a\u5f85\u3061\u304f\u3060\u3055\u3044\u3002</p> <p>\u4ee5\u4e0a\u3068\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"midnight/start-midnight-node/#3-1-midnight-blocklog","title":"3-1. Midnight-blocklog\u306e\u4f7f\u7528\u65b9\u6cd5","text":"<p>\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u8ffd\u8de1\u30e2\u30fc\u30c9\u306f\u4e0a\u8a18\u306eMidnight-monitor\u3067\u8d77\u52d5\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u4ed6\u306e\u4f7f\u3044\u65b9\u3092\u3054\u7d39\u4ecb\u3057\u307e\u3059\u3002</p> <p>\u5404\u7a2e\u30b3\u30de\u30f3\u30c9</p> <ul> <li>\u30b9\u30b1\u30b8\u30e5\u30fc\u30ebJSON\u306e\u51fa\u529b</li> </ul> <pre><code>mblog block --keystore-path $HOME/midnight/data/chains/partner_chains_template/keystore --tz UTC --output-json --current\n</code></pre> <p>\u73fe\u5728 epoch \u306e\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3092 JSON \u51fa\u529b</p> <pre><code>mblog block --keystore-path $HOME/midnight/data/chains/partner_chains_template/keystore --tz UTC --output-json --next\n</code></pre> <p>\u6b21 epoch \u306e\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3092 JSON \u51fa\u529b</p> <ul> <li>\u30d6\u30ed\u30c3\u30af\u751f\u6210\u5b9f\u7e3e\u306e\u8868\u793a</li> </ul> <pre><code>mblog log --db $HOME/midnight/mblog.db\n</code></pre> <p>\u6700\u65b0\u306e epoch\uff08\u30c7\u30d5\u30a9\u30eb\u30c8\uff09</p> <pre><code>mblog log --db $HOME/midnight/mblog.db --epoch ******\n</code></pre> <p>epoch \u6307\u5b9a(<code>243133</code>\u7b49)</p>"},{"location":"operation/","title":"\u30d7\u30fc\u30eb\u904b\u7528\u30de\u30cb\u30e5\u30a2\u30eb","text":"<p>\u3053\u306e\u30de\u30cb\u30e5\u30a2\u30eb\u306f\u3001Cardano\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u306e\u904b\u7528\u306b\u5fc5\u8981\u306a\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u3001\u9375\u30d5\u30a1\u30a4\u30eb\u306e\u5f79\u5272\u3001\u65e5\u3005\u306e\u904b\u7528\u30bf\u30b9\u30af\u3001\u91cd\u8981\u306a\u6ce8\u610f\u70b9\u3092\u4f53\u7cfb\u7684\u306b\u307e\u3068\u3081\u305f\u3082\u306e\u3067\u3059\u3002 \u5b9f\u8df5\u7684\u3067\u5b89\u5168\u306a\u904b\u7528\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u69cb\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p> <p>\u30b5\u30dd\u30fc\u30c8</p> <p>\u904b\u7528\u306b\u95a2\u3059\u308b\u8cea\u554f\u3084\u4e0d\u660e\u70b9\u304c\u3042\u308c\u3070\u3001Discord\u306eSPO JAPAN GUILD\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u306b\u53c2\u52a0\u3057\u3001\u73fe\u5f79SPO\u306b\u76f8\u8ac7\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"operation/#_2","title":"\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u306e\u7406\u89e3","text":"<p>\u4e3b\u8981\u306a\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u4e00\u89a7\uff1a</p> \u9805\u76ee \u5024 \u7528\u9014 stakeAddressDeposit <code>2 ADA</code> \u30b9\u30c6\u30fc\u30af\u30ad\u30fc\u767b\u9332\u6642\u306b\u5fc5\u8981\u306a\u4fdd\u8a3c\u91d1 stakePoolDeposit <code>500 ADA</code> \u30d7\u30fc\u30eb\u767b\u9332\u6642\u306b\u5fc5\u8981\u306a\u4fdd\u8a3c\u91d1 stakePoolTargetNum(<code>K</code>) <code>500</code> \u98fd\u548c\u95be\u5024\u8a2d\u5b9a\u7528\uff08\u7406\u60f3\u7684\u306a\u30d7\u30fc\u30eb\u6570\uff09 poolPledgeInfluence(<code>a0</code>) <code>0.3</code> \u8a93\u7d04\uff08pledge\uff09\u304c\u5831\u916c\u306b\u4e0e\u3048\u308b\u5f71\u97ff\u4fc2\u6570 minPoolCost <code>170 ADA</code> \u30d7\u30fc\u30eb\u304c\u8a2d\u5b9a\u3067\u304d\u308b\u6700\u5c0f\u56fa\u5b9a\u8cbb maxTxSize <code>16384</code> \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306e\u6700\u5927\u30b5\u30a4\u30ba maxBlockBodySize <code>90112</code> \u30d6\u30ed\u30c3\u30af\u672c\u4f53\u306e\u6700\u5927\u30b5\u30a4\u30ba epochLength <code>432000</code> 1\u30a8\u30dd\u30c3\u30af\u5185\u306e\u30b9\u30ed\u30c3\u30c8\u6570 slotLength <code>1</code> 1\u30b9\u30ed\u30c3\u30c8\u306e\u9577\u3055\uff08\u79d2\uff09 activeSlotsCoeff <code>0.05</code> \u30d6\u30ed\u30c3\u30af\u751f\u6210\u304c\u53ef\u80fd\u3068\u307f\u306a\u3055\u308c\u308b\u30a2\u30af\u30c6\u30a3\u30d6\u30b9\u30ed\u30c3\u30c8\u4fc2\u6570 slotsPerKESPeriod <code>129600</code> 1\u56de\u5206\u306eKES\u6709\u52b9\u671f\u9593\uff08\u30b9\u30ed\u30c3\u30c8\u6570\uff09 maxKESEvolutions <code>62</code> KES\u3092\u9032\u5316\uff08evolve\uff09\u3067\u304d\u308b\u56de\u6570\u306e\u4e0a\u9650"},{"location":"operation/#_3","title":"\u30b9\u30ed\u30c3\u30c8\u306e\u7406\u89e3","text":"<ul> <li>\u30b9\u30ed\u30c3\u30c8\uff08Slot\uff09 = \u30b8\u30a7\u30cd\u30b7\u30b9\u304b\u3089\u306e\u901a\u7b97\u30b9\u30ed\u30c3\u30c8\u756a\u53f7  </li> <li>\u30b9\u30ed\u30c3\u30c8\u30a8\u30dd\u30c3\u30af\uff08Slot epoch\uff09 = \u30a8\u30dd\u30c3\u30af\u5185\u3067\u306e\u30b9\u30ed\u30c3\u30c8\u756a\u53f7  </li> <li>1\u30b9\u30ed\u30c3\u30c8\uff1d1\u79d2\uff08slotLength\uff09  </li> <li>1\u30a8\u30dd\u30c3\u30af\uff1d432,000\u30b9\u30ed\u30c3\u30c8(epochLength)   \u2192 432,000 / 60 = 7200\u5206 / 60 = 120\u6642\u9593 / 24 = 5\u65e5</li> </ul>"},{"location":"operation/#_4","title":"\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30ed\u30c3\u30c8\u30ea\u30fc\u30c0\u30fc","text":"<p>\u30b9\u30ed\u30c3\u30c8\u30ea\u30fc\u30c0\u30fc\u306f\u3001\u59d4\u4efb\u91cf\uff08\u30b9\u30c6\u30fc\u30af\u91cf\uff09\u306b\u5fdc\u3058\u305f\u78ba\u7387\u3067\u3001\u5404\u30b9\u30ed\u30c3\u30c8\u3054\u3068\u306b\u30e9\u30f3\u30c0\u30e0\u306b\u6c7a\u5b9a\u3055\u308c\u307e\u3059\u3002 1\u30a8\u30dd\u30c3\u30af\u5185\u3067\u3001\u30d6\u30ed\u30c3\u30af\u751f\u6210\u304c\u53ef\u80fd\u306a\u30b9\u30ed\u30c3\u30c8\u306f\u7d045\uff05\u3067\u3059\u3002\uff08432,000 * 0.05 = 21,600\u30b9\u30ed\u30c3\u30c8\uff09  </p> <p>1\u30a8\u30dd\u30c3\u30af\u3067\u300c1\u30d6\u30ed\u30c3\u30af\u300d\u671f\u5f85\u5024\u3092\u5f97\u308b\u305f\u3081\u306e\u59d4\u4efb\u91cf\u306e\u76ee\u5b89\uff1a</p> <p>\u203b\u5b9f\u969b\u306b\u306f\u4e71\u6570\u306b\u3088\u308a\u524d\u5f8c\u3057\u307e\u3059\u3002</p> <ul> <li>1M ADA\uff1a \u7d0460%  </li> <li>2M ADA\uff1a \u7d0485%  </li> <li>3M ADA\uff1a \u7d0495%  </li> </ul> <p>\u30b9\u30ed\u30c3\u30c8\u30ea\u30fc\u30c0\u30fc\u306f\u30d7\u30fc\u30eb\u9593\u3067\u8abf\u6574\u3055\u308c\u305a\u3001\u8907\u6570\u30d7\u30fc\u30eb\u304c\u540c\u3058\u30b9\u30ed\u30c3\u30c8\u306b\u9078\u3070\u308c\u308b\u3053\u3068\u304c\u3042\u308b\u305f\u3081\u3001\u4ee5\u4e0b\u306e\u30d0\u30c8\u30eb\u304c\u767a\u751f\u3057\u307e\u3059\u3002</p> <p>\u30d0\u30c8\u30eb</p> <p>\u901a\u79f0\uff1a\u30b9\u30ed\u30c3\u30c8\u30d0\u30c8\u30eb\uff08SlotBattle / Stolen\uff09</p> <p>\u30b9\u30ed\u30c3\u30c8\u30d0\u30c8\u30eb\u3068\u306f\u3001\u8907\u6570\u306e\u30d7\u30fc\u30eb\u306b\u540c\u3058\u30b9\u30ed\u30c3\u30c8\u304c\u5272\u308a\u5f53\u3066\u3089\u308c\u305f\u6642\u306b\u767a\u751f\u3059\u308b\u73fe\u8c61\u3067\u3059\u3002 Cardano\u3067\u306f\u30011\u30b9\u30ed\u30c3\u30c8\u306b\u3064\u304d1\u30d6\u30ed\u30c3\u30af\u3057\u304b\u63a1\u7528\u3055\u308c\u306a\u3044\u305f\u3081\u3001\u3069\u306e\u30d7\u30fc\u30eb\u306e\u30d6\u30ed\u30c3\u30af\u304c\u9078\u3070\u308c\u308b\u304b\u3092VRF\u306e\u30e9\u30f3\u30c0\u30e0\u5024\u3067\u6c7a\u5b9a\u3057\u307e\u3059\u3002 \u5404\u30d7\u30fc\u30eb\u304c\u751f\u6210\u3059\u308bVRF\u5024\u3092\u6bd4\u8f03\u3057\u3001\u6700\u3082\u5024\u304c\u5c0f\u3055\u3044\u30d7\u30fc\u30eb\u306e\u30d6\u30ed\u30c3\u30af\u304c\u63a1\u7528\u3055\u308c\u307e\u3059\u3002 VRF\u306e\u6bd4\u8f03\u306f\u5b8c\u5168\u306b\u30e9\u30f3\u30c0\u30e0\u3067\u3042\u308b\u305f\u3081\u3001\u30b9\u30c6\u30fc\u30af\u91cf\u306b\u3088\u308b\u512a\u4f4d\u6027\u306f\u306a\u304f\u3001\u904b\u6b21\u7b2c\u3067\u7d50\u679c\u304c\u6c7a\u307e\u308a\u307e\u3059\u3002</p> <p>\u901a\u79f0\uff1a\u30cf\u30a4\u30c8\u30d0\u30c8\u30eb\uff08HeightBattle / Ghosted\uff09</p> <p>\u6570\u79d2\u4ee5\u5185\u306b\u8907\u6570\u306e\u30d7\u30fc\u30eb\u304c\u30d6\u30ed\u30c3\u30af\u3092\u751f\u6210\u3057\u305f\u5834\u5408\u306b\u767a\u751f\u3059\u308b\u7af6\u5408\u3002 \u4f1d\u64ad\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u5dee\u306b\u3088\u308a\u8907\u6570\u306e\u30d6\u30ed\u30c3\u30af\u304c\u540c\u6642\u306b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u4e0a\u306b\u73fe\u308c\u3001VRF\u5024\u306e\u6bd4\u8f03\u306b\u3088\u3063\u3066\u63a1\u7528\u30d6\u30ed\u30c3\u30af\u304c\u6c7a\u5b9a\u3055\u308c\u307e\u3059\u3002\uff08\u30e9\u30f3\u30c0\u30e0\u6027\u304c\u3042\u308a\u3001\u30b9\u30c6\u30fc\u30af\u91cf\u306e\u512a\u4f4d\u306f\u3042\u308a\u307e\u305b\u3093\uff09</p>"},{"location":"operation/#kes","title":"KES","text":"<p>\u8aac\u660e</p> <p>KES\u306f\u3001<code>Key Evolving Signatures</code>\u306e\u7565\u3067\u3059\u3002  </p> <p>\u30d6\u30ed\u30c3\u30af\u751f\u6210\u306b\u4f7f\u7528\u3059\u308b\u7f72\u540d\u9375\u3067\u3001\u904e\u53bb\u306e\u7f72\u540d\u3092\u5f8c\u304b\u3089\u66f8\u304d\u63db\u3048\u3089\u308c\u306a\u3044\u3088\u3046\u9375\u3092\u4e00\u5b9a\u671f\u9593\u3054\u3068\u306b\u9032\u5316\uff08evolve\uff09\u3055\u305b\u308b\u4ed5\u7d44\u307f\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002 \u30e1\u30a4\u30f3\u30cd\u30c3\u30c8\u3067\u306f\u3001129,600\u30b9\u30ed\u30c3\u30c8\uff08<code>slotsPerKESPeriod</code>\uff09 \u00d7 62\u56de\uff08<code>maxKESEvolutions</code>\uff09 = 8,035,200\u79d2\uff08\u7d0493\u65e5\uff09\u304c1\u3064\u306eKES\u9375\u306e\u6709\u52b9\u671f\u9593\u3067\u3042\u308a\u3001\u671f\u9650\u524d\u306b\u65b0\u3057\u3044KES\u3092\u4f5c\u6210\u3057\u3066\u66f4\u65b0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"operation/#vrf","title":"VRF","text":"<p>\u8aac\u660e</p> <p>VRF\u306f\u3001<code>Verifiable Random Function</code>\u306e\u7565\u3067\u3059\u3002  </p> <p>Ouroboros Praos\u3067\u306f\u3001VRF\u30ad\u30fc\u3092\u4f7f\u3063\u3066 \u5404\u30b9\u30ed\u30c3\u30c8\u3067\u30d7\u30fc\u30eb\u304c\u30b9\u30ed\u30c3\u30c8\u30ea\u30fc\u30c0\u30fc\u306b\u9078\u3070\u308c\u308b\u304b\u3069\u3046\u304b\u3092\u30e9\u30f3\u30c0\u30e0\u304b\u3064\u691c\u8a3c\u53ef\u80fd\u306a\u65b9\u6cd5\u3067\u5224\u5b9a \u3057\u307e\u3059\u3002 Praos\u3067\u306f\u30b9\u30ed\u30c3\u30c8\u30ea\u30fc\u30c0\u30fc\u306e\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u304c\u975e\u516c\u958b\u3067\u3001\u30ce\u30fc\u30c9\u306fVRF\u30ad\u30fc\uff08\u30aa\u30da\u30ec\u30fc\u30b7\u30e7\u30ca\u30eb\u8a3c\u660e\u66f8\u306b\u542b\u307e\u308c\u308b\u691c\u8a3c\u9375\uff09\u3092\u4f7f\u3063\u3066\u3001\u305d\u306e\u30b9\u30ed\u30c3\u30c8\u3067\u6b63\u5f53\u306b\u30d6\u30ed\u30c3\u30af\u751f\u6210\u6a29\u3092\u5f97\u305f\u3053\u3068\u3092\u8a3c\u660e\u3057\u307e\u3059\u3002</p>"},{"location":"operation/#_5","title":"\u5404\u7a2e\u9375\u30d5\u30a1\u30a4\u30eb\u306e\u5f79\u5272\u3068\u4fdd\u7ba1\u5834\u6240","text":""},{"location":"operation/#_6","title":"\u8a3c\u660e\u66f8\u304a\u3088\u3073\u9375\u30d5\u30a1\u30a4\u30eb\u306e\u8a73\u7d30","text":"<p>\u30fb\u30fb\u30fb\u30ed\u30c3\u30af\u5fc5\u9808\u30fb\u518d\u4f5c\u6210\u4e0d\u53ef\u30fb\u7d1b\u5931\u4e0d\u53ef \u30fb\u30fb\u30fb\u66f4\u65b0\u6642\u66f8\u304d\u63db\u3048\u30fb\u518d\u4f5c\u6210\u53ef\u80fd \ud83d\udd34\u30fb\u30fb\u30fbBP\u8d77\u52d5\u3067\u4f7f\u7528 \ud83d\udd37\u30fb\u30fb\u30fb\u30d6\u30ed\u30c3\u30af\u30ed\u30b0\u3067\u4f7f\u7528</p> <p>\u9375\u30d5\u30a1\u30a4\u30eb\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u306b\u3064\u3044\u3066</p> <p>\u30de\u30fc\u30af\u304c\u4ed8\u3044\u305f\u30d5\u30a1\u30a4\u30eb\u306f\u3001\u30d7\u30fc\u30eb\u904b\u55b6\u306b\u304a\u3044\u3066\u6975\u3081\u3066\u91cd\u8981\u306a\u9375\u30d5\u30a1\u30a4\u30eb\u3067\u3059\u3002 \u3053\u308c\u3089\u3092\u7d1b\u5931\u30fb\u7834\u640d\u3059\u308b\u3068\u30d7\u30fc\u30eb\u904b\u55b6\u3092\u7d99\u7d9a\u3067\u304d\u306a\u304f\u306a\u3063\u305f\u308a\u3001\u5831\u916c\u3084\u8cc7\u91d1\u3092\u5f15\u304d\u51fa\u305b\u306a\u304f\u306a\u308a\u307e\u3059\u3002 \u5fc5\u305a\u8907\u6570\u306eUSB\u30e1\u30c7\u30a3\u30a2\u306a\u3069\u306b\u5197\u9577\u5316\u30fb\u5206\u6563\u4fdd\u7ba1\u3057\u3001\u5b89\u5168\u306b\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3057\u3066\u304f\u3060\u3055\u3044\u3002 </p> \u30d5\u30a1\u30a4\u30eb \u7528\u9014 \u63a8\u5968\u4fdd\u7ba1\u5834\u6240 \u91cd\u8981\u5ea6 payment.vkey payment\u30a2\u30c9\u30ec\u30b9\u516c\u958b\u9375 \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 \uff0f USB payment.skey payment\u30a2\u30c9\u30ec\u30b9\u79d8\u5bc6\u9375 \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 \uff0f USB stake.vkey \u30b9\u30c6\u30fc\u30af\u30a2\u30c9\u30ec\u30b9\u516c\u958b\u9375 \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 \uff0f USB stake.skey \u30b9\u30c6\u30fc\u30af\u30a2\u30c9\u30ec\u30b9\u79d8\u5bc6\u9375 \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 \uff0f USB vrf.vkey\ud83d\udd37 VRF\u516c\u958b\u9375 BP \uff0f \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 \uff0f USB vrf.skey\ud83d\udd34 VRF\u79d8\u5bc6\u9375 BP \uff0f \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 \uff0f USB node.vkey \u30b3\u30fc\u30eb\u30c9\u516c\u958b\u9375 \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 \uff0f USB node.skey \u30b3\u30fc\u30eb\u30c9\u79d8\u5bc6\u9375 \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 \uff0f USB myCalidusKey.vkey Calidus\u516c\u958b\u9375 \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 \uff0f USB myCalidusKey.skey Calidus\u79d8\u5bc6\u9375 BP \uff0f \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 \uff0f USB payment.addr payment\u30a2\u30c9\u30ec\u30b9\u30d5\u30a1\u30a4\u30eb BP \uff0f \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 \uff0f USB stake.addr \u30b9\u30c6\u30fc\u30af\u30a2\u30c9\u30ec\u30b9\u30d5\u30a1\u30a4\u30eb BP \uff0f \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 \uff0f USB kes.vkey KES\u516c\u958b\u9375 \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 \uff0f USB kes.skey\ud83d\udd34 KES\u79d8\u5bc6\u9375 BP \uff0f \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 \uff0f USB node.cert\ud83d\udd34 \u30d7\u30fc\u30eb\u904b\u7528\u8a3c\u660e\u66f8 BP \uff0f \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 \uff0f USB pool.cert \u30d7\u30fc\u30eb\u767b\u9332\u8a3c\u660e\u66f8 \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 \uff0f USB node.counter \u30ab\u30a6\u30f3\u30bf\u30fc\u30d5\u30a1\u30a4\u30eb \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 \uff0f USB Calidus-MnemonicsKey.json Calidus\u30cb\u30fc\u30e2\u30cb\u30c3\u30af\u30d5\u30a1\u30a4\u30eb \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 \uff0f USB myCalidusRegistrationMetadata.json Calidus\u767b\u9332\u30e1\u30bf\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 \uff0f USB <p>Calidus\u95a2\u9023\u30d5\u30a1\u30a4\u30eb\uff08<code>myCalidusKey.vkey</code>\u3001<code>myCalidusKey.skey</code>\u3001<code>Calidus-MnemonicsKey.json</code>\u3001<code>myCalidusRegistrationMetadata.json</code>\uff09\u306f\u3001Calidus\u30ad\u30fc\u751f\u6210\u3092\u5b9f\u65bd\u3057\u305f\u5834\u5408\u306b\u4f5c\u6210\u3055\u308c\u308b\u30d5\u30a1\u30a4\u30eb\u3067\u3059\u3002 Calidus\u3092\u5229\u7528\u3057\u306a\u3044\u5834\u5408\u3001\u672c\u30d5\u30a1\u30a4\u30eb\u7fa4\u306f\u5b58\u5728\u3057\u307e\u305b\u3093\u3002</p>"},{"location":"operation/#_7","title":"\u30ce\u30fc\u30c9\u8d77\u52d5\u7528\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb","text":"\u30d5\u30a1\u30a4\u30eb \u7528\u9014 mainnet-byron-genesis.json Byron\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb mainnet-shelley-genesis.json Shelley\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb mainnet-alonzo-genesis.json Alonzo\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb mainnet-conway-genesis.json Conway\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb mainnet-config.json \u30ce\u30fc\u30c9\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb mainnet-topology.json \u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb"},{"location":"operation/#_8","title":"\u30b9\u30af\u30ea\u30d7\u30c8\u30d5\u30a1\u30a4\u30eb\u304a\u3088\u3073\u305d\u306e\u4ed6\u306e\u30d5\u30a1\u30a4\u30eb","text":"\u30d5\u30a1\u30a4\u30eb \u7528\u9014 \u63a8\u5968\u4fdd\u7ba1\u5834\u6240 \u91cd\u8981\u5ea6 startRelayNode1.sh \u30ea\u30ec\u30fc\u7528\u30ce\u30fc\u30c9\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8 \u30ea\u30ec\u30fc startBlockProducingNode.sh BP\u7528\u30ce\u30fc\u30c9\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8 BP gLiveView.sh \u30ce\u30fc\u30c9GUI\u7528\u30b9\u30af\u30ea\u30d7\u30c8 \u30ea\u30ec\u30fc/BP params.json \u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u30d5\u30a1\u30a4\u30eb BP poolMetaData.json \u30d7\u30fc\u30eb\u30e1\u30bf\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb BP poolMetaDataHash.txt poolMetaData.json\u30cf\u30c3\u30b7\u30e5\u5024\u30d5\u30a1\u30a4\u30eb BP fullUtxo.out UTXO\u51fa\u529b\u30d5\u30a1\u30a4\u30eb \u4f7f\u7528\u5f8c\u524a\u9664\u53ef - balance.out \u30a6\u30a9\u30ec\u30c3\u30c8\u6b8b\u9ad8\u51fa\u529b\u30d5\u30a1\u30a4\u30eb \u4f7f\u7528\u5f8c\u524a\u9664\u53ef - tx.tmp \u4eee\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb \u4f7f\u7528\u5f8c\u524a\u9664\u53ef - tx.raw \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb \u4f7f\u7528\u5f8c\u524a\u9664\u53ef - tx.signed \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u7f72\u540d\u4ed8\u304d\u30d5\u30a1\u30a4\u30eb \u4f7f\u7528\u5f8c\u524a\u9664\u53ef -"},{"location":"operation/#_9","title":"\u904b\u7528\u30bf\u30b9\u30af\u30c1\u30a7\u30c3\u30af\u30ea\u30b9\u30c8","text":"<p>\u5404\u4f5c\u696d</p> <p>\u65e5\u6b21\u4f5c\u696d</p> <ul> <li>\u30ce\u30fc\u30c9\u7a3c\u50cd\u72b6\u6cc1\u30c1\u30a7\u30c3\u30af(Grafana\u7b49)</li> <li>\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u306e\u78ba\u8a8d</li> </ul> <p>\u30a8\u30dd\u30c3\u30af\u6bce\u4f5c\u696d</p> <ul> <li>\u6b21\u30a8\u30dd\u30c3\u30af\u306e\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u78ba\u8a8d \uff08320,000 \u30b9\u30ed\u30c3\u30c8\u3092\u8d85\u3048\u3066\u304b\u3089\u30a8\u30dd\u30c3\u30af\u7d42\u4e86\u307e\u3067\u306b\u78ba\u8a8d\uff09</li> </ul> <p>3\u304b\u6708\u6bce\u4f5c\u696d</p> <ul> <li>KES\u306e\u66f4\u65b0\uff08KES\u9375\u306e\u518d\u751f\u6210\u304a\u3088\u3073\u8a3c\u660e\u66f8\u66f4\u65b0\uff09</li> </ul> <p>\u4e0d\u5b9a\u671f\u4f5c\u696d</p> <ul> <li>Ubuntu\u30d1\u30c3\u30b1\u30fc\u30b8\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8</li> <li>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8</li> <li>\u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3\u88fd\u30a2\u30d7\u30ea\uff08CNCLI\u3001gLiveView \u7b49\uff09\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8</li> <li>\u30b5\u30fc\u30d0\u30fc\u969c\u5bb3\u5bfe\u5fdc</li> <li>\u30d7\u30fc\u30eb\u8a2d\u5b9a\u5909\u66f4\u7b49</li> </ul>"},{"location":"operation/add-relay/","title":"\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u5897\u8a2d","text":"<p>\u5897\u8a2d\u3059\u308b\u30ea\u30ec\u30fc\u30b5\u30fc\u30d0\u30fc\u3067\u306f\u3001\u307e\u305a1\u301c3\u3092\u5b9f\u65bd\u3057\u3001\u305d\u306e\u5f8c4\u4ee5\u964d\u306e\u624b\u9806\u3078\u9032\u3093\u3067\u304f\u3060\u3055\u3044\u3002    </p> \u5897\u8a2d\u3059\u308b\u30ea\u30ec\u30fc\u30b5\u30fc\u30d0\u30fc\u3067\u5b9f\u65bd"},{"location":"operation/add-relay/#1-ubuntu","title":"1. Ubuntu\u521d\u671f\u8a2d\u5b9a","text":"<p>https://docs.spojapanguild.net/setup/ubuntu-setup/#ubuntu</p>"},{"location":"operation/add-relay/#2","title":"2. \u30ce\u30fc\u30c9\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7","text":"<p>https://docs.spojapanguild.net/setup/node-setup</p>"},{"location":"operation/add-relay/#3","title":"3. \u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u8a2d\u5b9a","text":"<p>https://docs.spojapanguild.net/setup/relay-bp-setup/#2</p>"},{"location":"operation/add-relay/#4-bp1","title":"4. BP\u3068\u30ea\u30ec\u30fc1\u306e\u30c8\u30dd\u30ed\u30b8\u30fc\u5909\u66f4","text":"\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ea\u30ec\u30fc\u30ce\u30fc\u30c91 <p>\u5b9f\u884c\u524d\u306b <code>+</code> \u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u6ce8\u91c8\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002  </p> <p><pre><code>cat &gt; $NODE_HOME/${NODE_CONFIG}-topology.json &lt;&lt; EOF\n{\n  \"bootstrapPeers\": null,\n  \"localRoots\": [\n    {\n      \"accessPoints\": [\n        {\n          \"address\": \"\u30ea\u30ec\u30fc1\u306eIP\",#(1)!\n          \"port\": 6000 #(2)!\n        },\n        {\n          \"address\": \"\u30ea\u30ec\u30fc2\u306eIP\",#(3)!\n          \"port\": 6000 #(4)!\n        }\n      ],\n      \"advertise\": false,#(8)!\n      \"trustable\": true,\n      \"valency\": 2 #(5)!\n    }\n  ],\n  \"publicRoots\": [],#(6)!\n  \"useLedgerAfterSlot\": -1 #(7)!\n}\nEOF\n</code></pre></p> <ol> <li>\u30ea\u30ec\u30fc1\u306eIP\u30a2\u30c9\u30ec\u30b9\u307e\u305f\u306fDNS\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>\u30ea\u30ec\u30fc1\u306e\u30dd\u30fc\u30c8\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>\u30ea\u30ec\u30fc2\u306eIP\u30a2\u30c9\u30ec\u30b9\u307e\u305f\u306fDNS\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>\u30ea\u30ec\u30fc2\u306e\u30dd\u30fc\u30c8\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>\u56fa\u5b9a\u63a5\u7d9a\u30d4\u30a2\u306e\u6570\u3092\u6307\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> <li><code>\"publicRoots\":</code>\u3092\u7a7a\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> <li><code>-1</code>\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u53f0\u5e33\u304b\u3089\u63a5\u7d9a\u5148\u3092\u53d6\u5f97\u3057\u306a\u3044BP\u30e2\u30fc\u30c9\u306b\u306a\u308a\u307e\u3059\u3002</li> <li>\u3053\u3053\u3067\u306f<code>advertise</code>\u3092<code>false</code>\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> </ol> <p>\u5b9f\u884c\u524d\u306b <code>+</code> \u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u6ce8\u91c8\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002  </p> <p><pre><code>cat &gt; $NODE_HOME/${NODE_CONFIG}-topology.json &lt;&lt; EOF\n{\n  \"bootstrapPeers\": [\n    {\n      \"address\": \"backbone.cardano.iog.io\",\n      \"port\": 3001\n    },\n    {\n      \"address\": \"backbone.mainnet.cardanofoundation.org\",\n      \"port\": 3001\n    },\n    {\n      \"address\": \"backbone.mainnet.emurgornd.com\",\n      \"port\": 3001\n    }\n  ],\n  \"localRoots\": [\n    {\n      \"accessPoints\": [\n        {\n          \"address\": \"BP\u306eIP\",#(1)!\n          \"port\": 00000 #(2)!\n        }\n      ],\n      \"advertise\": false,#(5)!\n      \"trustable\": true,\n      \"valency\": 1\n    },\n    {\n      \"accessPoints\": [\n        {\n          \"address\": \"\u30ea\u30ec\u30fc2\u306eIP\",#(3)!\n          \"port\": 6000 #(4)!\n        }\n      ],\n      \"advertise\": true,\n      \"trustable\": true,\n      \"valency\": 1\n    }\n  ],\n  \"publicRoots\": [\n    {\n      \"accessPoints\": [],\n      \"advertise\": false\n    }\n  ],\n  \"useLedgerAfterSlot\": 157852837\n}\nEOF\n</code></pre></p> <ol> <li>BP\u306eIP\u30a2\u30c9\u30ec\u30b9\u307e\u305f\u306fDNS\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>BP\u306e\u30dd\u30fc\u30c8\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>\u30ea\u30ec\u30fc2\u306eIP\u30a2\u30c9\u30ec\u30b9\u307e\u305f\u306fDNS\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>\u30ea\u30ec\u30fc2\u306e\u30dd\u30fc\u30c8\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002</li> <li><code>accessPoints</code>\u306bBP\u3092\u6307\u5b9a\u3059\u308b\u6642\u306f\u5fc5\u305a<code>advertise</code>\u3092<code>false</code>\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> </ol> <p>\u30ce\u30fc\u30c9\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002 <pre><code>sudo systemctl reload-or-restart cardano-node\n</code></pre></p>"},{"location":"operation/add-relay/#5-poolcert","title":"5. \u904b\u7528\u8a3c\u660e\u66f8(pool.cert)\u306e\u66f4\u65b0","text":"<p>\u904b\u7528\u8a3c\u660e\u66f8(pool.cert)\u306e\u66f4\u65b0\u3092\u5b9f\u884c\u3057\u3001\u5897\u8a2d\u3057\u305f\u30ea\u30ec\u30fc\u3092\u30c1\u30a7\u30fc\u30f3\u306b\u767b\u9332\u3057\u307e\u3059\u3002</p>"},{"location":"operation/add-relay/#6-grafana","title":"6. Grafana\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7","text":"\u5897\u8a2d\u3057\u305f\u30ea\u30ec\u30fc\u30b5\u30fc\u30d0\u30fc\u3067\u5b9f\u65bdGrafana\u5c0e\u5165\u6e08\u307f\u306e\u30ea\u30ec\u30fc\u30b5\u30fc\u30d0\u30fc\u3067\u5b9f\u65bd <p>\u300c1.\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u300d\u3092\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044\u3002  </p> <p>\u300cBP\u307e\u305f\u306f\u30ea\u30ec\u30fc2\u4ee5\u964d\u300d\u30bf\u30d6\u3068\u300c\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9/BP\u300d\u30bf\u30d6\u3092\u5897\u8a2d\u3057\u305f\u30ea\u30ec\u30fc\u30b5\u30fc\u30d0\u30fc\u3067\u5b9f\u65bd\u3057\u307e\u3059\u3002 https://docs.spojapanguild.net/setup/monitoring-setup/#1</p> <p>\u300c2.\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210\u300d\u3092\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044\u3002  </p> <p>Grafana\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u30b5\u30fc\u30d0\u30fc\u3067\u5b9f\u65bd\u3057\u307e\u3059\u3002 https://docs.spojapanguild.net/setup/monitoring-setup/#2</p>"},{"location":"operation/blocknotify-reinstall/","title":"SPOBlockNotify\u79fb\u884c\u624b\u9806","text":"<p>\u3053\u306e\u30de\u30cb\u30e5\u30a2\u30eb\u306b\u3064\u3044\u3066</p> <p>\u25a0\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u5bfe\u8c61\u30d1\u30bf\u30fc\u30f3</p> <ol> <li>\u300c\u65e7\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u901a\u77e5 v.1.x.x\u300d\u2192\u300cSPO Block Notify v.2.2.1\u300d</li> <li>\u300cSPO Block Notify v.2.1.2/v2.1.3\u300d\u2192\u300cSPO Block Notify v.2.2.1\u300d</li> <li>\u300c\u65e7\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u901a\u77e5 \u672a\u5c0e\u5165\u300d\u2192\u300cSPO Block Notify v.2.2.1\u300d</li> </ol> <p>\u25a0\u5bfe\u8c61\u30b5\u30fc\u30d0\u30fc</p> <ul> <li>BP\u30b5\u30fc\u30d0\u30fc</li> </ul> <p>\u25a0\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u901a\u77e5\u304b\u3089\u306e\u5909\u66f4\u70b9</p> <ul> <li><code>~/cnode/scripts/block-notify/i18n/</code>\u5185\u306b\u3042\u308b\u8a00\u8a9e\u30d5\u30a1\u30a4\u30eb\u3067\u591a\u8a00\u8a9e\u901a\u77e5\u304c\u53ef\u80fd</li> <li>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092<code>.env</code>\u304b\u3089<code>config.ini</code>\u3078\u5909\u66f4</li> <li>tmux\u3067\u306e\u5e38\u99d0\u3092\u5ec3\u6b62\u3057\u3001systemd\u5358\u4f53\u3067\u5e38\u99d0\u3055\u305b\u308b</li> <li><code>leaderlog.service</code>\u306b\u3088\u308b\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u53d6\u5f97\u81ea\u52d5\u5316\u3078\u5909\u66f4</li> <li>\u6b21\u30a8\u30dd\u30c3\u30af\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u65e5\u4ed8\u306e\u901a\u77e5\u6709\u7121\u3092\u9078\u629e\u53ef\u80fd</li> </ul> <p>\u4ee5\u4e0b\u306f\u73fe\u5728\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u72b6\u6cc1\u306b\u5408\u308f\u305b\u3066\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> \u65e7\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u901a\u77e5 v.1.x.x\u304b\u3089\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8 SPO Block Notify v.2.1.2/v2.1.3\u304b\u3089\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8 \u65e7\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u901a\u77e5 \u672a\u5c0e\u5165\u304b\u3089\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"operation/blocknotify-reinstall/#1-v1xx","title":"1. \u65e7\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u901a\u77e5 v.1.x.x\u304b\u3089\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8","text":"<p>\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u66f4\u65b0\u3059\u308b <pre><code>sudo apt update &amp;&amp; sudo apt upgrade -y\n</code></pre></p> <p>python\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3059\u308b <pre><code>python3 -V\n</code></pre></p> <p>Python 3.10\u4ee5\u4e0a</p> Python 3.9\u4ee5\u4e0b\u306e\u5834\u5408\u3053\u3061\u3089\u306e\u30c4\u30fc\u30eb\u3067\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3057\u3066\u304f\u3060\u3055\u3044 <p>pythonUpdate.sh\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u81ea\u52d5\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b <pre><code>cd\nwget https://raw.githubusercontent.com/btbf/spojapanguild/master/scripts/pythonUpdate.sh\nchmod +x pythonUpdate.sh\n./pythonUpdate.sh\n</code></pre></p> <p>\u4f9d\u5b58\u95a2\u4fc2\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b <pre><code>sudo apt install -y build-essential libssl-dev libffi-dev python3-dev python3-pip python3-testresources\n</code></pre> <pre><code>pip3 install --upgrade watchdog pytz python-dateutil requests discordwebhook slackweb i18nice\n</code></pre></p>"},{"location":"operation/blocknotify-reinstall/#1-1","title":"1-1. \u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u4fee\u6b63","text":"<p>\u30b5\u30fc\u30d3\u30b9\u3092\u505c\u6b62\u3059\u308b <pre><code>sudo systemctl stop cnode-cncli-sync.service\n</code></pre></p> <p>tmux\u7d42\u4e86\u78ba\u8a8d <pre><code>tmux ls\n</code></pre> \u4ee5\u4e0b\u306e\u623b\u308a\u5024\u3092\u78ba\u8a8d\u3059\u308b</p> <p>no server running on ~~~~</p> <p>\u65e2\u5b58\u306e\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u901a\u77e5\u30b5\u30fc\u30d3\u30b9\u3092\u524a\u9664\u3059\u308b Ubuntu22.04\u306e\u5834\u5408\u306f\uff11\u884c\u3065\u3064\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>sudo systemctl disable cnode-blockcheck.service\nsudo rm /etc/systemd/system/cnode-blockcheck.service\nsudo systemctl daemon-reload\n</code></pre></p> <p>\u65b0\u3057\u3044\u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b \u305d\u308c\u305e\u308c\u306e\u30bf\u30d6\u3092\u5168\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> cnclivalidateleaderloglogmonitorblocknotify \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/service/cnode-cncli-sync.service &lt;&lt; EOF \n# file: /etc/systemd/system/cnode-cncli-sync.service\n\n[Unit]\nDescription=Cardano Node - CNCLI sync\nBindsTo=cardano-node.service\nAfter=cardano-node.service\n\n[Service]\nType=simple\nRestart=on-failure\nRestartSec=20\nUser=$(whoami)\nWorkingDirectory=${NODE_HOME}/scripts\nExecStart=/bin/bash -l -c \"exec ${NODE_HOME}/scripts/cncli.sh sync\"\nExecStop=/bin/bash -l -c \"exec kill -2 \\$(ps -ef | grep [c]ncli.sync.*.${NODE_HOME}/ | tr -s ' ' | cut -d ' ' -f2) &amp;&gt;/dev/null\"\nKillSignal=SIGINT\nSuccessExitStatus=143\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=cnode-cncli-sync\nTimeoutStopSec=5\nKillMode=mixed\n\n[Install]\nWantedBy=cardano-node.service\nEOF\n</code></pre> \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/service/cnode-cncli-validate.service &lt;&lt; EOF \n# file: /etc/systemd/system/cnode-cncli-validate.service\n\n[Unit]\nDescription=Cardano Node - CNCLI validate\nBindsTo=cnode-cncli-sync.service\nAfter=cnode-cncli-sync.service\n\n[Service]\nType=simple\nRestart=on-failure\nRestartSec=20\nUser=$(whoami)\nWorkingDirectory=${NODE_HOME}/scripts\nExecStartPre=/bin/sleep 5\nExecStart=/bin/bash -l -c \"exec ${NODE_HOME}/scripts/cncli.sh validate\"\nSuccessExitStatus=143\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=cnode-cncli-validate\nTimeoutStopSec=5\nKillMode=mixed\n\n[Install]\nWantedBy=cnode-cncli-sync.service\nEOF\n</code></pre> \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/service/cnode-cncli-leaderlog.service &lt;&lt; EOF\n# file: /etc/systemd/system/cnode-cncli-leaderlog.service\n\n[Unit]\nDescription=Cardano Node - CNCLI Leaderlog\nBindsTo=cnode-cncli-sync.service\nAfter=cnode-cncli-sync.service\n\n[Service]\nType=simple\nRestart=on-failure\nRestartSec=20\nUser=$(whoami)\nWorkingDirectory=${NODE_HOME}\nExecStart=/bin/bash -l -c \"exec ${NODE_HOME}/scripts/cncli.sh leaderlog\"\nSuccessExitStatus=143\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=cnode-cncli-leaderlog\nTimeoutStopSec=5\nKillMode=mixed\n\n[Install]\nWantedBy=cnode-cncli-sync.service\nEOF\n</code></pre> \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/service/cnode-logmonitor.service &lt;&lt; EOF \n# file: /etc/systemd/system/cnode-logmonitor.service\n\n[Unit]\nDescription=Cardano Node - CNCLI logmonitor\nBindsTo=cardano-node.service\nAfter=cardano-node.service\n\n[Service]\nType=simple\nRestart=on-failure\nRestartSec=1\nUser=$(whoami)\nWorkingDirectory=${NODE_HOME}\nExecStart=/bin/bash -l -c \"exec ${NODE_HOME}/scripts/logMonitor.sh\"\nExecStop=/bin/bash -l -c \"exec kill -2 \\$(ps -ef | grep -m1 ${NODE_HOME}/scripts/logMonitor.sh | tr -s ' ' | cut -d ' ' -f2) &amp;&gt;/dev/null\"\nKillSignal=SIGINT\nSuccessExitStatus=143\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=cnode-logmonitor\nTimeoutStopSec=5\nKillMode=mixed\n\n[Install]\nWantedBy=cardano-node.service\nEOF\n</code></pre> \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/service/cnode-blocknotify.service &lt;&lt; EOF \n# file: /etc/systemd/system/cnode-blocknotify.service\n\n[Unit]\nDescription=Cardano Node - SPO Blocknotify\nBindsTo=cnode-cncli-sync.service\nAfter=cnode-cncli-sync.service\n\n[Service]\nType=simple\nUser=$(whoami)\nWorkingDirectory=${NODE_HOME}/scripts/block-notify\nExecStart=/bin/bash -c 'cd ${NODE_HOME}/scripts/block-notify/ &amp;&amp; python3 -u block_notify.py'\nRestart=on-failure\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=cnode-blocknotify\n\n[Install]\nWantedBy=cnode-cncli-sync.service\nEOF\n</code></pre> <p>\u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u30b7\u30b9\u30c6\u30e0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3078\u30b3\u30d4\u30fc\u3059\u308b</p> Ubuntu22.04\u306e\u5834\u5408\u306f\uff11\u884c\u3065\u3064\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>sudo cp $NODE_HOME/service/cnode-cncli-sync.service /etc/systemd/system/cnode-cncli-sync.service\nsudo cp $NODE_HOME/service/cnode-cncli-validate.service /etc/systemd/system/cnode-cncli-validate.service\nsudo cp $NODE_HOME/service/cnode-cncli-leaderlog.service /etc/systemd/system/cnode-cncli-leaderlog.service\nsudo cp $NODE_HOME/service/cnode-logmonitor.service /etc/systemd/system/cnode-logmonitor.service\nsudo cp $NODE_HOME/service/cnode-blocknotify.service /etc/systemd/system/cnode-blocknotify.service\n</code></pre> <p>\u6a29\u9650\u3092\u5909\u66f4\u3059\u308b Ubuntu22.04\u306e\u5834\u5408\u306f\uff11\u884c\u3065\u3064\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>sudo chmod 644 /etc/systemd/system/cnode-cncli-sync.service\nsudo chmod 644 /etc/systemd/system/cnode-cncli-validate.service\nsudo chmod 644 /etc/systemd/system/cnode-cncli-leaderlog.service\nsudo chmod 644 /etc/systemd/system/cnode-logmonitor.service\nsudo chmod 644 /etc/systemd/system/cnode-blocknotify.service\n</code></pre> \u30b5\u30fc\u30d3\u30b9\u30c7\u30fc\u30e2\u30f3\u3092\u518d\u8d77\u52d5\u3059\u308b <pre><code>sudo systemctl daemon-reload\n</code></pre> blockNotify\u3092\u767b\u9332\u3059\u308b <pre><code>sudo systemctl enable cnode-blocknotify.service\n</code></pre></p>"},{"location":"operation/blocknotify-reinstall/#1-2-spo-block-notify","title":"1-2. SPO Block Notify\u8a2d\u5b9a","text":"<p>\u4f9d\u5b58\u95a2\u4fc2\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb</p> <p>Block Notify\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9  <pre><code>bn_release=\"$(curl -s https://api.github.com/repos/btbf/block-notify/releases/latest | jq -r '.tag_name')\"\nwget https://github.com/btbf/block-notify/archive/refs/tags/${bn_release}.tar.gz -P $NODE_HOME/scripts\n</code></pre></p> <p>\u30b9\u30af\u30ea\u30d7\u30c8\u5c55\u958b <pre><code>cd $NODE_HOME/scripts\ntar zxvf ${bn_release}.tar.gz block-notify-${bn_release}/block_notify.py block-notify-${bn_release}/i18n/ block-notify-${bn_release}/config.ini\nmv block-notify-${bn_release} block-notify\nrm ${bn_release}.tar.gz\ncd block-notify\n</code></pre></p> <p>\u65e7<code>.env</code>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u30d0\u30c3\u30af\u30a2\u30c3\u30d7 <pre><code>cp $NODE_HOME/guild-db/blocklog/.env $NODE_HOME/scripts/block-notify/.env\n</code></pre></p> <p>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u5024\u5909\u66f4 <pre><code>sed -i config.ini \\\n    -e 's!/opt/cardano/cnode!'${NODE_HOME}'!' \\\n    -e 's!files/!'${NODE_CONFIG}-'!' \\\n    -e 's!notify_language = en!notify_language = ja!' \\\n    -e 's!Etc/UTC!Asia/Tokyo!'\n</code></pre></p> <p>\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u5185\u5bb9\u8a73\u7d30\u3092\u53c2\u7167\u3057\u3001\u3054\u81ea\u8eab\u306e\u74b0\u5883\u306b\u5408\u308f\u305b\u305f\u5024\u3092\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p><pre><code>cd $NODE_HOME/scripts/block-notify\nnano config.ini\n</code></pre> \u65e7<code>.env</code>\u30d5\u30a1\u30a4\u30eb\u306b\u8a2d\u5b9a\u4e2d\u306e\u5024\u3092\u78ba\u8a8d\u3059\u308b\u5834\u5408\u306f <pre><code>cat $NODE_HOME/scripts/block-notify/.env\n</code></pre></p> <p>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u5185\u5bb9\u8a73\u7d30</p> \u9805\u76ee \u5024 \u4f7f\u7528\u7528\u9014 <code>pool_ticker</code> ex.) SJG \u30d7\u30fc\u30eb\u30c6\u30a3\u30c3\u30ab\u30fc\u540d\u3092\u5165\u529b\u3059\u308b <code>notify_language</code> \u82f1\u8a9e:<code>en</code>\u65e5\u672c\u8a9e:<code>ja</code> \u901a\u77e5\u8a00\u8a9e\u3092\u5165\u529b\u3059\u308b <code>notify_timezone</code> Asia/Tokyo\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u4e00\u89a7 \u304a\u4f4f\u3044\u306e\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u3092\u6307\u5b9a\u3059\u308b <code>notify_platform</code> <code>Line</code><code>Discord</code><code>Slack</code><code>Telegram</code> \u901a\u77e5\u5148\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3092\u6307\u5b9a\u3059\u308b (\u8907\u6570\u6307\u5b9a\u306f\u7121\u52b9) <code>notify_level</code> \u5168\u3066:<code>All</code>Confirm\u4ee5\u5916:<code>ExceptCofirm</code>Miss\u306e\u307f:<code>OnlyMissed</code> \u901a\u77e5\u57fa\u6e96\u3092\u8a2d\u5b9a\u3059\u308b <code>nextepoch_leader_date</code> \u6982\u8981\u306e\u307f:<code>SummaryOnly</code>\u6982\u8981\u3068\u65e5\u4ed8:<code>SummaryDate</code> \u6b21\u30a8\u30dd\u30c3\u30af\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u65e5\u6642\u306e\u901a\u77e5\u6709\u7121\u6b21\u30a8\u30dd\u30c3\u30af\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u65e5\u4ed8\u4e00\u89a7\u3092\u901a\u77e5\u306b\u6d41\u3057\u305f\u304f\u306a\u3044\u5834\u5408\u306f<code>SummaryOnly</code>\u3092\u8a18\u8f09\u3057\u3066\u304f\u3060\u3055\u3044 <code>line_notify_token</code> LINE\u8a2d\u5b9a\u306e(8)\u3067\u767a\u884c\u3057\u305f\u30c8\u30fc\u30af\u30f3ID Line Notify\u30c8\u30fc\u30af\u30f3\u3092\u5165\u529b\u3059\u308b <code>discord_webhook_url</code> Discord\u8a2d\u5b9a\u306e(7)\u3067\u767a\u884c\u3057\u305f\u30a6\u30a7\u30d6\u30d5\u30c3\u30afURL Discord\u30a6\u30a7\u30d6\u30d5\u30c3\u30afURL\u3092\u5165\u529b\u3059\u308b <code>slack_webhook_url</code> Slack\u8a2d\u5b9a\u306e(4)\u3067\u767a\u884c\u3057\u305fWebhook URL Slack\u30a6\u30a7\u30d6\u30d5\u30c3\u30afURL\u3092\u5165\u529b\u3059\u308b <code>telegram_token</code> Telegram\u8a2d\u5b9a\u306e(5)\u3067\u767a\u884c\u3057\u305fAPI\u30c8\u30fc\u30af\u30f3 Telegram API\u30c8\u30fc\u30af\u30f3\u3092\u5165\u529b\u3059\u308b <code>telegram_id</code> Telegram\u8a2d\u5b9a\u306e(9)\u3067\u8868\u793a\u3055\u308c\u305fChat id Telegram ChatID\u3092\u5165\u529b\u3059\u308b <code>node_home</code> ex.)<code>/home/usr/cnode</code> node_home\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30d1\u30b9\u3092\u5165\u529b\u3059\u308b <code>guild_db_dir</code> ex.)<code>%(node_home)s/guild-db/blocklog/</code> guild-db\u306e\u30d1\u30b9\u3092\u5165\u529b\u3059\u308b<code>%(node_home)s</code>\u306f\u5909\u6570\u306e\u305f\u3081\u5909\u66f4\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044 <code>shelley_genesis</code> ex.)<code>%(node_home)s/files/shelley-genesis.json</code> shelley_genesis\u306e\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u3092\u5165\u529b\u3059\u308b<code>%(node_home)s</code>\u306f\u5909\u6570\u306e\u305f\u3081\u5909\u66f4\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044 <code>byron_genesis</code> ex.)<code>%(node_home)s/files/byron-genesis.json</code> byron_genesis\u306e\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u3092\u5165\u529b\u3059\u308b<code>%(node_home)s</code>\u306f\u5909\u6570\u306e\u305f\u3081\u5909\u66f4\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044 <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>python3 $NODE_HOME/scripts/block-notify/block_notify.py version\n</code></pre></p>"},{"location":"operation/blocknotify-reinstall/#1-3","title":"1-3. \u30b5\u30fc\u30d3\u30b9\u8d77\u52d5","text":"<p>\u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\u306b\u3064\u3044\u3066</p> <ul> <li><code>cncli</code>\u304a\u3088\u3073<code>logmonitor</code>\u306f<code>cnode-node.service</code>\u306b\u7d10\u3065\u3044\u3066\u8d77\u52d5\u3057\u307e\u3059</li> <li><code>validate</code>\u3001<code>leaderlog</code>\u3001<code>blockNotifi</code>\u306f<code>cnode-cncli-sync.service</code>\u306b\u7d10\u3065\u3044\u3066\u8d77\u52d5\u3057\u307e\u3059\u3002</li> </ul> Ubuntu22.04\u306e\u5834\u5408\u306f\uff11\u884c\u3065\u3064\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>sudo systemctl start cnode-cncli-sync.service\nsudo systemctl start cnode-logmonitor.service\n</code></pre>"},{"location":"operation/blocknotify-reinstall/#1-4","title":"1-4. \u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\u78ba\u8a8d","text":"<p>\u4fbf\u5229\u306a\u30a8\u30a4\u30ea\u30a2\u30b9\u8a2d\u5b9a</p> <p>\u30a8\u30a4\u30ea\u30a2\u30b9\u8a2d\u5b9a</p> <p>\u30b9\u30af\u30ea\u30d7\u30c8\u3078\u306e\u30d1\u30b9\u3092\u901a\u3057\u3001\u30a8\u30a4\u30ea\u30a2\u30b9\u3067\u8d77\u52d5\u51fa\u6765\u308b\u3088\u3046\u306b\u3059\u308b\u3002 <pre><code>echo alias cnclilog='\"journalctl --no-hostname -u cnode-cncli-sync -f\"' &gt;&gt; $HOME/.bashrc\necho alias validate='\"journalctl --no-hostname -u cnode-cncli-validate -f\"' &gt;&gt; $HOME/.bashrc\necho alias leaderlog='\"journalctl --no-hostname -u cnode-cncli-leaderlog -f\"' &gt;&gt; $HOME/.bashrc\necho alias logmonitor='\"journalctl --no-hostname -u cnode-logmonitor -f\"' &gt;&gt; $HOME/.bashrc\necho alias blocknotify='\"journalctl --no-hostname -u cnode-blocknotify -f\"' &gt;&gt; $HOME/.bashrc\n</code></pre> \u74b0\u5883\u5909\u6570\u518d\u8aad\u307f\u8fbc\u307f <pre><code>source $HOME/.bashrc\n</code></pre> \u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5165\u529b\u3057\u3066\u5b9f\u884c\u3059\u308b\u3068\u3001\u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u30ed\u30b0\u304c\u95b2\u89a7\u3067\u304d\u307e\u3059\u3002 \u5358\u8a9e\u3092\u5165\u529b\u3059\u308b\u3060\u3051\u3067\u3001\u8d77\u52d5\u72b6\u614b(\u30ed\u30b0)\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002 <code>cnclilog</code> <code>validate</code> <code>leaderlog</code> <code>logmonitor</code> <code>blocknotify</code></p> <p>\u4ed6\u30b5\u30fc\u30d3\u30b9\u306e\u8d77\u52d5\u78ba\u8a8d</p> cnclivalidateleaderloglogmonitorblockNotify <p>\u3053\u3061\u3089\u306e\u30b5\u30fc\u30d3\u30b9\u306f\u30ce\u30fc\u30c9\u30df\u30cb\u30d7\u30ed\u30c8\u30b3\u30eb\u304b\u3089\u30c1\u30a7\u30fc\u30f3\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u307e\u3059</p> <pre><code>cnclilog\n</code></pre> <p>\u4ee5\u4e0b\u306e\u8868\u793a\u306a\u3089\u6b63\u5e38\u3067\u3059\u3002</p> <p>INFO  cncli::nodeclient::sync &gt; block xxxxxxxxx of xxxxxxxxx: 100.00% synced</p> <p>Ctrl+c\u3067\u9589\u3058\u307e\u3059</p> <p>\u3053\u3061\u3089\u306e\u30b5\u30fc\u30d3\u30b9\u306f\u751f\u6210\u3057\u305f\u30d6\u30ed\u30c3\u30af\u306e\u30aa\u30f3\u30c1\u30a7\u30fc\u30f3\u30c7\u30fc\u30bf\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</p> <pre><code>validate\n</code></pre> <p>\u4ee5\u4e0b\u306e\u8868\u793a\u306a\u3089\u6b63\u5e38\u3067\u3059\u3002</p> <p>~ CNCLI Block Validation started ~</p> <p>Ctrl+c\u3067\u9589\u3058\u307e\u3059</p> <p>\u3053\u3061\u3089\u306e\u30b5\u30fc\u30d3\u30b9\u306f\u30b9\u30ed\u30c3\u30c8\u30ea\u30fc\u30c0\u30fc\u3092\u81ea\u52d5\u7684\u306b\u7b97\u51fa\u3057\u307e\u3059\u3002  \u6b21\u30a8\u30dd\u30c3\u30af\u306e1.5\u65e5\u524d\u304b\u3089\u6b21\u30a8\u30dd\u30c3\u30af\u306e\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3092\u81ea\u52d5\u7b97\u51fa\u3057\u307e\u3059\u3002</p> <pre><code>leaderlog\n</code></pre> <p>\u4ee5\u4e0b\u306e\u8868\u793a\u306a\u3089\u6b63\u5e38\u3067\u3059\u3002</p> <p>~ CNCLI Leaderlog started ~</p> <p>Ctrl+c\u3067\u9589\u3058\u307e\u3059</p> <p>\u3053\u3061\u3089\u306e\u30b5\u30fc\u30d3\u30b9\u306f\u30d7\u30fc\u30eb\u306e\u30ce\u30fc\u30c9\u30ed\u30b0\u304b\u3089\u30d6\u30ed\u30c3\u30af\u751f\u6210\u7d50\u679c\u3092\u62bd\u51fa\u3057\u307e\u3059\u3002</p> <pre><code>logmonitor\n</code></pre> <p>\u4ee5\u4e0b\u306e\u8868\u793a\u306a\u3089\u6b63\u5e38\u3067\u3059\u3002  </p> <p>~~ LOG MONITOR STARTED ~~ monitoring logs/node.json for traces</p> <p>Ctrl+c\u3067\u9589\u3058\u307e\u3059</p> <p>\u3053\u3061\u3089\u306e\u30b5\u30fc\u30d3\u30b9\u306f\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u4efb\u610f\u306e\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3078\u901a\u77e5\u3057\u307e\u3059\u3002</p> <pre><code>blocknotify\n</code></pre> <p>\u4ee5\u4e0b\u306e\u8868\u793a\u306a\u3089\u6b63\u5e38\u3067\u3059\u3002  </p> <p>[xxx] \u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u901a\u77e5\u3092\u8d77\u52d5\u3057\u307e\u3057\u305f </p> <p>Ctrl+c\u3067\u9589\u3058\u307e\u3059</p>"},{"location":"operation/blocknotify-reinstall/#1-5","title":"1-5. \u65e7\u30d5\u30a1\u30a4\u30eb\u524a\u9664","text":"<pre><code>rm $NODE_HOME/guild-db/blocklog/block_check.py $NODE_HOME/guild-db/blocklog/send.txt\n</code></pre>"},{"location":"operation/blocknotify-reinstall/#2-spo-block-notify-v212v213","title":"2. SPO Block Notify v.2.1.2/v2.1.3\u304b\u3089\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8","text":"<p>\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u66f4\u65b0\u3059\u308b <pre><code>sudo apt update &amp;&amp; sudo apt upgrade -y\n</code></pre></p> <p>python\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3059\u308b <pre><code>python3 -V\n</code></pre></p> <p>Python 3.10\u4ee5\u4e0a</p> Python 3.9\u4ee5\u4e0b\u306e\u5834\u5408\u3053\u3061\u3089\u306e\u30c4\u30fc\u30eb\u3067\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3057\u3066\u304f\u3060\u3055\u3044 <p>pythonUpdate.sh\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u81ea\u52d5\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b <pre><code>cd\nwget https://raw.githubusercontent.com/btbf/spojapanguild/master/scripts/pythonUpdate.sh\nchmod +x pythonUpdate.sh\n./pythonUpdate.sh\n</code></pre></p> <p>\u4f9d\u5b58\u95a2\u4fc2\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b <pre><code>sudo apt install -y build-essential libssl-dev libffi-dev python3-dev python3-pip python3-testresources\n</code></pre> <pre><code>pip3 install --upgrade watchdog pytz python-dateutil requests discordwebhook slackweb i18nice\n</code></pre></p>"},{"location":"operation/blocknotify-reinstall/#2-1","title":"2-1. \u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u4fee\u6b63","text":"<p>\u30b5\u30fc\u30d3\u30b9\u3092\u505c\u6b62\u3059\u308b <pre><code>sudo systemctl stop cnode-cncli-sync.service\n</code></pre></p> <p>\u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u66f4\u65b0\u3059\u308b</p> blocknotify \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/service/cnode-blocknotify.service &lt;&lt; EOF \n# file: /etc/systemd/system/cnode-blocknotify.service\n\n[Unit]\nDescription=Cardano Node - SPO Blocknotify\nBindsTo=cnode-cncli-sync.service\nAfter=cnode-cncli-sync.service\n\n[Service]\nType=simple\nUser=$(whoami)\nWorkingDirectory=${NODE_HOME}/scripts/block-notify\nExecStart=/bin/bash -c 'cd ${NODE_HOME}/scripts/block-notify/ &amp;&amp; python3 -u block_notify.py'\nRestart=on-failure\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=cnode-blocknotify\n\n[Install]\nWantedBy=cnode-cncli-sync.service\nEOF\n</code></pre> <p>\u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u30b7\u30b9\u30c6\u30e0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3078\u30b3\u30d4\u30fc\u3059\u308b</p> <pre><code>sudo cp $NODE_HOME/service/cnode-blocknotify.service /etc/systemd/system/cnode-blocknotify.service\n</code></pre> <p>\u30b5\u30fc\u30d3\u30b9\u30c7\u30fc\u30e2\u30f3\u3092\u518d\u8d77\u52d5\u3059\u308b <pre><code>sudo systemctl daemon-reload\n</code></pre></p>"},{"location":"operation/blocknotify-reinstall/#2-2-spo-block-notify","title":"2-2. SPO Block Notify\u518d\u8a2d\u5b9a","text":"<p><code>.env</code>\u30d0\u30c3\u30af\u30a2\u30c3\u30d7 <pre><code>cp $NODE_HOME/scripts/block-notify/.env $NODE_HOME/scripts/block-notify-env\n</code></pre></p> <p>\u65e2\u5b58\u30b9\u30af\u30ea\u30d7\u30c8\u524a\u9664 <pre><code>rm -rf $NODE_HOME/scripts/block-notify\n</code></pre></p> <p>Block Notify\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9  <pre><code>bn_release=\"$(curl -s https://api.github.com/repos/btbf/block-notify/releases/latest | jq -r '.tag_name')\"\nwget https://github.com/btbf/block-notify/archive/refs/tags/${bn_release}.tar.gz -P $NODE_HOME/scripts\n</code></pre></p> <p>\u30b9\u30af\u30ea\u30d7\u30c8\u5c55\u958b <pre><code>cd $NODE_HOME/scripts\ntar zxvf ${bn_release}.tar.gz block-notify-${bn_release}/block_notify.py block-notify-${bn_release}/i18n/ block-notify-${bn_release}/config.ini\nmv block-notify-${bn_release} block-notify\nrm ${bn_release}.tar.gz\ncd block-notify\n</code></pre></p> <p>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u5024\u5909\u66f4 <pre><code>sed -i config.ini \\\n    -e 's!/opt/cardano/cnode!'${NODE_HOME}'!' \\\n    -e 's!files/!'${NODE_CONFIG}-'!' \\\n    -e 's!notify_language = en!notify_language = ja!' \\\n    -e 's!Etc/UTC!Asia/Tokyo!'\n</code></pre></p> <p>\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u5185\u5bb9\u8a73\u7d30\u3092\u53c2\u7167\u3057\u3001\u3054\u81ea\u8eab\u306e\u74b0\u5883\u306b\u5408\u308f\u305b\u305f\u5024\u3092\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p><pre><code>cd $NODE_HOME/scripts/block-notify\nnano config.ini\n</code></pre> \u65e7<code>.env</code>\u30d5\u30a1\u30a4\u30eb\u306b\u8a2d\u5b9a\u4e2d\u306e\u5024\u3092\u78ba\u8a8d\u3059\u308b\u5834\u5408\u306f <pre><code>cat $NODE_HOME/scripts/block-notify-env\n</code></pre></p> <p>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u5185\u5bb9\u8a73\u7d30</p> \u9805\u76ee \u5024 \u4f7f\u7528\u7528\u9014 <code>pool_ticker</code> ex.) SJG \u30d7\u30fc\u30eb\u30c6\u30a3\u30c3\u30ab\u30fc\u540d\u3092\u5165\u529b\u3059\u308b <code>notify_language</code> \u82f1\u8a9e:<code>en</code>\u65e5\u672c\u8a9e:<code>ja</code> \u901a\u77e5\u8a00\u8a9e\u3092\u5165\u529b\u3059\u308b <code>notify_timezone</code> Asia/Tokyo\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u4e00\u89a7 \u304a\u4f4f\u3044\u306e\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u3092\u6307\u5b9a\u3059\u308b <code>notify_platform</code> <code>Line</code><code>Discord</code><code>Slack</code><code>Telegram</code> \u901a\u77e5\u5148\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3092\u6307\u5b9a\u3059\u308b (\u8907\u6570\u6307\u5b9a\u306f\u7121\u52b9) <code>notify_level</code> \u5168\u3066:<code>All</code>Confirm\u4ee5\u5916:<code>ExceptCofirm</code>Miss\u306e\u307f:<code>OnlyMissed</code> \u901a\u77e5\u57fa\u6e96\u3092\u8a2d\u5b9a\u3059\u308b <code>nextepoch_leader_date</code> \u6982\u8981\u306e\u307f:<code>SummaryOnly</code>\u6982\u8981\u3068\u65e5\u4ed8:<code>SummaryDate</code> \u6b21\u30a8\u30dd\u30c3\u30af\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u65e5\u6642\u306e\u901a\u77e5\u6709\u7121\u6b21\u30a8\u30dd\u30c3\u30af\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u65e5\u4ed8\u4e00\u89a7\u3092\u901a\u77e5\u306b\u6d41\u3057\u305f\u304f\u306a\u3044\u5834\u5408\u306f<code>SummaryOnly</code>\u3092\u8a18\u8f09\u3057\u3066\u304f\u3060\u3055\u3044 <code>line_notify_token</code> LINE\u8a2d\u5b9a\u306e(8)\u3067\u767a\u884c\u3057\u305f\u30c8\u30fc\u30af\u30f3ID Line Notify\u30c8\u30fc\u30af\u30f3\u3092\u5165\u529b\u3059\u308b <code>discord_webhook_url</code> Discord\u8a2d\u5b9a\u306e(7)\u3067\u767a\u884c\u3057\u305f\u30a6\u30a7\u30d6\u30d5\u30c3\u30afURL Discord\u30a6\u30a7\u30d6\u30d5\u30c3\u30afURL\u3092\u5165\u529b\u3059\u308b <code>slack_webhook_url</code> Slack\u8a2d\u5b9a\u306e(4)\u3067\u767a\u884c\u3057\u305fWebhook URL Slack\u30a6\u30a7\u30d6\u30d5\u30c3\u30afURL\u3092\u5165\u529b\u3059\u308b <code>telegram_token</code> Telegram\u8a2d\u5b9a\u306e(5)\u3067\u767a\u884c\u3057\u305fAPI\u30c8\u30fc\u30af\u30f3 Telegram API\u30c8\u30fc\u30af\u30f3\u3092\u5165\u529b\u3059\u308b <code>telegram_id</code> Telegram\u8a2d\u5b9a\u306e(9)\u3067\u8868\u793a\u3055\u308c\u305fChat id Telegram ChatID\u3092\u5165\u529b\u3059\u308b <code>node_home</code> ex.)<code>/home/usr/cnode</code> node_home\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30d1\u30b9\u3092\u5165\u529b\u3059\u308b <code>guild_db_dir</code> ex.)<code>%(node_home)s/guild-db/blocklog/</code> guild-db\u306e\u30d1\u30b9\u3092\u5165\u529b\u3059\u308b<code>%(node_home)s</code>\u306f\u5909\u6570\u306e\u305f\u3081\u5909\u66f4\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044 <code>shelley_genesis</code> ex.)<code>%(node_home)s/files/shelley-genesis.json</code> shelley_genesis\u306e\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u3092\u5165\u529b\u3059\u308b<code>%(node_home)s</code>\u306f\u5909\u6570\u306e\u305f\u3081\u5909\u66f4\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044 <code>byron_genesis</code> ex.)<code>%(node_home)s/files/byron-genesis.json</code> byron_genesis\u306e\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u3092\u5165\u529b\u3059\u308b<code>%(node_home)s</code>\u306f\u5909\u6570\u306e\u305f\u3081\u5909\u66f4\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044 <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>python3 $NODE_HOME/scripts/block-notify/block_notify.py version\n</code></pre></p>"},{"location":"operation/blocknotify-reinstall/#2-3","title":"2-3. \u30b5\u30fc\u30d3\u30b9\u8d77\u52d5","text":"<p>\u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\u306b\u3064\u3044\u3066</p> <ul> <li><code>cncli</code>\u304a\u3088\u3073<code>logmonitor</code>\u306f<code>cnode-node.service</code>\u306b\u7d10\u3065\u3044\u3066\u8d77\u52d5\u3057\u307e\u3059</li> <li><code>validate</code>\u3001<code>leaderlog</code>\u3001<code>blockNotifi</code>\u306f<code>cnode-cncli-sync.service</code>\u306b\u7d10\u3065\u3044\u3066\u8d77\u52d5\u3057\u307e\u3059\u3002</li> </ul> Ubuntu22.04\u306e\u5834\u5408\u306f\uff11\u884c\u3065\u3064\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>sudo systemctl start cnode-cncli-sync.service\nsudo systemctl start cnode-logmonitor.service\n</code></pre> <p>\u30b5\u30fc\u30d3\u30b9\u306e\u8d77\u52d5\u78ba\u8a8d</p> cnclivalidateleaderloglogmonitorblockNotify <p>\u3053\u3061\u3089\u306e\u30b5\u30fc\u30d3\u30b9\u306f\u30ce\u30fc\u30c9\u30df\u30cb\u30d7\u30ed\u30c8\u30b3\u30eb\u304b\u3089\u30c1\u30a7\u30fc\u30f3\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u307e\u3059</p> <pre><code>cnclilog\n</code></pre> <p>\u4ee5\u4e0b\u306e\u8868\u793a\u306a\u3089\u6b63\u5e38\u3067\u3059\u3002</p> <p>INFO  cncli::nodeclient::sync &gt; block xxxxxxxxx of xxxxxxxxx: 100.00% synced</p> <p>Ctrl+c\u3067\u9589\u3058\u307e\u3059</p> <p>\u3053\u3061\u3089\u306e\u30b5\u30fc\u30d3\u30b9\u306f\u751f\u6210\u3057\u305f\u30d6\u30ed\u30c3\u30af\u306e\u30aa\u30f3\u30c1\u30a7\u30fc\u30f3\u30c7\u30fc\u30bf\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</p> <pre><code>validate\n</code></pre> <p>\u4ee5\u4e0b\u306e\u8868\u793a\u306a\u3089\u6b63\u5e38\u3067\u3059\u3002</p> <p>~ CNCLI Block Validation started ~</p> <p>Ctrl+c\u3067\u9589\u3058\u307e\u3059</p> <p>\u3053\u3061\u3089\u306e\u30b5\u30fc\u30d3\u30b9\u306f\u30b9\u30ed\u30c3\u30c8\u30ea\u30fc\u30c0\u30fc\u3092\u81ea\u52d5\u7684\u306b\u7b97\u51fa\u3057\u307e\u3059\u3002  \u6b21\u30a8\u30dd\u30c3\u30af\u306e1.5\u65e5\u524d\u304b\u3089\u6b21\u30a8\u30dd\u30c3\u30af\u306e\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3092\u81ea\u52d5\u7b97\u51fa\u3057\u307e\u3059\u3002</p> <pre><code>leaderlog\n</code></pre> <p>\u4ee5\u4e0b\u306e\u8868\u793a\u306a\u3089\u6b63\u5e38\u3067\u3059\u3002</p> <p>~ CNCLI Leaderlog started ~</p> <p>Ctrl+c\u3067\u9589\u3058\u307e\u3059</p> <p>\u3053\u3061\u3089\u306e\u30b5\u30fc\u30d3\u30b9\u306f\u30d7\u30fc\u30eb\u306e\u30ce\u30fc\u30c9\u30ed\u30b0\u304b\u3089\u30d6\u30ed\u30c3\u30af\u751f\u6210\u7d50\u679c\u3092\u62bd\u51fa\u3057\u307e\u3059\u3002</p> <pre><code>logmonitor\n</code></pre> <p>\u4ee5\u4e0b\u306e\u8868\u793a\u306a\u3089\u6b63\u5e38\u3067\u3059\u3002  </p> <p>~~ LOG MONITOR STARTED ~~ monitoring logs/node.json for traces</p> <p>Ctrl+c\u3067\u9589\u3058\u307e\u3059</p> <p>\u3053\u3061\u3089\u306e\u30b5\u30fc\u30d3\u30b9\u306f\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u4efb\u610f\u306e\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3078\u901a\u77e5\u3057\u307e\u3059\u3002</p> <pre><code>blocknotify\n</code></pre> <p>\u4ee5\u4e0b\u306e\u8868\u793a\u306a\u3089\u6b63\u5e38\u3067\u3059\u3002  </p> <p>[xxx] \u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u901a\u77e5\u3092\u8d77\u52d5\u3057\u307e\u3057\u305f </p> <p>Ctrl+c\u3067\u9589\u3058\u307e\u3059</p>"},{"location":"operation/blocknotify-reinstall/#3","title":"3. \u65e7\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u901a\u77e5 \u672a\u5c0e\u5165\u304b\u3089\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>\u524d\u63d0\u6761\u4ef6</p> <p>TMUX\u8d77\u52d5\u306e\u30d6\u30ed\u30c3\u30af\u30ed\u30b0\u304c\u5c0e\u5165\u6e08\u307f\u3067\u304b\u3064\u65e7\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u901a\u77e5\u304c\u672a\u5c0e\u5165\u306e\u5834\u5408</p>"},{"location":"operation/blocknotify-reinstall/#3-1","title":"3-1. \u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u4fee\u6b63","text":"<p>\u30b5\u30fc\u30d3\u30b9\u3092\u505c\u6b62\u3059\u308b <pre><code>sudo systemctl stop cnode-cncli-sync.service\n</code></pre></p> <p>tmux\u7d42\u4e86\u78ba\u8a8d <pre><code>tmux ls\n</code></pre> \u4ee5\u4e0b\u306e\u623b\u308a\u5024\u3092\u78ba\u8a8d\u3059\u308b</p> <p>no server running on ~~~~</p> <p>\u65b0\u3057\u3044\u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b \u305d\u308c\u305e\u308c\u306e\u30bf\u30d6\u3092\u5168\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> cnclivalidateleaderloglogmonitor \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/service/cnode-cncli-sync.service &lt;&lt; EOF \n# file: /etc/systemd/system/cnode-cncli-sync.service\n\n[Unit]\nDescription=Cardano Node - CNCLI sync\nBindsTo=cardano-node.service\nAfter=cardano-node.service\n\n[Service]\nType=simple\nRestart=on-failure\nRestartSec=20\nUser=$(whoami)\nWorkingDirectory=${NODE_HOME}/scripts\nExecStart=/bin/bash -l -c \"exec ${NODE_HOME}/scripts/cncli.sh sync\"\nExecStop=/bin/bash -l -c \"exec kill -2 \\$(ps -ef | grep [c]ncli.sync.*.${NODE_HOME}/ | tr -s ' ' | cut -d ' ' -f2) &amp;&gt;/dev/null\"\nKillSignal=SIGINT\nSuccessExitStatus=143\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=cnode-cncli-sync\nTimeoutStopSec=5\nKillMode=mixed\n\n[Install]\nWantedBy=cardano-node.service\nEOF\n</code></pre> \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/service/cnode-cncli-validate.service &lt;&lt; EOF \n# file: /etc/systemd/system/cnode-cncli-validate.service\n\n[Unit]\nDescription=Cardano Node - CNCLI validate\nBindsTo=cnode-cncli-sync.service\nAfter=cnode-cncli-sync.service\n\n[Service]\nType=simple\nRestart=on-failure\nRestartSec=20\nUser=$(whoami)\nWorkingDirectory=${NODE_HOME}/scripts\nExecStartPre=/bin/sleep 5\nExecStart=/bin/bash -l -c \"exec ${NODE_HOME}/scripts/cncli.sh validate\"\nSuccessExitStatus=143\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=cnode-cncli-validate\nTimeoutStopSec=5\nKillMode=mixed\n\n[Install]\nWantedBy=cnode-cncli-sync.service\nEOF\n</code></pre> \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/service/cnode-cncli-leaderlog.service &lt;&lt; EOF\n# file: /etc/systemd/system/cnode-cncli-leaderlog.service\n\n[Unit]\nDescription=Cardano Node - CNCLI Leaderlog\nBindsTo=cnode-cncli-sync.service\nAfter=cnode-cncli-sync.service\n\n[Service]\nType=simple\nRestart=on-failure\nRestartSec=20\nUser=$(whoami)\nWorkingDirectory=${NODE_HOME}\nExecStart=/bin/bash -l -c \"exec ${NODE_HOME}/scripts/cncli.sh leaderlog\"\nSuccessExitStatus=143\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=cnode-cncli-leaderlog\nTimeoutStopSec=5\nKillMode=mixed\n\n[Install]\nWantedBy=cnode-cncli-sync.service\nEOF\n</code></pre> \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/service/cnode-logmonitor.service &lt;&lt; EOF \n# file: /etc/systemd/system/cnode-logmonitor.service\n\n[Unit]\nDescription=Cardano Node - CNCLI logmonitor\nBindsTo=cardano-node.service\nAfter=cardano-node.service\n\n[Service]\nType=simple\nRestart=on-failure\nRestartSec=1\nUser=$(whoami)\nWorkingDirectory=${NODE_HOME}\nExecStart=/bin/bash -l -c \"exec ${NODE_HOME}/scripts/logMonitor.sh\"\nExecStop=/bin/bash -l -c \"exec kill -2 \\$(ps -ef | grep -m1 ${NODE_HOME}/scripts/logMonitor.sh | tr -s ' ' | cut -d ' ' -f2) &amp;&gt;/dev/null\"\nKillSignal=SIGINT\nSuccessExitStatus=143\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=cnode-logmonitor\nTimeoutStopSec=5\nKillMode=mixed\n\n[Install]\nWantedBy=cardano-node.service\nEOF\n</code></pre> <p>\u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u30b7\u30b9\u30c6\u30e0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3078\u30b3\u30d4\u30fc\u3059\u308b</p> Ubuntu22.04\u306e\u5834\u5408\u306f\uff11\u884c\u3065\u3064\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>sudo cp $NODE_HOME/service/cnode-cncli-sync.service /etc/systemd/system/cnode-cncli-sync.service\nsudo cp $NODE_HOME/service/cnode-cncli-validate.service /etc/systemd/system/cnode-cncli-validate.service\nsudo cp $NODE_HOME/service/cnode-cncli-leaderlog.service /etc/systemd/system/cnode-cncli-leaderlog.service\nsudo cp $NODE_HOME/service/cnode-logmonitor.service /etc/systemd/system/cnode-logmonitor.service\n</code></pre> <p>\u6a29\u9650\u3092\u5909\u66f4\u3059\u308b Ubuntu22.04\u306e\u5834\u5408\u306f\uff11\u884c\u3065\u3064\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>sudo chmod 644 /etc/systemd/system/cnode-cncli-sync.service\nsudo chmod 644 /etc/systemd/system/cnode-cncli-validate.service\nsudo chmod 644 /etc/systemd/system/cnode-cncli-leaderlog.service\nsudo chmod 644 /etc/systemd/system/cnode-logmonitor.service\n</code></pre> \u30b5\u30fc\u30d3\u30b9\u30c7\u30fc\u30e2\u30f3\u3092\u518d\u8d77\u52d5\u3059\u308b <pre><code>sudo systemctl daemon-reload\n</code></pre> \u30b5\u30fc\u30d3\u30b9\u3092\u8d77\u52d5\u3059\u308b <pre><code>sudo systemctl start cnode-cncli-sync.service\nsudo systemctl start cnode-logmonitor.service\n</code></pre></p>"},{"location":"operation/blocknotify-reinstall/#3-2-spo-block-notify","title":"3-2. SPO Block Notify\u8a2d\u5b9a","text":"<p>SPO BlockNotify\u8a2d\u5b9a\u3092\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"operation/bp-migration/","title":"BP\u30b5\u30fc\u30d0\u30fc\u79fb\u884c\uff08\u65e7VPS\u4f1a\u793e\u2192\u65b0VPS\u4f1a\u793e\uff09","text":"<p>\u524d\u63d0\u6ce8\u610f\u4e8b\u9805</p> <ul> <li>\u672c\u307e\u3068\u3081\u306f\u73feVPS\u4f1a\u793e\u2192\u65b0VPS\u4f1a\u793e\u3078\u3068 <code>BP\u306e\u307f</code> \u3092\u79fb\u884c\u3059\u308b\u307e\u3068\u3081\u3067\u3059\u3002</li> <li>\u5b9f\u969b\u306b\u884c\u3046\u969b\u306b\u306f\u624b\u9806\u3092\u3088\u304f\u8aad\u307f\u306a\u304c\u3089\u9032\u3081\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>\u30d6\u30ed\u30c3\u30af\u751f\u6210\u4e88\u5b9a\u307e\u3067\u4f59\u88d5\u304c\u3042\u308b\u6642\u306b\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>\u65e7BP\u306f6-1. \u65e7BP\u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3\u307e\u3067\u3001\u8d77\u52d5\u72b6\u614b \u306b\u3057\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002</li> </ul>"},{"location":"operation/bp-migration/#1-bp","title":"1. \u65b0BP\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7","text":"<p>\u7559\u610f\u4e8b\u9805</p> <ol> <li>\u30b5\u30fc\u30d0\u72ec\u81ea\u6a5f\u80fd\u306b\u7559\u610f\u3059\u308b<ul> <li>\u3055\u304f\u3089\u306e\u30d1\u30b1\u30c3\u30c8\u30d5\u30a3\u30eb\u30bf\u3084\u3001AWS\u306eFW\u8a2d\u5b9a\u306a\u3069\u306e\u30b5\u30fc\u30d0\u30fc\u72ec\u81ea\u306e\u6a5f\u80fd\u306b\u6c17\u3092\u4ed8\u3051\u3066\u304f\u3060\u3055\u3044\u3002</li> </ul> </li> <li>\u65b0BP\u306e\u30d5\u30a1\u30a4\u30e4\u30fc\u30a6\u30a9\u30fc\u30eb\u8a2d\u5b9a\u306f\u3001\u65e7BP\u3068\u540c\u3058\u8a2d\u5b9a\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>\u65e7BP\u306e\u30e6\u30fc\u30b6\u30fc\u540d\uff08\u4f8b\uff1aubuntu\uff09\u3068\u65b0BP\u306e\u30e6\u30fc\u30b6\u30fc\u540d\u306f\u5909\u66f4\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044\u3002<ul> <li>\u3082\u3057\u5909\u66f4\u3059\u308b\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u5185\u306e\u30d1\u30b9\u540d\u3092\u624b\u52d5\u3067\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> <li><code>startBlockProducingNode.sh</code> DIRECTORY=/home/\u30e6\u30fc\u30b6\u30fc\u540d/cnode</li> </ul> </li> </ol>"},{"location":"operation/bp-migration/#1-1-ubuntu","title":"1-1. Ubuntu\u521d\u671f\u8a2d\u5b9a","text":"<p>\u65b0\u30b5\u30fc\u30d0\u30fc\u3067Ubuntu\u521d\u671f\u8a2d\u5b9a\u3092\u5b9f\u65bd\u3057\u307e\u3059\u3002  </p>"},{"location":"operation/bp-migration/#1-2","title":"1-2. \u30ce\u30fc\u30c9\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7","text":"<ol> <li>1. \u4f9d\u5b58\u95a2\u4fc2\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb \u301c 7. gLiveView\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u307e\u3067\u5b9f\u65bd\u3057\u307e\u3059\u3002</li> <li>2. \u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u8a2d\u5b9a\u5909\u66f4\u306e\u300c<code>BP\u306e\u5834\u5408</code>\u300d\u3092\u5b9f\u65bd\u3057\u307e\u3059\u3002</li> </ol>"},{"location":"operation/bp-migration/#2","title":"2. \u65e2\u5b58\u30ea\u30ec\u30fc\u4f5c\u696d","text":"<p>\u30ea\u30ec\u30fc\u30c8\u30dd\u30ed\u30b8\u30fc\u60c5\u5831\u5909\u66f4 </p> \u30c0\u30a4\u30ca\u30df\u30c3\u30afP2P <pre><code>nano $NODE_HOME/${NODE_CONFIG}-topology.json\n</code></pre> <p>\u65e7BP\u306eIP\u3068\u30dd\u30fc\u30c8\u3092\u65b0BP\u306eIP\u3068\u30dd\u30fc\u30c8\u306b\u5909\u66f4\u3057\u307e\u3059\u3002</p> <p>\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u306e\u518d\u8aad\u307f\u8fbc\u307f <pre><code>cnreload\n</code></pre></p>"},{"location":"operation/bp-migration/#3-bp","title":"3. \u65e7BP\u79fb\u884c\u51e6\u7406","text":"<p>\u30e6\u30fc\u30b6\u30fc\u540d\u3068\u30ce\u30fc\u30c9\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u30e1\u30e2\u306a\u3069\u306b\u63a7\u3048\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002 <pre><code>nano $NODE_HOME/startBlockProducingNode.sh\n</code></pre></p>"},{"location":"operation/bp-migration/#3-1-bp","title":"3-1. \u65e7BP\u30ce\u30fc\u30c9\u505c\u6b62","text":"\u65e7BP <p><pre><code>sudo systemctl stop cardano-node\n</code></pre> <pre><code>sudo systemctl disable cardano-node\n</code></pre></p>"},{"location":"operation/bp-migration/#3-2-bp","title":"3-2. \u65e7BP\u30d5\u30a1\u30a4\u30eb\u79fb\u52d5","text":"<p>\u53c2\u8003\uff09\u79fb\u884c\u30d5\u30a1\u30a4\u30eb\u4e00\u89a7</p> \u30d5\u30a1\u30a4\u30eb\u540d \u7528\u9014 vrf.skey \u30d6\u30ed\u30c3\u30af\u751f\u6210\u306b\u5fc5\u9808 vrf.vkey \u30d6\u30ed\u30c3\u30af\u751f\u6210\u306b\u5fc5\u9808 kes.skey \u30d6\u30ed\u30c3\u30af\u751f\u6210\u306b\u5fc5\u9808 kes.vkey KES\u516c\u958b\u9375 node.cert \u30d6\u30ed\u30c3\u30af\u751f\u6210\u306b\u5fc5\u9808 payment.addr \u6b8b\u9ad8\u78ba\u8a8d\u3067\u5fc5\u8981 stake.addr \u6b8b\u9ad8\u78ba\u8a8d\u3067\u5fc5\u8981 poolMetaData.json pool.cert\u4f5c\u6210\u6642\u306b\u5fc5\u8981 poolMetaDataHash.txt pool.cert\u4f5c\u6210\u6642\u306b\u5fc5\u8981 startBlockProducingNode.sh \u30ce\u30fc\u30c9\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8 pool.id-bech32 stakepoolid(bech32\u5f62\u5f0f) pool.id stakepoolid(hex\u5f62\u5f0f) guild-db \u30d6\u30ed\u30c3\u30af\u30ed\u30b0\u95a2\u9023\u30c7\u30a3\u30ec\u30af\u30c8\u30ea(cncli.db\u4ee5\u5916) governance \u30ac\u30d0\u30ca\u30f3\u30b9\u95a2\u9023\u30c7\u30a3\u30ec\u30af\u30c8\u30ea calidus Calidus\u95a2\u9023\u30c7\u30a3\u30ec\u30af\u30c8\u30ea \u65e7BP <p>Zstandard\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb <pre><code>sudo apt install zstd\n</code></pre></p> <p>\u4e0a\u8a18\u306e\u79fb\u884c\u30d5\u30a1\u30a4\u30eb\u3092\u4e00\u3064\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u5727\u7e2e\u3057\u307e\u3059\u3002  </p> <p>\u8a72\u5f53\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u5b58\u5728\u3057\u306a\u3044\u5834\u5408</p> <p><code>governance/</code> \u3084 <code>calidus/</code> \u3092\u4f7f\u7528\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u3001\u5b58\u5728\u3057\u306a\u3044\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u540d\u3092\u30b3\u30de\u30f3\u30c9\u304b\u3089\u524a\u9664\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <pre><code>cd $NODE_HOME\ntar --exclude \"guild-db/cncli/cncli.db\" -acvf bp-move.zst \\\n  vrf.skey vrf.vkey \\\n  kes.skey kes.vkey \\\n  node.cert \\\n  payment.addr stake.addr \\\n  poolMetaData.json poolMetaDataHash.txt \\\n  startBlockProducingNode.sh \\\n  pool.id-bech32 pool.id \\\n  guild-db/ governance/ calidus/\n</code></pre> <p>\u65e7BP\u306ecnode\u306b\u3042\u308b<code>bp-move.zst</code>\u3092\u65b0BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3059\u308b <pre><code>graph LR\n    A[\u65e7BP] --&gt;|bp-move.zst| B[\u65b0BP];</code></pre></p>"},{"location":"operation/bp-migration/#4-bp","title":"4. \u65b0BP\u518d\u8a2d\u5b9a","text":""},{"location":"operation/bp-migration/#4-1","title":"4-1. \u79fb\u884c\u30d5\u30a1\u30a4\u30eb\u5fa9\u5143","text":"\u65b0BP <p>\u30ce\u30fc\u30c9\u505c\u6b62 <pre><code>sudo systemctl stop cardano-node\n</code></pre></p> <p>\u30d5\u30a1\u30a4\u30eb\u78ba\u8a8d <pre><code>ls $NODE_HOME/bp-move.zst\n</code></pre></p> <p>\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u304c\u8868\u793a\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002 \u4f8b\uff09<code>/home/cardano/cnode/bp-move.zst</code></p> <p>\u30d5\u30a1\u30a4\u30eb\u5c55\u958b <pre><code>cd $NODE_HOME\ntar -xvf bp-move.zst\n</code></pre></p> <p>\u623b\u308a\u5024\u306b\u79fb\u884c\u30d5\u30a1\u30a4\u30eb\u4e00\u89a7\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u304c\u8868\u793a\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b</p> <p>\u5727\u7e2e\u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u3059\u308b <pre><code>rm bp-move.zst\n</code></pre></p> <p>\u65b0\u898fBP\u30b5\u30fc\u30d0\u30fc\u30675. BP\u30ce\u30fc\u30c9\u3068\u3057\u3066\u518d\u8d77\u52d5\u3092\u5b9f\u884c\u3057\u3001\u300c<code>startBlockProducingNode.sh</code>\u300d\u3092\u751f\u6210\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u65e7BP\u3068\u65b0BP\u306e\u30e6\u30fc\u30b6\u30fc\u540d\u3068\u30ce\u30fc\u30c9\u30dd\u30fc\u30c8\u756a\u53f7\u306f\u540c\u3058\u306b\u3057\u3066\u304a\u304f\u3053\u3068</p>"},{"location":"operation/bp-migration/#4-2","title":"4-2. \u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u5909\u66f4","text":"\u65b0BP <pre><code>cd $NODE_HOME\nchmod 400 vrf.skey\nchmod 400 vrf.vkey\nchmod +x startBlockProducingNode.sh\n</code></pre> <p>\u30ce\u30fc\u30c9\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002 <pre><code>sudo systemctl start cardano-node\n</code></pre> \u30ce\u30fc\u30c9\u30ed\u30b0\u78ba\u8a8d <pre><code>journalctl --unit=cardano-node --follow\n</code></pre></p>"},{"location":"operation/bp-migration/#4-3-bp","title":"4-3. \u65b0BP\u63a5\u7d9a\u78ba\u8a8d","text":"<p>gLiveView\u3067\u65b0BP\u304c\u6700\u65b0\u30d6\u30ed\u30c3\u30af\u3068\u540c\u671f\u5f8c\u3001\u30ea\u30ec\u30fc\u3068\u758e\u901a(I/O)\u304c\u3067\u304d\u3066\u3044\u308b\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</p> \u65b0BP <p>gLiveView\u78ba\u8a8d <pre><code>cd $NODE_HOME/scripts\n./gLiveView.sh\n</code></pre></p> <p>Peer\u30ea\u30b9\u30c8\u306b\u30ea\u30ec\u30fc\u306eIP\u304c\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"operation/bp-migration/#4-4-paramsjson","title":"4-4. params.json\u518d\u4f5c\u6210","text":"\u65b0BP <pre><code>cd $NODE_HOME\ncardano-cli conway query protocol-parameters \\\n    --mainnet \\\n    --out-file params.json\n</code></pre>"},{"location":"operation/bp-migration/#4-5","title":"4-5. \u30d6\u30ed\u30c3\u30af\u30ed\u30b0\u8a2d\u5b9a","text":"<ul> <li>\u30d6\u30ed\u30c3\u30af\u30ed\u30b0\u8a2d\u5b9a</li> </ul>"},{"location":"operation/bp-migration/#4-6-sjg","title":"4-6. SJG\u30c4\u30fc\u30eb\u5c0e\u5165","text":"<ul> <li>SJG\u30c4\u30fc\u30eb\u5c0e\u5165\u8a2d\u5b9a</li> </ul>"},{"location":"operation/bp-migration/#4-7","title":"4-7. \u30d6\u30ed\u30c3\u30af\u751f\u6210\u72b6\u614b\u30c1\u30a7\u30c3\u30af","text":"<p>SJG\u30c4\u30fc\u30eb\u3092\u8d77\u52d5\u3057\u3001\u300c[2] \u30d6\u30ed\u30c3\u30af\u751f\u6210\u72b6\u614b\u30c1\u30a7\u30c3\u30af\u300d\u3067\u3059\u3079\u3066\u306e\u9805\u76ee\u304cOK\u306b\u306a\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b</p>"},{"location":"operation/bp-migration/#4-8","title":"4-8. \u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u901a\u77e5\u8a2d\u5b9a","text":"<p>(SPO Block Notify)</p> \u65e7BP\u3067\u5c0e\u5165\u6e08\u307f\u306e\u5834\u5408\u65e7BP\u3067\u672a\u5c0e\u5165\u306e\u5834\u5408 <ol> <li>\u65b0BP\u30671. \u4f9d\u5b58\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u307f\u3092\u5b9f\u65bd\u3059\u308b</li> <li>\u65e7BP\u3067\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u78ba\u8a8d\u3059\u308b</li> </ol> <p><pre><code>cat $NODE_HOME/scripts/block-notify/.env\n</code></pre> \u307e\u305f\u306f <pre><code>cat $NODE_HOME/guild-db/blocklog/.env\n</code></pre> \u307e\u305f\u306f <pre><code>cat $NODE_HOME/scripts/block-notify/config.ini\n</code></pre></p> <ol> <li>\u65b0BP\u30673. \u901a\u77e5\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u8a2d\u5b9a\u3092\u5b9f\u65bd\u3059\u308b \uff08config.ini\u306e\u8a2d\u5b9a\u5024\u306f\u65e7BP\u3067\u8868\u793a\u3055\u308c\u305f\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u5185\u5bb9\u3092\u53c2\u8003\u306b\u3059\u308b\uff09</li> </ol> <p>SPO BlockNotify\u8a2d\u5b9a\u304b\u3089\u5c0e\u5165\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"operation/bp-migration/#5-prometheus","title":"5. Prometheus\u8a2d\u5b9a","text":""},{"location":"operation/bp-migration/#5-1-bpnode-exporter","title":"5-1. \u65b0BP<code>node exporter</code>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"\u65b0BP <pre><code>sudo apt install -y prometheus-node-exporter\n</code></pre> <p>\u30b5\u30fc\u30d3\u30b9\u3092\u6709\u52b9\u306b\u3057\u3066\u3001\u81ea\u52d5\u7684\u306b\u958b\u59cb\u3055\u308c\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002 <pre><code>sudo systemctl enable prometheus-node-exporter.service\n</code></pre></p> <p>FW\u8a2d\u5b9a\u3067Prometheus\u30e1\u30c8\u30ea\u30af\u30b9\u30dd\u30fc\u30c8\u3092\u30ea\u30ec\u30fc1\u306eIP\u9650\u5b9a\u3067\u958b\u653e\u3059\u308b Ubuntu22.04\u306e\u5834\u5408\u306f\uff11\u884c\u3065\u3064\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>sudo ufw allow from &lt;\u30ea\u30ec\u30fc\u30ce\u30fc\u30c91\u306eIP&gt; to any port 12798\nsudo ufw allow from &lt;\u30ea\u30ec\u30fc\u30ce\u30fc\u30c91\u306eIP&gt; to any port 9100\nsudo ufw reload\n</code></pre></p> <p>\u30ce\u30fc\u30c9\u518d\u8d77\u52d5 <pre><code>sudo systemctl reload-or-restart cardano-node\n</code></pre></p>"},{"location":"operation/bp-migration/#5-2-grafanaprometheusyml","title":"5-2. Grafana\u30b5\u30fc\u30d0\u30fc<code>prometheus.yml</code>\u306e\u4fee\u6b63","text":"Grafana\u30b5\u30fc\u30d0\u30fc(\u30ea\u30ec\u30fc1) <p><code>prometheus.yml</code>\u306b\u8a18\u8f09\u3055\u308c\u3066\u308b\u65e7BP\u306eIP\u3092\u65b0BP\u306eIP\u3078\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044 <pre><code>sudo nano /etc/prometheus/prometheus.yml\n</code></pre></p> <p>\u30b5\u30fc\u30d3\u30b9\u518d\u8d77\u52d5 <pre><code>sudo systemctl restart grafana-server.service\nsudo systemctl restart prometheus.service\nsudo systemctl restart prometheus-node-exporter.service\n</code></pre></p> <p>\u30b5\u30fc\u30d3\u30b9\u304c\u6b63\u3057\u304f\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>sudo systemctl --no-pager status grafana-server.service prometheus.service prometheus-node-exporter.service\n</code></pre></p> <p>Grafana\u306bBP\u306e\u30e1\u30c8\u30ea\u30af\u30b9(KES\u306a\u3069)\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3059\u308b\u3002</p>"},{"location":"operation/bp-migration/#6","title":"6. \u6700\u7d42\u4f5c\u696d","text":""},{"location":"operation/bp-migration/#6-1-bp","title":"6-1. \u65e7BP\u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3","text":"\u65e7BP <pre><code>sudo shutdown -h now\n</code></pre>"},{"location":"operation/bp-migration/#6-2-tracemempool","title":"6-2. Tracemempool\u7121\u52b9\u5316","text":"<p>Tx\u306e\u5897\u52a0\u304c\u78ba\u8a8d\u3067\u304d\u305f\u3089Tracemempool\u3092\u7121\u52b9\u306b\u3057\u307e\u3059\u3002</p> \u65b0BP <pre><code>sed -i $NODE_HOME/${NODE_CONFIG}-config.json \\\n    -e \"s/TraceMempool\\\": true/TraceMempool\\\": false/g\"\n</code></pre> <p>\u30ce\u30fc\u30c9\u518d\u8d77\u52d5 <pre><code>sudo systemctl reload-or-restart cardano-node\n</code></pre></p>"},{"location":"operation/bp-migration/#6-3-mithril-signer","title":"6-3. Mithril-Signer\u518d\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7","text":"<p>\u65e7\u30b5\u30fc\u30d0\u30fc\u3067Mithril-Signer-Node\u3092\u5b9f\u884c\u3057\u3066\u3044\u305f\u5834\u5408\u306f\u3001\u65b0\u30b5\u30fc\u30d0\u30fc\u3067\u3082\u518d\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u4e0d\u660e\u70b9\u304c\u3042\u308b\u5834\u5408\u306fBTBF SPO LAB.\u3067\u3054\u8cea\u554f\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"operation/bp-port-change/","title":"BP\u30dd\u30fc\u30c8\u5909\u66f4","text":"<p>BP\u30ce\u30fc\u30c9\u30dd\u30fc\u30c8\u30926000\u756a\u3067\u904b\u7528\u3055\u308c\u3066\u308b\u65b9\u5411\u3051\u306e\u5909\u66f4\u30de\u30cb\u30e5\u30a2\u30eb\u3067\u3059\u3002</p> <p>BP\u30ce\u30fc\u30c9\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u5909\u66f4\u3059\u308b\u7406\u7531</p> <p>CNTOOL\u3067\u306f\u53c2\u8003\u3068\u3057\u30666000\u30dd\u30fc\u30c8\u304c\u5272\u308a\u5f53\u3066\u3089\u308c\u3066\u304a\u308a\u3001\u3053\u3061\u3089\u306b\u5408\u308f\u305b\u308b\u5f62\u3067\u5f53\u30de\u30cb\u30e5\u30a2\u30eb\u30826000\u3092\u63a1\u7528\u3057\u3066\u304a\u308a\u307e\u3057\u305f\u304c\u30016000\u30dd\u30fc\u30c8\u306f\u300cx window system\u300d\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u3066\u308b\u30dd\u30fc\u30c8\u3067\u3001\u4f7f\u308f\u306a\u3051\u308c\u3070\u4f7f\u3063\u3066\u3082\u5927\u4e08\u592b\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u305f\u3060\u3057\u3001BP\u30dd\u30fc\u30c8=6000\u3068\u3044\u3046\u8a8d\u8b58\u304c\u5e83\u307e\u3063\u3066\u3044\u304f\u3068\u3001\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u4e0a\u597d\u307e\u3057\u304f\u306a\u304f\u5404\u30d7\u30fc\u30eb\u3067\u72ec\u81ea\u30dd\u30fc\u30c8\u3092\u63a1\u7528\u3057\u305f\u307b\u3046\u304c\u826f\u3044\u305f\u3081\u3002</p>"},{"location":"operation/bp-port-change/#1","title":"1. \u5909\u66f4\u70b9","text":"<ol> <li>\u30c0\u30a4\u30ca\u30df\u30c3\u30af\u30dd\u30fc\u30c8(49513\uff5e65535\u307e\u3067\u306e\u756a\u53f7)\u3092\u4f7f\u3044\u307e\u3059\u3002</li> <li>$NODE_HOME/<code>startBlockProducingNode.sh</code>\u306ePORT=6000\u3092\u5909\u66f4\u3059\u308b\u30dd\u30fc\u30c8\u756a\u53f7\u3078\u3068\u66f8\u304d\u63db\u3048\u307e\u3059\u3002</li> <li>$NODE_HOME/scripts/<code>env</code>\u306eCNODE_PORT=6000\u3092\u5909\u66f4\u3059\u308b\u30dd\u30fc\u30c8\u756a\u53f7\u3078\u3068\u66f8\u304d\u63db\u3048\u307e\u3059\u3002</li> </ol>"},{"location":"operation/bp-port-change/#2-bp","title":"2. BP\u306b\u3066\u5b9f\u65bd","text":"<p>\u65b0\u3057\u3044BP\u30ce\u30fc\u30c9\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u6c7a\u3081\u308b\u70ba\u3001xxxxx\u3092(49513\uff5e65535)\u306e\u7bc4\u56f2\u5185\u3067\u6c7a\u3081\u3066\u5165\u529b\u3057\u307e\u3059\u3002</p> <pre><code>PORT=xxxxx\n</code></pre> <p>\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u30dd\u30fc\u30c8\u3092\u65b0\u3057\u3044\u30dd\u30fc\u30c8\u306b\u66f8\u304d\u63db\u3048\u308b(\u3053\u306e\u307e\u307e\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c) <pre><code>sed -i $NODE_HOME/startBlockProducingNode.sh \\\n    -e '1,73s!PORT=6000!PORT='${PORT}'!'\nsed -i $NODE_HOME/scripts/env \\\n    -e '1,73s!CNODE_PORT=6000!CNODE_PORT='${PORT}'!'\n</code></pre></p>"},{"location":"operation/bp-port-change/#3-bpufw","title":"3. BP\u30b5\u30fc\u30d0\u30fcufw\u8a2d\u5b9a\u5909\u66f4","text":"<p>ufw\u3092\u4f7f\u308f\u306a\u3044\u30b1\u30fc\u30b9</p> <p>AWS\u3084VSP\u306b\u3088\u3063\u3066\u306f\u7ba1\u7406\u753b\u9762\u3067\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a(\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb)\u3092\u884c\u3046\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u306e\u3067\u3001\u305d\u306e\u5834\u5408\u306f\u3001\u7ba1\u7406\u753b\u9762\u304b\u3089\u8a2d\u5b9a\u3092\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u65b0\u3057\u3044\u30dd\u30fc\u30c8\u756a\u53f7\u53d6\u5f97 <pre><code>PORT=`grep \"PORT=\" $NODE_HOME/startBlockProducingNode.sh`\nb_PORT=${PORT#\"PORT=\"}\necho \"BP\u30dd\u30fc\u30c8\u306f${b_PORT}\u3067\u3059\"\n</code></pre> \u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u65e7BP\u30dd\u30fc\u30c8\u8a31\u53ef\u3092\u524a\u9664</p> <p>\u5c71\u304b\u3063\u3053&lt;&gt;\u306f\u4e0d\u8981\u3067\u3059 <pre><code>sudo ufw status numbered\n</code></pre> <pre><code>sudo ufw delete &lt;\u524a\u9664\u3057\u305f\u3044\u756a\u53f7&gt;\n</code></pre></p> <p>\u65b0\u3057\u3044BP\u30dd\u30fc\u30c8\u756a\u53f7\u306e\u8a31\u53ef\u3092\u8a2d\u5b9a\uff08\u30ea\u30ec\u30fc\u304c\uff12\u53f0\u3042\u308b\u60f3\u5b9a\uff09  Ubuntu22.04\u306e\u5834\u5408\u306f\uff11\u884c\u3065\u3064\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>sudo ufw allow from &lt;\u30ea\u30ec\u30fc\uff11&gt; to any port ${b_PORT}\nsudo ufw allow from &lt;\u30ea\u30ec\u30fc\uff12&gt; to any port ${b_PORT}\nsudo ufw reload\n</code></pre></p> <p>\u30ce\u30fc\u30c9\u518d\u8d77\u52d5 <pre><code>sudo systemctl reload-or-restart cardano-node\n</code></pre></p>"},{"location":"operation/bp-port-change/#4","title":"4. \u5909\u66f4\u78ba\u8a8d","text":"<ul> <li>BP\u30dd\u30fc\u30c8\u304c\u304d\u3061\u3093\u3068\u5909\u66f4\u3055\u308c\u305f\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</li> </ul> <pre><code>ps aux | grep cardano-node\n</code></pre> <p>\u623b\u308a\u5024\u306e --port \u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</p> <ul> <li>BP\u30ce\u30fc\u30c9\u3092\u518d\u8d77\u52d5\u5f8c\u3001\u5404\u30b5\u30fc\u30d3\u30b9\u304c\u6b63\u5e38\u7a3c\u50cd\u3057\u3066\u3044\u308b\u3053\u3068\u3082\u4f75\u305b\u3066\u78ba\u8a8d\u3057\u3066\u304a\u304d\u307e\u3059\u3002</li> </ul> <pre><code>tmux a -t cncli\ntmux a -t leaderlog\ntmux a -t logmonitor\ntmux a -t validate\ntmux a -t blockcheck\n</code></pre> <p>blockcheck\u30b5\u30fc\u30d3\u30b9\u3092\u5c0e\u5165\u3057\u3066\u3044\u308b\u5834\u5408\u306e\u30b3\u30de\u30f3\u30c9\u3082\u4f75\u305b\u3066\u8a18\u8f09\u3057\u3066\u307e\u3059\u3002</p> \u88dc\u8db3   \u30b5\u30fc\u30d3\u30b9\u518d\u8d77\u52d5\u30b3\u30de\u30f3\u30c9 <pre><code>sudo systemctl reload-or-restart cnode-cncli-sync.service\n</code></pre> \u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30c3\u30af\u518d\u8d77\u52d5\u30b3\u30de\u30f3\u30c9 <pre><code>sudo systemctl reload-or-restart cnode-blockcheck.service\n</code></pre>  \u30c7\u30bf\u30c3\u30c1\u65b9\u6cd5 <pre><code>Ctrl + b \u2192 d\n</code></pre>"},{"location":"operation/bp-port-change/#5","title":"5. \u30ea\u30ec\u30fc\u306b\u3066\u5b9f\u65bd","text":"<p>\u758e\u901a\u78ba\u8a8d</p> <p>0.0.0.0\u3092BPIP\u306b\u66f8\u304d\u63db\u3048\u3066\u3001 xxxxx\u3092BP\u30ce\u30fc\u30c9\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u5165\u529b\u3057\u5b9f\u884c\u3002     <pre><code>nc -vz 0.0.0.0 xxxxx\n</code></pre></p> <p>port [tcp/*] succeeded! \u3067\u3042\u308c\u3070OK\u3067\u3059\u3002</p> <p>\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u751f\u6210\u7528\u30b9\u30af\u30ea\u30d7\u30c8\u66f8\u304d\u63db\u3048</p> <p>\u30c8\u30dd\u30ed\u30b8\u30fc\u5171\u6709\u306e\u305f\u3081\u5225\u30d5\u30a1\u30a4\u30eb\u3092\u81ea\u8eab\u3067\u4f5c\u6210\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u305d\u3061\u3089\u3067\u3082\u5fd8\u308c\u305a\u306b\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u5909\u66f4\u3057\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002 xxxxx\u306f\u3001BP\u30ce\u30fc\u30c9\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u5165\u529b\u3057\u307e\u3059\u3002</p> <p><pre><code>PORT=xxxxx\n</code></pre> <pre><code>sed -i $NODE_HOME/relay-topology_pull.sh \\\n    -e '1,10s!BLOCKPRODUCING_PORT=6000!BLOCKPRODUCING_PORT='${PORT}'!'\n</code></pre></p> <p>\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u3092\u518d\u4f5c\u6210\u3057\u307e\u3059\u3002 <pre><code>cd $NODE_HOME\n./relay-topology_pull.sh\n</code></pre></p> <p>\u30ce\u30fc\u30c9\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002 <pre><code>sudo systemctl reload-or-restart cardano-node\n</code></pre></p> <p>BP\u30dd\u30fc\u30c8\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>cat $NODE_HOME/mainnet-topology.json\n</code></pre></p>"},{"location":"operation/bp-port-change/#6","title":"6. \u6700\u7d42\u78ba\u8a8d","text":"<p>BP\u306eGliveView\u3092\u8d77\u52d5\u3057\u3001[p] Peer Analysis\u3092\u8868\u793a\u3002 \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u306eIP\u304c<code>i</code>\u3068<code>o</code>\u4e21\u65b9\u3067\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002</p>"},{"location":"operation/calidus-key-generation/","title":"Calidus\u30ad\u30fc\u751f\u6210","text":"<p>\u6982\u8981</p> <ul> <li>\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u306e\u6240\u6709\u6a29\u3092\u8a3c\u660e\u3059\u308b\u305f\u3081\u306e\u7f72\u540d\u6280\u8853</li> <li>\u65e2\u5b58\u306eCIP-22\u3084\u5c11\u984d\u9001\u91d1\u306b\u3088\u308b\u3001\u30d7\u30fc\u30eb\u79d8\u5bc6\u9375\u3084vrf\u79d8\u5bc6\u9375\u3092\u983b\u7e41\u306b\u4f7f\u7528\u3059\u308b\u3053\u3068\u306a\u304f\u6240\u6709\u6a29\u3092\u8a3c\u660e\u3067\u304d\u307e\u3059\u3002</li> <li>Cardano\u5bfe\u5fdc\u306e\u30e9\u30a4\u30c8\u30a6\u30a9\u30ec\u30c3\u30c8\u306b\u3082\u5fa9\u5143\u53ef\u80fd\u3067Web\u30d9\u30fc\u30b9\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3067\u3082\u5229\u7528\u53ef\u80fd</li> <li>\u4eca\u5f8cCalidus Pool Key\u306b\u5bfe\u5fdc\u3057\u305f\u591a\u69d8\u306a\u30b5\u30fc\u30d3\u30b9\u304c\u30ea\u30ea\u30fc\u30b9\u4e88\u5b9a</li> </ul>"},{"location":"operation/calidus-key-generation/#1-cardano-signer","title":"1. cardano-signer\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":""},{"location":"operation/calidus-key-generation/#1-1","title":"1-1. \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc","text":"<p>\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <p><pre><code>signer_release=\"$(curl -s https://api.github.com/repos/gitmachtl/cardano-signer/releases/latest | jq -r '.tag_name' | sed -e \"s/^.\\{1\\}//\")\"\ncd $HOME/git\nwget -q https://github.com/gitmachtl/cardano-signer/releases/download/v${signer_release}/cardano-signer-${signer_release}_linux-x64.tar.gz\n</code></pre> <pre><code>tar -xzvf cardano-signer-${signer_release}_linux-x64.tar.gz\nrm cardano-signer-${signer_release}_linux-x64.tar.gz\n</code></pre></p> <p>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb </p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>sudo cp cardano-signer /usr/local/bin/cardano-signer\n</code></pre> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-signer --version\n</code></pre>"},{"location":"operation/calidus-key-generation/#1-2","title":"1-2. \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7","text":"<p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>BP\u306e<code>$HOME/git</code>\u306b\u3042\u308b<code>cardano-signer</code>\u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306e<code>$HOME/git</code>\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[BP] --&gt;|cardano-signer| B[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7];</code></pre></p> <p>\u30b7\u30b9\u30c6\u30e0\u30d5\u30a9\u30eb\u30c0\u3078\u30b3\u30d4\u30fc\u3059\u308b</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3 <pre><code>cd $HOME/git\nchmod 755 cardano-signer\nsudo cp cardano-signer /usr/local/bin/cardano-signer\n</code></pre> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d </p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3 <pre><code>cardano-signer --version\n</code></pre>"},{"location":"operation/calidus-key-generation/#2-calidus","title":"2. Calidus\u30ad\u30fc\u4f5c\u6210","text":"<p>Calidus\u30ad\u30fc\u3068json\u30d5\u30a1\u30a4\u30eb\u306e\u53d6\u308a\u6271\u3044\u306b\u3064\u3044\u3066</p> <ul> <li>\u901a\u5e38\u306e\u30a6\u30a9\u30ec\u30c3\u30c8\u3068\u540c\u3058\u6027\u8cea\u306e\u30da\u30a2\u30ad\u30fc\u3068\u306a\u308a\u307e\u3059\u3002</li> <li><code>Calidus-MnemonicsKey.json</code>\u306b\u306f\u30e9\u30a4\u30c8\u30a6\u30a9\u30ec\u30c3\u30c8\u306b\u5fa9\u5143\u3059\u308b\u305f\u3081\u306e<code>Mnemonics</code>(\u5fa9\u5143\u30b7\u30fc\u30c9\u30d5\u30ec\u30fc\u30ba)\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002</li> <li>\u4e07\u304c\u4e00\u3053\u306e\u30ad\u30fc\u3092\u7d1b\u5931\u3057\u305f\u5834\u5408\u3067\u3082\u5dee\u3057\u66ff\u3048\u53ef\u80fd\u3067\u3059\u304c\u3001\u3082\u3057ADA\u3092\u4fdd\u6301\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u51fa\u91d1\u304c\u51fa\u6765\u306a\u304f\u306a\u308a\u307e\u3059\u306e\u3067\u3054\u6ce8\u610f\u304f\u3060\u3055\u3044\u3002</li> <li>\u8907\u6570\u306e\u30c7\u30d0\u30a4\u30b9\u306b\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3059\u308b\u3053\u3068\u3092\u30aa\u30b9\u30b9\u30e1\u3057\u307e\u3059\u3002</li> <li>\u4e00\u3064\u306ecalidus\u30da\u30a2\u30ad\u30fc\u3067\u8907\u6570\u306e\u30d7\u30fc\u30eb\u3092\u767b\u9332\u3067\u304d\u307e\u3059</li> </ul> \u4e00\u3064\u306e\u30da\u30a2\u30ad\u30fc\u3067\u8907\u6570\u30d7\u30fc\u30eb\u3092\u767b\u9332\u3059\u308b\u5834\u5408\u306f\u3053\u3061\u3089 <ol> <li>1\u30d7\u30fc\u30eb\u76ee\u306e\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u9818\u57df\u3067<code>myCalidusKey</code>\u30da\u30a2\u30ad\u30fc\u767a\u884c\u3059\u308b\u3002</li> <li>2\u30d7\u30fc\u30eb\u76ee\u306e\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u9818\u57df($NODE_HOME)\u306bcalidus\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3059\u308b <pre><code>mkdir -p $NODE_HOME/calidus\n</code></pre></li> <li>\u4f5c\u6210\u3057\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b<code>myCalidusKey</code>\u30da\u30a2\u30ad\u30fc(myCalidusKey.skey\u3001myCalidusKey.vkey)\u306e\u307f\u3092\u30b3\u30d4\u30fc\u3059\u308b</li> <li>\u300c3.\u30e1\u30bf\u30c7\u30fc\u30bf\u4f5c\u6210\u300d\u304b\u3089\u5b9f\u884c\u3059\u308b</li> </ol> <p><code>myCalidusKey</code>\u30da\u30a2\u30ad\u30fc\u767a\u884c</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3 <pre><code>mkdir -p $NODE_HOME/calidus\ncd $NODE_HOME/calidus\ncardano-signer keygen --path payment \\\n    --out-skey myCalidusKey.skey \\\n    --out-vkey myCalidusKey.vkey \\\n    --json-extended \\\n    --out-file Calidus-MnemonicsKey.json\n</code></pre>"},{"location":"operation/calidus-key-generation/#3","title":"3. \u30e1\u30bf\u30c7\u30fc\u30bf\u4f5c\u6210","text":"<p>\u30d7\u30fc\u30eb\u79d8\u5bc6\u9375\u3067\u7f72\u540d\u3057\u305f\u30e1\u30bf\u30c7\u30fc\u30bf\u4f5c\u6210\u3057\u307e\u3059 </p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3 <pre><code>chmod u+rwx $HOME/cold-keys\ncardano-signer sign --cip88 \\\n    --calidus-public-key $NODE_HOME/calidus/myCalidusKey.vkey \\\n    --secret-key $HOME/cold-keys/node.skey \\\n    --json \\\n    --out-file $NODE_HOME/calidus/myCalidusRegistrationMetadata.json\nchmod a-rwx $HOME/cold-keys\n</code></pre>"},{"location":"operation/calidus-key-generation/#4","title":"4. \u30aa\u30f3\u30c1\u30a7\u30fc\u30f3\u767b\u9332","text":"<p>\u6700\u65b0\u306e\u30b9\u30ed\u30c3\u30c8\u756a\u53f7\u3092\u53d6\u5f97\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\ncurrentSlot=$(cardano-cli conway query tip $NODE_NETWORK | jq -r '.slot')\necho Current Slot: $currentSlot\n</code></pre> <p>\u3054\u81ea\u8eab\u306e\u30d7\u30fc\u30eb\u30a6\u30a9\u30ec\u30c3\u30c8\u30a2\u30c9\u30ec\u30b9\u5b9b\u306b10ADA\u3068\u30e1\u30bf\u30c7\u30fc\u30bf\u3092\u542b\u3093\u3060Tx\u3092\u9001\u4fe1\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>amountToSend=10000000\necho \"\u9001\u91d1\u984d: $amountToSend Lovelace\"\n</code></pre> <p>\u9001\u91d1\u5148\u306e\u30a2\u30c9\u30ec\u30b9\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>destinationAddress=$(echo $(cat $NODE_HOME/payment.addr))\necho \u9001\u91d1\u5148: $destinationAddress\n</code></pre> <p>payment.addr\u306e\u6b8b\u9ad8\u3092\u7b97\u51fa\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <p><pre><code>cardano-cli conway query utxo \\\n    --address $(cat payment.addr) \\\n    $NODE_NETWORK \\\n    --output-text \\\n    --out-file fullUtxo.out\n</code></pre> <pre><code>tail -n +3 fullUtxo.out | sort -k3 -nr | sed -e '/lovelace + [0-9]/d' &gt; balance.out\ncat balance.out\n</code></pre></p> <p>UTXO\u3092\u7b97\u51fa\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>tx_in=\"\"\ntotal_balance=0\nwhile read -r utxo; do\n    in_addr=$(awk '{ print $1 }' &lt;&lt;&lt; \"${utxo}\")\n    idx=$(awk '{ print $2 }' &lt;&lt;&lt; \"${utxo}\")\n    utxo_balance=$(awk '{ print $3 }' &lt;&lt;&lt; \"${utxo}\")\n    total_balance=$((${total_balance}+${utxo_balance}))\n    echo TxHash: ${in_addr}#${idx}\n    echo ADA: ${utxo_balance}\n    tx_in=\"${tx_in} --tx-in ${in_addr}#${idx}\"\ndone &lt; balance.out\ntxcnt=$(cat balance.out | wc -l)\necho Total ADA balance: ${total_balance}\necho Number of UTXOs: ${txcnt}\n\ntempBalanceAmont=$(( ${total_balance}-${amountToSend} ))\n</code></pre> <p>\u30a6\u30a9\u30ec\u30c3\u30c8\u6b8b\u9ad8\u60c5\u5831\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210 <pre><code>cat &gt; $NODE_HOME/wallet_balance.sh &lt;&lt; EOF \n#!/bin/bash\ntotal_balance=$total_balance\ntx_in=\"$tx_in\"\ntempBalanceAmont=$tempBalanceAmont\ndestinationAddress=$destinationAddress\namountToSend=$amountToSend\ncurrentSlot=$currentSlot\nEOF\n</code></pre></p> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>BP\u306e<code>$NODE_HOME</code>\u306b\u3042\u308b<code>wallet_balance.sh</code>\u3068<code>params.json</code>\u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[BP] --&gt;|wallet_balance.sh / params.json| B[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7];</code></pre></p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u3067\u30a6\u30a9\u30ec\u30c3\u30c8\u6b8b\u9ad8\u3092\u8aad\u307f\u8fbc\u3080</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 <pre><code>source $NODE_HOME/wallet_balance.sh\n</code></pre> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 <pre><code>cd $NODE_HOME\ncardano-cli conway transaction build-raw \\\n    ${tx_in} \\\n    --tx-out $(cat payment.addr)+${tempBalanceAmont} \\\n    --tx-out ${destinationAddress}+${amountToSend} \\\n    --invalid-hereafter $(( ${currentSlot} + 10000)) \\\n    --metadata-json-file $NODE_HOME/calidus/myCalidusRegistrationMetadata.json \\\n    --fee 200000 \\\n    --out-file tx.tmp\n</code></pre> <p>\u6700\u4f4e\u624b\u6570\u6599\u3092\u51fa\u529b\u3057\u307e\u3059</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 <pre><code>fee=$(cardano-cli conway transaction calculate-min-fee \\\n    --tx-body-file tx.tmp \\\n    --witness-count 1 \\\n    --output-text \\\n    --protocol-params-file params.json | awk '{ print $1 }')\necho fee: $fee\n</code></pre> <p>\u624b\u6570\u6599\u8a08\u7b97</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 <pre><code>txOut=$((${total_balance}-${fee}-${amountToSend}))\necho Change Output: ${txOut}\n</code></pre> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u69cb\u7bc9\u3057\u307e\u3059</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 <pre><code>cardano-cli conway transaction build-raw \\\n    ${tx_in} \\\n    --tx-out $(cat payment.addr)+${txOut} \\\n    --tx-out ${destinationAddress}+${amountToSend} \\\n    --invalid-hereafter $(( ${currentSlot} + 10000)) \\\n    --metadata-json-file $NODE_HOME/calidus/myCalidusRegistrationMetadata.json \\\n    --fee ${fee} \\\n    --out-file tx.raw\n</code></pre> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306b\u7f72\u540d\u3057\u307e\u3059</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 <pre><code>cd $NODE_HOME\ncardano-cli conway transaction sign \\\n    --tx-body-file tx.raw \\\n    --signing-key-file payment.skey \\\n    $NODE_NETWORK \\\n    --out-file tx.signed\n</code></pre> <p>tx.signed \u3092\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002</p> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306e<code>tx.signed</code> \u3092BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|tx.signed| B[BP];</code></pre></p> <p>\u7f72\u540d\u3055\u308c\u305f\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u9001\u4fe1\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <p>\u30a6\u30a9\u30ec\u30c3\u30c8\u6b8b\u9ad8\u60c5\u5831\u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u3059\u308b <pre><code>rm $NODE_HOME/wallet_balance.sh\n</code></pre> \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3ID\u3092\u78ba\u8a8d\u3059\u308b <pre><code>tx_id=$(cardano-cli conway transaction txid --tx-body-file $NODE_HOME/tx.signed)\necho TxID:$tx_id\n</code></pre></p> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u9001\u4fe1\u3059\u308b <pre><code>cardano-cli conway transaction submit \\\n    --tx-file tx.signed \\\n    $NODE_NETWORK\n</code></pre></p> <p>Transacsion Successfully submitted\u3068\u8868\u793a\u3055\u308c\u308c\u3070\u6210\u529f</p>"},{"location":"operation/calidus-key-generation/#5","title":"5. \u30aa\u30f3\u30c1\u30a7\u30fc\u30f3\u78ba\u8a8d","text":"<pre><code>curl -s \"https://api.koios.rest/api/v1/pool_calidus_keys?pool_id_bech32=eq.$(cat $NODE_HOME/pool.id-bech32)\" | jq .\n</code></pre> <p>\u623b\u308a\u5024\u306b\u3001<code>\"pool_status\": \"registered\"</code>\u306e\u9805\u76ee\u304c\u3042\u308c\u3070\u767b\u9332\u6210\u529f</p>"},{"location":"operation/calidus-key-generation/#6-calidus","title":"6. Calidus\u30ad\u30fc\u8ee2\u9001","text":"\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>mkdir -p $NODE_HOME/calidus\n</code></pre> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306emyCalidusKey.skey \u3092\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9\u306ecnode/calidus\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002</p> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306e<code>myCalidusKey.skey</code>\u3092BP\u306ecnode/calidus\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|myCalidusKey.skey| B[BP];</code></pre></p>"},{"location":"operation/catalyst-voting/","title":"\u30ab\u30bf\u30ea\u30b9\u30c8\u6709\u6a29\u8005\u767b\u9332","text":"<p>\u6982\u8981</p> <ul> <li> <p>\u3053\u306e\u30de\u30cb\u30e5\u30a2\u30eb\u306f\u3001\u30d7\u30fc\u30eb\u306epayment.addr\u3092\u6709\u6a29\u8005\u767b\u9332\u3059\u308b\u65b9\u6cd5\u3067\u3059\u3002   payment.addr\u306e\u8cc7\u91d1\u3092Voting\u30d1\u30ef\u30fc\u306b\u4f7f\u7528\u3067\u304d\u3001Catalyst\u6295\u7968\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002</p> </li> <li> <p>\u4f9d\u5b58\u95a2\u4fc2\u306f<code>BP</code>\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> </li> <li>\u6709\u6a29\u8005\u767b\u9332\u4f5c\u696d\u306fSJG TOOL\u3067\u884c\u3044\u307e\u3059\u3002</li> </ul>"},{"location":"operation/catalyst-voting/#1","title":"1. \u4e8b\u524d\u6e96\u5099\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>\u4ee5\u4e0b\u306e\u4f9d\u5b58\u95a2\u4fc2\u306fBP\u30b5\u30fc\u30d0\u30fc\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304f\u3060\u3055\u3044 </p> <p>\u5fc5\u8981\u306a\u30d0\u30a4\u30ca\u30ea</p> bech32 cardano-signer catalyst-toolbox v1.1.3 v1.13.0 v0.5.0"},{"location":"operation/catalyst-voting/#1-1-bech32","title":"1-1. Bech32\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $HOME/git\nwget  https://github.com/IntersectMBO/bech32/archive/refs/tags/$(curl -s https://api.github.com/repos/IntersectMBO/bech32/releases/latest | jq -r .tag_name).tar.gz\ntar -xf $(curl -s https://api.github.com/repos/IntersectMBO/bech32/releases/latest | jq -r .tag_name).tar.gz\nmv bech32-$(curl -s https://api.github.com/repos/IntersectMBO/bech32/releases/latest | jq -r .tag_name | tr -d v) bech32\nrm $(curl -s https://api.github.com/repos/IntersectMBO/bech32/releases/latest | jq -r .tag_name).tar.gz\n</code></pre> <p>\u30d3\u30eb\u30c9</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd bech32\ncabal update\ncabal build bech32\n</code></pre> <p>bin\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3078\u30b3\u30d4\u30fc</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>sudo cp $(find $HOME/git/bech32/dist-newstyle/build -type f -name \"bech32\") /usr/local/bin/bech32\n</code></pre> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>bech32 -v\n</code></pre> <p>\u623b\u308a\u5024 1.1.3</p>"},{"location":"operation/catalyst-voting/#1-2-cardano-signer","title":"1-2. cardano-signer\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $HOME/git\nwget https://github.com/gitmachtl/cardano-signer/releases/download/$(curl -s https://api.github.com/repos/gitmachtl/cardano-signer/releases/latest | jq -r .tag_name)/cardano-signer-$(curl -s https://api.github.com/repos/gitmachtl/cardano-signer/releases/latest | jq -r .tag_name | tr -d v)_linux-x64.tar.gz\ntar -xf cardano-signer-$(curl -s https://api.github.com/repos/gitmachtl/cardano-signer/releases/latest | jq -r .tag_name | tr -d v)_linux-x64.tar.gz\n</code></pre> <p>bin\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3078\u30b3\u30d4\u30fc</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>sudo cp $HOME/git/cardano-signer /usr/local/bin/cardano-signer\n</code></pre> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-signer help | grep -m 1 \"cardano-signer\"\n</code></pre> <p>cardano-signer 1.32.0</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u3078\u30b3\u30d4\u30fc</p> <p>BP\u306e<code>$HOME/git/</code>\u76f4\u4e0b\u306b\u3042\u308b<code>cardano-signer</code>\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3001\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306e<code>$HOME/git/</code>\u76f4\u4e0b\u306b\u30b3\u30d4\u30fc\u3059\u308b</p> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>BP\u306b\u3042\u308b<code>cardano-signer</code>\u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3\u306e$HOME/git/\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[BP] --&gt;|cardano-signer| B[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7];</code></pre></p> <p>bin\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3078\u30b3\u30d4\u30fc</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 <pre><code>sudo cp $HOME/git/cardano-signer /usr/local/bin/cardano-signer\n</code></pre> <p>\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u8a2d\u5b9a</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 <pre><code>sudo chmod 755 /usr/local/bin/cardano-signer\n</code></pre> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 <pre><code>cardano-signer help | grep -m 1 \"cardano-signer\"\n</code></pre> <p>cardano-signer 1.32.0</p>"},{"location":"operation/catalyst-voting/#1-3-catalyst-toolbox","title":"1-3. catalyst-toolbox\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $HOME/git\ngit clone https://github.com/input-output-hk/catalyst-core.git\ncd catalyst-core\ngit checkout 1bdacb3\n</code></pre> <p>Rust\u30d1\u30c3\u30b1\u30fc\u30b8\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>rustup update\n</code></pre> <p>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd src/catalyst-toolbox\ncargo install --path . --force\n</code></pre> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>catalyst-toolbox --version\n</code></pre> <p>catalyst-toolbox 0.5.0</p>"},{"location":"operation/catalyst-voting/#2","title":"2. \u6709\u6a29\u8005\u767b\u9332\u4f5c\u696d","text":""},{"location":"operation/catalyst-voting/#2-1-sjgtool","title":"2-1. SJGTOOL\u8d77\u52d5","text":"<p>\u6709\u6a29\u8005\u767b\u9332\u306e\u6d41\u308c</p> <pre><code>    graph LR\n        A[\u4f9d\u5b58\u95a2\u4fc2\u30c1\u30a7\u30c3\u30af] --&gt; B[\u6295\u7968\u7528\u30ad\u30fc\u4f5c\u6210] --&gt; C[\u30e1\u30bf\u30c7\u30fc\u30bf\u4f5c\u6210] --&gt; D[Tx\u4f5c\u6210/\u9001\u4fe1] --&gt; E[QR\u30b3\u30fc\u30c9\u4f5c\u6210];</code></pre> <p>\u4f5c\u6210\u30d5\u30a1\u30a4\u30eb\u306b\u3064\u3044\u3066</p> <p><code>XXX_voting.skey</code> / <code>XXX_voting.vkey</code> / <code>XXX_voting.json</code> (XXX\u306f\u30c6\u30a3\u30c3\u30ab\u30fc\u540d)</p> <ul> <li>\u4e0a\u8a18\u306e3\u30d5\u30a1\u30a4\u30eb\u306f\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u3001USB\u306a\u3069\u3078\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> <li><code>XXX_voting.json</code>\u306b\u306f\u3001\u5fa9\u5143\u30d5\u30ec\u30fc\u30ba\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002 Fund11\u304b\u3089\u958b\u59cb\u4e88\u5b9a\u306eWeb\u7248Catalyst\u6295\u7968\u30bb\u30f3\u30bf\u30fc\u3092\u4f7f\u7528\u3059\u308b\u969b\u306b\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u306e\u3067\u3001\u53b3\u91cd\u306b\u4fdd\u7ba1\u3057\u3066\u4e0b\u3055\u3044\u3002</li> </ul> <p>\u4e2d\u65ad\u3057\u305f\u5834\u5408</p> <p>\u51e6\u7406\u304c\u9014\u4e2d\u3067\u4e2d\u65ad\u3057\u305f\u5834\u5408\u3067\u3082\u3001SJGTOOL\u3092\u8d77\u52d5\u3057<code>[5]Catalyst\u6709\u6a29\u8005\u767b\u9332</code>\u3092\u9078\u629e\u3059\u308c\u3070\u9014\u4e2d\u304b\u3089\u518d\u958b\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"operation/catalyst-voting/#2-2-qr","title":"2-2. QR\u30b3\u30fc\u30c9\u4f5c\u6210\u5f8c","text":"<p>QR\u30b3\u30fc\u30c9\u304c\u767a\u884c\u3067\u304d\u305f\u3089<code>$HOME/CatalystVoting</code>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u30d5\u30a1\u30a4\u30eb\u306e\u6574\u7406\u3092\u304a\u9858\u3044\u3057\u307e\u3059\u3002</p> \u30d5\u30a1\u30a4\u30eb\u540d \u30b5\u30fc\u30d0\u30fc\u5185\u51e6\u7406 \u30d0\u30c3\u30af\u30a2\u30c3\u30d7 XXX_voting.skey \u524a\u9664 \u5fc5\u9808 XXX_voting.vkey \u524a\u9664 \u5fc5\u9808 XXX_voting.json \u524a\u9664 \u5fc5\u9808 vote-registration.cbor \u524a\u9664 \u4efb\u610f XXX_vote_qrcode.png \u4fdd\u7ba1 \u5fc5\u9808 txhash.log \u4fdd\u7ba1 \u4efb\u610f"},{"location":"operation/cert-update/","title":"\u904b\u7528\u8a3c\u660e\u66f8(pool.cert)\u306e\u66f4\u65b0","text":"<p>\u6982\u8981</p> <ul> <li>\u8a93\u7d04\u3001\u56fa\u5b9a\u624b\u6570\u6599\u3001\u5909\u52d5\u624b\u6570\u6599\u3001\u30ea\u30ec\u30fc\u60c5\u5831\u3001\u30e1\u30bf\u30c7\u30fc\u30bf\u3092\u5909\u66f4\u3059\u308b\u5834\u5408\u306b\u5b9f\u65bd\u3057\u307e\u3059\u3002</li> <li>\u30e1\u30bf\u30c7\u30fc\u30bfURL\u306e\u307f\u5909\u66f4\u306b\u306a\u308b\u5834\u5408\u3067\u3082\u300c\u30e1\u30bf\u30c7\u30fc\u30bf\u66f4\u65b0\u3092\u542b\u3080\u5834\u5408\u300d\u3092\u5b9f\u65bd\u3057\u30e1\u30bf\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u3092\u518d\u4f5c\u6210\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> </ul> <p>\u6ce8\u610f</p> <p>\u8a93\u7d04\u30fb\u56fa\u5b9a\u624b\u6570\u6599\u30fb\u5909\u52d5\u624b\u6570\u6599\u306e\u53cd\u6620\u306f\u63d0\u51fa\u30a8\u30dd\u30c3\u30af\uff0b3\u30a8\u30dd\u30c3\u30af\u5f8c\u304b\u3089\u306b\u306a\u308a\u307e\u3059\u3002 \u4f8b\uff09 320\u30a8\u30dd\u30c3\u30af\u306b\u5909\u66f4\u7533\u8acb 321\u30a8\u30dd\u30c3\u30af\u3067\u6709\u52b9\u5316 322\u30a8\u30dd\u30c3\u30af\u3067\u5f85\u6a5f 323\u30a8\u30dd\u30c3\u30af\u3067\u53cd\u6620  </p> \u30e1\u30bf\u30c7\u30fc\u30bf\u66f4\u65b0\u3092\u542b\u3080\u5834\u5408\u8a93\u7d04\u3001\u624b\u6570\u6599\u3001\u30ea\u30ec\u30fc\u60c5\u5831\u306e\u307f\u66f4\u65b0\u306e\u5834\u5408 \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <p>\u5909\u6570\u306b\u30d7\u30fc\u30eb\u30e1\u30bf\u30c7\u30fc\u30bf\u5024\u3092\u8a2d\u5b9a\u3057\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044</p> <p>\u6587\u5b57\u5217\u306f<code>''</code>\u3067\u56f2\u3063\u3066\u304f\u3060\u3055\u3044 extended\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u306f <code>''</code>\u306e\u307e\u307e\u3067\u5927\u4e08\u592b\u3067\u3059 <pre><code>name=''\ndescription=''\nticker=''\nhomepage=''\nextended=''\n</code></pre></p> <p>\u30e1\u30bf\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b</p> \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/poolMetaData.json &lt;&lt; EOF\n{\n    \"name\": \"$name\",\n    \"description\": \"$description\",\n    \"ticker\": \"$ticker\",\n    \"homepage\": \"$homepage\",\n    \"extended\": \"$extended\",\n    \"nonce\":\"$(date +%s)\"\n}\nEOF\n</code></pre> <p>poolMetaData.json\u3092\u5404\u30db\u30b9\u30c8\u30b5\u30fc\u30d0\u30fc\u3078\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b</p> <p>poolMetaData.json\u3092\u30ed\u30fc\u30ab\u30eb\u30de\u30b7\u30f3\u306b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3001Github\u307e\u305f\u306f\u3054\u81ea\u8eab\u306e\u30b5\u30fc\u30d0\u30fc\u306e\u6240\u5b9a\u306e\u4f4d\u7f6e\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u3066\u304f\u3060\u3055\u3044</p> <p>\u30cf\u30c3\u30b7\u30e5\u5024\u78ba\u8a8d</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\ncardano-cli conway stake-pool metadata-hash --pool-metadata-file poolMetaData.json &gt; poolMetaDataHash.txt\n</code></pre> <p>\u30aa\u30f3\u30e9\u30a4\u30f3\u30d5\u30a1\u30a4\u30eb\u30cf\u30c3\u30b7\u30e5\u5024\u78ba\u8a8d</p> <p><code>https:****.**.**</code>\u3092\u30e1\u30bf\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u306eURL\u306b\u7f6e\u304d\u63db\u3048\u3066\u304b\u3089\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044</p> <pre><code>cd $NODE_HOME\nwget -O onlineMetaData.json https:****.**.**\n</code></pre> <p>\u30aa\u30f3\u30e9\u30a4\u30f3\u30e1\u30bf\u30c7\u30fc\u30bf\u30cf\u30c3\u30b7\u30e5\u5024 <pre><code>cardano-cli conway stake-pool metadata-hash --pool-metadata-file onlineMetaData.json &gt; onlineMetaDataHash.txt\n</code></pre></p> <p>\u30cf\u30c3\u30b7\u30e5\u5024 <pre><code>printf \"\\n\u3000\u30b5\u30fc\u30d0\u30fc:$(cat poolMetaDataHash.txt)\\n\u30aa\u30f3\u30e9\u30a4\u30f3:$(cat onlineMetaDataHash.txt)\\n\\n\"\n</code></pre></p> <p>\u30cf\u30c3\u30b7\u30e5\u5024\u304c\u4e00\u81f4\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u7570\u306a\u308b\u5834\u5408\u306f\u30db\u30b9\u30c8\u30b5\u30fc\u30d0\u30fc\u3078\u6b63\u3057\u304f\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u308c\u3066\u3044\u308b\u304b\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002</p> <p>\u30cf\u30c3\u30b7\u30e5\u5024\u304c\u4e00\u81f4\u3057\u305f\u3089\u3001\u78ba\u8a8d\u7528\u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u3059\u308b\u3002 <pre><code>rm onlineMetaDataHash.txt\nrm onlineMetaData.json\n</code></pre></p> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>BP\u306e<code>poolMetaDataHash.txt</code> \u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[BP] --&gt;|poolMetaDataHash.txt| B[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7];</code></pre></p> <p>BP\u3068\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30cf\u30c3\u30b7\u30e5\u5024\u78ba\u8a8d</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\necho $(cat poolMetaDataHash.txt)\n</code></pre> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\necho $(cat poolMetaDataHash.txt)\n</code></pre> <p>\u30cf\u30c3\u30b7\u30e5\u5024\u304c\u7570\u306a\u3063\u3066\u3044\u308b\u5834\u5408\u306f\u3001BP\u306epoolMetaDataHash.txt\u304c\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306b\u6b63\u3057\u304f\u30b3\u30d4\u30fc\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002</p> <p>\u767b\u9332\u8a3c\u660e\u66f8\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b</p> <p>\u6ce8\u610f</p> <p>\u4ee5\u4e0b\u306f\u53c2\u8003\u30b3\u30fc\u30c9\u3067\u3059\u3002\u3054\u81ea\u8eab\u306e\u30d7\u30fc\u30eb\u8a2d\u5b9a\u5024\u306b\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044 \u4f8b\uff09  </p> <ul> <li>\u56fa\u5b9a\u8cbb\u30fb\u30fb\u30fb170ADA</li> <li>Margin\u30fb\u30fb\u30fb5%</li> <li>\u8a93\u7d04\u30fb\u30fb\u30fb1000ADA</li> </ul> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\n</code></pre> <pre><code>chmod u+rwx $HOME/cold-keys\ncardano-cli conway stake-pool registration-certificate \\\n    --cold-verification-key-file $HOME/cold-keys/node.vkey \\\n    --vrf-verification-key-file vrf.vkey \\\n    --pool-pledge 1000000000 \\\n    --pool-cost 170000000 \\\n    --pool-margin 0.05 \\\n    --pool-reward-account-verification-key-file stake.vkey \\\n    --pool-owner-stake-verification-key-file stake.vkey \\\n    $NODE_NETWORK \\\n    --pool-relay-ipv4 ***.***.***.*** \\\n    --pool-relay-port 6000 \\\n    --pool-relay-ipv4 ***.***.***.*** \\\n    --pool-relay-port 6000 \\\n    --metadata-url https://xxx.github.io/xxx/poolMetaData.json \\\n    --metadata-hash $(cat poolMetaDataHash.txt) \\\n    --out-file pool.cert\n</code></pre> <p>\u30d2\u30f3\u30c8</p> <p>\u4e0a\u8a18\u306e\u30b3\u30fc\u30c9\u3092\u81ea\u30d7\u30fc\u30eb\u7528\u306e\u8a2d\u5b9a\u306b\u4fee\u6b63\u3057\u305f\u3089\u3001\u6b21\u56de\u3082\u4f7f\u7528\u3067\u304d\u308b\u3088\u3046\u30c6\u30ad\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u4fdd\u5b58\u3057\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u306b\u8a93\u7d04\u3057\u307e\u3059\u3002</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cardano-cli conway stake-address stake-delegation-certificate \\\n    --stake-verification-key-file stake.vkey \\\n    --cold-verification-key-file $HOME/cold-keys/node.vkey \\\n    --out-file deleg.cert\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306e<code>pool.cert</code>\u3068<code>deleg.cert</code>\u3092\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|pool.cert / deleg.cert| B[BP];</code></pre></p> <p>\u6700\u65b0\u306e\u30b9\u30ed\u30c3\u30c8\u756a\u53f7\u3092\u53d6\u5f97\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\ncurrentSlot=$(cardano-cli conway query tip $NODE_NETWORK | jq -r '.slot')\necho Current Slot: $currentSlot\n</code></pre> <p>payment.addr\u306e\u6b8b\u9ad8\u3092\u51fa\u529b\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway query utxo \\\n    --address $(cat payment.addr) \\\n    $NODE_NETWORK \\\n    --output-text \\\n    --out-file fullUtxo.out\n\ntail -n +3 fullUtxo.out | sort -k3 -nr | sed -e '/lovelace + [0-9]/d' &gt; balance.out\n\ncat balance.out\n</code></pre> <p>UTXO\u3092\u7b97\u51fa\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>tx_in=\"\"\ntotal_balance=0\nwhile read -r utxo; do\n    in_addr=$(awk '{ print $1 }' &lt;&lt;&lt; \"${utxo}\")\n    idx=$(awk '{ print $2 }' &lt;&lt;&lt; \"${utxo}\")\n    utxo_balance=$(awk '{ print $3 }' &lt;&lt;&lt; \"${utxo}\")\n    total_balance=$((${total_balance}+${utxo_balance}))\n    echo TxHash: ${in_addr}#${idx}\n    echo ADA: ${utxo_balance}\n    tx_in=\"${tx_in} --tx-in ${in_addr}#${idx}\"\ndone &lt; balance.out\ntxcnt=$(cat balance.out | wc -l)\necho Total ADA balance: ${total_balance}\necho Number of UTXOs: ${txcnt}\n</code></pre> <p>build-raw\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction build-raw \\\n    ${tx_in} \\\n    --tx-out $(cat payment.addr)+${total_balance} \\\n    --invalid-hereafter $(( ${currentSlot} + 10000)) \\\n    --fee 200000 \\\n    --certificate-file pool.cert \\\n    --certificate-file deleg.cert \\\n    --out-file tx.tmp\n</code></pre> <p>\u6700\u4f4e\u624b\u6570\u6599\u3092\u8a08\u7b97\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>fee=$(cardano-cli conway transaction calculate-min-fee \\\n    --tx-body-file tx.tmp \\\n    --witness-count 3 \\\n    --output-text \\\n    --protocol-params-file params.json | awk '{ print $1 }')\necho fee: $fee\n</code></pre> <p>\u8a08\u7b97\u7d50\u679c\u3092\u51fa\u529b\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>txOut=$((${total_balance}-${fee}))\necho txOut: ${txOut}\n</code></pre> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction build-raw \\\n    ${tx_in} \\\n    --tx-out $(cat payment.addr)+${txOut} \\\n    --invalid-hereafter $(( ${currentSlot} + 10000)) \\\n    --fee ${fee} \\\n    --certificate-file pool.cert \\\n    --certificate-file deleg.cert \\\n    --out-file tx.raw\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>BP\u306e<code>tx.raw</code> \u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[BP] --&gt;|tx.raw| B[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7];</code></pre></p> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306b\u7f72\u540d\u3057\u307e\u3059\u3002</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\ncardano-cli conway transaction sign \\\n    --tx-body-file tx.raw \\\n    --signing-key-file payment.skey \\\n    --signing-key-file $HOME/cold-keys/node.skey \\\n    --signing-key-file stake.skey \\\n    $NODE_NETWORK \\\n    --out-file tx.signed\nchmod a-rwx $HOME/cold-keys\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306e<code>tx.signed</code> \u3092BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|tx.signed| B[BP];</code></pre></p> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u9001\u4fe1\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction submit \\\n    --tx-file tx.signed \\\n    $NODE_NETWORK\n</code></pre> <p>Transacsion Successfully submitted\u3068\u8868\u793a\u3055\u308c\u308c\u3070\u6210\u529f</p>"},{"location":"operation/gov-spo-vote/","title":"\u30ac\u30d0\u30ca\u30f3\u30b9\u30a2\u30af\u30b7\u30e7\u30f3\uff08SPO\u6295\u7968\uff09","text":"<p>\u6982\u8981</p> <ul> <li>\u3053\u306e\u6295\u7968\u624b\u9806\u306f\u30ac\u30d0\u30ca\u30f3\u30b9\u30a2\u30af\u30b7\u30e7\u30f3\u306eSPO\u6295\u7968\u306e\u307f\u306b\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002</li> <li>SJG Tool\u306b\u5b9f\u88c5\u3057\u3066\u3044\u308b\u30b3\u30de\u30f3\u30c9\u3068\u306f\u7570\u306a\u308a\u307e\u3059\u304c\u5b9f\u884c\u7d50\u679c\u306f\u540c\u3058\u3067\u3059\u3002</li> <li>\u6295\u7968\u306b\u306f\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u624b\u6570\u6599\u304c\u5fc5\u8981\u3067\u3059\u3002</li> <li>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u624b\u6570\u6599\u306fpayment.addr\u304b\u3089\u5f15\u304d\u843d\u3068\u3055\u308c\u307e\u3059\u3002\u30d7\u30fc\u30eb\u8a93\u7d04\u3092\u4e0b\u56de\u3089\u306a\u3044\u3088\u3046\u3054\u6ce8\u610f\u304f\u3060\u3055\u3044\u3002</li> </ul> <p>\u30ac\u30d0\u30ca\u30f3\u30b9\u30a2\u30af\u30b7\u30e7\u30f3\u78ba\u8a8d\u30b5\u30a4\u30c8 https://adastat.net/governances https://beta.cexplorer.io/gov/action https://cardanoscan.io/govActions https://gov.tools/governance_actions</p> BP/\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 <p>\u521d\u3081\u3066\u4f5c\u696d\u3059\u308b\u5834\u5408\u306f\u30ac\u30d0\u30ca\u30f3\u30b9\u4f5c\u696d\u7528\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3059\u308b <pre><code>mkdir -p $NODE_HOME/governance\n</code></pre></p>"},{"location":"operation/gov-spo-vote/#1","title":"1. \u6295\u7968\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210","text":"<p>\u6295\u7968\u4f8b</p> <p>\u30ac\u30d0\u30ca\u30f3\u30b9\u30a2\u30af\u30b7\u30e7\u30f3\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3ID:<code>59fd353253eb177e2104e8f23ea4c63e3d32ef95c7865d03e90d3884424dc1db</code>\u306b\u5bfe\u3057\u3066 <code>No</code>\u3067\u6295\u7968\u3059\u308b\u5834\u5408</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u3067\u6295\u7968\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 <ol> <li><code>gov_id</code>\u5909\u6570\u306b\u6295\u7968\u3059\u308b\u30ac\u30d0\u30ca\u30f3\u30b9\u30a2\u30af\u30b7\u30e7\u30f3\u306e\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3ID\u3092\u6307\u5b9a\u3059\u308b(Bech32ID\u306f\u6307\u5b9a\u3067\u304d\u306a\u3044) </li> <li>\u6295\u7968\u30d5\u30e9\u30b0\u306f\u6b21\u306e3\u3064\u306e\u3044\u305a\u308c\u304b\u3092\u6307\u5b9a <code>--yes</code> <code>--no</code> <code>--abstain</code> </li> </ol> <pre><code>gov_id=\"59fd353253eb177e2104e8f23ea4c63e3d32ef95c7865d03e90d3884424dc1db\"\n</code></pre> <pre><code>chmod u+rwx $HOME/cold-keys\ncd $NODE_HOME\ncardano-cli conway governance vote create \\\n--no \\\n--governance-action-tx-id $gov_id \\\n--governance-action-index \"0\" \\\n--cold-verification-key-file $HOME/cold-keys/node.vkey \\\n--out-file $NODE_HOME/governance/vote.file\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306evote.file\u3092BP\u306e~/cnode/governance/\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|vote.file| B[BP];</code></pre></p> <p>\u30cf\u30c3\u30b7\u30e5\u5024\u78ba\u8a8d \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u3068BP\u3067<code>vote.file</code>\u30d5\u30a1\u30a4\u30eb\u30cf\u30c3\u30b7\u30e5\u3092\u6bd4\u8f03\u3059\u308b \u5fc5\u305a\u30cf\u30c3\u30b7\u30e5\u5024\u304c\u4e00\u81f4\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 <pre><code>sha256sum $NODE_HOME/governance/vote.file\n</code></pre> BP <pre><code>sha256sum $NODE_HOME/governance/vote.file\n</code></pre>"},{"location":"operation/gov-spo-vote/#2","title":"2. \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210","text":"BP <p>payment.addr\u306e\u6b8b\u9ad8\u3092\u53d6\u5f97\u3059\u308b <pre><code>cd $NODE_HOME\ncardano-cli conway query utxo \\\n    --address $(cat payment.addr) \\\n    $NODE_NETWORK \\\n    --output-text \\\n    --out-file fullUtxo.out\n\ntail -n +3 fullUtxo.out | sort -k3 -nr | sed -e '/lovelace + [0-9]/d' &gt; balance.out\n\ncat balance.out\n</code></pre></p> <p>\u672a\u4f7f\u7528UTXO\u3092\u53d6\u5f97\u3059\u308b <pre><code>tx_in=\"\"\ntotal_balance=0\nwhile read -r utxo; do\n    in_addr=$(awk '{ print $1 }' &lt;&lt;&lt; \"${utxo}\")\n    idx=$(awk '{ print $2 }' &lt;&lt;&lt; \"${utxo}\")\n    utxo_balance=$(awk '{ print $3 }' &lt;&lt;&lt; \"${utxo}\")\n    total_balance=$((${total_balance}+${utxo_balance}))\n    echo TxHash: ${in_addr}#${idx}\n    echo ADA: ${utxo_balance}\n    tx_in=\"${tx_in} --tx-in ${in_addr}#${idx}\"\ndone &lt; balance.out\ntxcnt=$(cat balance.out | wc -l)\necho Total ADA balance: ${total_balance}\necho Number of UTXOs: ${txcnt}\n</code></pre></p> <pre><code>cd $NODE_HOME\ncardano-cli conway transaction build \\\n$NODE_NETWORK \\\n${tx_in} \\\n--change-address $(cat $NODE_HOME/payment.addr) \\\n--vote-file $NODE_HOME/governance/vote.file \\\n--witness-override 2 \\\n--out-file $NODE_HOME/governance/vote-tx.raw\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>BP\u306evote-tx.raw\u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306e~/cnode/governance/\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[BP] --&gt;|vote-tx.raw| B[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7];</code></pre></p> <p>\u30cf\u30c3\u30b7\u30e5\u5024\u78ba\u8a8d BP\u3068\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u3067<code>vote-tx.raw</code>\u30d5\u30a1\u30a4\u30eb\u30cf\u30c3\u30b7\u30e5\u3092\u6bd4\u8f03\u3059\u308b \u5fc5\u305a\u30cf\u30c3\u30b7\u30e5\u5024\u304c\u4e00\u81f4\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044</p> BP <pre><code>sha256sum $NODE_HOME/governance/vote-tx.raw\n</code></pre> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 <pre><code>sha256sum $NODE_HOME/governance/vote-tx.raw\n</code></pre>"},{"location":"operation/gov-spo-vote/#3","title":"3. \u7f72\u540d\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210","text":"\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 <pre><code>cardano-cli conway transaction sign \\\n--tx-body-file $NODE_HOME/governance/vote-tx.raw \\\n--signing-key-file $HOME/cold-keys/node.skey \\\n--signing-key-file $NODE_HOME/payment.skey \\\n--out-file $NODE_HOME/governance/vote-tx.signed\n\nchmod a-rwx $HOME/cold-keys\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306evote-tx.signed\u3092BP\u306e~/cnode/governance/\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|vote-tx.signed| B[BP];</code></pre></p> <p>\u30cf\u30c3\u30b7\u30e5\u5024\u78ba\u8a8d \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u3068BP\u3067<code>vote-tx.signed</code>\u30d5\u30a1\u30a4\u30eb\u30cf\u30c3\u30b7\u30e5\u3092\u6bd4\u8f03\u3059\u308b \u5fc5\u305a\u30cf\u30c3\u30b7\u30e5\u5024\u304c\u4e00\u81f4\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 <pre><code>sha256sum $NODE_HOME/governance/vote-tx.signed\n</code></pre> BP <pre><code>sha256sum $NODE_HOME/governance/vote-tx.signed\n</code></pre>"},{"location":"operation/gov-spo-vote/#4","title":"4. \u6295\u7968\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u9001\u4fe1","text":"BP <pre><code>cd $NODE_HOME\ncardano-cli conway transaction submit \\\n--tx-file $NODE_HOME/governance/vote-tx.signed \\\n$NODE_NETWORK\n</code></pre>"},{"location":"operation/grafana-alert/","title":"Grafana\u30a2\u30e9\u30fc\u30c8\u8a2d\u5b9a","text":"<p>\u6982\u8981</p> <p>\u30b5\u30fc\u30d0\u30fc\u7570\u5e38\u72b6\u614b\u767a\u751f\u6642\u306b\u4efb\u610f\u306e\u30a2\u30d7\u30ea\u3078\u901a\u77e5\u3092\u9001\u4fe1\u3059\u308b\u8a2d\u5b9a\u3067\u3059\u3002 \u30b5\u30fc\u30d0\u30fc\u76e3\u8996\u306b\u306f\u5fc5\u9808\u8a2d\u5b9a\u3068\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"operation/grafana-alert/#1","title":"1. \u4e8b\u524d\u78ba\u8a8d","text":"<ul> <li>Grafana\u30d0\u30fc\u30b8\u30e7\u30f3v9.4.1\u4ee5\u4e0a</li> <li>Grafana SJG\u6700\u65b0\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u9069\u7528\u6e08\u307f</li> </ul>"},{"location":"operation/grafana-alert/#1-1-grafana","title":"1-1. Grafana\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d","text":"<pre><code>grafana-cli -v\n</code></pre>"},{"location":"operation/grafana-alert/#1-2-grafana","title":"1-2. Grafana\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8","text":"<pre><code>sudo apt update -y &amp;&amp; sudo apt upgrade -y\n</code></pre>"},{"location":"operation/grafana-alert/#2","title":"2. \u30a2\u30e9\u30fc\u30c8\u30eb\u30fc\u30eb\u306e\u4f5c\u6210","text":"<p>\u901a\u77e5\u306e\u57fa\u6e96\u3068\u306a\u308b\u30a2\u30e9\u30fc\u30c8\u30eb\u30fc\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002  </p> <p>1.\u300c\u5de6\u30b5\u30a4\u30c9\u30e1\u30cb\u30e5\u30fc\u300d\u2192\u300cAlerting\u300d\u306e\u53f3\u306e\u77e2\u5370\u2192\u300cAlert rules\u300d\u2192\u300cNew alert rule\u300d\u306e\u9806\u306b\u30af\u30ea\u30c3\u30af\u3059\u308b </p>"},{"location":"operation/grafana-alert/#2-1","title":"2-1. \u30ce\u30fc\u30c9\u30b9\u30ed\u30c3\u30c8\u76e3\u8996","text":"<ul> <li>\u2460:<code>Relay1-\u30b9\u30ed\u30c3\u30c8\u76e3\u8996</code>\u306a\u3069\u4efb\u610f\u306e\u30eb\u30fc\u30eb\u540d</li> <li>\u2461:<code>Metrics Browser</code>\u3092\u30af\u30ea\u30c3\u30af</li> <li>\u2462:<code>cardano_node_metrics_slotInEpoch_int</code>\u3092\u9078\u629e</li> <li>\u2463:<code>alias</code>\u304c\u9078\u629e\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d</li> <li>\u2464:\u76e3\u8996\u3059\u308b\u30ce\u30fc\u30c9\u540d\u3092\u9078\u629e</li> <li> <p>\u2465:<code>Use query</code>\u3092\u30af\u30ea\u30c3\u30af </p> </li> <li> <p>\u2466:<code>B</code>\u306e\u30b4\u30df\u7bb1\u30de\u30fc\u30af\u3092\u30af\u30ea\u30c3\u30af</p> </li> <li>\u2467:<code>C</code>\u306e\u30b4\u30df\u7bb1\u30de\u30fc\u30af\u3092\u30af\u30ea\u30c3\u30af</li> <li> <p>\u2468:<code>Add expression</code>\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001<code>Classic_condition</code>\u3092\u9078\u629e </p> </li> <li> <p>\u2469:<code>last() / A / HAS NO VALUE</code>\u9078\u629e</p> </li> <li>\u246a:<code>Set as alert condition</code>\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001<code>Alert condition</code>\u306e\u8868\u793a\u306b\u5909\u3048\u308b</li> <li>\u246b:<code>New folder</code>\u3092\u9078\u629e\u3057\u3001<code>SJG</code>\u3092\u5165\u529b\u3057\u3066<code>Create</code></li> <li>\u246c:<code>New evaluation group</code>\u3092\u9078\u629e\u3057\u3001<code>Evaluation group name</code>\u306b<code>\u30ce\u30fc\u30c9\u76e3\u8996</code>\u3001<code>Evaluation interval</code>\u306b<code>10s</code>\u3092\u5165\u529b\u3057\u3066<code>Create</code></li> <li>\u246d:<code>20s</code>\u3092\u5165\u529b</li> <li>\u246e:<code>Alerting</code>\u3092\u9078\u629e</li> <li> <p>\u246f:<code>Alerting</code>\u3092\u9078\u629e </p> </li> <li> <p>\u2470:<code>Add custom annotaion</code>\u3092\u9078\u629e</p> </li> <li>\u2471:<code>\u691c\u77e5\u5185\u5bb9</code>\u3092\u5165\u529b</li> <li>\u2472:\u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u691c\u77e5\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u5165\u529b \u4f8b\uff09<code>Relay1\u306e\u30b9\u30ed\u30c3\u30c8\u3092\u53d6\u5f97\u51fa\u6765\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u30ce\u30fc\u30c9\u8d77\u52d5\u72b6\u614b\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044</code></li> <li>\u2473:\u30da\u30fc\u30b8\u4e0a\u90e8\u306e<code>Save rule and exit</code>\u3092\u9078\u629e </li> </ul> <p>\u6b8b\u308a\u306e\u5168\u3066\u306e\u30ce\u30fc\u30c9\u306e\u30b9\u30ed\u30c3\u30c8\u76e3\u8996\u3092\u8a2d\u5b9a\u3059\u308b  </p> <p>\u4e0a\u8a18\u3067\u4f5c\u6210\u3057\u305f\u30eb\u30fc\u30eb\u3092\u30b3\u30d4\u30fc\u3059\u308b </p> <ul> <li>\u2460\u3092\u66f8\u304d\u63db\u3048\u308b</li> <li> <p>\u2461:<code>Metrics Browser</code>\u3092\u66f8\u304d\u63db\u3048\u308b \u4f8b\uff09 <code>cardano_node_metrics_slotInEpoch_int{alias=\"block-producing-node\"}</code> <code>cardano_node_metrics_slotInEpoch_int{alias=\"relaynode2\"}</code></p> </li> <li> <p>\u300c4 Add annotations\u300d\u306e\u691c\u77e5\u5185\u5bb9\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u5185\u5bb9\u3092\u66f8\u304d\u63db\u3048\u308b</p> </li> <li>\u2473:\u30da\u30fc\u30b8\u4e0a\u90e8\u306e<code>Save rule and exit</code>\u3092\u9078\u629e</li> </ul>"},{"location":"operation/grafana-alert/#2-2-bp","title":"2-2. BP\u2192\u30ea\u30ec\u30fc\u63a5\u7d9a\u76e3\u8996","text":"<p>\u4e0a\u8a18\u3067\u4f5c\u6210\u3057\u305f\u30eb\u30fc\u30eb\u3092\u30b3\u30d4\u30fc\u3059\u308b </p> <ul> <li>\u2460:<code>BP\u30ea\u30ec\u30fc\u63a5\u7d9a\u76e3\u8996</code>\u306a\u3069\u4efb\u610f\u306e\u30eb\u30fc\u30eb\u540d\u306b\u66f8\u304d\u63db\u3048\u308b</li> <li>\u2461:<code>Metrics Browser</code>\u3092<code>cardano_node_metrics_peers_connectedPeers_int{alias=\"block-producing-node\"}</code>\u306b\u7f6e\u304d\u63db\u3048\u308b</li> <li>\u2469:<code>last()</code> / <code>A</code> / <code>IS BELOW</code>\u306b\u5207\u308a\u66ff\u3048<code>1</code>\u3092\u5165\u529b</li> <li>\u246e:<code>Alerting</code>\u3092\u9078\u629e</li> <li>\u246f:<code>Alerting</code>\u3092\u9078\u629e</li> <li>\u300c4 Add annotation\u300d\u306e\u691c\u77e5\u5185\u5bb9\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u5185\u5bb9\u3092\u66f8\u304d\u63db\u3048\u308b \u4f8b\uff09<code>BP\u304b\u3089\u30ea\u30ec\u30fc\u3078\u306e\u63a5\u7d9a\u304c\u78ba\u8a8d\u3067\u304d\u307e\u305b\u3093\u3002\u63a5\u7d9a\u72b6\u6cc1\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044</code></li> <li>\u2473:\u30da\u30fc\u30b8\u4e0a\u90e8\u306e<code>Save rule and exit</code>\u3092\u9078\u629e</li> </ul>"},{"location":"operation/grafana-alert/#2-3","title":"2-3. \u30c1\u30a7\u30fc\u30f3\u5bc6\u5ea6\u76e3\u8996","text":"<p>\u4e0a\u8a18\u3067\u4f5c\u6210\u3057\u305f\u30eb\u30fc\u30eb\u3092\u30b3\u30d4\u30fc\u3059\u308b </p> <ul> <li>\u2460:<code>\u30c1\u30a7\u30fc\u30f3\u5bc6\u5ea6\u76e3\u8996</code>\u306a\u3069\u4efb\u610f\u306e\u30eb\u30fc\u30eb\u540d\u306b\u66f8\u304d\u63db\u3048\u308b</li> <li>\u2461:<code>Metrics Browser</code>\u3092<code>cardano_node_metrics_density_real{alias=\"relaynode1\"} * 100</code>\u306b\u7f6e\u304d\u63db\u3048\u308b</li> <li>\u2469:<code>last()</code> / <code>A</code> / <code>IS BELOW</code>\u306b\u5207\u308a\u66ff\u3048<code>4.5</code>\u3092\u5165\u529b</li> <li>\u246e:<code>OK</code>\u3092\u9078\u629e</li> <li>\u246f:<code>OK</code>\u3092\u9078\u629e</li> <li>\u300c4 Add annotation\u300d\u306e\u691c\u77e5\u5185\u5bb9\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u5185\u5bb9\u3092\u66f8\u304d\u63db\u3048\u308b \u4f8b\uff09<code>\u30c1\u30a7\u30fc\u30f3\u5bc6\u5ea6\u304c4.5\uff05\u3092\u4e0b\u56de\u3063\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u306f\u30ab\u30eb\u30c0\u30ce\u30c1\u30a7\u30fc\u30f3\u5168\u4f53\u306e\u554f\u984c\u3067\u3059</code></li> <li>\u2473:\u30da\u30fc\u30b8\u4e0a\u90e8\u306e<code>Save rule and exit</code>\u3092\u9078\u629e</li> </ul>"},{"location":"operation/grafana-alert/#2-4","title":"2-4. \u30ce\u30fc\u30c9\u30bf\u30a4\u30e0\u76e3\u8996","text":"<p>\u4e0a\u8a18\u3067\u4f5c\u6210\u3057\u305f\u30eb\u30fc\u30eb\u3092\u30b3\u30d4\u30fc\u3059\u308b </p> <ul> <li>\u2460:<code>Relay1-\u30ce\u30fc\u30c9\u30bf\u30a4\u30e0\u76e3\u8996</code>\u306a\u3069\u4efb\u610f\u306e\u30eb\u30fc\u30eb\u540d\u306b\u66f8\u304d\u63db\u3048\u308b</li> <li>\u2461:<code>Metrics Browser</code>\u3092<code>node_timex_maxerror_seconds{alias=\"relaynode1\"} * 1000</code>\u306b\u7f6e\u304d\u63db\u3048\u308b </li> <li>\u2469:<code>last()</code> / <code>A</code> / <code>IS ABOVE</code>\u306b\u5207\u308a\u66ff\u3048<code>100</code>\u3092\u5165\u529b</li> <li>\u246e:<code>OK</code>\u3092\u9078\u629e</li> <li>\u246f:<code>OK</code>\u3092\u9078\u629e</li> <li>\u300c4 Add annotation\u300d\u306e\u691c\u77e5\u5185\u5bb9\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u5185\u5bb9\u3092\u66f8\u304d\u63db\u3048\u308b \u4f8b\uff09<code>Relay1\u306e\u30ce\u30fc\u30c9\u30bf\u30a4\u30e0\u304c100ms\u3092\u8d85\u3048\u3066\u3044\u307e\u3059\u3002chrony\u3092\u518d\u8d77\u52d5\u3057\u3066\u304f\u3060\u3055\u3044</code></li> <li>\u2473:\u30da\u30fc\u30b8\u4e0a\u90e8\u306e<code>Save rule and exit</code>\u3092\u9078\u629e</li> </ul> <p>\u6b8b\u308a\u5168\u3066\u306e\u30ce\u30fc\u30c9\u306e\u30ce\u30fc\u30c9\u30bf\u30a4\u30e0\u76e3\u8996\u3092\u8a2d\u5b9a\u3059\u308b  </p> <p>\u4e0a\u8a18\u3067\u4f5c\u6210\u3057\u305f\u30eb\u30fc\u30eb\u3092\u30b3\u30d4\u30fc\u3059\u308b </p> <ul> <li>\u2460\u3092\u66f8\u304d\u63db\u3048\u308b</li> <li> <p>\u2461:<code>Metrics Browser</code>\u3092\u66f8\u304d\u63db\u3048\u308b \u4f8b\uff09 <code>node_timex_maxerror_seconds{alias=\"block-producing-node\"} * 1000</code> <code>node_timex_maxerror_seconds{alias=\"relaynode2\"} * 1000</code> </p> </li> <li> <p>\u300c4 Add annotation\u300d\u306e\u691c\u77e5\u5185\u5bb9\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u5185\u5bb9\u3092\u66f8\u304d\u63db\u3048\u308b</p> </li> <li>\u2473:\u30da\u30fc\u30b8\u4e0a\u90e8\u306e<code>Save rule and exit</code>\u3092\u9078\u629e</li> </ul>"},{"location":"operation/grafana-alert/#2-5-kes","title":"2-5. KES\u6b8b\u308a\u65e5\u6570\u76e3\u8996","text":"<p>\u4e0a\u8a18\u3067\u4f5c\u6210\u3057\u305f\u30eb\u30fc\u30eb\u3092\u30b3\u30d4\u30fc\u3059\u308b </p> <ul> <li>\u2460:<code>BP-KES\u6b8b\u308a\u65e5\u6570\u76e3\u8996</code>\u306a\u3069\u4efb\u610f\u306e\u30eb\u30fc\u30eb\u540d\u306b\u66f8\u304d\u63db\u3048\u308b</li> <li>\u2461:<code>Metrics Browser</code>\u3092<code>(cardano_node_metrics_remainingKESPeriods_int * 1.5)</code>\u306b\u7f6e\u304d\u63db\u3048\u308b</li> <li>\u2469:<code>last()</code> / <code>A</code> / <code>IS BELOW</code>\u306b\u5207\u308a\u66ff\u3048<code>10</code>\u3092\u5165\u529b</li> <li>\u246e:<code>OK</code>\u3092\u9078\u629e</li> <li>\u246f:<code>OK</code>\u3092\u9078\u629e</li> <li>\u300c4 Add annotation\u300d\u306e\u691c\u77e5\u5185\u5bb9\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u5185\u5bb9\u3092\u66f8\u304d\u63db\u3048\u308b \u4f8b\uff09<code>KES\u30ad\u30fc\u306e\u671f\u9650\u304c\u8feb\u3063\u3066\u3044\u307e\u3059\u3002\u30d6\u30ed\u30c3\u30af\u751f\u6210\u4e88\u5b9a\u306e\u306a\u3044\u30bf\u30a4\u30df\u30f3\u30b0\u3067KES\u30ad\u30fc\u3092\u66f4\u65b0\u3057\u3066\u304f\u3060\u3055\u3044</code></li> <li>\u2473:\u30da\u30fc\u30b8\u4e0a\u90e8\u306e<code>Save rule and exit</code>\u3092\u9078\u629e</li> </ul>"},{"location":"operation/grafana-alert/#2-6","title":"2-6. \u30c7\u30a3\u30b9\u30af\u4f7f\u7528\u7387\u76e3\u8996","text":"<p>\u4e0a\u8a18\u3067\u4f5c\u6210\u3057\u305f\u30eb\u30fc\u30eb\u3092\u30b3\u30d4\u30fc\u3059\u308b </p> <ul> <li>\u2460:<code>Relay1-\u30c7\u30a3\u30b9\u30af\u4f7f\u7528\u7387\u76e3\u8996</code>\u306a\u3069\u4efb\u610f\u306e\u30eb\u30fc\u30eb\u540d\u306b\u66f8\u304d\u63db\u3048\u308b</li> <li>\u2461:<code>Metrics Browser</code>\u3092<code>1 - node_filesystem_avail_bytes / node_filesystem_size_bytes{alias=\"relaynode1\",mountpoint=\"/\"}</code>\u306b\u7f6e\u304d\u63db\u3048\u308b </li> <li>\u2469:<code>last()</code> / <code>A</code> / <code>IS ABOVE</code>\u306b\u5207\u308a\u66ff\u3048<code>0.9</code>\u3092\u5165\u529b</li> <li>\u246e:<code>OK</code>\u3092\u9078\u629e</li> <li>\u246f:<code>OK</code>\u3092\u9078\u629e</li> <li>\u300c4 Add annotation\u300d\u306e\u691c\u77e5\u5185\u5bb9\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u5185\u5bb9\u3092\u66f8\u304d\u63db\u3048\u308b \u4f8b\uff09<code>Relay1\u306e\u30c7\u30a3\u30b9\u30af\u4f7f\u7528\u7387\u304c90%\u3092\u8d85\u3048\u3066\u3044\u307e\u3059\u3002100%\u306b\u9054\u3059\u308b\u524d\u306b\u5951\u7d04\u30b5\u30fc\u30d0\u30fc\u306e\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u306a\u3069\u3092\u884c\u3046\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059</code></li> <li>\u2473:\u30da\u30fc\u30b8\u4e0a\u90e8\u306e<code>Save rule and exit</code>\u3092\u9078\u629e</li> </ul> <p>\u6b8b\u308a\u5168\u3066\u306e\u30ce\u30fc\u30c9\u306e\u30c7\u30a3\u30b9\u30af\u4f7f\u7528\u7387\u76e3\u8996\u3092\u8a2d\u5b9a\u3059\u308b  </p> <p>\u4e0a\u8a18\u3067\u4f5c\u6210\u3057\u305f\u30eb\u30fc\u30eb\u3092\u30b3\u30d4\u30fc\u3059\u308b </p> <ul> <li>\u2460\u3092\u66f8\u304d\u63db\u3048\u308b</li> <li> <p>\u2461:<code>Metrics Browser</code>\u3092\u66f8\u304d\u63db\u3048\u308b \u4f8b\uff09 <code>1 - node_filesystem_avail_bytes / node_filesystem_size_bytes{alias=\"block-producing-node\",mountpoint=\"/\"}</code> <code>1 - node_filesystem_avail_bytes / node_filesystem_size_bytes{alias=\"relaynode2\",mountpoint=\"/\"}</code> </p> </li> <li> <p>\u300c4 Add annotation\u300d\u306e\u691c\u77e5\u5185\u5bb9\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u5185\u5bb9\u3092\u66f8\u304d\u63db\u3048\u308b</p> </li> <li>\u2473:\u30da\u30fc\u30b8\u4e0a\u90e8\u306e<code>Save rule and exit</code>\u3092\u9078\u629e</li> </ul>"},{"location":"operation/grafana-alert/#3","title":"3. \u901a\u77e5\u5148\u30a2\u30d7\u30ea\u306e\u8a2d\u5b9a","text":"<p>\u901a\u77e5\u5148\u30a2\u30d7\u30ea\u306e\u8a2d\u5b9a</p> <p>\u30a2\u30e9\u30fc\u30c8\u306e\u901a\u77e5\u5148\u306fLINE/Discord/Telegram/Slack\u3092\u8907\u6570\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002 \u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u901a\u77e5\u306e2. \u901a\u77e5\u30a2\u30d7\u30ea\u306e\u8a2d\u5b9a\u3067\u8a2d\u5b9a\u3057\u305f\u624b\u9806\u3068\u540c\u69d8\u306b\u3001\u901a\u77e5\u5148\u540d\u306a\u3069\u3092\u5909\u3048\u3066\u30c8\u30fc\u30af\u30f3\u3092\u767a\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002  </p>"},{"location":"operation/grafana-alert/#4","title":"4. \u901a\u77e5\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u8a2d\u5b9a","text":"<ul> <li> <p>\u300cContact points\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u300cAdd template\u300d\u3092\u30af\u30ea\u30c3\u30af </p> </li> <li> <p>\u4efb\u610f\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u540d<code>SJG</code>\u3092\u5165\u529b\u3057\u3001\u4ee5\u4e0b\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30c7\u30fc\u30bf\u3092\u5165\u529b <pre><code>{{ define \"myalert\" }}\n{{ if gt (len .Annotations) 0 }}{{ range .Annotations.SortedPairs }}{{ .Name }}: {{ .Value }}{{ end }}\n{{ end }}{{ end }}\n\n\n{{ define \"mymessage\" }}\n{{ if gt (len .Alerts.Firing) 0 }} \u3010 \u274c\u969c\u5bb3\u767a\u751f\u274c \u3011{{len .Alerts.Firing}}\u4ef6 {{ range .Alerts.Firing }}\n{{ template \"myalert\" .}} {{ end }}{{ end }}\n{{ if gt (len .Alerts.Resolved) 0 }}\u2705\u4ee5\u4e0b\u306e\u969c\u5bb3\u306f\u5fa9\u65e7\u3057\u307e\u3057\u305f\u2705{{len .Alerts.Resolved}}\u4ef6{{ range .Alerts.Resolved }}\n{{ template \"myalert\" .}} {{ end }}{{ end }}\n{{ end }}\n</code></pre> </p> </li> <li> <p>\u300cSave tempelate\u300d\u3092\u30af\u30ea\u30c3\u30af </p> </li> </ul>"},{"location":"operation/grafana-alert/#5","title":"5. \u901a\u77e5\u5148\u8a2d\u5b9a","text":"<ul> <li>\u300cAdd contact point\u300d\u3092\u30af\u30ea\u30c3\u30af </li> </ul> <p>\u901a\u77e5\u5148\u3092\u6307\u5b9a\u3059\u308b</p> <ul> <li>\u4efb\u610f\u306e\u901a\u77e5\u540d<code>Self-Alert</code>\u3092\u5165\u529b</li> <li>\u901a\u77e5\u5148\u3092\u9078\u629e\u3057\u60c5\u5831\u3092\u5165\u529b</li> <li>2. \u901a\u77e5\u30a2\u30d7\u30ea\u306e\u8a2d\u5b9a\u3067\u53d6\u5f97\u3057\u305f\u901a\u77e5\u30a2\u30d7\u30ea\u3054\u3068\u306e\u30c8\u30fc\u30af\u30f3ID\u3084WebhookURL\u3092\u5165\u529b\u3059\u308b</li> <li><code>Option *** Settings</code>\u3092\u30af\u30ea\u30c3\u30af\u3057<code>Discription</code>\u306b\u4ee5\u4e0b\u306e\u30bf\u30b0\u3092\u5165\u529b <pre><code>{{ template \"mymessage\" . }}\n</code></pre></li> </ul> <p>\u901a\u77e5\u5148\u3054\u3068\u306e\u30bf\u30b0\u5165\u529b\u6b04\u8868\u8a18\u9055\u3044</p> <ul> <li>LINE\u2192Description</li> <li>Discord\u2192Message Content</li> <li>Slack\u2192Text Body</li> <li>Telegram\u2192Message</li> </ul> <p></p> <ul> <li>\u300cSave contact point\u300d\u3092\u30af\u30ea\u30c3\u30af</li> </ul> <p>\u8907\u6570\u306e\u901a\u77e5\u5148\u3092\u8a2d\u5b9a\u53ef\u80fd</p> <p>\u300cAdd contact point integration\u300d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308c\u3070\u3001\u8907\u6570\u306e\u901a\u77e5\u5148\u3092\u8a2d\u5b9a\u53ef\u80fd</p> <ul> <li> <p>\u300cNotification policies\u300d\u2192\u300cEdit\u300d\u3092\u30af\u30ea\u30c3\u30af </p> </li> <li> <p><code>Self-Alert</code>\u3092\u9078\u629e</p> </li> <li><code>Group by</code>\u306b<code>grafana_folder</code>\u3068<code>alertname</code>\u3092\u6307\u5b9a</li> <li><code>Group interval</code>\u2192 <code>1 Minutes</code>\u306b\u8a2d\u5b9a</li> <li><code>Repeat interval</code>\u2192 <code>10 Minutes</code>\u306b\u8a2d\u5b9a</li> <li>\u300cUpdate default policy\u300d\u3092\u30af\u30ea\u30c3\u30af </li> </ul>"},{"location":"operation/grafana-alert/#6-url","title":"6. \u901a\u77e5\u5185\u5bb9URL\u30ab\u30b9\u30bf\u30de\u30a4\u30ba","text":"<p>\u6ce8\u610f</p> <ul> <li>\u4e8b\u524d\u306bGrafana\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u5f37\u5316\u3092\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044</li> <li>\u4ee5\u4e0b\u306fGrafana\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30b5\u30fc\u30d0\u30fc\u3067\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044</li> </ul> <p><code>xxxx.bbb.com</code>\u3092Grafana\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u5f37\u5316\u3067\u53d6\u5f97\u3057\u305f\u30c9\u30e1\u30a4\u30f3(\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3)\u306b\u7f6e\u304d\u63db\u3048\u3066\u5b9f\u884c\u3059\u308b <code>https://</code>\u306f\u4e0d\u8981 <pre><code>domain=xxxx.bbb.com\n</code></pre></p> <p>\u4ee5\u4e0b\u30b3\u30de\u30f3\u30c9\u3092\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3059\u308b <pre><code>sudo sed -i /etc/grafana/grafana.ini \\\n    -e 's!;domain = localhost!domain = '${domain}'!' \\\n    -e 's!;root_url = %(protocol)s://%(domain)s:%(http_port)s/!root_url = https://%(domain)s/!'\n</code></pre></p> <p>Grafana\u3092\u518d\u8d77\u52d5\u3059\u308b <pre><code>sudo systemctl restart grafana-server.service\n</code></pre></p>"},{"location":"operation/grafana-repo/","title":"Grafana\u30ea\u30dd\u30b8\u30c8\u30ea\u5909\u66f4","text":"<p>\u6982\u8981</p> <ul> <li>\u3053\u306e\u30de\u30cb\u30e5\u30a2\u30eb\u3067\u306f\u65e7\u5f0f\u306eGrafana\u66f4\u65b0\u7528APT\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u66f4\u65b0\u3057\u307e\u3059\u3002</li> <li> <p>Grafana\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u30b5\u30fc\u30d0\u30fc(Relay1)\u306e\u307f\u5bfe\u8c61\u3067\u3059\u3002</p> </li> <li> <p>\u8a2d\u5b9a\u6e08\u307f\u306eAPT\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u78ba\u8a8d\u3059\u308b <pre><code>cat /etc/apt/sources.list.d/grafana.list | grep \"https://packages.grafana.com/oss/deb\"\n</code></pre></p> <p><code>deb https://packages.grafana.com/oss/deb stable main</code>\u306e\u623b\u308a\u5024\u304c\u3042\u308b\u5834\u5408\u3001\u4ee5\u4e0b\u306e\u4f5c\u696d\u5bfe\u8c61\u3067\u3059\u3002</p> </li> </ul>"},{"location":"operation/grafana-repo/#1-gpg","title":"1. GPG\u30ad\u30fc\u306e\u78ba\u8a8d","text":"<p>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u306eGPG\u7f72\u540d\u30ad\u30fc\u3092\u78ba\u8a8d\u3059\u308b</p> <pre><code>sudo apt-key list | grep -B 1 Grafana\n</code></pre> <p>Ubuntu22.04\u306e\u5834\u5408\u306f\u300cWarning: apt-key is deprecated. Manage keyring files in trusted.gpg.d instead (see apt-key(8)).\u300d\u3068\u3044\u3046\u6587\u5b57\u304c\u51fa\u307e\u3059\u304c\u7121\u8996\u3067\u5927\u4e08\u592b\u3067\u3059\u3002</p> <p>\u623b\u308a\u5024  \u4f8b\uff09 <pre><code>       4E40 DDF6 D76E 284A 4A67  80E4 8C8C 34C5 2409 8CB6\n uid           [ unknown] Grafana &lt;info@grafana.com&gt;\n</code></pre></p>"},{"location":"operation/grafana-repo/#2-gpg","title":"2. \u65e7GPG\u7f72\u540d\u30ad\u30fc\u524a\u9664","text":"<p>\u30ad\u30fc\u3092\u30b3\u30d4\u30fc\u3057\u3066\u524a\u9664\u30b3\u30de\u30f3\u30c9\u3092\u4f5c\u6210\u3057\u3066\u5b9f\u884c\u3059\u308b\u3002</p> <p>\u524a\u9664\u30b3\u30de\u30f3\u30c9 \u4f8b\uff09 <pre><code>sudo apt-key del \"4E40 DDF6 D76E 284A 4A67  80E4 8C8C 34C5 2409 8CB6\"\n</code></pre></p> <p>\u78ba\u8a8d</p> <ul> <li>\"\"\u5185\u306e\u30ad\u30fc\u306f\u3001\u30b5\u30fc\u30d0\u30fc\u306b\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u3082\u306e\u306b\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002  </li> <li>\u623b\u308a\u5024\u306b\u30ad\u30fc\u304c\u8907\u6570\u3042\u308b\u5834\u5408\u306f\u3001\u5168\u3066\u306e\u30ad\u30fc\u3092\u524a\u9664\u3057\u3066\u304f\u3060\u3055\u3044\u3002  </li> <li>Ubuntu22.04\u306e\u5834\u5408\u306f\u300cWarning: apt-key is deprecated. Manage keyring files in trusted.gpg.d instead (see apt-key(8)).\u300d\u3068\u3044\u3046\u6587\u5b57\u304c\u51fa\u307e\u3059\u304c\u7121\u8996\u3067\u5927\u4e08\u592b\u3067\u3059\u3002</li> </ul>"},{"location":"operation/grafana-repo/#3","title":"3. \u65b0\u30ea\u30dd\u30b8\u30c8\u30ea\u8ffd\u52a0","text":"<pre><code>echo \"deb [signed-by=/usr/share/keyrings/grafana.key] https://apt.grafana.com stable main\" | sudo tee -i /etc/apt/sources.list.d/grafana.list\n</code></pre> <p>Ubuntu22.04\u306e\u5834\u5408\u306f\u3053\u3061\u3089\u3082\u5b9f\u884c</p> <p><pre><code>sudo apt update -y &amp;&amp; sudo apt install -y needrestart\n</code></pre> <pre><code>echo \"\\$nrconf{restart} = 'a';\" | sudo tee /etc/needrestart/conf.d/50local.conf\n</code></pre> <pre><code>echo \"\\$nrconf{blacklist_rc} = [qr(^cardano-node\\\\.service$) =&gt; 0,];\" | sudo tee -a /etc/needrestart/conf.d/50local.conf\n</code></pre></p> <p>\u4f9d\u5b58\u95a2\u4fc2\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb <pre><code>sudo apt install -y apt-transport-https software-properties-common\n</code></pre></p> <p>\u65b0GPG\u30ad\u30fc\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb <pre><code>sudo wget -q -O /usr/share/keyrings/grafana.key https://apt.grafana.com/gpg.key\n</code></pre></p> <p>\u30b7\u30b9\u30c6\u30e0\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8 <pre><code>sudo apt update -y &amp;&amp; sudo apt upgrade -y\n</code></pre></p> <p>Grafana\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>grafana-server -v\n</code></pre></p> <p>Version 10.1.2 (commit: 8e428858dd, branch: HEAD) \u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u5b9f\u65bd\u6642\u671f\u306b\u3088\u3063\u3066\u5909\u52d5\u3057\u307e\u3059\u3002</p> <p>\u4ee5\u4e0a\u3067\u3059\u3002</p>"},{"location":"operation/grafana-security/","title":"Grafana\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u5f37\u5316","text":"<p>\u6982\u8981</p> <p>\u3053\u306e\u30de\u30cb\u30e5\u30a2\u30eb\u3067\u306fGrafana\u306e\u30ea\u30e2\u30fc\u30c8\u30a2\u30af\u30bb\u30b9\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3092\u5f37\u5316\u3059\u308b\u305f\u3081HTTPS\u5316\u3068\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u306e\u5c0e\u5165\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002</p>"},{"location":"operation/grafana-security/#_1","title":"\u4e8b\u524d\u78ba\u8a8d","text":"<p>\u4ee5\u4e0b\u306e\u624b\u9806\u306f\u3001\u76e3\u8996\u30c4\u30fc\u30eb\u8a2d\u5b9a\u3067Grafana\u3092\u5c0e\u5165\u3057\u305f\u65e2\u5b58\u306e\u30ea\u30ec\u30fc\u30b5\u30fc\u30d0\u30fc\u3067\u5b9f\u65bd\u53ef\u80fd\u3067\u3059\u3002</p> <p>\uff5e\u4f5c\u696d\u306e\u6d41\u308c\uff5e</p> <ol> <li>\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3(\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3)\u3092\u53d6\u5f97 \u3000 \u203b\u7121\u6599\u30c9\u30e1\u30a4\u30f3\u53d6\u5f97\u624b\u9806\u3082\u63b2\u8f09</li> <li>WEB\u30b5\u30fc\u30d0\u30fcnginx\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30fb\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u8a2d\u5b9a</li> <li>certbot\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb</li> <li>\u7121\u6599SSL\u8a3c\u660e\u66f8(Let\u2019s Encrypt)\u3092\u53d6\u5f97</li> <li>nginx\u8a2d\u5b9a\u5909\u66f4</li> <li>SSL\u8a3c\u660e\u66f8\u81ea\u52d5\u66f4\u65b0\u3092\u8a2d\u5b9a</li> </ol> <p>\u4f5c\u696d\u524d\u306e\u6ce8\u610f\u4e8b\u9805</p> <p>\u4ee5\u4e0b\u306e\u6587\u7ae0\u3092\u3088\u304f\u8aad\u307f\u306a\u304c\u3089\u9032\u3081\u3066\u304f\u3060\u3055\u3044\u3002\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u5fd8\u308c\u30fb\u30b3\u30de\u30f3\u30c9\u30b3\u30d4\u30fc\u30df\u30b9\u306a\u3069\u306b\u5341\u5206\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"operation/grafana-security/#1","title":"1. \u30c9\u30e1\u30a4\u30f3(\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3)\u3092\u53d6\u5f97\u3059\u308b","text":"<p>\u78ba\u8a8d</p> <p>\u30db\u30fc\u30e0\u30da\u30fc\u30b8\u306a\u3069\u306e\u904b\u7528\u3067\u3059\u3067\u306b\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u3092\u53d6\u5f97\u6e08\u307f\u306e\u5834\u5408\u306f\u305d\u3061\u3089\u3092\u4f7f\u7528\u51fa\u6765\u307e\u3059\u3002\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u3092\u304a\u6301\u3061\u3067\u306a\u3044\u65b9\u306f\u7121\u6599\u30c0\u30a4\u30ca\u30df\u30c3\u30afDNS\u3067\u30c9\u30e1\u30a4\u30f3\u3092\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002</p> \u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u3092\u304a\u6301\u3061\u306e\u65b9\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u3092\u6301\u3063\u3066\u3044\u306a\u3044\u65b9 <p>\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u3092\u304a\u6301\u3061\u306e\u65b9\u306f\u3001\u767b\u9332\u30ec\u30b8\u30b9\u30c8\u30e9\u306eDNS\u8a2d\u5b9a\u3067Grafana\u7528\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u3092\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u53c2\u8003\uff09 \u30db\u30b9\u30c8\u540d\uff1a\u4efb\u610f\u306e\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u540d TYPE\uff1aA VALUE(\u5024):\u30ea\u30ec\u30fc\u30b5\u30fc\u30d0\u30fcIP\u30a2\u30c9\u30ec\u30b9 </p> <p>DDNS Now\u3067\u7121\u6599\u306e\u30c9\u30e1\u30a4\u30f3\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002 DDNS Now\u306f\u5b8c\u5168\u7121\u6599\u30fb\u5b9a\u671f\u901a\u77e5\u4e0d\u8981\u30fb\u30b5\u30fc\u30d3\u30b9\u4fdd\u969c\u7a3c\u50cd\u7387100%\u306a\u3069\u3001\u4f7f\u3044\u3084\u3059\u3044DDNS\u30b5\u30fc\u30d3\u30b9\u3067\u3059\u3002\u305f\u3060\u3057\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u306a\u3069\u306f\u8a2d\u5b9a\u3067\u304d\u307e\u305b\u3093\u30021\u30a2\u30ab\u30a6\u30f3\u30c81\u30c9\u30e1\u30a4\u30f3</p> <p>\u30c9\u30e1\u30a4\u30f3(\u30a2\u30ab\u30a6\u30f3\u30c8)\u3092\u53d6\u5f97\u3059\u308b \u3053\u3053\u3067\u53d6\u5f97\u3057\u305f\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u304cGrafana\u306eURL\u306b\u306a\u308a\u307e\u3059\u3002</p> <p>\u4f8b\uff09grafana-abc.f5.si </p> <p>\u8a73\u7d30\u8a2d\u5b9a\u304b\u3089DNS\u306eA\u30ec\u30b3\u30fc\u30c9\u3092\u8a2d\u5b9a\u3059\u308b \u300cA\u30ec\u30b3\u30fc\u30c9(IPv4\u30a2\u30c9\u30ec\u30b9)\u300d\u6b04\u306bGrafana\u3092\u5c0e\u5165\u3057\u3066\u3044\u308b\u30b5\u30fc\u30d0\u30fc\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092\u5165\u529b\u3057\u3066\u300c\u8a2d\u5b9a\u3092\u5909\u66f4\u3059\u308b\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044 </p> <p>\u767b\u9332\u60c5\u5831\u78ba\u8a8d </p>"},{"location":"operation/grafana-security/#2-nginx","title":"2. nginx\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b","text":"<p><pre><code>sudo apt install nginx -y\n</code></pre> \u30b9\u30c6\u30fc\u30bf\u30b9\u78ba\u8a8d <pre><code>sudo systemctl --no-pager status nginx\n</code></pre></p> <p>\u7dd1\u8272\u3067\u300cactive (running)\u300d\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002</p> <p>HTTP/HTTPS\u7528\u30dd\u30fc\u30c8\u3092\u958b\u653e\u3059\u308b <pre><code>sudo ufw allow 80/tcp\nsudo ufw allow 443/tcp\n</code></pre></p> <p>\u958b\u653e\u4e2d\u306eGrafana\u75283000\u30dd\u30fc\u30c8\u3092\u524a\u9664\u3059\u308b numbered \u3067\u8868\u793a\u3055\u308c\u305f3000\u30dd\u30fc\u30c8\u306e\u756a\u53f7\u3092\u6307\u5b9a\u3057\u3066\u524a\u9664\u3057\u3066\u304f\u3060\u3055\u3044\u3002 <pre><code>sudo ufw status numbered\nsudo ufw delete \u756a\u53f7\n</code></pre></p> <p>ufw\u3092\u30ea\u30ed\u30fc\u30c9\u3059\u308b <pre><code>sudo ufw reload\n</code></pre></p> <p>\u78ba\u8a8d</p> <p>\u30ed\u30fc\u30ab\u30eb\u30d6\u30e9\u30a6\u30b6\u304b\u3089 <code>http://\u30ea\u30ec\u30fcIP\u30a2\u30c9\u30ec\u30b9</code> \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066 Nginx Welcome\u30da\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u308c\u3070OK\uff01 </p> <p><code>xxxx.bbb.com</code>\u3092[1.\u30c9\u30e1\u30a4\u30f3(\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3)\u3092\u53d6\u5f97\u3059\u308b]\u3067\u53d6\u5f97\u3057\u305f\u30c9\u30e1\u30a4\u30f3(\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3)\u306b\u7f6e\u304d\u63db\u3048\u3066\u5b9f\u884c\u3059\u308b</p> <pre><code>domain=xxxx.bbb.com\n</code></pre> <p>\u4eee\u60f3\u30db\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b <pre><code>sudo cat &gt; $HOME/$domain.conf &lt;&lt; EOF\nserver { \n    listen 80;\n    server_name $domain;\n\n    location / {\n    proxy_set_header Host \\$http_host;\n    proxy_pass http://127.0.0.1:3000;\n    } \n}\nEOF\n</code></pre></p> <p>\u4eee\u60f3\u30db\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u3092nginx\u30d5\u30a9\u30eb\u30c0\u3078\u79fb\u52d5\u3059\u308b <pre><code>sudo mv $HOME/$domain.conf /etc/nginx/sites-enabled/\n</code></pre></p> <p>nginx\u3092\u518d\u8d77\u52d5\u3059\u308b <pre><code>sudo systemctl restart nginx\n</code></pre></p> <p>\u78ba\u8a8d</p> <p>\u30ed\u30fc\u30ab\u30eb\u30d6\u30e9\u30a6\u30b6\u304b\u3089<code>http://\u30c9\u30e1\u30a4\u30f3\u540d</code>\u3067\u30a2\u30af\u30bb\u30b9\u3057\u3001Grafana\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u308c\u3070\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u8a2d\u5b9a\u306b\u6210\u529f\u3057\u307e\u3057\u305f\uff01</p> <p>\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30db\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u3059\u308b <pre><code>sudo rm /etc/nginx/sites-enabled/default\n</code></pre></p>"},{"location":"operation/grafana-security/#3-certbot","title":"3. certbot\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b","text":"<pre><code>sudo snap install core; sudo snap refresh core\n</code></pre> <p>\u300cDownload snap \"core\" (14784) from channel \"stable\"\u300d\u3068\u8868\u793a\u3055\u308c\u3001\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u306b\u6570\u5206\u304b\u304b\u308a\u307e\u3059\u3002  </p> \u623b\u308a\u5024\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u7570\u306a\u308b\u5834\u5408(\u30af\u30ea\u30c3\u30af\u3057\u3066\u958b\u304f) \u30d1\u30bf\u30fc\u30f31\u30d1\u30bf\u30fc\u30f32 <pre><code>snap \"core\" is already installed, see 'snap help refresh'\nsnap \"core\" has no updates available\n</code></pre> <p>\u3053\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u3067\u3059\u3002\u6b21\u306b\u9032\u3093\u3067\u304f\u3060\u3055\u3044\u3002</p> <p><pre><code>sudo: snap: command not found \nsudo: snap: command not found\n</code></pre> \u3053\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u306fsnap\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002 \u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <pre><code>sudo apt update -y\nsudo apt install snapd -y\n</code></pre> <p>snap\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5b8c\u4e86\u3057\u305f\u3089\u4ee5\u4e0b\u3092\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <pre><code>sudo snap install core; sudo snap refresh core\n</code></pre> <p>\uff1c\u623b\u308a\u5024\uff1e <pre><code>\u300cDownload snap \"core\" (14784) from channel \"stable\"\u300d \n\n2023-02-24T10:18:49+01:00 INFO Waiting for automatic snapd restart...\ncore 16-2.58.2 from Canonical\u2713 installed\nsnap \"core\" has no updates available\n</code></pre></p> <p>\u3068\u8868\u793a\u3055\u308c\u305f\u3089\u6b21\u306b\u9032\u3093\u3067\u304f\u3060\u3055\u3044\u3002</p> <pre><code>sudo snap install --classic certbot\n</code></pre> <p>\u300cDownload snap \"core20\" (1822) from channel \"stable\u300d\u3068\u8868\u793a\u3055\u308c\u3001\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u306b\u6570\u5206\u304b\u304b\u308a\u307e\u3059</p> <p>certbot\u3092\u30b7\u30b9\u30c6\u30e0\u30d5\u30a9\u30eb\u30c0\u3078\u30b3\u30d4\u30fc\u3059\u308b <pre><code>sudo ln -s /snap/bin/certbot /usr/bin/certbot\n</code></pre></p>"},{"location":"operation/grafana-security/#4-ssllets-encrypt","title":"4. \u7121\u6599SSL\u8a3c\u660e\u66f8(Let\u2019s Encrypt)\u3092\u53d6\u5f97\u3059\u308b","text":"<pre><code>sudo certbot --nginx\n</code></pre> <p>\u753b\u9762\u4e0a\u306e\u8cea\u554f\u306b\u56de\u7b54\u3057\u307e\u3059\u3002</p> <ol> <li> <p>\u4efb\u610f\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u306e\u767b\u9332 \u3053\u3053\u3067\u767b\u9332\u3057\u305f\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u306bSSL\u8a3c\u660e\u66f8\u66f4\u65b0\u524d\u30fb\u671f\u9650\u5207\u308c\u60c5\u5831\u306e\u901a\u77e5\u304c\u5c4a\u304d\u307e\u3059\u3002 </p> </li> <li> <p>Let's Encrypt\u30b5\u30fc\u30d3\u30b9\u5229\u7528\u898f\u7d04\u3078\u306e\u540c\u610f\u78ba\u8a8d </p> </li> <li> <p>\u30ad\u30e3\u30f3\u30da\u30fc\u30f3\u30e1\u30fc\u30eb\u767b\u9332\u78ba\u8a8d(\u4e0d\u8981\u306a\u3089N) </p> </li> <li> <p>SSL\u8a3c\u660e\u66f8\u767b\u9332\u30c9\u30e1\u30a4\u30f3\u306e\u78ba\u8a8d <code>1:</code>\u306b\u3054\u81ea\u8eab\u306e\u30c9\u30e1\u30a4\u30f3\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3001<code>1</code>\u3092\u5165\u529b </p> </li> <li> <p>SSL\u8a3c\u660e\u66f8\u53d6\u5f97\u78ba\u8a8d <code>This certificate expires on</code>\u306f\u53d6\u5f97\u3057\u305fSSL\u8a3c\u660e\u66f8\u306e\u6709\u52b9\u671f\u9650\u306a\u306e\u3067\u899a\u3048\u3066\u304a\u304d\u307e\u3057\u3087\u3046\uff01 <code>Congratulations!</code>\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308c\u3070\u7f72\u540d\u66f8\u53d6\u5f97\u6210\u529f\u3067\u3059\uff01</p> </li> </ol> <p>\u78ba\u8a8d</p> <p>\u30ed\u30fc\u30ab\u30eb\u30d6\u30e9\u30a6\u30b6\u304b\u3089<code>https://\u30c9\u30e1\u30a4\u30f3\u540d</code>\u3067\u30a2\u30af\u30bb\u30b9\u3057\u3001Grafana\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u308c\u3070HTTPS\u5316\u306b\u6210\u529f\u3057\u307e\u3057\u305f\uff01 \u30c9\u30e1\u30a4\u30f3\u3067\u30a2\u30af\u30bb\u30b9\u3057\u305f\u969b\u306eURL\u6b04\u306b\u304a\u3044\u3066\u3001http\u306e\u5f8c\u306bs\u304c\u3064\u3044\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"operation/grafana-security/#5-nginx","title":"5. nginx\u8a2d\u5b9a\u5909\u66f4","text":"<p>1.websocket\u3092\u6709\u52b9\u306b\u3059\u308b <code>xxxx.bbb.com</code>\u3092[1.\u30c9\u30e1\u30a4\u30f3(\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3)\u3092\u53d6\u5f97\u3059\u308b]\u3067\u53d6\u5f97\u3057\u305f\u30c9\u30e1\u30a4\u30f3(\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3)\u306b\u7f6e\u304d\u63db\u3048\u3066\u5b9f\u884c\u3059\u308b <pre><code>domain=xxxx.bbb.com\n</code></pre></p> <p>\u4eee\u60f3\u30db\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u304f <pre><code>sudo nano /etc/nginx/sites-enabled/$domain.conf\n</code></pre></p> <p><code>location /</code>\u30d6\u30ed\u30c3\u30af\u3092\u4ee5\u4e0b\u306e\u5185\u5bb9\u306b\u66f8\u304d\u63db\u3048\u308b <pre><code>    location / {\n    proxy_set_header Host $http_host;\n    proxy_pass http://127.0.0.1:3000;\n    }\n\n    location /api/live {\n    proxy_http_version 1.1;\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection $connection_upgrade;\n    proxy_set_header Host $http_host;\n    proxy_pass http://127.0.0.1:3000;\n    }\n</code></pre></p> <p>\u7de8\u96c6\u5f8c\u53c2\u8003\uff09 </p> <p>\u8ffd\u8a18\u3057\u305f\u3089\u4fdd\u5b58\u3057\u3066\u9589\u3058\u308b</p> <p>2.nginx \u69cb\u6210\u30d5\u30a1\u30a4\u30eb\u306e\u5f37\u5316 \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u304f <pre><code>sudo nano /etc/nginx/nginx.conf\n</code></pre></p> <p><code>SSL Settings</code>\u306e <code>TLSv1</code>\u3068<code>TLSv1.1</code>\u3092\u524a\u9664\u3059\u308b \u7de8\u96c6\u5f8c\u53c2\u8003\uff09 </p> <p>\u7d9a\u3051\u3066\u3001\u4ee5\u4e0b\u306e\u6587\u3092\u5168\u3066\u30b3\u30d4\u30fc\u3057\u3066<code>include /etc/nginx/site-enabled/*;</code>\u306e\u5f8c\u306b\u8ffd\u8a18\u3059\u308b <pre><code>        ## Start: Size Limits &amp; Buffer Overflows ##\n        client_body_buffer_size  3K;\n        client_header_buffer_size 3k;\n        client_max_body_size 80k;\n        large_client_header_buffers 2 10k;\n        ## END: Size Limits &amp; Buffer Overflows ##\n\n        ### Directive describes the zone, in which the session states are stored i.e. store in slimits. ###\n        ### 1m can handle 32000 sessions with 32 bytes/session, set to 5m x 32000 session ###\n        limit_conn_zone $binary_remote_addr zone=addr:5m;\n\n        ### Control maximum number of simultaneous connections for one session i.e. ###\n        ### restricts the amount of connections from a single ip address ###\n        limit_conn addr 10;\n\n        map $http_upgrade $connection_upgrade {\n            default upgrade;\n            ''      close;\n        }\n</code></pre></p> <p>\u8d64\u67a0\u306e <code>}</code> \u306e\u4f4d\u7f6e\u306b\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002 \u7de8\u96c6\u5f8c\u53c2\u8003\uff09   </p> <p>\u8ffd\u8a18\u3057\u305f\u3089\u4fdd\u5b58\u3057\u3066\u9589\u3058\u308b</p> <p>nginx\u30a8\u30e9\u30fc\u30c1\u30a7\u30c3\u30af <pre><code>sudo nginx -t\n</code></pre></p> <p>\u623b\u308a\u5024</p> \u6b63\u5e38\u306a\u5834\u5408\u30a8\u30e9\u30fc\u304c\u3042\u308b\u5834\u5408(\u4f8b)  <pre><code>nginx: the configuration file /etc/nginx/nginx.conf syntax is ok\nnginx: configuration file /etc/nginx/nginx.conf test is successful\n</code></pre> <p><pre><code>nginx: [emerg] unexpected \"}\" in /etc/nginx/sites-enabled/******.conf:8\nnginx: configuration file /etc/nginx/nginx.conf test failed\n</code></pre> \u30a8\u30e9\u30fc\u7b87\u6240\u3092\u4fee\u6b63\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>nginx\u3092\u518d\u8d77\u52d5\u3059\u308b <pre><code>sudo systemctl restart nginx\n</code></pre></p>"},{"location":"operation/grafana-security/#6-ssl","title":"6. SSL\u8a3c\u660e\u66f8\u81ea\u52d5\u66f4\u65b0","text":"<p>1.SSL\u8a3c\u660e\u66f8\u81ea\u52d5\u66f4\u65b0\u30bf\u30a4\u30de\u30fc\u78ba\u8a8d \u3053\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u3067SSL\u8a3c\u660e\u66f8\u304c\u81ea\u52d5\u66f4\u65b0\u3055\u308c\u307e\u3059\u3002 <pre><code>systemctl status snap.certbot.renew.timer\n</code></pre></p> <p>\u7dd1\u8272\u3067\u300cactive(wating)\u300d\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002</p> <p>2.nginx\u81ea\u52d5\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8 \u81ea\u52d5\u66f4\u65b0\u3055\u308c\u305fSSL\u8a3c\u660e\u66f8\u3092\u6709\u52b9\u306b\u3059\u308b\u305f\u3081\u3001nginx\u518d\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002 <pre><code>cat &gt; $HOME/nginx-reload.sh &lt;&lt; EOF\n#!/bin/bash \nsudo systemctl reload nginx\nEOF\n</code></pre> <pre><code>sudo mv $HOME/nginx-reload.sh /etc/letsencrypt/renewal-hooks/deploy/\n</code></pre> <pre><code>sudo chmod 755 /etc/letsencrypt/renewal-hooks/deploy/nginx-reload.sh\n</code></pre></p> <p>3.\u6307\u5b9a\u30e6\u30fc\u30b6\u30fc\u3068\u6307\u5b9a\u30b3\u30de\u30f3\u30c9\u3067sudo\u30d1\u30b9\u30ef\u30fc\u30c9\u8981\u6c42\u3092\u7121\u52b9\u306b\u3059\u308b \u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u5185\u3067sudo\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u305f\u3081\u3001\u30b9\u30af\u30ea\u30d7\u30c8\u81ea\u52d5\u5b9f\u884c\u306b\u30d1\u30b9\u30ef\u30fc\u30c9\u8981\u6c42\u3092\u30b9\u30eb\u30fc\u51fa\u6765\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002  </p> <p>\u30ed\u30b0\u30a4\u30f3\u30e6\u30fc\u30b6\u30fc\u540d\u3092\u78ba\u8a8d\u3059\u308b(\u63a7\u3048\u308b) <pre><code>whoami\n</code></pre> sudo\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u304f <pre><code>sudo visudo\n</code></pre> \u4ee5\u4e0b\u30b3\u30de\u30f3\u30c9\u306e<code>xxxx</code>\u3092\u3001\u4e0a\u8a18\u3067\u8abf\u3079\u305f\u30ed\u30b0\u30a4\u30f3\u30e6\u30fc\u30b6\u30fc\u540d\u306b\u66f8\u304d\u63db\u3048\u3066\u8ffd\u8a18\u3059\u308b <pre><code>xxxx ALL=NOPASSWD: /bin/systemctl\n</code></pre></p> <p>\u3053\u306e\u307e\u307e\u8ffd\u8a18\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044\u3002xxxx\u3092\u30e6\u30fc\u30b6\u30fc\u540d\u306b\u66f8\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</p> <p>\u7de8\u96c6\u5f8c\u53c2\u8003\uff09   </p> <p>\u8ffd\u8a18\u3057\u305f\u3089\u4fdd\u5b58\u3057\u3066\u9589\u3058\u308b</p>"},{"location":"operation/kes-update/","title":"KES\u306e\u66f4\u65b0","text":"<p>\u4ee5\u964d\u306f\u3001\u3059\u3079\u3066\u624b\u52d5\u3067\u884c\u3046KES\u66f4\u65b0\u624b\u9806\u3067\u3059\u3002 \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3068\u3057\u3066\u8a18\u8f09\u3057\u3066\u304a\u304d\u307e\u3059\u304c\u3001\u5b9f\u904b\u7528\u3067\u306f\u3001\u534a\u81ea\u52d5\u66f4\u65b0\u304c\u53ef\u80fd\u306aSJG TOOL\u306e\u5229\u7528\u3092\u63a8\u5968\u3057\u307e\u3059\u3002</p> <p>\u6982\u8981</p> <p>KES\u3068\u306f <code>Key Evolving Signature</code>\u306e\u7565\u3067\u3059\u3002  </p> <p>\u30ad\u30fc\u3092\u60aa\u610f\u306e\u3042\u308b\u653b\u6483\u8005\uff08\u30af\u30e9\u30c3\u30ab\u30fc\uff09\u304b\u3089\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u3092\u4fdd\u8b77\u3059\u308b\u305f\u3081\u306b\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002 90\u65e5\u3054\u3068\u306b\u518d\u751f\u6210\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u3001\u6709\u52b9\u671f\u9650\u304c\u5207\u308c\u308b\u524d\u306b\u66f4\u65b0\u3059\u308c\u3070\u671f\u9650\u5185\u306a\u3089\u3044\u3064\u66f4\u65b0\u3057\u3066\u3082\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002  </p> <p>\u6ce8\u610f</p> <ul> <li> <p>KES\u306e\u6709\u52b9\u671f\u9650\u304c\u5207\u308c\u308b\u3068\u30d6\u30ed\u30c3\u30af\u751f\u6210\u304c\u51fa\u6765\u306a\u304f\u306a\u308a\u307e\u3059\u3002 \u5fc5\u305a\u671f\u9650\u304c\u5207\u308c\u308b\u524d\u306b\u3001\u4ee5\u4e0b\u306e\u624b\u9806\u3067\u66f4\u65b0\u3057\u3066\u304f\u3060\u3055\u3044\u3002  </p> </li> <li> <p>Cardano\u30ce\u30fc\u30c91.35.x\u4ee5\u964d\u3001KES\u30ab\u30a6\u30f3\u30bf\u30fc\u756a\u53f7\u306e\u53d6\u6271\u3044\u898f\u5247\uff08\u30ec\u30ae\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\uff09\u304c\u5909\u66f4\u3055\u308c\u3066\u3044\u307e\u3059\u3002  </p> <ul> <li>\u30aa\u30f3\u30c1\u30a7\u30fc\u30f3\u306b\u8a18\u9332\u3055\u308c\u3066\u3044\u308b\u81ea\u30d7\u30fc\u30eb\u306eKES\u30ab\u30a6\u30f3\u30bf\u30fc\u5024 +<code>1</code> \u3067\u66f4\u65b0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002  </li> <li>\u30aa\u30f3\u30c1\u30a7\u30fc\u30f3\u306b\u307e\u3060\u81ea\u30d7\u30fc\u30eb\u304c\u751f\u6210\u3057\u305f\u30d6\u30ed\u30c3\u30af\u304c\u306a\u3044\u5834\u5408\u306f\u3001\u6bce\u56de <code>0</code> \u3067\u66f4\u65b0\u3057\u307e\u3059\u3002  </li> </ul> </li> </ul> <p>KES\u66f4\u65b0\u306e\u6d41\u308c</p> <ol> <li>BP\uff1aKES\u66f4\u65b0\u30bf\u30a4\u30df\u30f3\u30b0\u3092\u78ba\u8a8d  </li> <li>BP\uff1a\u65b0\u3057\u3044KES\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210  </li> <li>BP\uff1aKES\u30d5\u30a1\u30a4\u30eb(<code>kes.skey</code>/<code>kes.vkey</code>)\u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3078\u30b3\u30d4\u30fc  </li> <li>BP &amp; \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\uff1a<code>kes.vkey</code>\u30d5\u30a1\u30a4\u30eb\u30cf\u30c3\u30b7\u30e5\u3092\u6bd4\u8f03  </li> <li>BP\uff1a\u30aa\u30f3\u30c1\u30a7\u30fc\u30f3\u30ab\u30a6\u30f3\u30bf\u30fc\u756a\u53f7\u3092\u7b97\u51fa  </li> <li>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\uff1a<code>node.counter</code>\u3092\u751f\u6210  </li> <li>BP\uff1a\u73fe\u5728\u306e<code>KesPeriod</code>\u3092\u7b97\u51fa  </li> <li>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\uff1a<code>node.cert</code>\u3092\u751f\u6210 (\u9805\u76ee7\u3067\u7b97\u51fa\u3057\u305f<code>KesPeriod</code>\u3092\u4f7f\u3046\u3053\u3068)   </li> <li>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\uff1a<code>node.cert</code>\u3092BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3078\u30b3\u30d4\u30fc  </li> <li>BP &amp; \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\uff1a<code>node.cert</code>\u30d5\u30a1\u30a4\u30eb\u30cf\u30c3\u30b7\u30e5\u3092\u6bd4\u8f03  </li> <li>BP\uff1a\u30ce\u30fc\u30c9\u3092\u518d\u8d77\u52d5  </li> </ol>"},{"location":"operation/kes-update/#1-kes","title":"1. KES\u66f4\u65b0\u30bf\u30a4\u30df\u30f3\u30b0\u306e\u78ba\u8a8d","text":"\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc <pre><code>slotNumInt=`curl -s http://localhost:12798/metrics | grep cardano_node_metrics_slotNum_int | awk '{ print $2 }'`\necho \"scale=6; ${slotNumInt} / 129600\" | bc | awk '{printf \"%.5f\\n\", $0}'\n</code></pre> <p>\u623b\u308a\u5024\u306e\u5c0f\u6570\u70b9\u4ee5\u4e0b\u304c<code>.99800</code>\u524d\u5f8c\u306b\u306a\u3063\u3066\u3044\u308b\u5834\u5408\u3001<code>startKesPeriod</code>\u306e\u5207\u308a\u66ff\u308f\u308a\u304c\u9593\u8fd1\u3067\u3059\u3002 \u5207\u308a\u66ff\u308f\u308a\u5f8c\uff08<code>.00000</code>\u4ed8\u8fd1\uff09\u306b\u306a\u3063\u3066\u304b\u3089\u4f5c\u696d\u3092\u958b\u59cb\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"operation/kes-update/#2-kes","title":"2. KES\u30d5\u30a1\u30a4\u30eb\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3001\u65b0\u898f\u4f5c\u6210","text":"<p>\u65e2\u5b58\u30d5\u30a1\u30a4\u30eb\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc <pre><code>cp $NODE_HOME/kes.vkey $NODE_HOME/kes-bk.vkey\ncp $NODE_HOME/kes.skey $NODE_HOME/kes-bk.skey\ncp $NODE_HOME/node.cert $NODE_HOME/node-bk.cert\n</code></pre> <p>KES\u30d5\u30a1\u30a4\u30eb\u306e\u65b0\u898f\u4f5c\u6210     <pre><code>cardano-cli conway node key-gen-KES \\\n  --verification-key-file $NODE_HOME/kes.vkey \\\n  --signing-key-file $NODE_HOME/kes.skey\n</code></pre></p>"},{"location":"operation/kes-update/#3-kes","title":"3. KES\u30d5\u30a1\u30a4\u30eb\u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306b\u30b3\u30d4\u30fc","text":"<p>BP\u3067\u751f\u6210\u3057\u305fKES\u30d5\u30a1\u30a4\u30eb(<code>kes.skey</code>/<code>kes.vkey</code>)\u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3078\u30b3\u30d4\u30fc    </p> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>BP\u3067\u751f\u6210\u3057\u305f<code>kes.skey</code>/<code>kes.vkey</code>\u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[BP] --&gt;|**kes.skey** / **kes.vkey**| B[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7];</code></pre></p>"},{"location":"operation/kes-update/#4","title":"4. \u30cf\u30c3\u30b7\u30e5\u5024\u306e\u78ba\u8a8d","text":"<p>BP\u3068\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u3067<code>kes.vkey</code>\u30d5\u30a1\u30a4\u30eb\u30cf\u30c3\u30b7\u30e5\u3092\u6bd4\u8f03\u3057\u307e\u3059\u3002  </p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 <pre><code>cd $NODE_HOME\nsha256sum kes.vkey\n</code></pre> <pre><code>cd $NODE_HOME\nsha256sum kes.vkey\n</code></pre> <p>\u78ba\u8a8d</p> <p>BP\u3068\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306e\u4e21\u65b9\u3067\u8868\u793a\u3055\u308c\u305f\u623b\u308a\u5024\u3092\u6bd4\u8f03\u3057\u3001\u30cf\u30c3\u30b7\u30e5\u5024\u304c\u4e00\u81f4\u3057\u3066\u3044\u308c\u3070\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002  </p>"},{"location":"operation/kes-update/#5","title":"5. \u30aa\u30f3\u30c1\u30a7\u30fc\u30f3\u30ab\u30a6\u30f3\u30bf\u30fc\u53d6\u5f97","text":"\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc <pre><code>kesperiodinfo=$(cardano-cli conway query kes-period-info $NODE_NETWORK --op-cert-file $NODE_HOME/node.cert --out-file kesperiod.json)\nlastBlockCnt=`cat kesperiod.json | jq -r '.qKesNodeStateOperationalCertificateNumber'`\n\nif expr \"$lastBlockCnt\" : \"[0-9]*$\" &gt;&amp;/dev/null; then\necho '----------------------------------------------'\necho \u30aa\u30f3\u30c1\u30a7\u30fc\u30f3\u30ab\u30a6\u30f3\u30bf\u30fc\u756a\u53f7\u306f: $lastBlockCnt \u3067\u3059\u3002\necho \u66f4\u65b0\u30ab\u30a6\u30f3\u30bf\u30fc\u756a\u53f7\u306f $(($lastBlockCnt+1)) \u3067\u3059\u3002\necho '---------------------------------------------'\nelse\necho '----------------------------'\necho \u307e\u3060\u30d6\u30ed\u30c3\u30af\u3092\u751f\u6210\u3057\u3066\u3044\u307e\u305b\u3093\u3002\necho \u66f4\u65b0\u30ab\u30a6\u30f3\u30bf\u30fc\u756a\u53f7\u306f: \"0\" \u3067\u3059\u3002\necho '----------------------------'\nfi\nrm kesperiod.json\n</code></pre> <p>\u4e0a\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u3092\u305d\u306e\u307e\u307e\u30b3\u30d4\u30fc\u3057\u3066\u30bf\u30fc\u30df\u30ca\u30eb\u306b\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002 </p>"},{"location":"operation/kes-update/#6","title":"6. \u30ab\u30a6\u30f3\u30bf\u30fc\u30d5\u30a1\u30a4\u30eb\u751f\u6210","text":"\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 <pre><code>cd $NODE_HOME\nread -p \"BP\u3067\u7b97\u51fa\u3057\u305f\u66f4\u65b0\u30ab\u30a6\u30f3\u30bf\u30fc\u756a\u53f7\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044: \" cnt_No\n</code></pre> <p>\u4e0a\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u3092\u305d\u306e\u307e\u307e\u30b3\u30d4\u30fc\u3057\u3066\u30bf\u30fc\u30df\u30ca\u30eb\u306b\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002 \u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u5f8c\u306b\u3001\u6570\u5b57\u5165\u529b\u30e2\u30fc\u30c9\u306b\u306a\u308a\u307e\u3059\u306e\u3067\u9805\u76ee5\u3067\u78ba\u8a8d\u3057\u305f\u66f4\u65b0\u30ab\u30a6\u30f3\u30bf\u30fc\u756a\u53f7\u3092\u5165\u529b\u3057\u307e\u3059\u3002</p> <pre><code>chmod u+rwx $HOME/cold-keys\ncardano-cli conway node new-counter \\\n  --cold-verification-key-file $HOME/cold-keys/node.vkey \\\n  --counter-value $cnt_No \\\n  --operational-certificate-issue-counter-file $HOME/cold-keys/node.counter\n</code></pre> <p>\u30ab\u30a6\u30f3\u30bf\u30fc\u756a\u53f7\u304c\u6b63\u3057\u304f\u751f\u6210\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>cardano-cli conway text-view decode-cbor \\\n  --in-file  $HOME/cold-keys/node.counter \\\n  | grep int | head -1 | cut -d\"(\" -f2 | cut -d\")\" -f1\n</code></pre></p> <p>\u4e0a\u8a18\u30b3\u30de\u30f3\u30c9\u306e\u623b\u308a\u5024\u304c\u3001\u3042\u306a\u305f\u304c\u5165\u529b\u3057\u305f\u66f4\u65b0\u30ab\u30a6\u30f3\u30bf\u30fc\u756a\u53f7\u3068\u4e00\u81f4\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"operation/kes-update/#7-bpkesperiod","title":"7. BP\u3067\u73fe\u5728\u306e<code>KesPeriod</code>\u3092\u7b97\u51fa","text":"\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc <pre><code>cd $NODE_HOME\nslotNo=$(cardano-cli conway query tip $NODE_NETWORK | jq -r '.slot')\nslotsPerKESPeriod=$(cat $NODE_HOME/${NODE_CONFIG}-shelley-genesis.json | jq -r '.slotsPerKESPeriod')\nkesPeriod=$((${slotNo} / ${slotsPerKESPeriod}))\nstartKesPeriod=${kesPeriod}\necho \"startKesPeriod: ${startKesPeriod}\"\n</code></pre>"},{"location":"operation/kes-update/#8-nodecert","title":"8. <code>node.cert</code>\u30d5\u30a1\u30a4\u30eb\u306e\u751f\u6210","text":"<p>\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3067\u3001\u65b0\u3057\u3044<code>node.cert</code>\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 <pre><code>cd $NODE_HOME\nread -p \"BP\u3067\u7b97\u51fa\u3057\u305f startKesPeriod \u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044: \" kes\n</code></pre> <p>\u4e0a\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u3092\u305d\u306e\u307e\u307e\u30b3\u30d4\u30fc\u3057\u3066\u30bf\u30fc\u30df\u30ca\u30eb\u306b\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002 \u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u5f8c\u306b\u3001\u6570\u5b57\u5165\u529b\u30e2\u30fc\u30c9\u306b\u306a\u308a\u307e\u3059\u306e\u3067\u9805\u76ee7\u3067\u7b97\u51fa\u3057\u305f<code>startKesPeriod</code>\u306e\u6570\u5b57\u3092\u5165\u529b\u3057\u307e\u3059\u3002 \u5fc5\u305aBP\u3067\u7b97\u51fa\u3057\u305f\u5024\u3068\u4e00\u81f4\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304b\u3089\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <pre><code>echo \"\u5165\u529b\u3057\u305f startKesPeriod \u306f: $kes\"\n</code></pre> <p>\u623b\u308a\u5024\u306b\u5165\u529b\u3057\u305f\u6570\u5b57\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</p> <pre><code>chmod u+rwx $HOME/cold-keys\ncardano-cli conway node issue-op-cert \\\n  --kes-verification-key-file $NODE_HOME/kes.vkey \\\n  --cold-signing-key-file $HOME/cold-keys/node.skey \\\n  --operational-certificate-issue-counter $HOME/cold-keys/node.counter \\\n  --kes-period $kes \\\n  --out-file $NODE_HOME/node.cert\nchmod a-rwx $HOME/cold-keys\n</code></pre> <p>\u30d2\u30f3\u30c8</p> <p>\u30b3\u30fc\u30eb\u30c9\u30ad\u30fc\u306e\u30a2\u30af\u30bb\u30b9\u6a29\u9650\u3092\u9069\u5207\u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3092\u5411\u4e0a\u3055\u305b\u308b\u3068\u3068\u3082\u306b\u3001\u8aa4\u524a\u9664\u3084\u8aa4\u7de8\u96c6\u304b\u3089\u30ad\u30fc\u3092\u4fdd\u8b77\u3067\u304d\u307e\u3059\u3002</p> <p>\u30ed\u30c3\u30af\u3059\u308b\u306b\u306f\uff1a</p> <pre><code>chmod a-rwx $HOME/cold-keys\n</code></pre> <p>\u30ed\u30c3\u30af\u3092\u89e3\u9664\u3059\u308b\u306b\u306f\uff1a</p> <pre><code>chmod u+rwx $HOME/cold-keys\n</code></pre>"},{"location":"operation/kes-update/#9-nodecertbp","title":"9. <code>node.cert</code>\u30d5\u30a1\u30a4\u30eb\u3092BP\u3078\u30b3\u30d4\u30fc","text":"<p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u3067\u751f\u6210\u3057\u305f<code>node.cert</code>\u3092BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3078\u30b3\u30d4\u30fc</p> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u3067\u751f\u6210\u3057\u305f<code>node.cert</code>\u3092BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|**node.cert**| B[BP];</code></pre></p>"},{"location":"operation/kes-update/#10","title":"10. \u30cf\u30c3\u30b7\u30e5\u5024\u78ba\u8a8d","text":"<p>BP\u3068\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u3067<code>node.cert</code>\u306e\u30cf\u30c3\u30b7\u30e5\u5024\u304c\u4e00\u81f4\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 <pre><code>cd $NODE_HOME\nsha256sum node.cert\n</code></pre> <pre><code>cd $NODE_HOME\nsha256sum node.cert\n</code></pre> <p>\u78ba\u8a8d</p> <p>BP\u3068\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u3067\u8868\u793a\u3055\u308c\u305f\u623b\u308a\u5024\u3092\u6bd4\u8f03\u3057\u3001\u30cf\u30c3\u30b7\u30e5\u5024\u304c\u4e00\u81f4\u3057\u3066\u3044\u308c\u3070\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002  </p>"},{"location":"operation/kes-update/#11","title":"11. \u30ce\u30fc\u30c9\u518d\u8d77\u52d5","text":"<p>\u3053\u306e\u624b\u9806\u3092\u5b8c\u4e86\u3059\u308b\u305f\u3081\u3001\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u3092\u518d\u8d77\u52d5\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc <pre><code>sudo systemctl reload-or-restart cardano-node\n</code></pre> <p><code>gLiveview</code>\u3067\u30ce\u30fc\u30c9\u540c\u671f\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>glive\n</code></pre></p> 10\u5206\u4ee5\u4e0a\u7d4c\u3063\u3066\u3082\u30ce\u30fc\u30c9\u304c\u540c\u671f\u3092\u518d\u958b\u3057\u306a\u3044\u5834\u5408\u306f\u3053\u3061\u3089 <p>KES\u66f4\u65b0\u306b\u5931\u6557\u3057\u3066\u3044\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002 \u4ee5\u4e0b\u306e\u624b\u9806\u3067\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u5fa9\u5143\u3057\u3066\u304f\u3060\u3055\u3044\u3002  </p> <ol> <li> <p>\u30ce\u30fc\u30c9\u3092\u505c\u6b62 <pre><code>sudo systemctl stop cardano-node\n</code></pre></p> </li> <li> <p>\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u5fa9\u5143 <pre><code>mv $NODE_HOME/kes-bk.vkey $NODE_HOME/kes.vkey\nmv $NODE_HOME/kes-bk.skey $NODE_HOME/kes.skey\nmv $NODE_HOME/node-bk.cert $NODE_HOME/node.cert\n</code></pre></p> </li> <li> <p>\u30ce\u30fc\u30c9\u3092\u8d77\u52d5 <pre><code>sudo systemctl start cardano-node\n</code></pre></p> </li> <li> <p>\u30ce\u30fc\u30c9\u540c\u671f\u72b6\u6cc1\u3092\u78ba\u8a8d <pre><code>glive\n</code></pre></p> </li> </ol>"},{"location":"operation/kes-update/#12","title":"12. \u30c1\u30a7\u30c3\u30af\u30d7\u30ed\u30b0\u30e9\u30e0\u5b9f\u884c","text":"<p>\u78ba\u8a8d\u306e\u305f\u3081\u3001SJG TOOL\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</p> <pre><code>gtool\n</code></pre> <p><code>[2] \u30d6\u30ed\u30c3\u30af\u751f\u6210\u72b6\u614b\u30c1\u30a7\u30c3\u30af</code>\u3092\u9078\u629e\u3057\u307e\u3059\u3002</p>"},{"location":"operation/kes-update/#13","title":"13. \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u524a\u9664","text":"<p>\u30d6\u30ed\u30c3\u30af\u751f\u6210\u72b6\u614b\u306e\u30c1\u30a7\u30c3\u30af\u304c\u3059\u3079\u3066\u6b63\u5e38\uff08OK\uff09\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u305f\u3089\u3001\u4e0d\u8981\u3068\u306a\u3063\u305f\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <pre><code>rm $NODE_HOME/kes-bk.vkey\nrm $NODE_HOME/kes-bk.skey\nrm $NODE_HOME/node-bk.cert\n</code></pre>"},{"location":"operation/linux-commands/","title":"\u30fb \u5404\u7a2e\u30b3\u30de\u30f3\u30c9","text":"<p>\" Linux\u30b3\u30de\u30f3\u30c9\u96c6</p> <p>[AKYO] AKYO\ud83e\udd41 Akyo\u3055\u3093\u304b\u3089\u3054\u63d0\u4f9b\u3044\u305f\u3060\u304d\u307e\u3057\u305f\u3002\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01</p>"},{"location":"operation/linux-commands/#_1","title":"\u30ce\u30fc\u30c9\u505c\u6b62","text":"<pre><code>sudo systemctl stop cardano-node\n</code></pre> <p>\u203b\u30a8\u30a4\u30ea\u30a2\u30b9\u8a2d\u5b9a\u6e08\u307f\u306e\u5834\u5408 <pre><code>cnstop\n</code></pre></p>"},{"location":"operation/linux-commands/#_2","title":"\u30ce\u30fc\u30c9\u8d77\u52d5","text":"<pre><code>sudo systemctl start cardano-node\n</code></pre> <p>\u203b\u30a8\u30a4\u30ea\u30a2\u30b9\u8a2d\u5b9a\u6e08\u307f\u306e\u5834\u5408 <pre><code>cnstart\n</code></pre></p>"},{"location":"operation/linux-commands/#_3","title":"\u30ce\u30fc\u30c9\u518d\u8d77\u52d5","text":"<pre><code>sudo systemctl reload-or-restart cardano-node\n</code></pre> <p>\u203b\u30a8\u30a4\u30ea\u30a2\u30b9\u8a2d\u5b9a\u6e08\u307f\u306e\u5834\u5408 <pre><code>cnrestart\n</code></pre></p>"},{"location":"operation/linux-commands/#_4","title":"\u30b5\u30fc\u30d0\u518d\u8d77\u52d5","text":"<pre><code>sudo reboot\n</code></pre> <p>\u30ce\u30fc\u30c9\u3092\u505c\u6b62\u3057\u3066\u304b\u3089\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"operation/linux-commands/#_5","title":"\u30d7\u30ed\u30bb\u30b9\u78ba\u8a8d","text":"<pre><code>ps aux | grep cardano-node\n</code></pre> <p>Cardano \u30ce\u30fc\u30c9\u306e\u30b5\u30fc\u30d3\u30b9\u78ba\u8a8d</p>"},{"location":"operation/linux-commands/#_6","title":"\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u78ba\u8a8d","text":"<pre><code>networkctl status -a\n</code></pre>"},{"location":"operation/linux-commands/#_7","title":"\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u758e\u901a\u78ba\u8a8d","text":"<pre><code>nc -vz &lt;IP&gt; &lt;Port&gt;\n</code></pre>"},{"location":"operation/linux-commands/#_8","title":"\u30d6\u30ed\u30c3\u30af\u30ed\u30b0\u5404\u30b5\u30fc\u30d3\u30b9\u518d\u8d77\u52d5","text":"<pre><code>sudo systemctl reload-or-restart cnode-cncli-sync.service\n</code></pre> <p>(cncli / leaderlog / validate)</p> <pre><code>sudo systemctl reload-or-restart cnode-logmonitor.service\n</code></pre> <p>logmonitor</p>"},{"location":"operation/linux-commands/#spo-block-notify","title":"SPO Block Notify\u30b5\u30fc\u30d3\u30b9\u518d\u8d77\u52d5","text":"<pre><code>sudo systemctl reload-or-restart cnode-blocknotify.service\n</code></pre>"},{"location":"operation/linux-commands/#_9","title":"\u30d1\u30e9\u30e1\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u66f4\u65b0","text":"<pre><code>cd $NODE_HOME\ndate=`date +\\%Y\\%m\\%d`\nmv params.json params-$date.json\ncardano-cli conway query protocol-parameters \\\n    ${NODE_NETWORK} \\\n    --out-file params.json\n</code></pre> <p>\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u53ca\u3073\u66f4\u65b0\u3001\u78ba\u8a8d</p>"},{"location":"operation/linux-commands/#tracemempooltruefalse","title":"TraceMempool\u3092True\u304b\u3089False\u306b\u3059\u308b","text":"<p><pre><code>cd $NODE_HOME\nsed -i ${NODE_CONFIG}-config.json \\\n    -e \"s/TraceMempool\\\": true/TraceMempool\\\": false/g\"\n</code></pre> - \u30ce\u30fc\u30c9\u518d\u8d77\u52d5\u3057\u8a2d\u5b9a\u3092\u53cd\u6620\u3059\u308b <pre><code>sudo systemctl reload-or-restart cardano-node\n</code></pre></p>"},{"location":"operation/linux-commands/#tracemempoolfalsetrue","title":"TraceMempool\u3092False\u304b\u3089True\u306b\u3059\u308b","text":"<p><pre><code>cd $NODE_HOME\nsed -i ${NODE_CONFIG}-config.json \\\n    -e \"s/TraceMempool\\\": false/TraceMempool\\\": true/g\"\n</code></pre> - \u30ce\u30fc\u30c9\u518d\u8d77\u52d5\u3057\u8a2d\u5b9a\u3092\u53cd\u6620\u3059\u308b <pre><code>sudo systemctl reload-or-restart cardano-node\n</code></pre></p>"},{"location":"operation/linux-commands/#_10","title":"\u65e2\u5b58\u306e\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u524a\u9664","text":"<pre><code>cd $HOME\nsudo swapoff /swapfile\nsudo rm /swapfile\n</code></pre>"},{"location":"operation/linux-commands/#_11","title":"\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210","text":"<p><pre><code>sudo systemctl stop cardano-node\n</code></pre> <pre><code>cd $HOME\nsudo fallocate -l 8G /swapfile\nsudo chmod 600 /swapfile\nsudo mkswap /swapfile\nsudo swapon /swapfile\nsudo swapon --show\nsudo cp /etc/fstab /etc/fstab.bak\necho '/swapfile none swap sw 0 0' | sudo tee -a /etc/fstab\necho 'vm.swappiness=10' | sudo tee -a /etc/sysctl.conf\necho 'vm.vfs_cache_pressure=50' | sudo tee -a /etc/sysctl.conf\ncat /proc/sys/vm/vfs_cache_pressure\ncat /proc/sys/vm/swappiness\n</code></pre> <pre><code>sudo reboot\n</code></pre></p> <p>8GB\u306e\u30b9\u30ef\u30c3\u30d7\u3092\u8a2d\u5b9a\u3059\u308b\u30b3\u30de\u30f3\u30c9</p>"},{"location":"operation/linux-commands/#ssh","title":"SSH\u63a5\u7d9a","text":"<pre><code>ssh -i /Users/\u30ed\u30fc\u30ab\u30eb\u30e6\u30fc\u30b6\u540d/\u30ed\u30fc\u30ab\u30eb\u683c\u7d0d\u5148/id_rsa \u63a5\u7d9a\u5148\u30e6\u30fc\u30b6\u540d@\u63a5\u7d9a\u5148IP -p \u30dd\u30fc\u30c8\u756a\u53f7\n</code></pre>"},{"location":"operation/linux-commands/#systemd","title":"systemd\u6d3b\u7528\u30b3\u30de\u30f3\u30c9","text":""},{"location":"operation/linux-commands/#_12","title":"\ud83d\uddc4 \u30ed\u30b0\u306e\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0","text":"<p>\u6628\u65e5\u306e\u30ed\u30b0 <pre><code>journalctl --unit=cardano-node --since=yesterday\n</code></pre></p> <p>\u30b3\u30de\u30f3\u30c9\u5165\u529b\u306b\u623b\u308b\u5834\u5408\u306f\u300cCtrl\uff0bC\u300d\uff08\u30ce\u30fc\u30c9\u306f\u7d42\u4e86\u3057\u307e\u305b\u3093\uff09</p> <p>\u4eca\u65e5\u306e\u30ed\u30b0 <pre><code>journalctl --unit=cardano-node --since=today\n</code></pre></p> <p>\u30b3\u30de\u30f3\u30c9\u5165\u529b\u306b\u623b\u308b\u5834\u5408\u306f\u300cCtrl\uff0bC\u300d\uff08\u30ce\u30fc\u30c9\u306f\u7d42\u4e86\u3057\u307e\u305b\u3093\uff09</p> <p>\u671f\u9593\u6307\u5b9a <pre><code>journalctl --unit=cardano-node --since='2020-07-29 00:00:00' --until='2020-07-29 12:00:00'\n</code></pre></p> <p>\u30b3\u30de\u30f3\u30c9\u5165\u529b\u306b\u623b\u308b\u5834\u5408\u306f\u300cCtrl\uff0bC\u300d\uff08\u30ce\u30fc\u30c9\u306f\u7d42\u4e86\u3057\u307e\u305b\u3093\uff09</p>"},{"location":"operation/midnight-glacier-drop/","title":"Glacier Drop\u8acb\u6c42\u624b\u7d9a\u304d","text":"<p>\u6982\u8981</p> <ul> <li>cardano-cli\u751f\u6210\u306e\u30b9\u30c6\u30fc\u30af\u30a2\u30c9\u30ec\u30b9\u306b\u5bfe\u5fdc\u3057\u305f\u8acb\u6c42\u624b\u9806\u3068\u306a\u308a\u307e\u3059\u3002</li> </ul>"},{"location":"operation/midnight-glacier-drop/#1-cardano-signer","title":"1. cardano-signer\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":""},{"location":"operation/midnight-glacier-drop/#1-1","title":"1-1. \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc","text":"<p>\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <p><pre><code>signer_release=\"$(curl -s https://api.github.com/repos/gitmachtl/cardano-signer/releases/latest | jq -r '.tag_name' | sed -e \"s/^.\\{1\\}//\")\"\ncd $HOME/git\nwget -q https://github.com/gitmachtl/cardano-signer/releases/download/v${signer_release}/cardano-signer-${signer_release}_linux-x64.tar.gz\n</code></pre> <pre><code>tar -xzvf cardano-signer-${signer_release}_linux-x64.tar.gz\nrm cardano-signer-${signer_release}_linux-x64.tar.gz\n</code></pre></p> <p>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb </p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>sudo cp cardano-signer /usr/local/bin/cardano-signer\n</code></pre> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-signer --version\n</code></pre>"},{"location":"operation/midnight-glacier-drop/#1-2","title":"1-2. \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7","text":"<p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>BP\u306e<code>$HOME/git</code>\u306b\u3042\u308b<code>cardano-signer</code>\u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306e<code>$HOME/git</code>\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[BP] --&gt;|cardano-signer| B[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7];</code></pre></p> <p>\u30b7\u30b9\u30c6\u30e0\u30d5\u30a9\u30eb\u30c0\u3078\u30b3\u30d4\u30fc\u3059\u308b</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3 <pre><code>cd $HOME/git\nchmod 755 cardano-signer\nsudo cp cardano-signer /usr/local/bin/cardano-signer\n</code></pre> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d </p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3 <pre><code>cardano-signer --version\n</code></pre>"},{"location":"operation/midnight-glacier-drop/#2","title":"2. \u8acb\u6c42\u624b\u7d9a\u304d","text":""},{"location":"operation/midnight-glacier-drop/#2-1","title":"2-1. \u672a\u4f7f\u7528\u30a2\u30c9\u30ec\u30b9\u6e96\u5099","text":"<p>NIGHT\u53d7\u3051\u53d6\u308a\u7528\u306e\u672a\u4f7f\u7528\u30a2\u30c9\u30ec\u30b9\u307e\u305f\u306f\u65b0\u898f\u30a6\u30a9\u30ec\u30c3\u30c8\u3092\u3054\u6e96\u5099\u304f\u3060\u3055\u3044</p>"},{"location":"operation/midnight-glacier-drop/#2-2","title":"2-2. \u8acb\u6c42\u5143\u30a2\u30c9\u30ec\u30b9\u78ba\u8a8d","text":"\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>echo \"$(cat $NODE_HOME/stake.addr)\"\n</code></pre>"},{"location":"operation/midnight-glacier-drop/#2-3","title":"2-3. \u8acb\u6c42\u30b5\u30a4\u30c8\u624b\u7d9a\u304d","text":"<p>2-2\u3067\u8868\u793a\u3055\u308c\u305f\u30b9\u30c6\u30fc\u30af\u30a2\u30c9\u30ec\u30b9\u3092\u30de\u30cb\u30e5\u30a2\u30eb\u5165\u529b\u30e2\u30fc\u30c9\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044</p> <p></p> <p>\u30a8\u30a2\u30c9\u30ed\u30c3\u30d7\u5bfe\u8c61\u78ba\u8a8d </p> <p>2-1\u3067\u6e96\u5099\u3057\u305f\u672a\u4f7f\u7528\u30a2\u30c9\u30ec\u30b9\u3092\u30de\u30cb\u30e5\u30a2\u30eb\u5165\u529b\u30e2\u30fc\u30c9\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044 </p> <p>\u672a\u4f7f\u7528\u30a2\u30c9\u30ec\u30b9\u6709\u52b9\u78ba\u8a8d\u306e\u5f8c\u306b\u3001\u7f72\u540d\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002</p> <p></p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u3067\u7f72\u540d\u3057\u307e\u3059\u3002</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3 <p><pre><code>message='\u8acb\u6c42\u30b5\u30a4\u30c8\u306b\u8868\u793a\u3055\u308c\u3066\u3044\u308bmessage\u3092\u3053\u3053\u306b\u8cbc\u308a\u4ed8\u3051\u3066\u304f\u3060\u3055\u3044'\n</code></pre> | \u2191\u5fc5\u305a''\u3067\u56f2\u3063\u3066\u304b\u3089\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044</p> <p>\u30e1\u30c3\u30bb\u30fc\u30b8\u78ba\u8a8d <pre><code>echo $message\n</code></pre> | \u2191\u8acb\u6c42\u30b5\u30a4\u30c8\u306b\u8868\u793a\u3055\u308c\u3066\u3044\u308bmessage\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044</p> <p>\u7f72\u540d\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210 <pre><code>cardano-signer sign --cip8 --data-text \"${message}\" --secret-key $NODE_HOME/stake.skey --address $NODE_HOME/stake.addr --json-extended | jq &gt; $NODE_HOME/midnight-sing.json\n</code></pre></p> <p>\u5024\u62bd\u51fa <pre><code>publicKey=$(jq -r '.publicKey' $NODE_HOME/midnight-sing.json)\nCOSE_Sign1_hex=$(jq -r '.output.COSE_Sign1_hex' $NODE_HOME/midnight-sing.json)\necho\necho \"\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3092Signature\u6b04\u306b\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044:\"\necho $COSE_Sign1_hex\necho\necho \"\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3092Public key\u6b04\u306b\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044:\"\necho $publicKey\n</code></pre> | \u2191\u3053\u306e\u307e\u307e\u30b3\u30d4\u30fc\u3057\u3066\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u3067\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044</p> <p>\u30bf\u30fc\u30df\u30ca\u30eb\u306b\u8868\u793a\u3055\u308c\u305f<code>Signature</code>\u3068<code>Public key</code>\u3092\u8acb\u6c42\u30b5\u30a4\u30c8\u306b\u8cbc\u308a\u4ed8\u3051\u3066SIGN\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044</p> <p> \u3053\u3053\u3067\u5fc5\u305a<code>COMPLETE CLAIM</code>\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044  \u3053\u306e\u753b\u9762\u304c\u8868\u793aj\u3055\u308c\u305f\u3089\u624b\u7d9a\u304d\u5b8c\u4e86\u3067\u3059\u3002\u5fc5\u8981\u306b\u5fdc\u3058\u3066PDF\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304f\u3060\u3055\u3044 </p>"},{"location":"operation/mithril-client/","title":"DB\u540c\u671f\uff08Mithril\u30d9\u30fc\u30bf\u7248)","text":"<p>\u6982\u8981</p> <ul> <li>\u3053\u306e\u30de\u30cb\u30e5\u30a2\u30eb\u3067\u306fMithril-Client\u3092\u4f7f\u7528\u3057\u305fcardano-node DB\u540c\u671f\u30d6\u30fc\u30c8\u30b9\u30c8\u30e9\u30c3\u30d7\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</li> <li>\u30ce\u30fc\u30c9\u521d\u56de\u8d77\u52d5\u6642\u306eDB\u540c\u671f\u6642\u9593\u3092\u7d042\u65e5\u304b\u3089\u7d0430\u5206\u4ee5\u5185\u306b\u307e\u3067\u77ed\u7e2e\u3067\u304d\u307e\u3059\u3002</li> <li>Mithril\u30d7\u30ed\u30c8\u30b3\u30eb\u306f\u307e\u3060\u30d9\u30fc\u30bf\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u305f\u3081\u3001\u3054\u81ea\u8eab\u306e\u8cac\u4efb\u3067\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>\u3053\u306e\u4f5c\u696d\u306f \u30ce\u30fc\u30c9\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u306e<code>1. \u4f9d\u5b58\u95a2\u4fc2\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb</code> \uff5e <code>7. gLiveView\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb</code>\u307e\u3067\u5b9f\u65bd\u3057\u3066\u304b\u3089\u884c\u3063\u3066\u4e0b\u3055\u3044\u3002</li> <li>\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u30ce\u30fc\u30c9\u30d0\u30fc\u30b8\u30e7\u30f3\u3068\u30b5\u30fc\u30d0\u30fc\u30ce\u30fc\u30c9\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u7570\u306a\u308b\u5834\u5408\u3001DB\u518d\u69cb\u7bc9\u51e6\u7406\u304c\u5165\u308b\u5834\u5408\u304c\u3042\u308aDB\u540c\u671f\u307e\u3067\u306b\u6570\u6642\u9593\u304b\u304b\u308a\u307e\u3059\u3002</li> </ul>"},{"location":"operation/mithril-client/#1","title":"1. \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":""},{"location":"operation/mithril-client/#1-1","title":"1-1. \u30b7\u30b9\u30c6\u30e0\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8","text":"<p>\u30ce\u30fc\u30c9\u505c\u6b62 <pre><code>sudo systemctl stop cardano-node\n</code></pre> \u30b7\u30b9\u30c6\u30e0\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8 <pre><code>sudo apt update -y &amp;&amp; sudo apt upgrade -y\n</code></pre></p>"},{"location":"operation/mithril-client/#1-2-mithirl","title":"1-2. Mithirl\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<pre><code>cd $HOME/git\nmithril_release=\"$(curl -s https://api.github.com/repos/input-output-hk/mithril/releases/latest | jq -r '.tag_name')\"\nwget https://github.com/input-output-hk/mithril/releases/download/${mithril_release}/mithril-${mithril_release}-linux-x64.tar.gz -O mithril.tar.gz\n</code></pre> <p>\u8a2d\u5b9a <pre><code>tar zxvf mithril.tar.gz mithril-client\nsudo cp mithril-client /usr/local/bin/mithril-client\n</code></pre> \u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u8a2d\u5b9a <pre><code>sudo chmod +x /usr/local/bin/mithril-client\n</code></pre></p> <p>DL\u30d5\u30a1\u30a4\u30eb\u524a\u9664 <pre><code>rm mithril.tar.gz mithril-client\n</code></pre></p> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>mithril-client -V\n</code></pre></p> <p>Mithril Github\u306e\u30ea\u30ea\u30fc\u30b9\u30ce\u30fc\u30c8\u5185\u306b\u3042\u308b<code>mithril-client-cli</code>\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"operation/mithril-client/#2db","title":"2.DB\u30d6\u30fc\u30c8\u30b9\u30c8\u30e9\u30c3\u30d7","text":"<p>tmux\u4f5c\u696d\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u4f5c\u6210\u3059\u308b <pre><code>tmux new -s mithril\n</code></pre></p>"},{"location":"operation/mithril-client/#2-1","title":"2-1. \u5909\u6570\u30bb\u30c3\u30c8","text":"<pre><code>export NETWORK=mainnet\nexport AGGREGATOR_ENDPOINT=https://aggregator.release-mainnet.api.mithril.network/aggregator\nexport GENESIS_VERIFICATION_KEY=$(wget -q -O - https://raw.githubusercontent.com/input-output-hk/mithril/main/mithril-infra/configuration/release-mainnet/genesis.vkey)\nexport ANCILLARY_VERIFICATION_KEY=$(wget -q -O - https://raw.githubusercontent.com/input-output-hk/mithril/main/mithril-infra/configuration/release-mainnet/ancillary.vkey)\nexport SNAPSHOT_DIGEST=latest\n</code></pre>"},{"location":"operation/mithril-client/#2-2dl","title":"2-2.\u6700\u65b0\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8DL","text":"<p>\u65e2\u5b58DB\u30d5\u30a9\u30eb\u30c0\u524a\u9664 <pre><code>rm -rf $NODE_HOME/db\n</code></pre></p> <p>\u6700\u65b0\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u53ca\u3073\u89e3\u51cd <pre><code>mithril-client cardano-db download --download-dir $NODE_HOME --include-ancillary latest\n</code></pre></p> <p>\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\uff5e\u89e3\u51cd\u307e\u3067\u81ea\u52d5\u7684\u306b\u884c\u308f\u308c\u307e\u3059\u30021/5\uff5e5/5\u304c\u7d42\u4e86\u3059\u308b\u307e\u3067\u5f85\u3061\u307e\u3057\u3087\u3046</p> <p>tmux\u4f5c\u696d\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u7d42\u4e86\u3059\u308b <pre><code>exit\n</code></pre></p> \u305d\u306e\u4ed6\u306emithril-client\u30b3\u30de\u30f3\u30c9 <p>Cardano\u30ce\u30fc\u30c9\u3092\u30d6\u30fc\u30c8\u30b9\u30c8\u30e9\u30c3\u30d7\u3067\u304d\u308b\u5229\u7528\u53ef\u80fd\u306a\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u3092\u4e00\u89a7\u8868\u793a <pre><code>mithril-client cardano-db snapshot list\n</code></pre></p> <p>\u623b\u308a\u5024 <pre><code>+-------+-----------+---------+------------------------------------------------------------------+-------------+-----------+-----------------------------------+\n| Epoch | Immutable | Network | Digest                                                           | Size        | Locations | Created                           |\n+-------+-----------+---------+------------------------------------------------------------------+-------------+-----------+-----------------------------------+\n| 438   | 4822      | mainnet | dfc05780e0aaefc0e0466cbf69f3c82561e99f8b208626b9870a2e69344199dc | 40337208527 |         1 | 2023-09-27 05:21:39.339429454 UTC |\n+-------+-----------+---------+------------------------------------------------------------------+-------------+-----------+-----------------------------------+\n| 438   | 4821      | mainnet | bbe08607a326c1d6e52c43897808b8ca4c02cc0fbb3d0248b341fd7bbc81f2e3 | 40328088621 |         1 | 2023-09-26 23:13:39.908538941 UTC |\n+-------+-----------+---------+------------------------------------------------------------------+-------------+-----------+-----------------------------------+\n| 438   | 4820      | mainnet | d993a6267fefa1c34c0f270337dc3fa5324bc399f908e4a38ec80bb3348e8fe1 | 40320340866 |         1 | 2023-09-26 17:31:56.927673920 UTC |\n+-------+-----------+---------+------------------------------------------------------------------+-------------+-----------+-----------------------------------+\n| 438   | 4819      | mainnet | f8dd9c7ee08c6dffebe851a19af44bcb82990d4c174dc366dfaa18e40c20b842 | 40316728370 |         1 | 2023-09-26 11:50:50.123658352 UTC |\n+-------+-----------+---------+------------------------------------------------------------------+-------------+-----------+-----------------------------------+\n| 438   | 4818      | mainnet | 70c5c6847116d0a4ca93f81ac193db9d2a17084065963ae298646a157825ab7e | 40314024073 |         1 | 2023-09-26 05:44:57.236767751 UTC |\n+-------+-----------+---------+------------------------------------------------------------------+-------------+-----------+-----------------------------------+\n| 438   | 4817      | mainnet | 0597ca3e7d699155ce73aaae53805ea32a981ff213f772dd70e9dbead626acf2 | 40299093577 |         1 | 2023-09-25 23:13:32.500760943 UTC |\n+-------+-----------+---------+------------------------------------------------------------------+-------------+-----------+-----------------------------------+\n| 438   | 4816      | mainnet | 074a576bce34006369837899ecdaaac69f18e31dd193aaa5527d32a7c36fb10e | 40285275527 |         1 | 2023-09-25 17:33:02.562751472 UTC |\n+-------+-----------+---------+------------------------------------------------------------------+-------------+-----------+-----------------------------------+\n</code></pre></p> <p>\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u8a73\u7d30\u8868\u793a <pre><code>mithril-client cardano-db snapshot show (Digest\u30cf\u30c3\u30b7\u30e5\u5024\u6307\u5b9a)\n</code></pre> \u623b\u308a\u5024 <pre><code>+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Info                  | Value                                                                                                                                                                         |\n+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Epoch                 | 438                                                                                                                                                                           |\n+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Immutable File Number | 4821                                                                                                                                                                          |\n+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Network               | mainnet                                                                                                                                                                       |\n+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Digest                | bbe08607a326c1d6e52c43897808b8ca4c02cc0fbb3d0248b341fd7bbc81f2e3                                                                                                              |\n+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Size                  | 40328088621                                                                                                                                                                   |\n+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Cardano node version  | 8.1.2                                                                                                                                                                         |\n+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Location 1            | https://storage.googleapis.com/cdn.aggregator.release-mainnet.api.mithril.network/mainnet-e438-i4821.bbe08607a326c1d6e52c43897808b8ca4c02cc0fbb3d0248b341fd7bbc81f2e3.tar.zst |\n+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Created               | 2023-09-26 23:13:39.908538941 UTC                                                                                                                                             |\n+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Compression Algorithm | Zstandard                                                                                                                                                                     |\n+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n</code></pre></p>"},{"location":"operation/mithril-client/#3","title":"3. \u30ce\u30fc\u30c9\u8d77\u52d5","text":"<pre><code>sudo systemctl start cardano-node\n</code></pre> <p>\u30ce\u30fc\u30c9\u540c\u671f\u78ba\u8a8d</p> <p>gliveview\u3092\u8d77\u52d5\u3057\u3001\u6700\u65b0\u30d6\u30ed\u30c3\u30af\u3068\u540c\u671f\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b <pre><code>glive\n</code></pre></p>"},{"location":"operation/mithril-signer-node-setup-and-updates/","title":"Mithril Signer\u30ce\u30fc\u30c9\u306e\u8a2d\u5b9a\u3001\u66f4\u65b0","text":"<p>\u3053\u306e\u30de\u30cb\u30e5\u30a2\u30eb\u306f\u3001Stake Pool Operator\uff08SPO\uff09\u304cCardano \u30e1\u30a4\u30f3\u30cd\u30c3\u30c8\u4e0a\u3067 <code>Mithril Signer</code> \u3092\u5b89\u5168\u306b\u904b\u7528\u3059\u308b\u305f\u3081\u306e\u8a2d\u5b9a\u304a\u3088\u3073\u66f4\u65b0\u624b\u9806\u3092\u307e\u3068\u3081\u305f\u3082\u306e\u3067\u3059\u3002  </p> <p>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30d0\u30fc\u30b8\u30e7\u30f3</p> Node Mithril-signer squid 10.5.3 0.2.276 7.3"},{"location":"operation/mithril-signer-node-setup-and-updates/#1-mithril-signer","title":"1. Mithril Signer\u306e\u8a2d\u5b9a","text":""},{"location":"operation/mithril-signer-node-setup-and-updates/#1-1-bpmithril-signer","title":"1-1. BP\u306bMithril Signer\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>\u88dc\u8db3</p> <p><code>Mithril Signer</code>\u306f\u3001\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30ce\u30fc\u30c9\uff08BP\uff09\u304c\u4fdd\u6301\u3059\u308b<code>KES\u9375</code>\u3092\u7528\u3044\u3066\u7f72\u540d\u3092\u884c\u3046\u305f\u3081\u3001BP\u4e0a\u3067\u7a3c\u50cd\u3055\u305b\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> <p>\u30d3\u30eb\u30c9\u6e08\u307f\u30d0\u30a4\u30ca\u30ea\u30d5\u30a1\u30a4\u30eb\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc <p>\u30b7\u30b9\u30c6\u30e0\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8 <pre><code>sudo apt update -y &amp;&amp; sudo apt upgrade -y\n</code></pre></p> <p>\u4f5c\u696d\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u4f5c\u6210 <pre><code>mkdir -p $HOME/mithril\n</code></pre></p> <p>\u30d3\u30eb\u30c9\u6e08\u307f\u30d0\u30a4\u30ca\u30ea\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9 <pre><code>curl --proto '=https' --tlsv1.2 -sSf https://raw.githubusercontent.com/input-output-hk/mithril/refs/heads/main/mithril-install.sh | sh -s -- -c mithril-signer -d 2543.1-hotfix -p $HOME/git/mithril\n</code></pre></p> <p><code>bin</code>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3078\u30b3\u30d4\u30fc <pre><code>sudo cp $HOME/git/mithril/mithril-signer /usr/local/bin/mithril-signer\n</code></pre></p> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>mithril-signer -V\n</code></pre></p> <p>mithril-signer 0.2.276+5d5571e</p>"},{"location":"operation/mithril-signer-node-setup-and-updates/#env","title":"ENV\u5909\u6570\u306e\u8a2d\u5b9a","text":"\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc <p>\u30d1\u30e9\u30e1\u30fc\u30bf\u5024\u7b97\u51fa <pre><code>era_params=$(jq -nc --arg address $(wget -q -O - https://raw.githubusercontent.com/input-output-hk/mithril/main/mithril-infra/configuration/release-mainnet/era.addr) --arg verification_key $(wget -q -O - https://raw.githubusercontent.com/input-output-hk/mithril/main/mithril-infra/configuration/release-mainnet/era.vkey) '{\"address\": $address, \"verification_key\": $verification_key}')\n</code></pre></p> <p>BP\u304b\u3089\u63a5\u7d9a\u3059\u308b\u30ea\u30ec\u30fcIP\u3092\u6307\u5b9a <pre><code>relay_ip=xx.xxx.xx.xx\n</code></pre></p> <p>env\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210 <pre><code>cat &gt; $HOME/mithril/mithril-signer.env &lt;&lt; EOF\nKES_SECRET_KEY_PATH=$NODE_HOME/kes.skey\nOPERATIONAL_CERTIFICATE_PATH=$NODE_HOME/node.cert\nNETWORK=mainnet\nAGGREGATOR_ENDPOINT=https://aggregator.release-mainnet.api.mithril.network/aggregator\nRUN_INTERVAL=60000\nDB_DIRECTORY=$NODE_HOME/db\nCARDANO_NODE_SOCKET_PATH=$NODE_HOME/db/socket\nCARDANO_CLI_PATH=/usr/local/bin/cardano-cli\nDATA_STORES_DIRECTORY=$HOME/mithril/stores\nSTORE_RETENTION_LIMIT=5\nERA_READER_ADAPTER_TYPE=cardano-chain\nERA_READER_ADAPTER_PARAMS=$era_params\nRELAY_ENDPOINT=http://${relay_ip}:3132\nENABLE_METRICS_SERVER=true\nMETRICS_SERVER_IP=0.0.0.0\nMETRICS_SERVER_PORT=61234\nEOF\n</code></pre></p>"},{"location":"operation/mithril-signer-node-setup-and-updates/#_1","title":"\u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210","text":"\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc <pre><code>cat &gt; $HOME/mithril/mithril-signer.service &lt;&lt; EOF\n[Unit]\nDescription=Mithril Signer service\nBindsTo=cardano-node.service\nAfter=cardano-node.service\nStartLimitIntervalSec=0\n\n[Service]\nType=simple\nRestart=always\nRestartSec=60\nUser=${USER}\nEnvironmentFile=$HOME/mithril/mithril-signer.env\nExecStart=/usr/local/bin/mithril-signer -vvv\n\n[Install]\nWantedBy=cardano-node.service\nEOF\n</code></pre> <pre><code>sudo cp $HOME/mithril/mithril-signer.service /etc/systemd/system/mithril-signer.service\n</code></pre> <pre><code>sudo chmod 644 /etc/systemd/system/mithril-signer.service\n</code></pre> <pre><code>sudo systemctl daemon-reload\n</code></pre> <pre><code>sudo systemctl enable mithril-signer\n</code></pre>"},{"location":"operation/mithril-signer-node-setup-and-updates/#1-2-mithril","title":"1-2. Mithril\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7","text":"<p>\u8aac\u660e</p> <p>Mithril Signer \u306f\u30a2\u30b0\u30ea\u30b2\u30fc\u30bf\u30fc\u3068\u306e\u901a\u4fe1\u3092\u884c\u3044\u307e\u3059\u304c\u3001\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u304a\u3088\u3073\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5206\u96e2\u306e\u89b3\u70b9\u304b\u3089\u3001BP \u304b\u3089\u76f4\u63a5\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u901a\u4fe1\u3092\u884c\u308f\u305a\u3001Relay \u30ce\u30fc\u30c9\u4e0a\u3067 Squid \u3092\u30d5\u30a9\u30ef\u30fc\u30c9\u30d7\u30ed\u30ad\u30b7\u3068\u3057\u3066\u52d5\u4f5c\u3055\u305b\u3001\u4e2d\u7d99\u901a\u4fe1\u3092\u884c\u3044\u307e\u3059\u3002</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9 <p>\u30b7\u30b9\u30c6\u30e0\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8 <pre><code>sudo apt update -y &amp;&amp; sudo apt upgrade -y\n</code></pre></p> <p><code>squid</code>\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb <pre><code>cd $HOME\nwget https://github.com/squid-cache/squid/releases/download/SQUID_7_3/squid-7.3.tar.gz\n</code></pre></p> <pre><code>tar xzf squid-7.3.tar.gz\ncd squid-7.3\n</code></pre> <p><code>squid</code>\u306e\u30d3\u30eb\u30c9 <pre><code>./configure \\\n    --prefix=/opt/squid \\\n    --localstatedir=/opt/squid/var \\\n    --libexecdir=/opt/squid/lib/squid \\\n    --datadir=/opt/squid/share/squid \\\n    --sysconfdir=/etc/squid \\\n    --with-default-user=squid \\\n    --with-logdir=/opt/squid/var/log/squid \\\n    --with-pidfile=/opt/squid/var/run/squid.pid\n</code></pre></p> <pre><code>make\n</code></pre> <p>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c <pre><code>sudo make install\n</code></pre></p> <p><code>squid</code>\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>/opt/squid/sbin/squid -v\n</code></pre></p> <p>\u623b\u308a\u5024 <pre><code>Squid Cache: Version 7.3\nService Name: squid\nconfigure options:  '--prefix=/opt/squid' '--localstatedir=/opt/squid/var' '--libexecdir=/opt/squid/lib/squid' '--datadir=/opt/squid/share/squid' '--sysconfdir=/etc/squid' '--with-default-user=squid' '--with-logdir=/opt/squid/var/log/squid' '--with-pidfile=/opt/squid/var/run/squid.pid' 'PKG_CONFIG_PATH=/usr/local/lib/pkgconfig:'\n</code></pre></p> <p>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30d5\u30a1\u30a4\u30eb\u306e\u524a\u9664 <pre><code>cd $HOME\nrm squid-7.3.tar.gz\nrm -rf squid-7.3\n</code></pre></p> <p><code>squid</code>\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u4f5c\u6210 <pre><code>sudo adduser --system --no-create-home --group squid\n</code></pre></p> <p>\u30a2\u30af\u30bb\u30b9\u6a29\u9650\u306e\u4ed8\u4e0e <pre><code>sudo chown squid -R /opt/squid/var/\n</code></pre> <pre><code>sudo chgrp squid -R /opt/squid/var/\n</code></pre></p>"},{"location":"operation/mithril-signer-node-setup-and-updates/#squid","title":"<code>squid</code>\u306e\u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210","text":"\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9 <p>Mithril\u7528\u306e<code>squid</code>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210 <pre><code>cat &gt; $HOME/squid.service &lt;&lt; EOF\n[Unit]\nDescription=Squid service\nBindsTo=cardano-node.service\nAfter=cardano-node.service\nStartLimitIntervalSec=0\n\n[Service]\nType=simple\nRestart=always\nRestartSec=60\nUser=squid\nGroup=squid\nExecStart=/opt/squid/sbin/squid -f /etc/squid/squid.conf\nPIDFile=/opt/squid/var/run/squid.pid\n\n[Install]\nWantedBy=cardano-node.service\nEOF\n</code></pre></p> <p>\u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u306e\u8a2d\u5b9a <pre><code>sudo cp $HOME/squid.service /etc/systemd/system/squid.service\n</code></pre> <pre><code>sudo systemctl daemon-reload\n</code></pre> <pre><code>sudo systemctl enable squid\n</code></pre></p> <p>\u30ea\u30ec\u30fc\u304b\u3089\u63a5\u7d9a\u3059\u308bBPIP\u3092\u6307\u5b9a <pre><code>bp_ip=xx.xxx.xx.xx\n</code></pre></p> <p><code>squid</code>\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210 <pre><code>cat &gt; $HOME/squid.conf &lt;&lt; EOF\n# Listening port (port 3132 is recommended)\nhttp_port 3132\n\n# ACL for internal IP of your block producer node\nacl block_producer_internal_ip src $bp_ip\n\n# ACL for aggregator endpoint\nacl aggregator_domain dstdomain .mithril.network\n\n# ACL for SSL port only\nacl SSL_port port 443\n\n# Allowed traffic\nhttp_access allow block_producer_internal_ip aggregator_domain SSL_port\n\n# Do not disclose block producer internal IP\nforwarded_for delete\n\n# Turn off via header\nvia off\n\n# Deny request for original source of a request\nfollow_x_forwarded_for deny all\n\n# Anonymize request headers\nrequest_header_access Authorization allow all\nrequest_header_access Proxy-Authorization allow all\nrequest_header_access Cache-Control allow all\nrequest_header_access Content-Length allow all\nrequest_header_access Content-Type allow all\nrequest_header_access Date allow all\nrequest_header_access Host allow all\nrequest_header_access If-Modified-Since allow all\nrequest_header_access Pragma allow all\nrequest_header_access Accept allow all\nrequest_header_access Accept-Charset allow all\nrequest_header_access Accept-Encoding allow all\nrequest_header_access Accept-Language allow all\nrequest_header_access Connection allow all\nrequest_header_access All deny all\n\n# Disable cache\ncache deny all\n\n# Deny everything else\nhttp_access deny all\nEOF\n</code></pre> <pre><code>sudo mv $HOME/squid.conf /etc/squid/squid.conf\n</code></pre></p> <p>\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u8a2d\u5b9a <pre><code>sudo ufw allow from $bp_ip to any port 3132 proto tcp\n</code></pre> \u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u306e\u518d\u8d77\u52d5 <pre><code>sudo ufw reload\n</code></pre> <code>squid</code>\u306e\u8d77\u52d5 <pre><code>sudo systemctl start squid\n</code></pre> <code>squid</code>\u306e\u8d77\u52d5\u78ba\u8a8d <pre><code>sudo systemctl status squid --no-pager\n</code></pre></p> <p>Active\u304c <code>active (running)</code> \u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc <p><code>mithril-signer</code>\u306e\u8d77\u52d5 <pre><code>sudo systemctl start mithril-signer\n</code></pre> \u30ed\u30b0\u306e\u78ba\u8a8d <pre><code>journalctl -u mithril-signer -f --output=cat\n</code></pre></p> <p>\u4ee5\u4e0a\u3067\u3001\u7f72\u540d\u8005\u767b\u9332\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f\u3002 \u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u306b\u7f72\u540d\u3059\u308b\u306e\u306f2\u30a8\u30dd\u30c3\u30af\u5f8c\u304b\u3089\u3068\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"operation/mithril-signer-node-setup-and-updates/#1-3-mithril-signer","title":"1-3. Mithril-Signer\u306e\u52d5\u4f5c\u78ba\u8a8d","text":"<p>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5f8c\u306b\u30a2\u30b0\u30ea\u30b2\u30fc\u30bf\u30fc\u306b\u6b63\u5e38\u306b\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc <p><pre><code>cd $HOME/mithril\nwget https://mithril.network/doc/scripts/verify_signer_registration.sh\n</code></pre> <pre><code>chmod +x verify_signer_registration.sh\n</code></pre> <pre><code>PARTY_ID=$(cat $NODE_HOME/pool.id-bech32) AGGREGATOR_ENDPOINT=https://aggregator.release-mainnet.api.mithril.network/aggregator $HOME/mithril/verify_signer_registration.sh\n</code></pre></p> <p>\u767b\u9332\u78ba\u8a8d</p> <p>\u6b63\u5e38\u306e\u5834\u5408 <pre><code>&gt;&gt; Congrats, your signer node is registered!\n</code></pre> \u672a\u767b\u9332\u306e\u5834\u5408 <pre><code>&gt;&gt; Oops, your signer node is not registered. Party ID not found among the signers registered at epoch ***.\n</code></pre></p>"},{"location":"operation/mithril-signer-node-setup-and-updates/#1-4","title":"1-4. \u4fbf\u5229\u306a\u30a8\u30a4\u30ea\u30a2\u30b9\u8a2d\u5b9a","text":"\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc <p>\u30a8\u30a4\u30ea\u30a2\u30b9\u8a2d\u5b9a</p> <p>\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\uff08BP\uff09\u4e0a\u3067\u3001\u77ed\u3044\u30b3\u30de\u30f3\u30c9\u3067<code>Mithril Signer</code>\u306e\u30ed\u30b0\u3092\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u78ba\u8a8d\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002 <pre><code>echo alias mithril='\"journalctl -u mithril-signer -f --output=cat\"' &gt;&gt; $HOME/.bashrc\nsource $HOME/.bashrc\n</code></pre></p> <p>\u8a2d\u5b9a\u5f8c\u306f\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3060\u3051\u3067\u3001<code>Mithril Signer</code>\u306e\u8d77\u52d5\u72b6\u614b\uff08\u30ed\u30b0\uff09\u3092\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3067\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002 <pre><code>mithril \u30fb\u30fb\u30fb\u30ed\u30b0\u8868\u793a\n</code></pre></p>"},{"location":"operation/mithril-signer-node-setup-and-updates/#1-5-grafana","title":"1-5. Grafana\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u8a2d\u5b9a","text":"\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc <p><code>xxx.xxx.xxx.xx</code>\u3092Grafana\u5c0e\u5165\u30b5\u30fc\u30d0\u30fc\u306eIP\u306b\u7f6e\u304d\u63db\u3048\u3066\u5b9f\u884c <pre><code>sudo ufw allow from xxx.xxx.xxx.xx to any port 61234\n</code></pre> <pre><code>sudo ufw reload\n</code></pre></p> Grafana\u5c0e\u5165\u30b5\u30fc\u30d0\u30fc <p><code>Prometheus</code>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u7de8\u96c6 <pre><code>sudo nano /etc/prometheus/prometheus.yml\n</code></pre></p> <p>\u4ee5\u4e0b\u306e<code>xxx.xxx.xxx.xxx</code>\u3092<code>Mithril-signer</code>\u304c\u7a3c\u50cd\u3057\u3066\u3044\u308bBP\u306eIP\u306b\u7f6e\u304d\u63db\u3048\u3066<code>prometheus.yml</code>\u30d5\u30a1\u30a4\u30eb\u306e\u6700\u5f8c\u306e\u884c\u306b\u8ffd\u52a0 <pre><code>      - targets: ['xxx.xxx.xxx.xxx:61234']\n        labels:\n          alias: 'BP-signer'\n          type:  'Mithril-signer'\n</code></pre></p> <p><code>prometheus.yml</code>\u306e\u69cb\u6587\u30c1\u30a7\u30c3\u30af <pre><code>sudo promtool check config /etc/prometheus/prometheus.yml\n</code></pre></p> <p>\u623b\u308a\u5024\u78ba\u8a8d</p> <p>\u69cb\u6587\u30a8\u30e9\u30fc\u306a\u3057\u306e\u5834\u5408 <pre><code>Checking /etc/prometheus/prometheus.yml\nSUCCESS: 0 rule files found\n</code></pre></p> <p>\u69cb\u6587\u30a8\u30e9\u30fc\u306e\u5834\u5408(\u4e00\u4f8b) <pre><code>Checking /etc/prometheus/prometheus.yml\nFAILED: parsing YAML file /etc/prometheus/prometheus.yml: yaml: line XX: did not find expected '-' indicator\n</code></pre> <code>/etc/prometheus/prometheus.yml</code>\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u3044\u3066\u4f59\u5206\u306a\u30b9\u30da\u30fc\u30b9\u3084\u8a18\u53f7\u306e\u6709\u7121\u306a\u3069\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p><code>Prometheus</code>\u30b5\u30fc\u30d3\u30b9\u306e\u518d\u8d77\u52d5 <pre><code>sudo systemctl restart prometheus.service\n</code></pre></p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc <p>Mithril-signer\u7528\u306e\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9 <pre><code>curl -s -o $NODE_HOME/Mithril-Signer-on-SJG-Grafana-dashboard.json https://raw.githubusercontent.com/akyo3/Extends-SJG-Knowledge/refs/heads/main/Mithril-Signer-on-SJG-Grafana-dashboard.json\n</code></pre></p> <p>\u30d5\u30a1\u30a4\u30eb\u5185\u5bb9\u306e\u7f6e\u63db <pre><code>sed -i $NODE_HOME/Mithril-Signer-on-SJG-Grafana-dashboard.json \\\n    -e \"s/bech32_id_of_your_pool/$(cat $NODE_HOME/pool.id-bech32)/g\"\n</code></pre></p> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u53d6\u5f97\u3057\u305f<code>Mithril-Signer-on-SJG-Grafana-dashboard.json</code>\u3092\u30ed\u30fc\u30ab\u30eb\u306e\u30db\u30b9\u30c8\u30de\u30b7\u30f3\u306b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[BP] --&gt;|**Mithril-Signer-on-SJG-Grafana-dashboard.json**| B[\u30ed\u30fc\u30ab\u30eb\u306e\u30db\u30b9\u30c8\u30de\u30b7\u30f3];</code></pre></p> <p>Grafana\u306e\u5de6\u30e1\u30cb\u30e5\u30fc\u304b\u3089\u300c<code>Dashboards</code>\u300d\u3092\u958b\u304d\u3001\u300c<code>New</code>\u300d\u2192\u300c<code>Import</code>\u300d\u2192\u300c<code>Upload dashboard JSON file</code>\u300d\u3092\u9078\u629e\u3057\u3001\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f <code>Mithril-Signer-on-SJG-Grafana-dashboard.json</code> \u3092\u6307\u5b9a\u3057\u307e\u3059\u3002  </p> <p>\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u306e\u5272\u308a\u5f53\u3066\u753b\u9762\u3067\u306f\u3001  </p> <ul> <li><code>Prometheus</code> \u306b\u306f <code>Prometheus</code> </li> <li><code>yesoreyeram-infinity-datasource</code> \u306b\u306f <code>yesoreyeram-infinity-datasource</code> </li> </ul> <p>\u3092\u305d\u308c\u305e\u308c\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u8a2d\u5b9a\u5185\u5bb9\u3092\u78ba\u8a8d\u5f8c\u3001\u300c<code>Import</code>\u300d\u3092\u9078\u629e\u3059\u308b\u3068\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u304c\u8aad\u307f\u8fbc\u307e\u308c\u307e\u3059\u3002</p>"},{"location":"operation/mithril-signer-node-setup-and-updates/#2-mithril-signer","title":"2. Mithril Signer\u306e\u66f4\u65b0","text":""},{"location":"operation/mithril-signer-node-setup-and-updates/#2-1-bpmithril-signer","title":"2-1. BP\u306eMithril Signer\u66f4\u65b0","text":"\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc <p>\u30b7\u30b9\u30c6\u30e0\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8 <pre><code>sudo apt update -y &amp;&amp; sudo apt upgrade -y\n</code></pre></p> <p><code>mithril-signer</code>\u306e\u505c\u6b62 <pre><code>sudo systemctl stop mithril-signer\n</code></pre></p> <p>\u65e2\u5b58\u30d5\u30a1\u30a4\u30eb\u306e\u524a\u9664 <pre><code>rm -rf $HOME/git/mithril/*\n</code></pre></p> <p>\u30d3\u30eb\u30c9\u6e08\u307f\u30d0\u30a4\u30ca\u30ea\u30d5\u30a1\u30a4\u30eb\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9 <pre><code>curl --proto '=https' --tlsv1.2 -sSf https://raw.githubusercontent.com/input-output-hk/mithril/refs/heads/main/mithril-install.sh | sh -s -- -c mithril-signer -d 2543.1-hotfix -p $HOME/git/mithril\n</code></pre></p> <p><code>bin</code>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3078\u30b3\u30d4\u30fc <pre><code>sudo cp $HOME/git/mithril/mithril-signer /usr/local/bin/mithril-signer\n</code></pre></p> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>mithril-signer -V\n</code></pre></p> <p>mithril-signer 0.2.276+5d5571e</p> <p><code>mithril-signer</code>\u306e\u8d77\u52d5 <pre><code>sudo systemctl start mithril-signer\n</code></pre></p> <p>\u8d77\u52d5\u304b\u3089\u7d043\u5206\u5f8c\u306b<code>Signer</code>\u306e\u767b\u9332\u3092\u78ba\u8a8d  <pre><code>curl -s localhost:61234/metrics | grep ^mithril_signer_signer_registration_success\n</code></pre></p> <p>Signer\u767b\u9332\u6210\u529f\u306e\u623b\u308a\u5024</p> <pre><code>mithril_signer_signer_registration_success_last_epoch  (\u73fe\u5728\u306e\u30a8\u30dd\u30c3\u30af\uff09\nmithril_signer_signer_registration_success_since_startup 1\n</code></pre> <p>\u4e0a\u8a18\u306e\u623b\u308a\u5024\u304c\u78ba\u8a8d\u3067\u304d\u306a\u3044\u5834\u5408\u306f5\u5206\u5f8c\u306b\u30ed\u30b0\u3092\u78ba\u8a8d</p> <pre><code>journalctl -u mithril-signer -f --output=cat\n</code></pre>"},{"location":"operation/mithril-signer-node-setup-and-updates/#2-2-mithril-signer","title":"2-2. \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u306eMithril Signer\u66f4\u65b0","text":"\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9 <p><code>Squid</code>\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8</p> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>/opt/squid/sbin/squid -v | grep Version\n</code></pre></p> <p>\u30d2\u30f3\u30c8</p> <p><code>Squid Cache: Version 7.3</code> \u306e\u623b\u308a\u5024\u304c\u3042\u308b\u5834\u5408\u3001\u4ee5\u964d\u5b9f\u65bd\u4e0d\u8981\u3067\u3059\u3002</p> <p><code>squid</code>\u306e\u505c\u6b62 <pre><code>sudo systemctl stop squid\n</code></pre> <pre><code>sudo systemctl disable squid\n</code></pre></p> <p>\u30b7\u30b9\u30c6\u30e0\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8 <pre><code>sudo apt update -y &amp;&amp; sudo apt upgrade -y\n</code></pre></p> <p><code>squid7.3</code>\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb <pre><code>cd $HOME\nwget https://github.com/squid-cache/squid/releases/download/SQUID_7_3/squid-7.3.tar.gz\n</code></pre></p> <pre><code>tar xzf squid-7.3.tar.gz\ncd squid-7.3\n</code></pre> <p><code>squid</code>\u306e\u30d3\u30eb\u30c9 <pre><code>./configure \\\n    --prefix=/opt/squid \\\n    --localstatedir=/opt/squid/var \\\n    --libexecdir=/opt/squid/lib/squid \\\n    --datadir=/opt/squid/share/squid \\\n    --sysconfdir=/etc/squid \\\n    --with-default-user=squid \\\n    --with-logdir=/opt/squid/var/log/squid \\\n    --with-pidfile=/opt/squid/var/run/squid.pid\n</code></pre></p> <pre><code>make\n</code></pre> <pre><code>sudo make install\n</code></pre> <p><code>squid</code>\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>/opt/squid/sbin/squid -v | grep Version\n</code></pre></p> <p>\u623b\u308a\u5024 <pre><code>Squid Cache: Version 7.3\n</code></pre></p> <p><code>squid</code>\u306e\u30b5\u30fc\u30d3\u30b9\u6709\u52b9\u5316 <pre><code>sudo systemctl enable squid\n</code></pre></p> <p><code>squid</code>\u30b5\u30fc\u30d3\u30b9\u306e\u8d77\u52d5 <pre><code>sudo systemctl start squid\n</code></pre></p> <p>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30d5\u30a1\u30a4\u30eb\u306e\u524a\u9664 <pre><code>cd $HOME\nrm squid-7.3.tar.gz\nrm -rf squid-7.3\n</code></pre></p>"},{"location":"operation/node-update/","title":"\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8","text":"<p>\u3053\u306e\u30ac\u30a4\u30c9\u306f \u30ce\u30fc\u30c9\u30d0\u30fc\u30b8\u30e7\u30f310.5.3\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u3059\u3002 \u6700\u7d42\u66f4\u65b0\u65e5\uff1a2025\u5e7411\u670826\u65e5  </p> <p>\u5fc5\u305a\u304a\u8aad\u307f\u304f\u3060\u3055\u3044</p> <p>cardano-node v10.1.4\u3092\u3054\u5229\u7528\u306e\u65b9\u306f\u3053\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3092\u5b9f\u65bd\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044\uff01\uff01 \u5148\u65e5\u767a\u751f\u3057\u305f\u30c1\u30a7\u30fc\u30f3\u30d5\u30a9\u30fc\u30af\u306e\u8abf\u67fb\u7d99\u7d9a\u3068\u30d0\u30fc\u30b8\u30e7\u30f3\u591a\u69d8\u6027\u3092\u7dad\u6301\u3059\u308b\u76ee\u7684\u3067\u3059\u3002</p> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u5bfe\u5fdc\u8868</p> <ul> <li>\u5404\u4f9d\u5b58\u95a2\u4fc2\u3082\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3057\u3066\u307e\u3059\u306e\u3067\u3088\u304f\u304a\u8aad\u307f\u306b\u306a\u3063\u3066\u9032\u3081\u3066\u304f\u3060\u3055\u3044</li> </ul> Node CLI GHC Cabal CNCLI 10.5.3 10.11.0.0 9.6.7 3.12.1.0 6.7.0 <p>\u25a0\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u30d1\u30bf\u30fc\u30f3DB\u518d\u69cb\u7bc9\u6709\u7121</p> \u30d0\u30fc\u30b8\u30e7\u30f3 DB\u518d\u69cb\u7bc9\u6709\u7121 \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u66f4\u65b0\u6709\u7121 \u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u66f4\u65b0\u6709\u7121 10.3.1\u219210.5.3 \u3042\u308a \u66f4\u65b0\u3042\u308a \u66f4\u65b0\u306a\u3057 10.4.1\u219210.5.3 \u306a\u3057 \u66f4\u65b0\u3042\u308a \u66f4\u65b0\u306a\u3057 <ul> <li>\u4f5c\u696d\u524d\u306b\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3092\u78ba\u8a8d\u3057\u4f59\u88d5\u306e\u3042\u308b\u4f5c\u696d\u3092\u304a\u9858\u3044\u3057\u307e\u3059</li> <li>\u8907\u6570\u884c\u306e\u30b3\u30fc\u30c9\u3092\u30b3\u30fc\u30c9\u30dc\u30c3\u30af\u30b9\u306e\u30b3\u30d4\u30fc\u30dc\u30bf\u30f3\u3092\u4f7f\u7528\u3057\u3066\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u306b\u8cbc\u308a\u4ed8\u3051\u308b\u5834\u5408\u306f\u3001\u6700\u5f8c\u306e\u884c\u304c\u81ea\u52d5\u5b9f\u884c\u3055\u308c\u306a\u3044\u305f\u3081\u78ba\u8a8d\u306e\u4e0aEnter\u3092\u62bc\u3057\u3066\u30b3\u30fc\u30c9\u3092\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> </ul> \u4e3b\u306a\u5909\u66f4\u70b9\u3068\u65b0\u6a5f\u80fd\u304a\u3088\u3073\u691c\u8a3c\u7d50\u679c <p>cardano-node</p> <p>10.5.3 \u30d0\u30b0\u4fee\u6b63\u7dca\u6025\u30ea\u30ea\u30fc\u30b9</p> <ul> <li>cardano-crypto-class\u30e9\u30a4\u30d6\u30e9\u30ea\u53c2\u7167\u5148\u4fee\u6b63</li> <li>\u30bd\u30fc\u30b9\u30d3\u30eb\u30c9\u306e\u5834\u5408 blst v0.3.14\u4f7f\u7528\u5fc5\u9808</li> <li>PraosMode\u306e\u307f\u6709\u52b9</li> </ul> <p>10.5.2 \u30d0\u30b0\u4fee\u6b63\u7dca\u6025\u30ea\u30ea\u30fc\u30b9 </p> <p> 10.3.x, 10.4.x or 10.5.x\u3092\u3054\u5229\u7528\u4e2d\u306e\u5834\u5408\u306f\u901f\u3084\u304b\u306b10.5.2\u3078\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3057\u3066\u304f\u3060\u3055\u3044</p> <p>1\uff09\u30cf\u30c3\u30b7\u30e5\u30b5\u30a4\u30ba\u306b\u95a2\u3059\u308b\u554f\u984c 2\uff09\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30b9\u30bf\u30c3\u30af\u5185\u306e \u30d4\u30a2\u9078\u629e\u306e\u4e0d\u5177\u5408 \u3092\u4fee\u6b63\u3057\u3066\u3044\u307e\u3059\u3002</p> <p>\u7279\u5b9a\u306e\u6761\u4ef6\u4e0b\u3067\u306f\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e Periodic Churn\uff08\u5b9a\u671f\u7684\u306a\u5165\u308c\u66ff\u3048\uff09 \u306e\u4ed5\u7d44\u307f\u304c\u6b63\u3057\u304f\u6a5f\u80fd\u305b\u305a\u3001\u5341\u5206\u306a\u6570\u306e\u300cWarm \u30d4\u30a2\u300d\u3092\u964d\u683c\u3067\u304d\u306a\u3044\u72b6\u614b\u306b\u306a\u308b\u30d0\u30b0\u304c\u767a\u898b\u3055\u308c\u307e\u3057\u305f\u3002 \u305d\u306e\u7d50\u679c\u3001\u9577\u671f\u7684\u306b\u898b\u3066 \u30a2\u30af\u30c6\u30a3\u30d6\u30d4\u30a2\u306e\u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\uff08\u9078\u5b9a\uff09\u304c\u5341\u5206\u591a\u69d8\u5316\u3057\u306a\u3044\u3053\u3068\u304c\u61f8\u5ff5\u3055\u308c\u307e\u3059\u3002</p> <p>SPO\u306f\u3053\u306e\u30ea\u30ea\u30fc\u30b9\u3078\u306e\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u304c\u63a8\u5968\u3055\u308c\u307e\u3059\u3002  </p> <ul> <li>PraosMode\u63a8\u5968</li> </ul> <p>10.5.1 </p> <ul> <li>Windows\u306e\u30bd\u30b1\u30c3\u30c8\u306b\u95a2\u3059\u308b\u4e0d\u5177\u5408\u306e\u4fee\u6b63</li> <li>DNS\u30eb\u30c3\u30af\u30a2\u30c3\u30d7\u30a8\u30e9\u30fc\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u6642\u9593\u306e\u77ed\u7e2e</li> <li>PeerSharing\u8a2d\u5b9a\u52d5\u4f5c\u306e\u6539\u826f</li> <li><code>--non-producer-node</code> \u306e\u4ee3\u308f\u308a\u306b <code>--start-as-non-producer-node</code> \u3092\u4f7f\u3046\u3088\u3046\u306b\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u5909\u66f4\uff08\u65e7\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u975e\u63a8\u5968\u306b\uff09</li> </ul> <p>10.5.0</p> <ul> <li>Ouroboros Genesis \u306e\u6700\u9069\u5316</li> <li>GHC 8.10 \u306e\u30b5\u30dd\u30fc\u30c8\u524a\u9664</li> </ul> <p>10.4.1</p> <ul> <li>UTxO-HD\u7d71\u5408 \u73fe\u6642\u70b9\u3067\u306f\u30d7\u30fc\u30eb\u904b\u55b6\u306e\u30ce\u30fc\u30c9\u3067\u306f\u30c7\u30a3\u30b9\u30af\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u306f\u975e\u63a8\u5968\u306e\u305f\u3081\u3001\u5f53\u30de\u30cb\u30e5\u30a2\u30eb\u3067\u306f\u30a4\u30f3\u30e1\u30e2\u30ea\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3067\u69cb\u7bc9\u3055\u308c\u3066\u3044\u307e\u3059 UTxO-HD\u306e\u6982\u8981\u306b\u3064\u3044\u3066\u306f\u3053\u3061\u3089\u3092\u3054\u53c2\u7167\u304f\u3060\u3055\u3044</li> <li>config.json\u5185 <code>LedgerDB</code>\u65b0\u3057\u3044\u30ad\u30fc\u3092\u8a2d\u5b9a</li> </ul> <p>cardano-cli v10.11.0.0</p> <ul> <li>JSON/YAML \u51fa\u529b\u306e\u6a19\u6e96\u5316</li> <li>\u7279\u5b9a\u30b3\u30de\u30f3\u30c9\u306e\u51fa\u529b\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u5909\u66f4</li> </ul> <p>\u691c\u8a3c\u7d50\u679c</p> <p>\u25a0\u691c\u8a3c\u74b0\u5883 Ubuntu22.04 / PreProd-Testnet / cardano-node 10.5.3 / cardano-cli 10.11.0.0 / SJG-TOOL 3.9.4  </p> \u691c\u8a3c\u9805\u76ee \u7d50\u679c \u30bd\u30fc\u30b9\u30b3\u30fc\u30c8\u30d3\u30eb\u30c9 \u2705 \u30d6\u30ed\u30c3\u30af\u751f\u6210 \u2705 \u30ea\u30bd\u30fc\u30b9\u76e3\u8996 \u2705 \u5831\u916c\u51fa\u91d1 \u2705 \u30a6\u30a9\u30ec\u30c3\u30c8\u9001\u91d1 \u2705 KES\u66f4\u65b0 \u2705 \u30ac\u30d0\u30ca\u30f3\u30b9\u6295\u7968 \u2705"},{"location":"operation/node-update/#1","title":"1. \u4f9d\u5b58\u74b0\u5883\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8","text":"<p>\u73fe\u5728\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u4e2d\u306e\u30ce\u30fc\u30c9\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u63a7\u3048\u308b <pre><code>current_node=$(cardano-node version | grep cardano-node)\necho $current_node\n</code></pre></p> <p>\u5fc5\u305a\u304a\u8aad\u307f\u304f\u3060\u3055\u3044</p> <p>cardano-node v10.1.4\u3092\u3054\u5229\u7528\u306e\u65b9\u306f\u3053\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3092\u5b9f\u65bd\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044\uff01\uff01 \u5148\u65e5\u767a\u751f\u3057\u305f\u30c1\u30a7\u30fc\u30f3\u30d5\u30a9\u30fc\u30af\u306e\u8abf\u67fb\u7d99\u7d9a\u3068\u30d0\u30fc\u30b8\u30e7\u30f3\u591a\u69d8\u6027\u3092\u7dad\u6301\u3059\u308b\u76ee\u7684\u3067\u3059\u3002</p>"},{"location":"operation/node-update/#1-1","title":"1-1. \u30b7\u30b9\u30c6\u30e0\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8","text":"<p>\u30b7\u30b9\u30c6\u30e0\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8 <pre><code>sudo apt update -y &amp;&amp; sudo apt upgrade -y\n</code></pre></p> 10.3.1\u304b\u3089\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b\u5834\u5408\u306f\u3053\u3061\u3089\u3082\u5b9f\u65bd(\u30af\u30ea\u30c3\u30af\u3057\u3066\u958b\u304f) <p>\u3010\u91cd\u8981\u3011LMDB\u30e9\u30a4\u30d6\u30e9\u30ea\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb <pre><code>sudo apt install liblmdb-dev -y\n</code></pre></p>"},{"location":"operation/node-update/#1-2","title":"1-2. \u4f9d\u5b58\u95a2\u4fc2\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d","text":"<p>cabal\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>cabal --version\n</code></pre></p> <p>\u6b63\u5e38\u623b\u308a\u5024 <code>cabal-install version 3.12.1.0</code></p> <p>GHC\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>ghc --version\n</code></pre></p> <p>\u6b63\u5e38\u623b\u308a\u5024 <code>The Glorious Glasgow Haskell Compilation System, version 9.6.7</code></p> <p>libsodium\u30b3\u30df\u30c3\u30c8\u78ba\u8a8d <pre><code>cd $HOME/git/libsodium\ngit branch --contains | grep -m1 HEAD | cut -c 21-28\n</code></pre></p> <p>\u6b63\u5e38\u623b\u308a\u5024 <code>dbb48cce</code></p> <p>secp256k1\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>cd $HOME/git/secp256k1\ngit branch --contains | grep -m1 HEAD | cut -c 21-27\n</code></pre></p> <p>\u6b63\u5e38\u623b\u308a\u5024 <code>acf5c55</code></p> <p>Blst\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u30d0\u30fc\u30b8\u30e7\u30f3 <pre><code>cat /usr/local/lib/pkgconfig/libblst.pc | grep Version\n</code></pre></p> <p>\u6b63\u5e38\u623b\u308a\u5024 <code>Version 0.3.14</code></p> \u5404\u30a2\u30d7\u30ea\u306e\u30d0\u30fc\u30b8\u30e7\u30f3(\u623b\u308a\u5024)\u304c\u7570\u306a\u308b\u5834\u5408 cabal 3.8.1.0\u4ee5\u4e0b\u306e\u5834\u5408 <p>cabal 3.8.1.0\u4ee5\u4e0b\u306e\u5834\u5408\u306e\u307f\u5b9f\u884c cabal\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7 <pre><code>ghcup upgrade\nghcup install cabal 3.12.1.0\nghcup set cabal 3.12.1.0\n</code></pre> cabal\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>cabal --version\n</code></pre></p> <p>\u623b\u308a\u5024  cabal-install version 3.12.1.0  compiled using version 3.12.1.0 of the Cabal library</p> GHC 9.6.7\u4ee5\u5916\u306e\u5834\u5408 (9.6.7\u3088\u308a\u65b0\u3057\u3044\u5834\u5408\u3092\u542b\u3080) <p><pre><code>ghcup upgrade\nghcup install ghc 9.6.7\nghcup set ghc 9.6.7\n</code></pre> <pre><code>ghc --version\n</code></pre></p> <p>\u623b\u308a\u5024 The Glorious Glasgow Haskell Compilation System, version 9.6.7  </p> libsodium\u30b3\u30df\u30c3\u30c8\u5024\u304c\u9055\u3046\u5834\u5408 <pre><code>cd ~/git/libsodium\ngit fetch --all --prune\ngit checkout dbb48cc\n./autogen.sh\n./configure\nmake\nmake check\nsudo make install\n</code></pre> <p><code>make</code>\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u5f8c\u534a\u306b\u51fa\u73fe\u3059\u308b <code>warning</code> \u306f\u7121\u8996\u3057\u3066\u5927\u4e08\u592b\u3067\u3059\u3002</p> secp256k1\u30b3\u30df\u30c3\u30c8\u5024\u304c\u9055\u3046\u307e\u305f\u306f\u623b\u308a\u5024\u304c\u7121\u3044\u5834\u5408 <pre><code>cd $HOME/git/secp256k1/\ngit fetch --all --prune --recurse-submodules --tags\ngit checkout acf5c55\n./autogen.sh\n./configure --prefix=/usr --enable-module-schnorrsig --enable-experimental\nmake\nmake check\n</code></pre> \u623b\u308a\u5024\u78ba\u8a8d <pre><code>Testsuite summary for libsecp256k1 0.3.2\n============================================================================\n# TOTAL: 3\n# PASS:  3\n# SKIP:  0\n# XFAIL: 0\n# FAIL:  0\n# XPASS: 0\n# ERROR: 0\n============================================================================\n</code></pre> <p>PASS:3\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b</p> <p>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30b3\u30de\u30f3\u30c9\u3092\u5fc5\u305a\u5b9f\u884c\u3059\u308b <pre><code>sudo make install\n</code></pre></p> Blst 0.3.13\u4ee5\u4e0b\u307e\u305f\u306f\u300cNo such file or directory\u300d\u306e\u5834\u5408 0.3.13\u4ee5\u4e0b\u306e\u5834\u5408\u300cNo such file or directory\u300d\u306e\u5834\u5408 <pre><code>cd $HOME/git/blst\ngit fetch --all --prune --recurse-submodules --tags\ngit checkout tags/v0.3.14\n./build.sh\n</code></pre> <pre><code>cd $HOME/git\ngit clone https://github.com/supranational/blst\ncd blst\ngit checkout v0.3.14\n./build.sh\n</code></pre> <p>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210</p> \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; libblst.pc &lt;&lt; EOF\nprefix=/usr/local\nexec_prefix=\\${prefix}\nlibdir=\\${exec_prefix}/lib\nincludedir=\\${prefix}/include\n\nName: libblst\nDescription: Multilingual BLS12-381 signature library\nURL: https://github.com/supranational/blst\nVersion: 0.3.14\nCflags: -I\\${includedir}\nLibs: -L\\${libdir} -lblst\nEOF\n</code></pre> <p>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u30b3\u30d4\u30fc</p> <p>\u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f1\u884c\u305a\u3064\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044</p> <pre><code>sudo cp libblst.pc /usr/local/lib/pkgconfig/\nsudo cp bindings/blst_aux.h bindings/blst.h bindings/blst.hpp  /usr/local/include/\nsudo cp libblst.a /usr/local/lib\nsudo chmod u=rw,go=r /usr/local/{lib/{libblst.a,pkgconfig/libblst.pc},include/{blst.{h,hpp},blst_aux.h}}\n</code></pre> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>cat /usr/local/lib/pkgconfig/libblst.pc | grep Version\n</code></pre></p> <p>Version 0.3.14</p>"},{"location":"operation/node-update/#1-3-cnclibp","title":"1-3. CNCLI\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d(BP\u306e\u307f)","text":"<p>CNCLI\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>cncli --version\n</code></pre></p> <p>\u4ee5\u4e0b\u306e\u623b\u308a\u5024\u306a\u3089OK cncli 6.7.0</p> <p>cncli 6.7.0\u3067cardano-db\u518d\u540c\u671f\u6642\u306b\u304a\u3044\u306633\u30d6\u30ed\u30c3\u30af\u4ee5\u4e0a\u30ed\u30fc\u30eb\u30d0\u30c3\u30af\u3059\u308b\u969b\u306ecncli\u540c\u671f\u30a8\u30e9\u30fc(\u203b1)\u304c\u89e3\u6d88\u3055\u308c\u3066\u3044\u307e\u3059\u3002 \u203b1 <code>Missing eta_v for block xxxxxx</code>\u30a8\u30e9\u30fc </p> cncli v6.6.0\u4ee5\u4e0b\u3060\u3063\u305f\u5834\u5408(\u30af\u30ea\u30c3\u30af\u3057\u3066\u958b\u304f) <p>CNCLI\u3092\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b</p> <p><pre><code>cd $HOME\ncncli_release=\"$(curl -s https://api.github.com/repos/cardano-community/cncli/releases/latest | jq -r '.tag_name' | sed -e \"s/^.\\{1\\}//\")\"\n</code></pre> <pre><code>curl -sLJ https://github.com/cardano-community/cncli/releases/download/v${cncli_release}/cncli-${cncli_release}-ubuntu22-x86_64-unknown-linux-musl.tar.gz -o $HOME/cncli-${cncli_release}-x86_64-unknown-linux-musl.tar.gz\n</code></pre> <pre><code>tar xzvf $HOME/cncli-${cncli_release}-x86_64-unknown-linux-musl.tar.gz -C $HOME/.cargo/bin/\n</code></pre> <pre><code>rm $HOME/cncli-${cncli_release}-x86_64-unknown-linux-musl.tar.gz\n</code></pre></p> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>cncli --version\n</code></pre></p> <p>cncli v6.7.0\u306b\u306a\u3063\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b  </p>"},{"location":"operation/node-update/#2","title":"2. \u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8","text":"<p>\u30d0\u30a4\u30ca\u30ea\u30d5\u30a1\u30a4\u30eb\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u306e\u9055\u3044\u306b\u3064\u3044\u3066</p> <ul> <li> <p>\u30d3\u30eb\u30c9\u6e08\u307f\u30d0\u30a4\u30ca\u30ea\u30fb\u30fb\u30fbIntersectMBO\u30ea\u30dd\u30b8\u30c8\u30ea\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304b\u3089\u30d3\u30eb\u30c9\u3055\u308c\u305f\u30d0\u30a4\u30ca\u30ea\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\u30d3\u30eb\u30c9\u4e0d\u8981\u306e\u305f\u3081\u30d3\u30eb\u30c9\u6642\u9593\u3092\u77ed\u7e2e\u3067\u304d\u307e\u3059\u3002 </p> </li> <li> <p>\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304b\u3089\u30d3\u30eb\u30c9\u30fb\u30fb\u30fb\u3054\u81ea\u8eab\u306e\u30b5\u30fc\u30d0\u30fc\u3067\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304b\u3089\u30d3\u30eb\u30c9\u3057\u3066\u30d0\u30a4\u30ca\u30ea\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u691c\u8a3c\u76ee\u7684\u3084\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304b\u3089\u30d3\u30eb\u30c9\u3057\u305f\u3044\u5834\u5408\u306b\u5229\u7528\u3067\u304d\u307e\u3059\u3002\u30d3\u30eb\u30c9\u306b30\u5206\u524d\u5f8c\u304b\u304b\u308a\u307e\u3059\u3002Raspberry Pi\u3092\u4f7f\u7528\u3057\u3066\u30d7\u30fc\u30eb\u3092\u69cb\u7bc9\u3059\u308b\u5834\u5408\u306f\u3001ARM\u7528\u30b3\u30f3\u30d1\u30a4\u30e9\u3067\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> </li> </ul> \u30d3\u30eb\u30c9\u6e08\u307f\u30d0\u30a4\u30ca\u30ea\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304b\u3089\u30d3\u30eb\u30c9\u3059\u308b\u5834\u5408\u306f\u3053\u3061\u3089 <p>\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9</p> <p>\u73fe\u5728\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u4e2d\u306e\u30ce\u30fc\u30c9\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u63a7\u3048\u308b <pre><code>current_node=$(cardano-node version | grep cardano-node)\necho $current_node\n</code></pre></p> <p>\u65b0\u3057\u3044TMUX\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u958b\u304f</p> <pre><code>tmux new -s build\n</code></pre> <p>\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u4f5c\u696d\u4e2d\u306bSSH\u304c\u4e2d\u65ad\u3057\u305f\u5834\u5408\u306f\u3001<code>tmux a -t build</code>\u3067\u518d\u958b\u3067\u304d\u307e\u3059\u3002</p> <p>\u65e7\u30d3\u30eb\u30c9\u3092\u524a\u9664\u3059\u308b <pre><code>rm -rf $HOME/git/cardano-node-old/\n</code></pre></p> <p>\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b <pre><code>cd $HOME/git\ngit clone https://github.com/IntersectMBO/cardano-node.git cardano-node2\ncd cardano-node2/\n</code></pre></p> <p>2-2.\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304b\u3089\u30d3\u30eb\u30c9</p> <pre><code>cabal clean\ncabal update\n</code></pre> <pre><code>git fetch --all --recurse-submodules --tags\ngit checkout tags/10.5.3\ncabal configure --with-compiler=ghc-9.6.7\n</code></pre> <pre><code>cabal build all cardano-cli\n</code></pre> <p>\u30d2\u30f3\u30c8</p> <ul> <li>\u30d3\u30eb\u30c9\u5b8c\u4e86\u307e\u3067\u306b\u6570\u5341\u5206\u307b\u3069\u304b\u304b\u308a\u307e\u3059\u3002</li> <li>SSH\u63a5\u7d9a\u304c\u9014\u4e2d\u3067\u5207\u65ad\u3055\u308c\u305f\u5834\u5408\u3001\u518d\u5ea6\u63a5\u7d9a\u3057\u3066<code>tmux a -t build</code>\u3067\u518d\u958b\u3057\u3066\u304f\u3060\u3055\u3044\u3002  </li> <li>\u30d3\u30eb\u30c9\u4e2d\u306b\u30c7\u30bf\u30c3\u30c1(Ctrl+B D)\u3057\u3066\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u51e6\u7406\u3078\u5207\u308a\u66ff\u3048\u3089\u308c\u307e\u3059\u3002</li> </ul> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d</p> <pre><code>$(./scripts/bin-path.sh cardano-cli) version  \n$(./scripts/bin-path.sh cardano-node) version  \n</code></pre> <p>\u4ee5\u4e0b\u306e\u623b\u308a\u5024\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>cardano-cli 10.11.0.0 - linux-x86_64 - ghc-9.6  \n6c034ec038d8d276a3595e10e2d38643f09bd1f2\n\ncardano-node 10.5.3 - linux-x86_64 - ghc-9.6  \n6c034ec038d8d276a3595e10e2d38643f09bd1f2\n</code></pre></p> <p>\u30d3\u30eb\u30c9\u7528TMUX\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u7d42\u4e86\u3059\u308b <pre><code>exit\n</code></pre></p> <p>\u30ce\u30fc\u30c9\u3092\u30b9\u30c8\u30c3\u30d7\u3059\u308b <pre><code>sudo systemctl stop cardano-node\n</code></pre></p> <p>\u30d0\u30a4\u30ca\u30ea\u30fc\u30d5\u30a1\u30a4\u30eb\u3092\u30b7\u30b9\u30c6\u30e0\u30d5\u30a9\u30eb\u30c0\u30fc\u3078\u30b3\u30d4\u30fc\u3059\u308b</p> <pre><code>cd $HOME/git/cardano-node2\nsudo cp $(./scripts/bin-path.sh cardano-cli) /usr/local/bin/cardano-cli\n</code></pre> <pre><code>cd $HOME/git/cardano-node2\nsudo cp $(./scripts/bin-path.sh cardano-node) /usr/local/bin/cardano-node\n</code></pre> <p>\u30b7\u30b9\u30c6\u30e0\u306b\u53cd\u6620\u3055\u308c\u305f\u30ce\u30fc\u30c9\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3059\u308b</p> <pre><code>cardano-cli version\ncardano-node version\n</code></pre> <p>\u4ee5\u4e0b\u306e\u623b\u308a\u5024\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>cardano-cli 10.11.0.0 - linux-x86_64 - ghc-9.6  \n6c034ec038d8d276a3595e10e2d38643f09bd1f2\n\ncardano-node 10.5.3 - linux-x86_64 - ghc-9.6  \n6c034ec038d8d276a3595e10e2d38643f09bd1f2\n</code></pre></p> 10.3.1\u4ee5\u4e0b\u304b\u3089\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b\u5834\u5408\u306f\u3053\u3061\u3089\u3082\u5b9f\u65bd(\u30af\u30ea\u30c3\u30af\u3057\u3066\u958b\u304f) <p>snapshot-converter\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b <pre><code>cd $HOME/git/cardano-node2\nwget -q https://github.com/IntersectMBO/cardano-node/releases/download/10.5.3/cardano-node-10.5.3-linux.tar.gz\n</code></pre> \u89e3\u51cd\u3059\u308b <pre><code>tar zxvf cardano-node-10.5.3-linux.tar.gz ./bin/snapshot-converter\n</code></pre></p>"},{"location":"operation/node-update/#2-1","title":"2-1. \u30d0\u30a4\u30ca\u30ea\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9","text":"<p>\u65e7\u30d0\u30a4\u30ca\u30ea\u3092\u524a\u9664\u3059\u308b <pre><code>rm -rf $HOME/git/cardano-node-old/\n</code></pre></p> <p>\u30d0\u30a4\u30ca\u30ea\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b <pre><code>mkdir $HOME/git/cardano-node2\ncd $HOME/git/cardano-node2\nwget -q https://github.com/IntersectMBO/cardano-node/releases/download/10.5.3/cardano-node-10.5.3-linux.tar.gz\n</code></pre></p> <p>\u89e3\u51cd\u3059\u308b <pre><code>tar zxvf cardano-node-10.5.3-linux.tar.gz ./bin/cardano-node ./bin/cardano-cli ./bin/snapshot-converter\n</code></pre></p> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d</p> <p><pre><code>$(find $HOME/git/cardano-node2 -type f -name \"cardano-cli\") version  \n$(find $HOME/git/cardano-node2 -type f -name \"cardano-node\") version  \n</code></pre> \u4ee5\u4e0b\u306e\u623b\u308a\u5024\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>cardano-cli 10.11.0.0 - linux-x86_64 - ghc-9.6  \n6c034ec038d8d276a3595e10e2d38643f09bd1f2\n\ncardano-node 10.5.3 - linux-x86_64 - ghc-9.6  \n6c034ec038d8d276a3595e10e2d38643f09bd1f2\n</code></pre></p> <p>\u30ce\u30fc\u30c9\u3092\u30b9\u30c8\u30c3\u30d7\u3059\u308b <pre><code>sudo systemctl stop cardano-node\n</code></pre></p>"},{"location":"operation/node-update/#2-2","title":"2-2. \u30d0\u30a4\u30ca\u30ea\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>\u30d0\u30a4\u30ca\u30ea\u30fc\u30d5\u30a1\u30a4\u30eb\u3092\u30b7\u30b9\u30c6\u30e0\u30d5\u30a9\u30eb\u30c0\u30fc\u3078\u30b3\u30d4\u30fc\u3059\u308b</p> <pre><code>sudo cp $(find $HOME/git/cardano-node2 -type f -name \"cardano-cli\") /usr/local/bin/cardano-cli\n</code></pre> <pre><code>sudo cp $(find $HOME/git/cardano-node2 -type f -name \"cardano-node\") /usr/local/bin/cardano-node\n</code></pre> <p>\u30b7\u30b9\u30c6\u30e0\u306b\u53cd\u6620\u3055\u308c\u305f\u30ce\u30fc\u30c9\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3059\u308b</p> <pre><code>cardano-cli version\ncardano-node version\n</code></pre> <p>\u4ee5\u4e0b\u306e\u623b\u308a\u5024\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>cardano-cli 10.11.0.0 - linux-x86_64 - ghc-9.6  \n6c034ec038d8d276a3595e10e2d38643f09bd1f2\n\ncardano-node 10.5.3 - linux-x86_64 - ghc-9.6  \n6c034ec038d8d276a3595e10e2d38643f09bd1f2\n</code></pre></p>"},{"location":"operation/node-update/#2-3","title":"2-3. \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u66f4\u65b0","text":"<p>\u65e2\u5b58\u30d5\u30a1\u30a4\u30eb\u30d0\u30c3\u30af\u30a2\u30c3\u30d7 <pre><code>mkdir -p $NODE_HOME/backup\ncp $NODE_HOME/${NODE_CONFIG}-config.json $NODE_HOME/backup/${NODE_CONFIG}-config.json\n</code></pre></p> <p>BP\u3068\u30ea\u30ec\u30fc\u3067\u5b9f\u884c\u3059\u308b\u30b3\u30de\u30f3\u30c9\u304c\u7570\u306a\u308b\u306e\u3067\u3001\u5bfe\u8c61\u30b5\u30fc\u30d0\u30fc\u3054\u3068\u306b\u30bf\u30d6\u3092\u5207\u308a\u66ff\u3048\u3066\u304f\u3060\u3055\u3044</p> \u30ea\u30ec\u30fc\u3067\u5b9f\u884cBP\u3067\u5b9f\u884c <p>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9 <pre><code>cd $NODE_HOME\nwget -q https://spojapanguild.net/node_config/10.5.3/${NODE_CONFIG}-config.json -O ${NODE_CONFIG}-config.json\nwget -q https://spojapanguild.net/node_config/10.5.3/${NODE_CONFIG}-checkpoints.json -O ${NODE_CONFIG}-checkpoints.json\n</code></pre> </p> <p>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9 <pre><code>cd $NODE_HOME\nwget -q https://spojapanguild.net/node_config/10.5.3/${NODE_CONFIG}-config-bp.json -O ${NODE_CONFIG}-config.json\nwget -q https://spojapanguild.net/node_config/10.5.3/${NODE_CONFIG}-checkpoints.json -O ${NODE_CONFIG}-checkpoints.json\n</code></pre></p> 10.1.4~10.3.1\u304b\u3089\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b\u5834\u5408\u306f\u3053\u3061\u3089\u3082\u5b9f\u65bd(\u30af\u30ea\u30c3\u30af\u3057\u3066\u958b\u304f) <p>BP\u306e\u307f</p> <p>\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u66f4\u65b0  <pre><code>PORT=`grep \"PORT=\" $NODE_HOME/startBlockProducingNode.sh`\nb_PORT=${PORT#\"PORT=\"}\necho \"BP\u30dd\u30fc\u30c8\u306f${b_PORT}\u3067\u3059\"\n</code></pre></p> <p>\u2191\u305d\u306e\u307e\u307e\u5b9f\u884c\u3057\u3001BP\u306e\u30dd\u30fc\u30c8\u756a\u53f7\u304c\u8868\u793a\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b</p> \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/startBlockProducingNode.sh &lt;&lt; EOF \n#!/bin/bash\nDIRECTORY=$NODE_HOME\nPORT=${b_PORT}\nHOSTADDR=0.0.0.0\nTOPOLOGY=\\${DIRECTORY}/${NODE_CONFIG}-topology.json\nDB_PATH=\\${DIRECTORY}/db\nSOCKET_PATH=\\${DIRECTORY}/db/socket\nCONFIG=\\${DIRECTORY}/${NODE_CONFIG}-config.json\nKES=\\${DIRECTORY}/kes.skey\nVRF=\\${DIRECTORY}/vrf.skey\nCERT=\\${DIRECTORY}/node.cert\n/usr/local/bin/cardano-node +RTS -N --disable-delayed-os-memory-return -I0.1 -Iw300 -A32m -n4m -F1.5 -H2500M -RTS run --topology \\${TOPOLOGY} --database-path \\${DB_PATH} --socket-path \\${SOCKET_PATH} --host-addr \\${HOSTADDR} --port \\${PORT} --config \\${CONFIG} --shelley-kes-key \\${KES} --shelley-vrf-key \\${VRF} --shelley-operational-certificate \\${CERT}\nEOF\n</code></pre> <p>\u5168\u30ce\u30fc\u30c9</p> <p>DB\u66f4\u65b0 </p> <p>Mithirl\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb <pre><code>cd $HOME/git\nmithril_release=\"$(curl -s https://api.github.com/repos/input-output-hk/mithril/releases/latest | jq -r '.tag_name')\"\nwget https://github.com/input-output-hk/mithril/releases/download/${mithril_release}/mithril-${mithril_release}-linux-x64.tar.gz -O mithril.tar.gz\n</code></pre></p> <p>\u8a2d\u5b9a <pre><code>tar zxvf mithril.tar.gz mithril-client\nsudo cp mithril-client /usr/local/bin/mithril-client\n</code></pre> \u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u8a2d\u5b9a <pre><code>sudo chmod +x /usr/local/bin/mithril-client\n</code></pre></p> <p>DL\u30d5\u30a1\u30a4\u30eb\u524a\u9664 <pre><code>rm mithril.tar.gz mithril-client\n</code></pre></p> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>mithril-client -V\n</code></pre></p> <p>Mithril Github\u306e\u30ea\u30ea\u30fc\u30b9\u30ce\u30fc\u30c8\u5185\u306b\u3042\u308b<code>mithril-client-cli</code>\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002</p> <p>\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u5fa9\u5143</p> <p>\u4f5c\u696d\u7528TMUX\u8d77\u52d5 <pre><code>tmux new -s mithril\n</code></pre></p> <p>\u5909\u6570\u30bb\u30c3\u30c8 <pre><code>export NETWORK=mainnet\nexport AGGREGATOR_ENDPOINT=https://aggregator.release-mainnet.api.mithril.network/aggregator\nexport GENESIS_VERIFICATION_KEY=$(wget -q -O - https://raw.githubusercontent.com/input-output-hk/mithril/main/mithril-infra/configuration/release-mainnet/genesis.vkey)\nexport ANCILLARY_VERIFICATION_KEY=$(wget -q -O - https://raw.githubusercontent.com/input-output-hk/mithril/main/mithril-infra/configuration/release-mainnet/ancillary.vkey)\nexport SNAPSHOT_DIGEST=latest\n</code></pre></p> \u65e7db\u3092\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3057\u305f\u3044\u65b9\u306f\u3053\u3061\u3089 <p>\u7a7a\u304d\u5bb9\u91cf\u306b\u95a2\u3057\u3066\u306e\u6ce8\u610f\u4e8b\u9805</p> <p>DB\u3092\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3059\u308b\u5834\u5408\u3001\u30b5\u30fc\u30d0\u30fc\u30c7\u30a3\u30b9\u30af\u306e\u7a7a\u304d\u5bb9\u91cf\u3092\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002 \u5b89\u5b9a\u7a3c\u50cd\u306e\u305f\u3081\u306b\u306f250GB\u4ee5\u4e0a\u306e\u7a7a\u304d\u5bb9\u91cf\u304c\u5fc5\u8981\u3067\u3059\u3002 <pre><code>df -h /usr | awk '{print $4}'\n</code></pre> Avail\u304c250GB\u4ee5\u4e0a\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>db\u3092\u30ea\u30cd\u30fc\u30e0\u3059\u308b <pre><code>mv $NODE_HOME/db/ $NODE_HOME/backup/db9/\n</code></pre></p> \u30ce\u30fc\u30c9\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u5f8c\u306e\u4f5c\u696d <p>\u7a3c\u50cd\u306b\u554f\u984c\u304c\u306a\u3044\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u6b21\u7b2c\u524a\u9664\u3059\u308b\u3053\u3068\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\u3002 <pre><code>rm -rf $NODE_HOME/backup/db9/\n</code></pre></p> <p>\u65e2\u5b58DB\u524a\u9664 <pre><code>rm -rf $NODE_HOME/db\n</code></pre></p> <p>\u6700\u65b0\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8DL <pre><code>mithril-client cardano-db download --download-dir $NODE_HOME --include-ancillary latest\n</code></pre></p> <p>\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\uff5e\u89e3\u51cd\u307e\u3067\u81ea\u52d5\u7684\u306b\u884c\u308f\u308c\u307e\u3059\u30021/5\uff5e5/5\u304c\u7d42\u4e86\u3059\u308b\u307e\u3067\u5f85\u3061\u307e\u3057\u3087\u3046  </p> <p>DB\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8DL/\u89e3\u7b54\u5b8c\u4e86\u30e1\u30c3\u30bb\u30fc\u30b8</p> <p>5/5 - Verifying the cardano db signature\u2026 Cardano db 'xxxxx' has been unpacked and successfully checked against Mithril  multi-signature contained in the certificate. ('xxxxx'\u306f\u4f5c\u696d\u6642\u671f\u306b\u3088\u3063\u3066\u5909\u308f\u308a\u307e\u3059\u3002\u4e0b\u306e\u6587\u5b57\u5217\u306f\u7121\u8996\u3057\u3066\u5927\u4e08\u592b\u3067\u3059)</p> <p>tmux\u4f5c\u696d\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u7d42\u4e86\u3059\u308b <pre><code>exit\n</code></pre></p>"},{"location":"operation/node-update/#2-4","title":"2-4. \u30b5\u30fc\u30d0\u30fc\u518d\u8d77\u52d5","text":"<p>\u4f5c\u696d\u30d5\u30a9\u30eb\u30c0\u30ea\u30cd\u30fc\u30e0</p> <p>\u524d\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u4f7f\u7528\u3057\u3066\u3044\u305f\u30d0\u30a4\u30ca\u30ea\u30d5\u30a9\u30eb\u30c0\u3092\u30ea\u30cd\u30fc\u30e0\u3057\u3001\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3068\u3057\u3066\u4fdd\u6301\u3057\u307e\u3059\u3002\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u69cb\u7bc9\u3057\u305f\u30d5\u30a9\u30eb\u30c0\u3092cardano-node\u3068\u3057\u3066\u4f7f\u7528\u3057\u307e\u3059\u3002</p> <pre><code>cd $HOME/git\nmv cardano-node/ cardano-node-old/\nmv cardano-node2/ cardano-node/\n</code></pre> <p>\u30b5\u30fc\u30d0\u30fc\u3092\u518d\u8d77\u52d5\u3059\u308b <pre><code>sudo reboot\n</code></pre></p> <p>SSH\u63a5\u7d9a\u3057\u3066\u30ce\u30fc\u30c9\u540c\u671f\u72b6\u6cc1\u3092\u78ba\u8a8d\u3059\u308b <pre><code>sudo journalctl --unit=cardano-node --follow\n</code></pre></p> <p>\u30ce\u30fc\u30c9\u30ed\u30b0\u30e1\u30c3\u30bb\u30fc\u30b8\u78ba\u8a8d</p> <p>\u4ee5\u4e0b\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u30ed\u30b0\u306b\u542b\u307e\u308c\u3066\u3044\u308b\u5834\u5408\u306b\u540c\u671f\u72b6\u6cc1\u3092\u5224\u65ad\u3067\u304d\u307e\u3059\u3002</p> \u30e1\u30c3\u30bb\u30fc\u30b8 \u30b9\u30c6\u30fc\u30bf\u30b9 <code>Chain extended, new tip: xxxxxxxx at slot xxxxxx</code> \u30c1\u30a7\u30fc\u30f3\u540c\u671f\u6210\u529f <code>GenesisReadFileError</code> \u30b8\u30a7\u30cd\u30b7\u30b9\u30d5\u30a1\u30a4\u30eb\u30a8\u30e9\u30fc <code>InvalidYaml</code> \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u30a8\u30e9\u30fc <code>Invalid option</code> \u8d77\u52d5\u30aa\u30d7\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc <code>Invalid argument</code> \u8d77\u52d5\u30b3\u30de\u30f3\u30c9\u30a8\u30e9\u30fc <code>Address in use</code> \u30ce\u30fc\u30c9\u8d77\u52d5\u30dd\u30fc\u30c8\u304c\u7af6\u5408\u3057\u3066\u3044\u307e\u3059"},{"location":"operation/node-update/#3","title":"3. \u4f9d\u5b58\u95a2\u4fc2\u4f5c\u696d","text":""},{"location":"operation/node-update/#3-1-bp","title":"3-1. \u30ea\u30ec\u30fc/BP\u5171\u901a","text":"<p>gLiveView\u66f4\u65b0 <pre><code>sed -i $NODE_HOME/scripts/env \\\n    -e '1,73s!UPDATE_CHECK=\"N\"!UPDATE_CHECK=\"Y\"!' \\\n    -e '1,73s!#PROM_HOST=127.0.0.1!PROM_HOST=127.0.0.1!' \\\n    -e '1,73s!#PROM_PORT=12798!PROM_PORT=12798!'\n</code></pre></p> <p>glive\u3092\u8d77\u52d5\u3059\u308b <pre><code>glive\n</code></pre></p> <p>\u66f4\u65b0\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u305f\u3089<code>yes</code>\u3092\u5165\u529b\u3057\u3066<code>enter</code> </p> <p>env script update(s) detected, do you want to download the latest version? (yes/no): yes</p> <p>gLiveView.sh\u66f4\u65b0\u5b8c\u4e86\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u305f\u3089\u518d\u5ea6<code>enter</code> </p> <p>gLiveView.sh update successfully applied! press any key to proceed ..</p> <p>\u66f4\u65b0\u30d5\u30e9\u30b0\u3092\u5207\u308a\u66ff\u3048\u308b <pre><code>sed -i $NODE_HOME/scripts/env \\\n    -e '1,73s!UPDATE_CHECK=\"Y\"!UPDATE_CHECK=\"N\"!'\n</code></pre></p> <p>glive\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>glive\n</code></pre></p> <p>Koios gLiveView v1.32.0</p>"},{"location":"operation/node-update/#3-2-bp","title":"3-2. BP\u30b5\u30fc\u30d3\u30b9\u78ba\u8a8d","text":"\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u901a\u77e5\u307e\u305f\u306fSPO Block Notify\u3092\u672a\u5c0e\u5165(\u66f4\u65b0)\u3057\u3066\u3044\u306a\u3044\u65b9 \u672a\u5c0e\u5165\u306e\u65b9\u3067\u4eca\u5f8c\u3082\u5c0e\u5165\u4e88\u5b9a\u304c\u7121\u3044\u65b9\u65b0\u898f\u5c0e\u5165\u307e\u305f\u306f\u66f4\u65b0\u3059\u308b\u65b9 <p>10-4.\u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\u30fb\u767b\u9332\u3092\u518d\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002\uff08\u30a8\u30a4\u30ea\u30a2\u30b9\u8a2d\u5b9a\u306f\u4e0d\u8981\u3067\u3059\uff09</p> <p>SPO Block Notify\u79fb\u884c\u30de\u30cb\u30e5\u30a2\u30eb\u304b\u3089\u65b0\u898f\u5c0e\u5165\u307e\u305f\u306f\u66f4\u65b0\u3092\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>BP\u30ce\u30fc\u30c9\u304c\u5b8c\u5168\u306b\u540c\u671f\u3057\u305f\u5f8c\u3001\u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\u72b6\u614b\u3092\u78ba\u8a8d\u3059\u308b</p> <ul> <li>cnclilog  </li> <li>leaderlog  </li> <li>validate  </li> <li>logmonitor  </li> <li>blocknotify(SPO Block Notify\u3092\u5c0e\u5165\u3057\u3066\u3044\u308b\u5834\u5408)</li> </ul> cnclilog\u3067<code>Missing eta_v for block xxxxxx</code> \u30a8\u30e9\u30fc\u304c\u51fa\u308b\u5834\u5408\u306e\u5bfe\u51e6\u6cd5 <p>cncli\u3092\u518d\u540c\u671f\u3057\u3066\u304f\u3060\u3055\u3044</p> <p><pre><code>sudo systemctl stop cnode-cncli-sync.service\n</code></pre> <pre><code>rm $NODE_HOME/guild-db/cncli/*\n</code></pre> <pre><code>sudo systemctl restart cnode-cncli-sync.service\n</code></pre> <pre><code>cnclilog\n</code></pre> 100% sync'd\u306b\u306a\u308b\u307e\u3067\u304a\u5f85\u3061\u4e0b\u3055\u3044</p>"},{"location":"operation/node-update/#4","title":"4. \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8","text":"<p>SFTP\u6a5f\u80fd\u30bd\u30d5\u30c8\u5c0e\u5165</p> <p>R-login\u306e\u8ee2\u9001\u6a5f\u80fd\u304c\u9045\u3044\u306e\u3067\u3001\u5927\u5bb9\u91cf\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30fb\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u5834\u5408\u306f\u3001SFTP\u63a5\u7d9a\u53ef\u80fd\u306a\u30bd\u30d5\u30c8\u3092\u4f7f\u7528\u3059\u308b\u3068\u52b9\u7387\u7684\u3067\u3059\u3002\uff08FileZila\u306a\u3069\uff09 \u30d5\u30a1\u30a4\u30eb\u8ee2\u9001\u306b\u306fSFTP\u30bd\u30d5\u30c8\u8a2d\u5b9a\u3092\u884c\u3063\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"operation/node-update/#4-1","title":"4-1. \u30d0\u30a4\u30ca\u30ea\u30d5\u30a1\u30a4\u30eb\u30b3\u30d4\u30fc","text":"<p>\u30ea\u30ec\u30fc\u30b5\u30fc\u30d0\u30fc\u3067<code>cardano-cli</code> \u30d0\u30a4\u30ca\u30ea\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30d4\u30fc\u3057\u3066\u3001\u30ed\u30fc\u30ab\u30ebPC\u306b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304f\u3060\u3055\u3044\u3002  </p> <p>PATH : <code>/home/usr/cardano-cli</code></p> \u30d3\u30eb\u30c9\u6e08\u307f\u30d0\u30a4\u30ca\u30ea\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u5834\u5408\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304b\u3089\u30d3\u30eb\u30c9\u3057\u305f\u5834\u5408 \u30ea\u30ec\u30fc\u30b5\u30fc\u30d0\u30fc <pre><code>sudo cp $(find $HOME/git/cardano-node -type f -name \"cardano-cli\") ~/cardano-cli\n</code></pre> \u30ea\u30ec\u30fc\u30b5\u30fc\u30d0\u30fc <pre><code>cd $HOME/git/cardano-node\nsudo cp $(./scripts/bin-path.sh cardano-cli) ~/cardano-cli\n</code></pre> <pre><code>graph LR\n    A[\u30ea\u30ec\u30fc\u30b5\u30fc\u30d0\u30fc] --&gt;|**cardano-cli**| B[\u30ed\u30fc\u30ab\u30eb\u306e\u30db\u30b9\u30c8\u30de\u30b7\u30f3];</code></pre> <p>USB\u3092\u7528\u3044\u3066<code>cardano-cli</code>\u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306b\u79fb\u52d5\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[\u30ed\u30fc\u30ab\u30eb\u306e\u30db\u30b9\u30c8\u30de\u30b7\u30f3] --&gt;|**cardano-cli**| B[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7];</code></pre></p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 <p>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4f5c\u6210 <pre><code>mkdir -p $HOME/git/cardano-node2\n</code></pre></p> <p>$HOME/git/cardano-node2/ \u306b<code>cardano-cli</code>\u3092\u683c\u7d0d\u3057\u307e\u3059\u3002  </p>"},{"location":"operation/node-update/#4-2-cardano-cli","title":"4-2. <code>cardano-cli</code> \u30d0\u30a4\u30ca\u30ea\u306e\u914d\u7f6e","text":"<p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u3067\u4ee5\u4e0b\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 <p>cardano-cli\u3092\u30b7\u30b9\u30c6\u30e0\u30d5\u30a9\u30eb\u30c0\u3078\u30b3\u30d4\u30fc <pre><code>sudo cp $(find $HOME/git/cardano-node2 -type f -name \"cardano-cli\") /usr/local/bin/cardano-cli\n</code></pre> <pre><code>sudo chmod +x /usr/local/bin/cardano-cli\n</code></pre> </p>"},{"location":"operation/node-update/#4-3","title":"4-3. \u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u78ba\u8a8d","text":"<pre><code>cardano-cli version\n</code></pre> <p>\u4ee5\u4e0b\u306e\u623b\u308a\u5024\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>cardano-cli 10.11.0.0 - linux-x86_64 - ghc-9.6  \n6c034ec038d8d276a3595e10e2d38643f09bd1f2\n</code></pre></p>"},{"location":"operation/p2p-settings/","title":"\u30c0\u30a4\u30ca\u30df\u30c3\u30afP2P\u8a2d\u5b9a\u30de\u30cb\u30e5\u30a2\u30eb","text":"<p>\u4e8b\u524d\u5b66\u7fd2\u306e\u30b9\u30b9\u30e1</p> <p>\u30c0\u30a4\u30ca\u30df\u30c3\u30afP2P(\u4ee5\u4e0b\u3001P2P)\u306f\u30ce\u30fc\u30c9\u540c\u58eb\u306e\u63a5\u7d9a\u65b9\u5f0f\u304c\u5927\u304d\u304f\u5909\u66f4\u306b\u306a\u308a\u307e\u3059\u3002 \u5909\u66f4\u70b9\u3092\u307e\u3068\u3081\u305f\u8cc7\u6599\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u306e\u3067\u4e8b\u524d\u5b66\u7fd2\u3092\u30aa\u30b9\u30b9\u30e1\u3057\u307e\u3059\u3002\u8cc7\u6599\u306f\u3053\u3061\u3089</p> <ul> <li>P2P\u306f\u30ab\u30eb\u30c0\u30ce\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30c1\u30a7\u30fc\u30f3\u5bc6\u5ea6\u306e\u7dad\u6301\u3068\u5b89\u5168\u6027\u3092\u62c5\u4fdd\u3059\u308b\u305f\u3081\u3001\u5c11\u3057\u305a\u3064\u5207\u308a\u66ff\u3048\u3066\u3044\u304f\u65b9\u91dd\u3068\u306a\u308a\u307e\u3059\u3002\u305d\u306e\u305f\u30812023\u5e744\u67083\u65e5\u6642\u70b9\u3067\u306f\u8907\u6570\u30ea\u30ec\u30fc\u306e\u3046\u3061\u5358\u4e00\u306e\u30ea\u30ec\u30fc\u3067\u5b9f\u884c\u3057\u975eP2P\u30ea\u30ec\u30fc\u3068\u4e00\u7dd2\u306b\u7a3c\u50cd\u3055\u305b\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</li> <li>BP\u3078\u306e\u9069\u7528\u306f\u975e\u63a8\u5968\u3068\u306a\u3063\u3066\u304a\u308a\u307e\u3059\u3002</li> </ul> <p>\u6ce8\u610f\u4e8b\u9805</p> <ul> <li>P2P\u3078\u306e\u5207\u308a\u66ff\u3048\u306f\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u5909\u66f4\u3059\u308b\u305f\u3081\u3001\u30ce\u30fc\u30c9\u3092\u505c\u6b62\u3057\u3066\u304b\u3089\u4f5c\u696d\u3057\u307e\u3059\u3002</li> <li>\u4ee5\u4e0b\u306e\u624b\u9806\u306f\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u7528\u3067\u3059\u3002BP\u306b\u306f\u9069\u7528\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044\u3002</li> </ul>"},{"location":"operation/p2p-settings/#1","title":"1. \u30ce\u30fc\u30c9\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d","text":"<pre><code>cardano-node version\n</code></pre> <p>\u30ce\u30fc\u30c9\u30d0\u30fc\u30b8\u30e7\u30f3</p> <p>P2P\u306f1.35.7\u4ee5\u4e0a\u3067\u5229\u7528\u53ef\u80fd\u3067\u3059\u3002 1.35.6\u4ee5\u4e0b\u306e\u5834\u5408\u306f\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u30de\u30cb\u30e5\u30a2\u30eb\u306b\u6dfb\u3063\u3066\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3092\u304a\u9858\u3044\u3057\u307e\u3059\u3002</p> <p>\u30ce\u30fc\u30c9\u3092\u505c\u6b62\u3059\u308b <pre><code>sudo systemctl stop cardano-node\n</code></pre></p>"},{"location":"operation/p2p-settings/#2","title":"2. \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u5909\u66f4","text":"<p>mainnet-config.json\u306bP2P\u30d5\u30e9\u30b0\u3092\u8ffd\u8a18\u3059\u308b</p> \u30ce\u30fc\u30c98.1.2\u306e\u5834\u5408\u30ce\u30fc\u30c98.7.2\u306e\u5834\u5408 <pre><code>sed -i -e '2i \\  \"EnableP2P\": true,' $NODE_HOME/mainnet-config.json\n</code></pre> <pre><code>sed -i -e 's!\"EnableP2P\": false!\"EnableP2P\": true!' $NODE_HOME/mainnet-config.json\n</code></pre> <p>\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u4f5c\u6210\u3059\u308b <pre><code>mv $NODE_HOME/mainnet-topology.json $NODE_HOME/mainnet-topology-non2p2.json\n</code></pre></p>"},{"location":"operation/p2p-settings/#3","title":"3. \u65b0\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210","text":"<p>\u5b9f\u884c\u524d\u306b <code>+</code>\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u6ce8\u91c8\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002 <code>localRoots</code>\u306b\u306f\u5e38\u306bHot\u63a5\u7d9a\u306b\u3057\u305f\u3044\u63a5\u7d9a\u5148\u3092\u8a18\u5165\u3057\u307e\u3059\u3002</p> \u5358\u4e00\u63a5\u7d9a\u306e\u5834\u5408\u8907\u6570\u63a5\u7d9a\u306e\u5834\u5408(IP\u6307\u5b9a)\u8907\u6570\u63a5\u7d9a\u306e\u5834\u5408(DNS\u6307\u5b9a) <pre><code>cat &gt; $NODE_HOME/${NODE_CONFIG}-topology.json &lt;&lt; EOF\n{\n\"localRoots\": [\n    { \"accessPoints\": [\n        {\n        \"address\": \"xxx.xxx.xxx.xx\", #(1)!\n        \"port\": yyyy #(2)!\n        }\n        ],\n        \"advertise\": false,\n        \"valency\": 1\n    }\n],\n\"publicRoots\": [\n  { \"accessPoints\": [\n    {\n      \"address\": \"backbone.cardano-mainnet.iohk.io\",\n      \"port\": 3001\n    },\n    {\n      \"address\": \"backbone.cardano.iog.io\",\n      \"port\": 3001\n    },\n    {\n      \"address\": \"backbone.mainnet.emurgornd.com\",\n      \"port\": 3001\n    }\n    ],\n    \"advertise\": false\n    }\n],\n\"useLedgerAfterSlot\": 87200000\n}\nEOF\n</code></pre> <ol> <li>BP\u306eIP\u307e\u305f\u306fDNS\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>BP\u306e\u30dd\u30fc\u30c8\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> </ol> <pre><code>cat &gt; $NODE_HOME/${NODE_CONFIG}-topology.json &lt;&lt; EOF\n{\n\"localRoots\": [\n    { \"accessPoints\": [\n        {\n        \"address\": \"xx.xxx.xx.xxx\", #(1)!\n        \"port\": yyyy #(2)!\n        },\n        {\n        \"address\": \"bb.bbb.bb.bbb\", #(3)!\n        \"port\": aaaa #(4)!\n        }\n        ],\n        \"advertise\": false,\n        \"valency\": 2\n    }\n],\n\"publicRoots\": [\n    { \"accessPoints\": [\n        {\n        \"address\": \"backbone.cardano-mainnet.iohk.io\",\n        \"port\": 3001\n        },\n        {\n        \"address\": \"backbone.cardano.iog.io\",\n        \"port\": 3001\n        },\n        {\n        \"address\": \"backbone.mainnet.emurgornd.com\",\n        \"port\": 3001\n        }\n    ],\n    \"advertise\": false\n    }\n],\n\"useLedgerAfterSlot\": 110332824\n}\nEOF\n</code></pre> <ol> <li>BP1\u306eIP\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>BP1\u306e\u30dd\u30fc\u30c8\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>BP2\u307e\u305f\u306f\u4ed6\u30ea\u30ec\u30fc\u306eIP\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>BP2\u307e\u305f\u306f\u4ed6\u30ea\u30ec\u30fc\u306e\u30dd\u30fc\u30c8\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> </ol> <pre><code>cat &gt; $NODE_HOME/${NODE_CONFIG}-topology.json &lt;&lt; EOF\n{\n\"localRoots\": [\n    { \"accessPoints\": [\n        {\n        \"address\": \"xxx1.xxx.com\", #(1)!\n        \"port\": yyyy #(2)!\n        }\n        ],\n        \"advertise\": false,\n        \"valency\": 1\n    },\n    { \"accessPoints\": [\n        {\n        \"address\": \"bbb2.ccc.com\", #(3)!\n        \"port\": aaaa #(4)!\n        }\n        ],\n        \"advertise\": false,\n        \"valency\": 1\n    }\n],\n\"publicRoots\": [\n    { \"accessPoints\": [\n    {\n        \"address\": \"relays-new.cardano-mainnet.iohk.io\",\n        \"port\": 3001\n    }\n    ],\n    \"advertise\": false\n    }\n],\n\"useLedgerAfterSlot\": 110332824\n}\nEOF\n</code></pre> <ol> <li>BP1\u306eDNS\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>BP1\u306e\u30dd\u30fc\u30c8\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>BP2\u307e\u305f\u306f\u4ed6\u30ea\u30ec\u30fc\u306eDNS\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>BP2\u307e\u305f\u306f\u4ed6\u30ea\u30ec\u30fc\u306e\u30dd\u30fc\u30c8\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> </ol> <p>\u65b0\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u9805\u76ee\u89e3\u8aac</p> \u9805\u76ee \u8aac\u660e <code>localRoots</code> \u5e38\u306bHot\u306b\u3057\u305f\u3044\u63a5\u7d9a\u5148\u3092\u8a18\u5165 <code>accessPoints</code> \u63a5\u7d9a\u5148\u30b0\u30eb\u30fc\u30d7 <code>advertise</code> PeerSharing\u5b9f\u88c5\u5f8c\u306b\u4f7f\u7528\u3059\u308b\u30d5\u30e9\u30b0(\u4eca\u306f<code>false</code>) <code>valency</code> \u63a5\u7d9a\u6570(\u63a5\u7d9a\u5148\u30b0\u30eb\u30fc\u30d7\u5185\u306b\u8a18\u8f09\u3057\u305f\u6570\u3068\u4e00\u81f4\u3055\u305b\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059) <code>publicRoots</code> \u30d6\u30fc\u30c8\u30b9\u30c8\u30e9\u30c3\u30d7\u7528\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u63a5\u7d9a\u5148 <code>seLedgerAfterSlot</code> \u521d\u671f\u540c\u671f\u306e\u969b\u306b\u53f0\u5e33Peer\u691c\u7d22\u3092\u6709\u52b9\u306b\u3059\u308b\u30b9\u30ed\u30c3\u30c8\u756a\u53f7 <p>mainnet-topology.json\u69cb\u6587\u30c1\u30a7\u30c3\u30af <pre><code>cat $NODE_HOME/mainnet-topology.json | jq .\n</code></pre></p> \u6b63\u5e38\u30a8\u30e9\u30fc <p>mainnet-topology.json\u306e\u4e2d\u8eab\u304c\u305d\u306e\u307e\u307e\u8868\u793a\u3055\u308c\u307e\u3059</p> <p>\u4ee5\u4e0b\u306e\u30a8\u30e9\u30fc\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002mainnet-topology.json\u3092\u958b\u3044\u3066\u9069\u5207\u306a\u8a18\u53f7<code>{}</code> <code>[]</code> <code>,</code> \u306e\u6709\u7121\u3092\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002 <pre><code>parse error: Expected another key-value pair at line x, column x\n</code></pre></p>"},{"location":"operation/p2p-settings/#4","title":"4. \u30ce\u30fc\u30c9\u8d77\u52d5","text":"<pre><code>sudo systemctl start cardano-node\n</code></pre>"},{"location":"operation/p2p-settings/#5","title":"5. \u30c8\u30dd\u30ed\u30b8\u30fc\u30a2\u30c3\u30d7\u30c7\u30fc\u30bf\u4fee\u6b63","text":"<p>relay-topology_pull.sh\u5185\u5bb9\u5909\u66f4 mainnet-topology.json\u4e0a\u66f8\u304d\u9632\u6b62\u306e\u305f\u3081\u3001\u751f\u6210\u30d5\u30a1\u30a4\u30eb\u3092\u30ea\u30cd\u30fc\u30e0\u3057\u307e\u3059\u3002 <pre><code>sed -i $NODE_HOME/relay-topology_pull.sh \\\n    -e \"s/mainnet-topology.json/mainnet-topology-nonp2p.json/g\"\n</code></pre></p> <p>P2P\u30e2\u30fc\u30c9\u306b\u3057\u305f\u30ea\u30ec\u30fc\u3067\u306f\u5b9a\u671f\u7684\u306b<code>relay-topology_pull.sh</code>\u3092\u5b9f\u884c\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u3002</p> <p>\u751f\u5b58\u901a\u77e5\u306b\u3064\u3044\u3066</p> <p>Cron\u306b\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u3001\u30c8\u30dd\u30ed\u30b8\u30fc\u30a2\u30c3\u30d7\u30c7\u30fc\u30bf\u30b5\u30fc\u30d0\u30fc\u3078\u306e\u751f\u5b58\u901a\u77e5\u306f\u3057\u3070\u3089\u304f\u7d99\u7d9a\u3057\u3066\u4e0b\u3055\u3044\u3002 \u5ec3\u6b62\u6642\u671f\u306f\u5225\u9014\u3054\u6848\u5185\u81f4\u3057\u307e\u3059\u3002</p>"},{"location":"operation/p2p-settings/#6","title":"6. \u30c8\u30dd\u30ed\u30b8\u30fc\u30ea\u30ed\u30fc\u30c9\u8a2d\u5b9a","text":"<p>\u30ea\u30ed\u30fc\u30c9\u7528\u74b0\u5883\u5909\u6570\u3092\u8ffd\u52a0 <pre><code>echo alias cnreload='\"pkill -HUP cardano-node\"' &gt;&gt; $HOME/.bashrc\nsource $HOME/.bashrc\n</code></pre></p> <p>P2P\u6709\u52b9\u6642\u306e\u65b0\u6a5f\u80fd</p> <p>\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u66f4\u65b0\u6642\u306e\u30ce\u30fc\u30c9\u518d\u8d77\u52d5\u304c\u4e0d\u8981\u306b\u306a\u308a\u307e\u3057\u305f\uff01\uff01 mainnet-topology.json\u30d5\u30a1\u30a4\u30eb\u3092\u4fee\u6b63\u3057\u305f\u5f8c\u3001<code>cnreload</code>\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067 \u30ce\u30fc\u30c9\u3092\u518d\u8d77\u52d5\u3059\u308b\u3053\u3068\u306a\u304f\u3001\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u306e\u518d\u8aad\u307f\u8fbc\u307f\u304c\u53ef\u80fd\u3067\u3059\u3002</p>"},{"location":"operation/p2p-settings/#7-gliveview","title":"7. gLiveView\u306e\u898b\u65b9","text":"<p>P2P\u5c02\u7528\u9805\u76ee\u3092\u89e3\u8aac\u3057\u307e\u3059\u3002 </p> <p><code>Cold</code> <code>Warm</code> <code>Hot</code>\u304c\u9069\u6b63\u5024\u306b\u843d\u3061\u7740\u304f\u307e\u3067\u306b\u6570\u6642\u9593\u304b\u304b\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002</p> \u9805\u76ee \u8aac\u660e \u5099\u8003 <code>Incoming</code> \u4ed6\u30ea\u30ec\u30fc\u304b\u3089\u306e\u63a5\u7d9a\u6570 Out\u3067\u53cc\u65b9\u5411\u306e\u5834\u5408In\u3082\u30ab\u30a6\u30f3\u30c8\u3055\u308c\u308b <code>Outgoing</code> \u81ea\u30ea\u30ec\u30fc\u304b\u3089\u306e\u63a5\u7d9a\u6570 Warm + Hot \u306e\u5408\u8a08\u5024 <code>Cold Peers</code> \u691c\u77e5\u6e08\u307f\u306e\u4e88\u5099Peer(\u672a\u63a5\u7d9a\u30d4\u30a2\u3000\u30d0\u30c3\u30af\u30a2\u30c3\u30d7) \u30c7\u30d5\u30a9\u30eb\u30c8 50 <code>Warm Peers</code> \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u63a5\u7d9aPeer\u6570(\u30df\u30cb\u30d7\u30ed\u30c8\u30b3\u30eb\u672a\u4f7f\u7528) \u30c7\u30d5\u30a9\u30eb\u30c830 <code>Hot Peers</code> \u30a2\u30af\u30c6\u30a3\u30d6\u63a5\u7d9a\u306ePeer\u6570(\u30df\u30cb\u30d7\u30ed\u30c8\u30b3\u30eb\u4f7f\u7528) 20\u304c\u6700\u9069\u5024 <code>Uni-Dir</code> \u63a5\u7d9a\u5148/\u63a5\u7d9a\u5143\u3044\u305a\u308c\u304b\u304c\u975eP2P (UniDirectional \u5358\u4e00\u65b9\u5411\u63a5\u7d9a ) <code>Bi-Dir</code> \u63a5\u7d9a\u5148/\u63a5\u7d9a\u5143\u304c\u4e21\u7aef\u3067P2P (Bidirectional \u53cc\u65b9\u5411\u63a5\u7d9a) <code>Duplex</code> \u63a5\u7d9a\u5148/\u63a5\u7d9a\u5143\u304cP2P\u3067\u4e21\u7aef\u3067Hot\u3067\u63a5\u7d9a\u72b6\u614b \u76f8\u4e92\u30a2\u30af\u30c6\u30a3\u30d6\u63a5\u7d9a <p>Peer\u30a2\u30ca\u30ea\u30c6\u30a3\u30af\u30b9\u306b\u3064\u3044\u3066 </p> <p>Peer\u30a2\u30ca\u30ea\u30c6\u30a3\u30af\u30b9\u306e\u5909\u66f4\u70b9</p> <p>P2P\u30e2\u30fc\u30c9\u306eOutgoing\u306f\u30ce\u30fc\u30c9\u30dd\u30fc\u30c8\u3092\u4f7f\u7528\u3059\u308b\u305f\u3081\u3001\u30b3\u30de\u30f3\u30c9\u306e\u7279\u6027\u4e0a\u5168\u3066<code>In</code>\u3067\u30ab\u30a6\u30f3\u30c8\u3055\u308c\u307e\u3059\u3002</p> <p>\u30ce\u30fc\u30c9\u9593\u306e\u8ddd\u96e2\u306b\u3064\u3044\u3066</p> <p>P2P\u30e2\u30fc\u30c9\u3067\u6700\u9069\u306a\u63a5\u7d9a\u5148\u3068\u63a5\u7d9a\u3059\u308b\u3068\u306f\u8a00\u3048\u3001\u8ddd\u96e2\u306e\u591a\u69d8\u6027(\u8fd1\u30fb\u4e2d\u30fb\u9060\u8ddd\u96e2)\u306f\u7dad\u6301\u3055\u308c\u307e\u3059\u3002 \u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u5909\u66f4\u3001\u63a5\u7d9a\u6027\u306e\u90e8\u5206\u7684\u306a\u55aa\u5931\u3001\u7269\u7406\u7684\u306a\u30a4\u30f3\u30d5\u30e9\u969c\u5bb3\u306b\u3088\u308a\u63a5\u7d9a\u304c\u5931\u308f\u308c\u305f\u5834\u5408\u3001\u30ce\u30fc\u30c9\u306e\u4e00\u90e8\u307e\u305f\u306f\u5168\u90e8\u304c\u4ed6\u306e\u3088\u308a\u9577\u3044\u8ddd\u96e2\u306e\u30a6\u30a9\u30fc\u30e0\u63a5\u7d9a\u3092\u7dad\u6301\u3057\u3066\u3044\u308c\u3070\u3001\u305d\u308c\u3089\u3092\u30db\u30c3\u30c8\u63a5\u7d9a\u306b\u8fc5\u901f\u306b\u6607\u683c\u3055\u305b\u3066\u56de\u5fa9\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"operation/pool-retire/","title":"\u30d7\u30fc\u30eb\u5ec3\u6b62\u51e6\u7406","text":"<p>\u30d7\u30fc\u30eb\u5ec3\u6b62\u306e\u6d41\u308c</p> <pre><code>graph LR\n    A[1-\u30ea\u30bf\u30a4\u30a2\u51e6\u7406] --&gt;|500ADA\u8fd4\u9084| B(2-\u767b\u9332\u6599\u8fd4\u9084\u78ba\u8a8d);\n    C[3-stake.addr\u304b\u3089\u5168\u984d\u5f15\u51fa\u51e6\u7406] --&gt;|\u5168\u984d| D(3-payment.addr\u7740\u91d1\u78ba\u8a8d);\n    E[4-stake.addr\u89e3\u9664\u51e6\u7406] --&gt;|2ADA\u8fd4\u9084| F(4-payment.addr\u78ba\u8a8d);\n    G[5-payment.addr\u5168\u984d\u5f15\u51fa\u51e6\u7406] --&gt;|\u5168\u984d| H(5-\u4efb\u610f\u306e\u30a2\u30c9\u30ec\u30b9\u78ba\u8a8d);\n    click A \"./#1\"\n    click B \"./#_3\"\n    click C \"../withdrawal/#2-1-paymentaddr\"\n    click E \"./#2\"\n    click G \"./#3paymentaddr\"</code></pre>"},{"location":"operation/pool-retire/#1","title":"1. \u30ea\u30bf\u30a4\u30a2\u51e6\u7406","text":"<p>\u73fe\u5728\u306e\u30a8\u30dd\u30c3\u30af\u3092\u8a08\u7b97\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>startTimeGenesis=$(cat $NODE_HOME/${NODE_CONFIG}-shelley-genesis.json | jq -r .systemStart)\nstartTimeSec=$(date --date=${startTimeGenesis} +%s)\ncurrentTimeSec=$(date -u +%s)\nepochLength=$(cat $NODE_HOME/${NODE_CONFIG}-shelley-genesis.json | jq -r .epochLength)\nepoch=$(( (${currentTimeSec}-${startTimeSec}) / ${epochLength} ))\necho current epoch: ${epoch}\n</code></pre> <p>\u30d7\u30fc\u30eb\u304c\u6700\u3082\u65e9\u304f\u5f15\u9000\u3067\u304d\u308b\u30a8\u30dd\u30c3\u30af\u3068\u6700\u3082\u9045\u3044\u5f15\u9000\u30a8\u30dd\u30c3\u30af\u3092\u898b\u3064\u3051\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>poolRetireMaxEpoch=$(cat $NODE_HOME/params.json | jq -r '.poolRetireMaxEpoch')\necho poolRetireMaxEpoch: ${poolRetireMaxEpoch}\n\nminRetirementEpoch=$(( ${epoch} + 1 ))\nmaxRetirementEpoch=$(( ${epoch} + ${poolRetireMaxEpoch} ))\n\necho \u30ea\u30bf\u30a4\u30a2\u53ef\u80fd\u6700\u77ed\u30a8\u30dd\u30c3\u30af: ${minRetirementEpoch}\necho \u30ea\u30bf\u30a4\u30a2\u53ef\u80fd\u6700\u9577\u30a8\u30dd\u30c3\u30af: ${maxRetirementEpoch}\n</code></pre> <p>\u30ea\u30bf\u30a4\u30a2\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u306b\u3064\u3044\u3066</p> <p>\u4f8b: \u30a8\u30dd\u30c3\u30af320\u3067eMax18\u306e\u5834\u5408,</p> <ul> <li>\u6700\u3082\u65e9\u3044\u30dd\u30c3\u30af\u306f 321 ( \u73fe\u5728\u306e\u30a8\u30dd\u30c3\u30af  + 1)</li> <li> <p>\u6700\u3082\u9045\u3044\u30a8\u30dd\u30c3\u30af\u306f 338 ( eMax + \u73fe\u5728\u306e\u30a8\u30dd\u30c3\u30af)</p> </li> <li> <p>\u30d7\u30fc\u30eb\u306f\u30ea\u30bf\u30a4\u30a2\u6307\u5b9a\u30a8\u30dd\u30c3\u30af\u958b\u59cb\u6642\u306b\u30ea\u30bf\u30a4\u30a2\u51e6\u7406\u3055\u308c\u307e\u3059\u3002  </p> </li> <li>\u3082\u3057\u5fc3\u5909\u308f\u308a\u304c\u3042\u308b\u5834\u5408\u306f\u3001\u30a8\u30dd\u30c3\u30af\u6307\u5b9a\u30a8\u30dd\u30c3\u30af\u958b\u59cb\u524d\u306b\u904b\u7528\u8a3c\u660e\u66f8(pool.cert)\u306e\u66f4\u65b0\u3092\u9001\u4fe1\u3059\u308b\u3053\u3068\u3067\u30ea\u30bf\u30a4\u30a2\u624b\u7d9a\u304d\u3092\u7121\u52b9\u306b\u3067\u304d\u307e\u3059\u3002</li> <li>\u30d7\u30fc\u30eb\u767b\u9332\u6599500ADA\u306f\u30ea\u30bf\u30a4\u30a2\u51e6\u7406\u30a8\u30dd\u30c3\u30af\u958b\u59cb\u6642\u306bstake.addr\u306b\u5165\u91d1\u3055\u308c\u307e\u3059\u3002  </li> </ul> <p>\u767b\u9332\u89e3\u9664\u8a3c\u660e\u66f8 <code>pool.dereg</code>\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002 \u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u5185\u306e <code>--epoch ***</code> \u306b\u30ea\u30bf\u30a4\u30a2\u3057\u305f\u3044\u30a8\u30dd\u30c3\u30af\u3092\u8a18\u5165\u3057\u307e\u3059</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\nchmod u+rwx $HOME/cold-keys\ncardano-cli conway stake-pool deregistration-certificate \\\n--cold-verification-key-file $HOME/cold-keys/node.vkey \\\n--epoch *** \\\n--out-file pool.dereg\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306e<code>pool.dereg</code>\u3092BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059</p> <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|pool.dereg| B[BP];</code></pre> <p>payment.addr\u306e\u6b8b\u9ad8\u3092\u53c2\u7167\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\ncardano-cli conway query utxo \\\n    --address $(cat payment.addr) \\\n    $NODE_NETWORK \\\n    --output-text \\\n    --out-file fullUtxo.out\n\ntail -n +3 fullUtxo.out | sort -k3 -nr | sed -e '/lovelace + [0-9]/d' &gt; balance.out\n\ncat balance.out\n</code></pre> <p>UTXO\u3092\u7b97\u51fa\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>tx_in=\"\"\ntotal_balance=0\nwhile read -r utxo; do\n    in_addr=$(awk '{ print $1 }' &lt;&lt;&lt; \"${utxo}\")\n    idx=$(awk '{ print $2 }' &lt;&lt;&lt; \"${utxo}\")\n    utxo_balance=$(awk '{ print $3 }' &lt;&lt;&lt; \"${utxo}\")\n    total_balance=$((${total_balance}+${utxo_balance}))\n    echo TxHash: ${in_addr}#${idx}\n    echo ADA: ${utxo_balance}\n    tx_in=\"${tx_in} --tx-in ${in_addr}#${idx}\"\ndone &lt; balance.out\ntxcnt=$(cat balance.out | wc -l)\necho Total ADA balance: ${total_balance}\necho Number of UTXOs: ${txcnt}\n</code></pre> <p>\u73fe\u5728\u306e\u30b9\u30ed\u30c3\u30c8\u3092\u7b97\u51fa\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>currentSlot=$(cardano-cli conway query tip $NODE_NETWORK | jq -r '.slot')\necho Current Slot: $currentSlot\n</code></pre> <p>build-raw transaction\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction build-raw \\\n    ${tx_in} \\\n    --tx-out $(cat payment.addr)+${total_balance} \\\n    --invalid-hereafter $(( ${currentSlot} + 10000)) \\\n    --fee 200000 \\\n    --certificate-file pool.dereg \\\n    --out-file tx.tmp\n</code></pre> <p>\u6700\u4f4e\u6599\u91d1\u3092\u8a08\u7b97\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>fee=$(cardano-cli conway transaction calculate-min-fee \\\n    --tx-body-file tx.tmp \\\n    --witness-count 2 \\\n    --output-text \\\n    --protocol-params-file params.json | awk '{ print $1 }')\necho fee: $fee\n</code></pre> <p>\u5909\u66f4\u51fa\u529b\u3092\u8a08\u7b97\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>txOut=$((${total_balance}-${fee}))\necho txOut: ${txOut}\n</code></pre> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u30d3\u30eb\u30c9\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction build-raw \\\n    ${tx_in} \\\n    --tx-out $(cat payment.addr)+${txOut} \\\n    --invalid-hereafter $(( ${currentSlot} + 10000)) \\\n    --fee ${fee} \\\n    --certificate-file pool.dereg \\\n    --out-file tx.raw\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>BP\u306e<code>tx.raw</code>\u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059</p> <pre><code>graph LR\n    A[BP] --&gt;|tx.raw| B[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7];</code></pre> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306b\u7f72\u540d\u3059\u308b</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cardano-cli conway transaction sign \\\n    --tx-body-file tx.raw \\\n    --signing-key-file payment.skey \\\n    --signing-key-file $HOME/cold-keys/node.skey \\\n    $NODE_NETWORK \\\n    --out-file tx.signed\n</code></pre> <p>\u30b3\u30fc\u30eb\u30c9\u30ad\u30fc\u3092\u30ed\u30c3\u30af\u3059\u308b <pre><code>chmod a-rwx $HOME/cold-keys\n</code></pre></p> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306etx.signed \u3092 \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002</p> <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|tx.signed| B[BP];</code></pre> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u9001\u4fe1\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction submit \\\n    --tx-file tx.signed \\\n    $NODE_NETWORK\n</code></pre>"},{"location":"operation/pool-retire/#1-1","title":"1-1. \u30ea\u30bf\u30a4\u30a2\u78ba\u8a8d","text":"<ul> <li>KOIOS API\u3092\u4f7f\u7528\u3057\u3066\u30ea\u30bf\u30a4\u30a2\u51e6\u7406\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002</li> </ul> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\ncurl -s -X POST -H \"content-type: application/json\" -d @- \"https://api.koios.rest/api/v1/pool_info\" &lt;&lt; EOS | jq '.[0].pool_status,.[0].retiring_epoch'\n{\"_pool_bech32_ids\":[\"$(cat 'pool.id-bech32')\"]}\nEOS\n</code></pre> <pre><code>#\u623b\u308a\u5024\u30b5\u30f3\u30d7\u30eb\n\"retired\" # \"retiring\"\u3067\u30ea\u30bf\u30a4\u30a2\u51e6\u7406\u5f85\u3061 \"retired\"\u3067\u30ea\u30bf\u30a4\u30a2\u6e08\u307f \n309 #\u30ea\u30bf\u30a4\u30a2\u30a8\u30dd\u30c3\u30af\n</code></pre>"},{"location":"operation/pool-retire/#2","title":"2. \u767b\u9332\u6599\u8fd4\u9084\u78ba\u8a8d","text":"<p>\u6ce8\u610f</p> <p>\u4ee5\u964d\u306e\u51e6\u7406\u306f\u3001\u30d7\u30fc\u30eb\u306e\u30ea\u30bf\u30a4\u30a2\u51e6\u7406\u304c\u5b8c\u4e86\u3057\u3066\u304b\u3089\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044</p> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306estake.addr \u3092 BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002</p> <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|stake.addr| B[BP];</code></pre> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\ncardano-cli conway query stake-address-info \\\n--address $(cat stake.addr) \\\n$NODE_NETWORK\n</code></pre> <p>\u623b\u308a\u5024\u78ba\u8a8d</p> <p>rewardAccountBalance: \u306e\u5024\u3092\u78ba\u8a8d\u3059\u308b</p>"},{"location":"operation/pool-retire/#3-stakeaddr","title":"3. stake.addr\u304b\u3089\u5f15\u304d\u51fa\u3057","text":"<p>stake.addr\u304b\u3089payment.addr\u3078\u9001\u91d1\u3059\u308b\u65b9\u6cd5 </p>"},{"location":"operation/pool-retire/#4","title":"4. \u30b9\u30c6\u30fc\u30af\u30ad\u30fc\u89e3\u9664\u624b\u9806","text":"<p>\u6ce8\u610f</p> <ul> <li>\u3053\u306e\u624b\u9806\u3067\u306fstake.addr\u306e\u767b\u9332\u3092\u89e3\u9664\u3057\u30012ADA\u306e\u8fd4\u9084\u624b\u7d9a\u304d\u3092\u884c\u3044\u307e\u3059\u3002</li> <li>\u30d7\u30fc\u30eb\u767b\u9332\u6599(500ADA)\u304c\u8fd4\u9084\u3055\u308c\u308b\u524d\u306b\u4ee5\u4e0b\u306e\u51e6\u7406\u3092\u884c\u3063\u3066\u3057\u307e\u3046\u3068\u3001500ADA\u3092\u53d7\u3051\u53d6\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u305b\u3093\u3002  </li> <li>\u4ee5\u4e0b\u306e\u624b\u7d9a\u304d\u306f\u3001\u30d7\u30fc\u30eb\u767b\u9332\u6599\u306e500ADA\u3092\u53d7\u3051\u53d6\u3063\u3066\u304b\u3089\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044</li> </ul> <p>\u30b9\u30c6\u30fc\u30af\u30ad\u30fc\u767b\u9332\u89e3\u9664\u8a3c\u660e\u66f8\u4f5c\u6210</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\ncardano-cli conway stake-address deregistration-certificate \\\n    --stake-verification-key-file stake.vkey \\\n    --key-reg-deposit-amt 2000000 \\\n    --out-file stake-dereg.cert\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306estake-dereg.cert \u3092 \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002</p> <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|stake-dereg.cert| B[BP];</code></pre> <p>\u30b9\u30c6\u30fc\u30af\u30ad\u30fc\u767b\u9332\u6599\u7b97\u51fa</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>keyDeposit=$(cat $NODE_HOME/params.json | jq -r '.stakeAddressDeposit')\necho keyDeposit: $keyDeposit\n</code></pre> <p>\u6700\u65b0\u30b9\u30ed\u30c3\u30c8\u7b97\u51fa</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\ncurrentSlot=$(cardano-cli conway query tip $NODE_NETWORK | jq -r '.slot')\necho Current Slot: $currentSlot\n</code></pre> <p>payment.addr\u6b8b\u9ad8\u3092\u53c2\u7167</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway query utxo \\\n    --address $(cat payment.addr) \\\n    $NODE_NETWORK \\\n    --output-text \\\n    --out-file fullUtxo.out\n\ntail -n +3 fullUtxo.out | sort -k3 -nr | sed -e '/lovelace + [0-9]/d' &gt; balance.out\n\ncat balance.out\n</code></pre> <p>UTXO\u3092\u7b97\u51fa</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>tx_in=\"\"\ntotal_balance=0\nwhile read -r utxo; do\n    in_addr=$(awk '{ print $1 }' &lt;&lt;&lt; \"${utxo}\")\n    idx=$(awk '{ print $2 }' &lt;&lt;&lt; \"${utxo}\")\n    utxo_balance=$(awk '{ print $3 }' &lt;&lt;&lt; \"${utxo}\")\n    total_balance=$((${total_balance}+${utxo_balance}))\n    echo TxHash: ${in_addr}#${idx}\n    echo ADA: ${utxo_balance}\n    tx_in=\"${tx_in} --tx-in ${in_addr}#${idx}\"\ndone &lt; balance.out\ntxcnt=$(cat balance.out | wc -l)\necho Total ADA balance: ${total_balance}\necho Number of UTXOs: ${txcnt}\n</code></pre> <p>\u4eee\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction build-raw \\\n    ${tx_in} \\\n    --tx-out $(cat payment.addr)+$(( ${total_balance} + ${keyDeposit} )) \\\n    --invalid-hereafter $(( ${currentSlot} + 10000)) \\\n    --fee 200000 \\\n    --certificate stake-dereg.cert \\\n    --out-file tx.tmp\n</code></pre> <p>\u6700\u4f4e\u6599\u91d1\u3092\u8a08\u7b97\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>fee=$(cardano-cli conway transaction calculate-min-fee \\\n    --tx-body-file tx.tmp \\\n    --witness-count 2 \\\n    --output-text \\\n    --protocol-params-file params.json | awk '{ print $1 }')\necho fee: $fee\n</code></pre> <p>\u5909\u66f4\u51fa\u529b\u3092\u8a08\u7b97\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>txOut=$((total_balance+keyDeposit-fee))\necho Change Output: ${txOut}\n</code></pre> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u30d3\u30eb\u30c9\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction build-raw \\\n    ${tx_in} \\\n    --tx-out $(cat payment.addr)+${txOut} \\\n    --invalid-hereafter $(( ${currentSlot} + 10000)) \\\n    --fee ${fee} \\\n    --certificate-file stake-dereg.cert \\\n    --out-file tx.raw\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>BP\u306e<code>tx.raw</code> \u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[BP] --&gt;|tx.raw| B[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7];</code></pre></p> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306b\u7f72\u540d\u3059\u308b</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\ncardano-cli conway transaction sign \\\n    --tx-body-file tx.raw \\\n    --signing-key-file payment.skey \\\n    --signing-key-file stake.skey \\\n    $NODE_NETWORK \\\n    --out-file tx.signed\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306e<code>tx.signed</code> \u3092BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|tx.signed| B[BP];</code></pre></p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction submit \\\n    --tx-file tx.signed \\\n    $NODE_NETWORK\n</code></pre>"},{"location":"operation/pool-retire/#5-paymentaddr","title":"5. payment.addr\u304b\u3089\u5168\u984d\u5f15\u304d\u51fa\u3059\u624b\u9806","text":"<p>\u307e\u305a\u306f\u3001\u6700\u65b0\u306e\u30b9\u30ed\u30c3\u30c8\u756a\u53f7\u3092\u53d6\u5f97\u3057 invalid-hereafter \u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6b63\u3057\u304f\u8a2d\u5b9a\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\ncurrentSlot=$(cardano-cli conway query tip $NODE_NETWORK | jq -r '.slot')\necho Current Slot: $currentSlot\n</code></pre> <p>\u9001\u91d1\u5148\u306e\u30a2\u30c9\u30ec\u30b9\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>destinationAddress=\u9001\u91d1\u5148\u30a2\u30c9\u30ec\u30b9\necho destinationAddress: $destinationAddress\n</code></pre> <p>payment.addr\u306e\u6b8b\u9ad8\u3092\u53c2\u7167\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway query utxo \\\n    --address $(cat payment.addr) \\\n    $NODE_NETWORK \\\n    --output-text \\\n    --out-file fullUtxo.out\n\ntail -n +3 fullUtxo.out | sort -k3 -nr &gt; balance.out\n\ncat balance.out\n</code></pre> <p>UTXO\u3092\u7b97\u51fa\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>tx_in=\"\"\ntotal_balance=0\nwhile read -r utxo; do\n    in_addr=$(awk '{ print $1 }' &lt;&lt;&lt; \"${utxo}\")\n    idx=$(awk '{ print $2 }' &lt;&lt;&lt; \"${utxo}\")\n    utxo_balance=$(awk '{ print $3 }' &lt;&lt;&lt; \"${utxo}\")\n    total_balance=$((${total_balance}+${utxo_balance}))\n    echo TxHash: ${in_addr}#${idx}\n    echo ADA: ${utxo_balance}\n    tx_in=\"${tx_in} --tx-in ${in_addr}#${idx}\"\ndone &lt; balance.out\ntxcnt=$(cat balance.out | wc -l)\necho Total ADA balance: ${total_balance}\necho Number of UTXOs: ${txcnt}\n</code></pre> <p>build-raw\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction build-raw \\\n    ${tx_in} \\\n    --tx-out ${destinationAddress}+${total_balance} \\\n    --invalid-hereafter $(( ${currentSlot} + 10000)) \\\n    --fee 200000 \\\n    --out-file tx.tmp\n</code></pre> <p>\u6700\u4f4e\u624b\u6570\u6599\u3092\u51fa\u529b\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>fee=$(cardano-cli conway transaction calculate-min-fee \\\n    --tx-body-file tx.tmp \\\n    --witness-count 1 \\\n    --output-text \\\n    --protocol-params-file params.json | awk '{ print $1 }')\necho fee: $fee\n</code></pre> <p>\u8a08\u7b97\u7d50\u679c\u3092\u51fa\u529b\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>txOut=$((${total_balance}-${fee}))\necho Change Output: ${txOut}\n</code></pre> <p>\u9001\u91d1\u91d1\u984d\u3092\u78ba\u8a8d\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>amountToSend=$((${txOut}))\necho amountToSend: $amountToSend\n</code></pre> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction build-raw \\\n    ${tx_in} \\\n    --tx-out ${destinationAddress}+${amountToSend} \\\n    --invalid-hereafter $(( ${currentSlot} + 10000)) \\\n    --fee ${fee} \\\n    --out-file tx.raw\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>BP\u306etx.raw \u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002</p> <pre><code>graph LR\n    A[BP] --&gt;|tx.raw| B[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7];</code></pre> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306b\u7f72\u540d\u3057\u307e\u3059\u3002</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\ncardano-cli conway transaction sign \\\n    --tx-body-file tx.raw \\\n    --signing-key-file payment.skey \\\n    $NODE_NETWORK \\\n    --out-file tx.signed\n</code></pre> <p>tx.signed \u3092\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002</p> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306etx.signed \u3092BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002</p> <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|tx.signed| B[BP];</code></pre> <p>\u7f72\u540d\u3055\u308c\u305f\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u9001\u4fe1\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction submit \\\n    --tx-file tx.signed \\\n    $NODE_NETWORK\n</code></pre> <p>\u5168\u984d\u51fa\u91d1\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\ncardano-cli conway query utxo \\\n    --address $(cat payment.addr) \\\n    $NODE_NETWORK \\\n    --output-text\n</code></pre> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u304c\u6d88\u3048\u3066\u3044\u308c\u3070OK\u3067\u3059</p> <pre><code>                           TxHash                                 TxIx        Lovelace\n----------------------------------------------------------------------------------------\n</code></pre>"},{"location":"operation/relay-migration/","title":"\u30ea\u30ec\u30fc\u30b5\u30fc\u30d0\u30fc\u79fb\u884c\uff08\u65e7VPS\u4f1a\u793e\u2192\u65b0VPS\u4f1a\u793e\uff09","text":"<p>\u524d\u63d0\u6ce8\u610f\u4e8b\u9805</p> <ul> <li>\u672c\u307e\u3068\u3081\u306f\u73feVPS\u4f1a\u793e\u2192\u65b0VPS\u4f1a\u793e\u3078\u3068 <code>\u30ea\u30ec\u30fc\u306e\u307f</code> \u3092\u79fb\u884c\u3059\u308b\u307e\u3068\u3081\u3067\u3059\u3002</li> <li>\u5b9f\u969b\u306b\u884c\u3046\u969b\u306b\u306f\u624b\u9806\u3092\u3088\u304f\u8aad\u307f\u306a\u304c\u3089\u9032\u3081\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>\u30d6\u30ed\u30c3\u30af\u751f\u6210\u4e88\u5b9a\u307e\u3067\u4f59\u88d5\u304c\u3042\u308b\u6642\u306b\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>\u79fb\u884c\u5f8c\u306f\u30c0\u30a4\u30ca\u30df\u30c3\u30afP2P\u3067\u904b\u7528\u3057\u307e\u3059</li> </ul>"},{"location":"operation/relay-migration/#1","title":"1. \u65b0\u30ea\u30ec\u30fc\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7","text":"<p>\u306f\u3058\u3081\u306b\u304a\u8aad\u307f\u304f\u3060\u3055\u3044</p> <ol> <li>\u30b5\u30fc\u30d0\u72ec\u81ea\u6a5f\u80fd\u306b\u7559\u610f\u3059\u308b<ul> <li>\u3055\u304f\u3089\u306e\u30d1\u30b1\u30c3\u30c8\u30d5\u30a3\u30eb\u30bf\u3084\u3001AWS\u306eFW\u8a2d\u5b9a\u306a\u3069\u306e\u30b5\u30fc\u30d0\u30fc\u72ec\u81ea\u306e\u6a5f\u80fd\u306b\u6c17\u3092\u4ed8\u3051\u3066\u304f\u3060\u3055\u3044\u3002</li> </ul> </li> <li>\u65b0\u30ea\u30ec\u30fc\u306e\u30d5\u30a1\u30a4\u30e4\u30fc\u30a6\u30a9\u30fc\u30eb\u3092\u4e8b\u524d\u306b\u958b\u653e\u8a2d\u5b9a(SSH\u3001\u30ce\u30fc\u30c9\u30dd\u30fc\u30c8\u3001Grafana\u306a\u3069)\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> </ol>"},{"location":"operation/relay-migration/#1-1-ubuntu","title":"1-1. Ubuntu\u521d\u671f\u8a2d\u5b9a","text":"<p>\u65b0\u30b5\u30fc\u30d0\u30fc\u3067Ubuntu\u521d\u671f\u8a2d\u5b9a\u3092\u5b9f\u65bd\u3057\u307e\u3059\u3002  </p>"},{"location":"operation/relay-migration/#1-2","title":"1-2. \u30ce\u30fc\u30c9\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7","text":"<ol> <li>1. \u4f9d\u5b58\u95a2\u4fc2\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb \u301c 7. gLiveView\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u307e\u3067\u5b9f\u65bd\u3057\u307e\u3059\u3002</li> <li>2. \u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u8a2d\u5b9a\u5909\u66f4\u306e\u300c<code>\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u306e\u5834\u5408</code>\u300d\u3092\u5b9f\u65bd\u3057\u307e\u3059\u3002</li> </ol>"},{"location":"operation/relay-migration/#2-bp","title":"2. BP\u8a2d\u5b9a\u4fee\u6b63","text":""},{"location":"operation/relay-migration/#2-1","title":"2-1. \u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u8a2d\u5b9a\u5909\u66f4","text":"<p>AWS\u306a\u3069ufw\u3092\u4f7f\u7528\u3057\u306a\u3044\u5834\u5408</p> <p>VPS\u306e\u7ba1\u7406\u753b\u9762\u304b\u3089\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u306e\u8a2d\u5b9a\u3092\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> BP <pre><code>PORT=`grep \"PORT=\" $NODE_HOME/startBlockProducingNode.sh`\nb_PORT=${PORT#\"PORT=\"}\necho \"BP\u30dd\u30fc\u30c8\u306f${b_PORT}\u3067\u3059\"\n</code></pre> <p>&lt;\u65b0\u30ea\u30ec\u30fcIP&gt; \u306e &lt;&gt;\u3092\u9664\u3044\u3066\u65b0\u30ea\u30ec\u30fcIP\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002 <pre><code>sudo ufw allow from &lt;\u65b0\u30ea\u30ec\u30fcIP&gt; to any port ${b_PORT}\nsudo ufw reload\n</code></pre></p>"},{"location":"operation/relay-migration/#2-2","title":"2-2. \u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u4fee\u6b63","text":"BP <pre><code>nano $NODE_HOME/mainnet-topology.json\n</code></pre> <ul> <li>\u65e7\u30ea\u30ec\u30fcIP\u3068\u30dd\u30fc\u30c8\u3092\u65b0\u30ea\u30ec\u30fc\u306eIP\u3068\u30dd\u30fc\u30c8\u306b\u5909\u66f4\u3059\u308b  </li> <li>DNS\u904b\u7528\u306e\u5834\u5408\u306f\u5909\u66f4\u4e0d\u8981</li> </ul> <p>BP\u30ce\u30fc\u30c9\u3092\u518d\u8d77\u52d5\u3059\u308b <pre><code>sudo systemctl reload-or-restart cardano-node\n</code></pre></p> <p>\u30c1\u30a7\u30fc\u30f3\u304c\u540c\u671f\u3057\u305f\u3089\u65b0\u30ea\u30ec\u30fc\u3068BP\u306e\u53cc\u65b9\u5411\u306e\u758e\u901a(I/O)\u304c\u3067\u304d\u3066\u3044\u308b\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</p> BP <p>gLiveView\u78ba\u8a8d <pre><code>cd $NODE_HOME/scripts\n./gLiveView.sh\n</code></pre></p>"},{"location":"operation/relay-migration/#3-grafanaprometheus","title":"3. Grafana/Prometheus\u8a2d\u5b9a","text":"\u65b0\u30ea\u30ec\u30fc\u3067Grafana\u3082\u904b\u7528\u3059\u308b\u5834\u5408\u65b0\u30ea\u30ec\u30fc\u3067Grafana\u3092\u904b\u7528\u3057\u306a\u3044\u5834\u5408 <p>\u76e3\u8996\u30c4\u30fc\u30eb\u8a2d\u5b9a\u306e\u30ea\u30ec\u30fc\u30ce\u30fc\u30c91\u30bf\u30d6\u30683. Grafana\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306e\u8a2d\u5b9a\u3092\u5b9f\u884c\u3059\u308b\u3002</p> <p>Grafana\u8ffd\u52a0\u8a2d\u5b9a</p> <p>Grafana\u306f\u8ffd\u52a0\u8a2d\u5b9a\u304c\u3042\u308a\u307e\u3059\u306e\u3067\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <ul> <li>Grafana\u30a2\u30e9\u30fc\u30c8\u8a2d\u5b9a</li> <li>Grafana\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u5f37\u5316</li> </ul> <ul> <li>\u65b0\u30ea\u30ec\u30fc\u306b\u3066<code>prometheus node exporter</code>\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002</li> </ul> \u65b0\u30ea\u30ec\u30fc <pre><code>sudo apt install -y prometheus-node-exporter\n</code></pre> <p>\u30b5\u30fc\u30d3\u30b9\u3092\u6709\u52b9\u306b\u3057\u3066\u3001\u81ea\u52d5\u7684\u306b\u958b\u59cb\u3055\u308c\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002 <pre><code>sudo systemctl enable prometheus-node-exporter.service\n</code></pre></p> <p>FW\u8a2d\u5b9a\u3067Prometheus\u30e1\u30c8\u30ea\u30af\u30b9\u30dd\u30fc\u30c8\u3092\u30ea\u30ec\u30fc1\u306eIP\u9650\u5b9a\u3067\u958b\u653e\u3059\u308b Ubuntu22.04\u306e\u5834\u5408\u306f\uff11\u884c\u3065\u3064\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>sudo ufw allow from &lt;\u30ea\u30ec\u30fc\u30ce\u30fc\u30c91\u306eIP&gt; to any port 12798\nsudo ufw allow from &lt;\u30ea\u30ec\u30fc\u30ce\u30fc\u30c91\u306eIP&gt; to any port 9100\nsudo ufw reload\n</code></pre></p> <p>\u30ce\u30fc\u30c9\u518d\u8d77\u52d5 <pre><code>sudo systemctl reload-or-restart cardano-node\n</code></pre></p> <p><code>prometheus.yml</code>\u306e\u4fee\u6b63  </p> <ul> <li>DNS\u30d9\u30fc\u30b9\u3067\u63a5\u7d9a\u3057\u3066\u3044\u308b\u4eba\u306f\u3001DNS\u306e\u5909\u66f4\u304c\u53cd\u6620\u3055\u308c\u305f\u3089\u81ea\u52d5\u7684\u306b\u5207\u308a\u66ff\u308f\u308b\u306e\u3067\u4ee5\u4e0b\u4f5c\u696d\u306f\u4e0d\u8981\u3067\u3059\u3002</li> </ul> Grafana\u30b5\u30fc\u30d0\u30fc(\u30ea\u30ec\u30fc1\u306a\u3069) <pre><code>sudo nano /etc/prometheus/prometheus.yml\n</code></pre> <ul> <li>\u65e7\u30ea\u30ec\u30fc\u306eIP\u3092\u65b0\u30ea\u30ec\u30fc\u306eIP\u3078\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044</li> </ul> <p>\u30b5\u30fc\u30d3\u30b9\u518d\u8d77\u52d5 <pre><code>sudo systemctl restart grafana-server.service\nsudo systemctl restart prometheus.service\nsudo systemctl restart prometheus-node-exporter.service\n</code></pre></p> <p>\u30b5\u30fc\u30d3\u30b9\u304c\u6b63\u3057\u304f\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>sudo systemctl --no-pager status grafana-server.service prometheus.service prometheus-node-exporter.service\n</code></pre></p> <p>Grafana\u306b\u65b0\u30ea\u30ec\u30fc\u306e\u30e1\u30c8\u30ea\u30af\u30b9(Slot\u306a\u3069)\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3059\u308b\u3002</p>"},{"location":"operation/relay-migration/#4","title":"4. \u30d7\u30fc\u30eb\u60c5\u5831\u66f4\u65b0","text":"<p>\u904b\u7528\u8a3c\u660e\u66f8(pool.cert)\u306e\u66f4\u65b0\u3092\u7528\u3044\u3066\u3001\u30c1\u30a7\u30fc\u30f3\u767b\u9332\u4e2d\u306e\u30ea\u30ec\u30fcIP\u3092\u5909\u66f4\u3059\u308b\u3002 (DNS\u904b\u7528\u306e\u5834\u5408\u306f\u4e0d\u8981\u3067\u3059)</p>"},{"location":"operation/relay-migration/#5","title":"5. \u88dc\u8db3","text":""},{"location":"operation/relay-migration/#5-1-tracemempool","title":"5-1. Tracemempool\u7121\u52b9\u5316","text":"\u65b0\u30ea\u30ec\u30fc <p>Tx\u306e\u5897\u52a0\u304c\u78ba\u8a8d\u3067\u304d\u305f\u3089Tracemempool\u3092\u7121\u52b9\u306b\u3057\u307e\u3059\u3002 <pre><code>sed -i $NODE_HOME/${NODE_CONFIG}-config.json \\\n    -e \"s/TraceMempool\\\": true/TraceMempool\\\": false/g\"\n</code></pre></p> <p>\u30ce\u30fc\u30c9\u518d\u8d77\u52d5 <pre><code>sudo systemctl reload-or-restart cardano-node\n</code></pre></p> <p>\u65e7\u30ea\u30ec\u30fc\u30b9\u30c8\u30c3\u30d7</p> \u65e7\u30ea\u30ec\u30fc <p><pre><code>sudo systemctl stop cardano-node\n</code></pre> \u30b5\u30fc\u30d3\u30b9\u89e3\u9664 <pre><code>sudo systemctl disable cardano-node\n</code></pre></p> <p>BP\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u304b\u3089\u65e7\u30ea\u30ec\u30fcIP\u524a\u9664</p> BP <p><pre><code>sudo ufw status numbered\n</code></pre> <pre><code>sudo ufw delete &lt;\u524a\u9664\u3057\u305f\u3044\u756a\u53f7&gt;\n</code></pre></p> <p>ufw\u3092\u4f7f\u308f\u306a\u3044\u30b1\u30fc\u30b9</p> <p>AWS\u3084VSP\u306b\u3088\u3063\u3066\u306f\u7ba1\u7406\u753b\u9762\u3067\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a(\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb)\u3092\u884c\u3063\u3066\u3044\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u306e\u3067\u3001\u305d\u306e\u5834\u5408\u306fVPS\u7ba1\u7406\u753b\u9762\u304b\u3089\u8a2d\u5b9a\u3092\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"operation/relay-migration/#5-2-rsync","title":"5-2. \u65e7\u30ea\u30ec\u30fcRSYNC\u8a2d\u5b9a\u6e08\u306e\u5834\u5408","text":"<ol> <li><code>rsyncd.conf</code> <code>rsync_ed25519.pub</code>\u3092\u65e7\u30ea\u30ec\u30fc\u306ecnode\u304b\u3089\u65b0\u30ea\u30ec\u30fc\u306ecnode\u3078\u79fb\u52d5\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>\u8ee2\u9001\u5143\u30b5\u30fc\u30d0\u30fc\u306e<code>~/.ssh/config</code>\u306e\u65e7\u30ea\u30ec\u30fcIP\u3092\u65b0\u30ea\u30ec\u30fcIP\u306b\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> </ol>"},{"location":"operation/relay-migration/#5-3-mithril-signer","title":"5-3. Mithril-Signer\u518d\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7","text":"<p>\u65e7\u30b5\u30fc\u30d0\u30fc\u3067Mithril-Signer-Relay\u3092\u5b9f\u884c\u3057\u3066\u3044\u305f\u5834\u5408\u306f\u3001\u65b0\u30b5\u30fc\u30d0\u30fc\u3067\u3082\u518d\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u4e0d\u660e\u70b9\u304c\u3042\u308b\u5834\u5408\u306fBTBF SPO LAB.\u3067\u3054\u8cea\u554f\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"operation/rsync-ssh/","title":"\u30b5\u30fc\u30d0\u30fc\u9593\u540c\u671f\u8a2d\u5b9a(RSYNC+SSH)","text":"<p>\u6982\u8981</p> <p>\u30b5\u30fc\u30d0\u30fc\u9593\u3067\u4efb\u610f\u306e\u30c7\u30fc\u30bf\u3092\u8ee2\u9001\u3059\u308b\u8a2d\u5b9a\u3067\u3059\u3002 \u65b0\u30ce\u30fc\u30c9\u66f4\u65b0\u6642\u306b\u767a\u751f\u3059\u308bDB\u518d\u69cb\u7bc9\u6642\u306e\u30c0\u30a6\u30f3\u30bf\u30a4\u30e0\u3092\u6291\u3048\u305f\u308a\u3001\u30d3\u30eb\u30c9\u3055\u308c\u305f\u30d0\u30a4\u30ca\u30ea\u30d5\u30a1\u30a4\u30eb(NODE/CLI)\u3092\u305d\u306e\u307e\u307e\u4efb\u610f\u306e\u30b5\u30fc\u30d0\u30fc\u3078\u8ee2\u9001\u3067\u304d\u307e\u3059\u3002</p> <p>1.\u8ee2\u9001\u5143\u306e\u30b5\u30fc\u30d0\u30fc\u30921\u53f0\u6c7a\u3081\u307e\u3059\u3002(\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u3082\u3057\u304f\u306f\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9\u3092\u63a8\u5968) 2.\u8ee2\u9001\u5148\u306f\u8907\u6570\u53f0\u306e\u30b5\u30fc\u30d0\u30fc\u3092\u4e8b\u524d\u306b\u8a2d\u5b9a\u51fa\u6765\u307e\u3059\u3002 3.RSYNC+SSH\u5c02\u7528\u306e\u8a8d\u8a3c\u30ad\u30fc\u3092\u4f5c\u6210\u3057\u63a5\u7d9a\u3057\u307e\u3059\u3002 4.\u8ee2\u9001\u5148\u30b5\u30fc\u30d0\u30fc\u306f\u3001\u6307\u5b9a\u3057\u305f\u8ee2\u9001\u5143IP\u304b\u3089\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u306e\u307f\u53d7\u3051\u4ed8\u3051\u307e\u3059\u3002 </p> <p>\u69cb\u6210\u30a4\u30e1\u30fc\u30b8 <pre><code>flowchart LR\n    a[\u8ee2\u9001\u5143\u30ea\u30ec\u30fc1] --&gt;|RSYNC+SSH| b[\u30ea\u30ec\u30fc2] &amp; c[\u30ea\u30ec\u30fc3] &amp; d[BP]</code></pre></p>"},{"location":"operation/rsync-ssh/#1","title":"1. \u8ee2\u9001\u5143\u30b5\u30fc\u30d0\u30fc\u8a2d\u5b9a","text":"<p>\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u3082\u3057\u304f\u306f\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9</p>"},{"location":"operation/rsync-ssh/#1-1-rsyncssh","title":"1-1. RSYNC\u5c02\u7528SSH\u8a8d\u8a3c\u30ad\u30fc\u306e\u4f5c\u6210","text":"\u8ee2\u9001\u5143\u30b5\u30fc\u30d0\u30fc\u8a2d\u5b9a <p>ed25519\u6697\u53f7\u3067\u8a8d\u8a3c\u30ad\u30fc\u3092\u4f5c\u6210\u3059\u308b <pre><code>ssh-keygen -t ed25519 -N '' -C Data_Transfer -f ~/.ssh/rsync_ed25519\n</code></pre></p> <p>\u751f\u6210\u3055\u308c\u305f\u8a8d\u8a3c\u30ad\u30fc\u3092\u78ba\u8a8d\u3059\u308b</p> <pre><code>ls ~/.ssh/\n</code></pre> <ul> <li><code>rsync_ed25519</code>\u30fb\u30fb\u30fb\u79d8\u5bc6\u9375</li> <li><code>rsync_ed25519.pub</code>\u30fb\u30fb\u30fb\u516c\u958b\u9375</li> </ul> <p>\u3053\u306e2\u3064\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u751f\u6210\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002USB\u306a\u3069\u3078\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u63a8\u5968</p>"},{"location":"operation/rsync-ssh/#1-2-ssh","title":"1-2. SSH\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210","text":"<p>\u30b3\u30de\u30f3\u30c9\u5185\u8a33</p> <p>\u5fc5\u305a\u81ea\u5206\u306e\u74b0\u5883\u306b\u5408\u308f\u305b\u3066\u30b3\u30de\u30f3\u30c9\u3092\u5b8c\u6210\u3055\u305b\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>Host [\u8ee2\u9001\u5148\u30b5\u30fc\u30d0\u30fc\u306e\u4efb\u610f\u540d]\u3000\u203b\u63a5\u7d9a\u6642\u306e\u30a8\u30a4\u30ea\u30a2\u30b9\u540d\u306b\u306a\u308a\u307e\u3059 HostName [\u8ee2\u9001\u5148IP\u307e\u305f\u306f\u30c9\u30e1\u30a4\u30f3] User [\u8ee2\u9001\u5148\u306eUser\u540d] port [\u8ee2\u9001\u5148\u306eSSH\u30dd\u30fc\u30c8] IdentityFile [SSH\u79d8\u5bc6\u9375\u306e\u30d1\u30b9]  </p> <p>\u8ee2\u9001\u5148\u304c\u8907\u6570\u53f0\u3042\u308b\u5834\u5408\u306f\u4e0a\u8a18\u30921\u30bb\u30c3\u30c8\u3068\u3057\u3066\u8ffd\u52a0\u3059\u308b</p> <p>\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9 <pre><code>cat &gt; ~/.ssh/config &lt;&lt; EOF\nHost BP\n    HostName xxx.xxx.xxx.xx\n    User xxxxx\n    Port xx\n    IdentityFile ~/.ssh/rsync_ed25519\n\nHost Relay2\n    HostName xxx.xx.xxx.xx\n    User xxxxx\n    Port xx\n    IdentityFile ~/.ssh/rsync_ed25519\nEOF\n</code></pre></p> <p>\u30a2\u30af\u30bb\u30b9\u6a29\u3092\u5909\u66f4\u3059\u308b <pre><code>chmod 600 ~/.ssh/config\n</code></pre></p>"},{"location":"operation/rsync-ssh/#1-3-ssh","title":"1-3. SSH\u516c\u958b\u9375\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001","text":"<p>\u516c\u958b\u9375\u3092<code>cnode</code>\u3078\u79fb\u52d5\u3059\u308b <pre><code>mv ~/.ssh/rsync_ed25519.pub $NODE_HOME/\n</code></pre></p>"},{"location":"operation/rsync-ssh/#1-4-zstandard","title":"1-4. ZStandard\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<pre><code>sudo apt install zstd\n</code></pre>"},{"location":"operation/rsync-ssh/#2","title":"2.\u8ee2\u9001\u5148\u30b5\u30fc\u30d0\u30fc\u8a2d\u5b9a","text":"<p>\u8ee2\u9001\u5143\u306b\u3042\u308b<code>rsync_ed25519.pub</code>\u3092\u8ee2\u9001\u5148\u3078\u30b3\u30d4\u30fc\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u3010\u91cd\u8981\u3011\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u8ee2\u9001\u5143\u30b5\u30fc\u30d0\u30fc\u306e<code>cnode</code>\u76f4\u4e0b\u306b\u3042\u308b\u516c\u958b\u9375\u30d5\u30a1\u30a4\u30eb<code>rsync_ed25519.pub</code>\u3092\u3001\u8ee2\u9001\u5148\u30b5\u30fc\u30d0\u30fc\u306e<code>cnode</code>\u30d5\u30a9\u30eb\u30c0\u3078\u30b3\u30d4\u30fc\u3059\u308b</p> <pre><code>graph LR\n    A[\u8ee2\u9001\u5143] --&gt;|rsync_ed25519.pub| B[\u8ee2\u9001\u5148];</code></pre>"},{"location":"operation/rsync-ssh/#2-1-ssh","title":"2-1. SSH\u516c\u958b\u9375\u306e\u8ffd\u8a18","text":"<p>\u30b3\u30de\u30f3\u30c9\u3068\u516c\u958b\u9375\u306e\u7d44\u307f\u5408\u308f\u305b\u3067\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3059\u308b <pre><code>echo 'command=\"rsync --server --daemon --config='$NODE_HOME'/rsyncd.conf .\",no-pty,no-port-forwarding,no-X11-forwarding,no-agent-forwarding '$(cat $NODE_HOME/rsync_ed25519.pub)'' &gt; $NODE_HOME/rsync.txt\n</code></pre></p> <p>\u516c\u958b\u9375\u30b3\u30de\u30f3\u30c9\u3092<code>authorized_keys</code>\u306b\u8ffd\u8a18\u3059\u308b <pre><code>cat $NODE_HOME/rsync.txt &gt;&gt; ~/.ssh/authorized_keys\n</code></pre></p>"},{"location":"operation/rsync-ssh/#2-2-rsync","title":"2-2. RSYNC\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210","text":"<p><code>allowIP</code>\u5909\u6570\u306b\u8ee2\u9001\u5143IP\u3092\u4ee3\u5165\u3059\u308b\u3002x.x.x.x\u3092\u8ee2\u9001\u5143\u306eIP\u306b\u5909\u66f4\u3057\u3066\u5b9f\u884c\u3059\u308b\u3002 <pre><code>allowIP=x.x.x.x\n</code></pre></p> <p>\u4ee5\u4e0b\u30b3\u30de\u30f3\u30c9\u3092\u4e00\u62ec\u30b3\u30d4\u30fc\u3057\u3066\u3001\u5b9f\u884c\u3059\u308b\u3002 <pre><code>cat &gt; $NODE_HOME/rsyncd.conf &lt;&lt; EOF\n# SSH\u3067\u4e00\u822c\u30e6\u30fc\u30b6\u306e\u5834\u5408\u306f\u4f7f\u3048\u306a\u3044\u306e\u3067no\nuse chroot = no\n# \u66f8\u304d\u8fbc\u3080\u5fc5\u8981\u304c\u3042\u308b\u306e\u3067read only\u306fno\nread only = no\n# \u9006\u306b\u8aad\u307f\u53d6\u308b\u5fc5\u8981\u306f\u306a\u3044\u306e\u3067write only\u3092yes\u306b\nwrite only = yes\n# \u4e00\u65e6\u3059\u3079\u3066\u62d2\u5426\nhosts deny = *\n# \u5727\u7e2e\u6e08\u307f\u306e\u7269\u306f\u518d\u5727\u7e2e\u3057\u306a\u3044\ndont compress = *.pdf *.jpg *.jpeg *.gif *.png *.mp3 *.mp4 *.ogg *.avi *.7z *.z *.gz *.tgz *.zip *.lzh *.bz2 *.rar *.xz\n\n[Server]\n  #\u30a2\u30af\u30bb\u30b9\u8a31\u53ef\u30d1\u30b9\n  path = $NODE_HOME\n  # \u63a5\u7d9a\u5143\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092\u8a2d\u5b9a\n  hosts allow = $allowIP\nEOF\n</code></pre></p>"},{"location":"operation/rsync-ssh/#3","title":"3. \u8ee2\u9001\u30c6\u30b9\u30c8","text":"<p>\u8ee2\u9001\u5143\u304b\u3089\u8ee2\u9001\u5148\u3078\u30d5\u30a1\u30a4\u30eb\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002</p> \u8ee2\u9001\u5143\u30b5\u30fc\u30d0\u30fc <p>\u8ee2\u9001\u7528\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b <pre><code>cd $NODE_HOME\ncardano-cli conway query protocol-parameters \\\n    --mainnet \\\n    --out-file params-test.json\n</code></pre></p> <p>\u8ee2\u9001\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b</p> <p>\u30b3\u30de\u30f3\u30c9\u5185\u8a33</p> <p>rsync -P --rsh=ssh [\u8ee2\u9001\u5143\u8ee2\u9001\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9] [\u8ee2\u9001\u5148\u30a8\u30a4\u30ea\u30a2\u30b9\u540d]::Server/[\u8ee2\u9001\u30d5\u30a1\u30a4\u30eb\u540d]</p> <ul> <li>[\u8ee2\u9001\u5148\u30a8\u30a4\u30ea\u30a2\u30b9\u540d]\u306b\u306f\u30011-2\u3067\u8a2d\u5b9a\u3057\u305f\u8ee2\u9001\u5148Host\u540d(\u30a8\u30a4\u30ea\u30a2\u30b9)\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002</li> </ul> <p>\u30b5\u30f3\u30d7\u30eb\u30b3\u30de\u30f3\u30c9 <pre><code>rsync -P --rsh=ssh $NODE_HOME/params-test.json Relay2::Server/params-test.json\n</code></pre></p> <ul> <li>\u521d\u56de\u63a5\u7d9a\u6642\u306e\u307f\u30d5\u30a3\u30f3\u30ac\u30fc\u30d7\u30ea\u30f3\u30c8\u306e\u78ba\u8a8d\u304c\u5165\u308b\u306e\u3067<code>yes</code>\u3092\u5165\u529b\u3059\u308b  </li> <li><code>Verification code:</code> \u304c\u8868\u793a\u3055\u308c\u308b\u5834\u5408\u306f\u3001\u8ee2\u9001\u5148\u30b5\u30fc\u30d0\u30fc\u306e2\u6bb5\u968e\u8a8d\u8a3c\u30b3\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> </ul> <p>\u8ee2\u9001\u5148\u3067\u53d7\u4fe1\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u78ba\u8a8d\u3059\u308b\u3002</p> \u8ee2\u9001\u5148\u30b5\u30fc\u30d0\u30fc <pre><code>ls $NODE_HOME/params-test.json\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u306e\u623b\u308a\u5024\u304c\u3042\u308c\u3070\u8ee2\u9001\u6210\u529f\u3002</p>"},{"location":"operation/rsync-ssh/#4","title":"4. \u8ee2\u9001\u5148\u3092\u8ffd\u52a0\u3059\u308b\u5834\u5408","text":"<p>\u8ee2\u9001\u5148\u3092\u8ffd\u52a0\u3059\u308b\u5834\u5408</p> <ul> <li>1-2\u306eSSH\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u8ee2\u9001\u5148\u3092\u8ffd\u8a18\u3059\u308b</li> <li>\u65b0\u3057\u3044\u8ee2\u9001\u5148\u30672\u30683\u3092\u5b9f\u65bd\u3059\u308b</li> </ul>"},{"location":"operation/sftp-setup/","title":"SFTP\u30bd\u30d5\u30c8\u8a2d\u5b9a","text":"<p>Info</p> <p>\u672c\u624b\u9806\u306f\u3001MacOS\u3067\u5b9f\u65bd\u3057\u3066\u307e\u3059\u3002Windows\u306e\u65b9\u306f\u8aad\u307f\u66ff\u3048\u3066\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"operation/sftp-setup/#1-filezilla","title":"1. FileZilla\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9","text":"<p>\u6b21\u306e\u30ea\u30f3\u30af\u306e\u9077\u79fb\u5148\u304b\u3089FileZilla Client\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002</p> OS \u30d5\u30a1\u30a4\u30eb\u540d MacOS FileZilla_X.XX.X_macosx-x86.app.tar.bz2 Windows FileZilla_X.XX.X_win64-setup.exe <ol> <li>\u300c<code>Quick download links</code>\u300d\u914d\u4e0b\u306e\u300c<code>Download Filezilla Client</code>\u300d\u3092\u30af\u30ea\u30c3\u30af </li> <li>\u300c<code>More download options</code>\u300d\u914d\u4e0b\u306e\u300c<code>Show additional download options</code>\u300d\u3092\u30af\u30ea\u30c3\u30af </li> <li>\u300c<code>Download FileZilla Client</code>\u300d\u304b\u3089\u5bfe\u8c61OS\u3092\u9078\u629e\u3057\u307e\u3059\u3002 \u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u5f8c\u306b\u89e3\u51cd\u3057\u307e\u3059\u3002Mac\u306e\u65b9\u306fDownloads\u30d5\u30a9\u30eb\u30c0\u304b\u3089Application\u30d5\u30a9\u30eb\u30c0\u3078\u79fb\u52d5\u3057\u3066\u304f\u3060\u3055\u3044\u3002 </li> <li>\u30dd\u30c3\u30d7\u30a2\u30c3\u30d7\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u305f\u3089\u4ee5\u4e0b\u306e\u753b\u50cf\u306e\u3088\u3046\u306b\u9032\u3081\u3066FileZilla\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002  </li> </ol>"},{"location":"operation/sftp-setup/#2-sftp","title":"2. SFTP\u8a2d\u5b9a","text":"<p>\u30b5\u30a4\u30c8\u30de\u30cd\u30fc\u30b8\u30e3\u30fc\u3067\u306e\u5404\u7a2e\u8a2d\u5b9a</p> \u9805\u76ee \u8a2d\u5b9a\u5024 <code>\u30d7\u30ed\u30c8\u30b3\u30eb</code> SFTP <code>\u30db\u30b9\u30c8</code> \u30b5\u30fc\u30d0\u30fcIP <code>\u30dd\u30fc\u30c8</code> \u8a2d\u5b9a\u3057\u305fssh\u30dd\u30fc\u30c8\u756a\u53f7 <code>\u30ed\u30b0\u30aa\u30f3\u30bf\u30a4\u30d7</code> \u30a4\u30f3\u30bf\u30e9\u30af\u30c6\u30a3\u30d6 <code>\u30e6\u30fc\u30b6\u30fc</code> \u30e6\u30fc\u30b6\u30fc\u540d <ol> <li>\u30e1\u30cb\u30e5\u30fc\u30d0\u30fc\u304b\u3089\u300c<code>FileZilla</code>\u300d\u2192\u300c<code>\u8a2d\u5b9a</code>\u300d\u3078\u3068\u9032\u307f\u307e\u3059\u3002 </li> <li>\u79d8\u5bc6\u9375\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002 </li> <li>\u63a5\u7d9a\u5148\u306e\u4f5c\u6210\u3068\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002  <p>Google2\u6bb5\u968e\u8a8d\u8a3c\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u3066\u3001\u3046\u307e\u304f\u63a5\u7d9a\u3067\u304d\u306a\u304b\u3063\u305f\u5834\u5408\u306f\u3001\u30ed\u30b0\u30aa\u30f3\u30bf\u30a4\u30d7\u3092\u4e00\u5ea6<code>\u9375\u30d5\u30a1\u30a4\u30eb</code>\u306b\u3057\u3066\u79d8\u5bc6\u9375\u3092\u6307\u5b9a\u5f8c\u3001\u63a5\u7d9a\u3092\u8a66\u307f\u3001\u305d\u306e\u5f8c\u30ed\u30b0\u30aa\u30f3\u30bf\u30a4\u30d7\u3092<code>\u30a4\u30f3\u30bf\u30e9\u30af\u30c6\u30a3\u30d6</code>\u306b\u3057\u3066Google\u8a8d\u8a3c\u3067\u306e6\u6841\u306e\u6570\u5b57\u3092\u5165\u529b\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002</p> </li> </ol>"},{"location":"operation/sjg-tool-setup/","title":"SJG\u30c4\u30fc\u30eb\u5c0e\u5165\u8a2d\u5b9a","text":"<p>\u6700\u7d42\u66f4\u65b0\u65e5\uff1a2026/2/6 v4.1.2</p> <p>\u4e3b\u306a\u6a5f\u80fd</p> <ul> <li>payment.addr\u6b8b\u9ad8\u7167\u4f1a</li> <li>\u5831\u916c\u5f15\u304d\u51fa\u3057</li> <li>\u30d6\u30ed\u30c3\u30af\u751f\u6210\u53ef\u80fd\u53ef\u5426\u78ba\u8a8d</li> <li>env\u30d5\u30a1\u30a4\u30eb\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u5207\u308a\u66ff\u3048</li> <li>Catalyst\u6709\u6a29\u8005\u767b\u9332</li> <li>\u30ac\u30d0\u30ca\u30f3\u30b9\u767b\u9332\u30fb\u6295\u7968</li> </ul> <p></p>"},{"location":"operation/sjg-tool-setup/#_1","title":"\u8a2d\u5b9a","text":"<p>\u30b9\u30af\u30ea\u30d7\u30c8\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9 <pre><code>cd $NODE_HOME/scripts\nwget https://raw.githubusercontent.com/btbf/spojapanguild/master/scripts/sjgtool.sh -O sjgtool.sh\nchmod 755 sjgtool.sh\n</code></pre></p> <p>env\u30d5\u30a1\u30a4\u30eb\u4fee\u6b63</p> <p>\u305d\u306e\u307e\u307e\u5168\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002 <pre><code>sed -i $NODE_HOME/scripts/env \\\n    -e '1,116s!#WALLET_PAY_ADDR_FILENAME=\"payment.addr\"!WALLET_PAY_ADDR_FILENAME=\"payment.addr\"!' \\\n    -e '1,116s!#WALLET_STAKE_ADDR_FILENAME=\"reward.addr\"!WALLET_STAKE_ADDR_FILENAME=\"stake.addr\"!' \\\n    -e '1,116s!#POOL_HOTKEY_VK_FILENAME=\"hot.vkey\"!POOL_HOTKEY_VK_FILENAME=\"kes.vkey\"!' \\\n    -e '1,116s!#POOL_HOTKEY_SK_FILENAME=\"hot.skey\"!POOL_HOTKEY_SK_FILENAME=\"kes.skey\"!' \\\n    -e '1,116s!#POOL_COLDKEY_VK_FILENAME=\"cold.vkey\"!POOL_COLDKEY_VK_FILENAME=\"node.vkey\"!' \\\n    -e '1,116s!#POOL_COLDKEY_SK_FILENAME=\"cold.skey\"!POOL_COLDKEY_SK_FILENAME=\"node.skey\"!' \\\n    -e '1,116s!#POOL_OPCERT_COUNTER_FILENAME=\"cold.counter\"!POOL_OPCERT_COUNTER_FILENAME=\"node.counter\"!' \\\n    -e '1,116s!#POOL_OPCERT_FILENAME=\"op.cert\"!POOL_OPCERT_FILENAME=\"node.cert\"!' \\\n    -e '1,116s!#POOL_VRF_SK_FILENAME=\"vrf.skey\"!POOL_VRF_SK_FILENAME=\"vrf.skey\"!'\n</code></pre></p> \u5404\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u72ec\u81ea\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u5909\u66f4\u3057\u3066\u3044\u308b\u5834\u5408 <p>~/cnode/scripts/env\u30d5\u30a1\u30a4\u30eb\u5185\u306e\u4ee5\u4e0b\u306e\u5909\u6570\u306b\u5bfe\u3057\u3001\u5148\u982d\u306e#\u3092\u524a\u9664\u3057\u3054\u81ea\u8eab\u306e\u74b0\u5883\u306b\u5408\u308f\u305b\u3066\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002  </p> <p>WALLET_PAY_ADDR_FILENAME=\"payment.addr\" WALLET_STAKE_ADDR_FILENAME=\"stake.addr\" POOL_HOTKEY_VK_FILENAME=\"kes.vkey\" POOL_OPCERT_FILENAME=\"node.cert\" POOL_VRF_SK_FILENAME=\"vrf.skey\" POOL_OPCERT_COUNTER_FILENAME=\"node.counter\" POOL_OPCERT_FILENAME=\"node.cert POOL_VRF_SK_FILENAME=\"vrf.skey</p> <p>\u30b9\u30af\u30ea\u30d7\u30c8\u3078\u306e\u30d1\u30b9\u3092\u901a\u3057\u3001\u4efb\u610f\u306e\u5358\u8a9e\u3067\u8d77\u52d5\u51fa\u6765\u308b\u3088\u3046\u306b\u3059\u308b <pre><code>echo alias gtool=\"'cd $NODE_HOME/scripts; ./sjgtool.sh'\" &gt;&gt; $HOME/.bashrc\nsource $HOME/.bashrc\n</code></pre></p> <p>TOOL\u3092\u5b9f\u884c\u3059\u308b <pre><code>gtool\n</code></pre></p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306b\u74b0\u5883\u5909\u6570\u3092\u8ffd\u52a0\u3059\u308b <pre><code>echo alias airgap=\"'cd $HOME/cnode &amp;&amp; [ -f airgap-set.tar.gz ] &amp;&amp; tar -xOzf airgap-set.tar.gz airgap_script | bash -s verify || echo \"airgap-set.tar.gz \u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\"'\" &gt;&gt; $HOME/.bashrc\nsource $HOME/.bashrc\n</code></pre></p> <p>\u65e2\u77e5\u306e\u4e0d\u5177\u5408</p> <p>\u306a\u3057</p> <p>\u307e\u305f\u3001\u305d\u306e\u4ed6\u30d0\u30b0\u3092\u767a\u898b\u3057\u305f\u5834\u5408\u306fGithub\u3067issue\u3092\u63d0\u51fa\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"operation/sjg-tool-setup/#_2","title":"\u66f4\u65b0\u5c65\u6b74","text":""},{"location":"operation/sjg-tool-setup/#v412","title":"v4.1.2","text":"<pre><code>* SPO\u30ac\u30d0\u30ca\u30f3\u30b9\u30a2\u30af\u30b7\u30e7\u30f3\u6295\u7968\u306e\u30d0\u30b0\u3092\u4fee\u6b63\n</code></pre>"},{"location":"operation/sjg-tool-setup/#v411","title":"v4.1.1","text":"<pre><code>* \u30ac\u30d0\u30ca\u30f3\u30b9\u30a2\u30af\u30b7\u30e7\u30f3\u6295\u7968\u306e\u30d0\u30b0\u3092\u4fee\u6b63\n</code></pre>"},{"location":"operation/sjg-tool-setup/#v410","title":"v4.1.0","text":"<pre><code>* \u6295\u7968\u53ef\u80fd\u306a\u30ac\u30d0\u30ca\u30f3\u30b9\u30a2\u30af\u30b7\u30e7\u30f3\u306e\u81ea\u52d5\u8868\u793a\n* \u4ee3\u66ffIPFS\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u306e\u8ffd\u52a0\n* SPO\u6295\u7968\u7406\u7531\u30e1\u30bf\u30c7\u30fc\u30bf\uff08\u4efb\u610f\u306eURL\u3068Blockfrost-IPFS\uff09\u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\n</code></pre>"},{"location":"operation/sjg-tool-setup/#v404","title":"v4.0.4","text":"<pre><code>* \u30d6\u30ed\u30c3\u30af\u751f\u6210\u72b6\u614b\u30c1\u30a7\u30c3\u30af\u306bnode.cert\u30d7\u30fc\u30ebID\u30c1\u30a7\u30c3\u30af\u3092\u5c0e\u5165\n</code></pre>"},{"location":"operation/sjg-tool-setup/#v402","title":"v4.0.2","text":"<pre><code>* bech32\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u30d0\u30b0\u4fee\u6b63\n</code></pre>"},{"location":"operation/sjg-tool-setup/#v400","title":"v4.0.0","text":"<pre><code>* KES\u66f4\u65b0\u30d5\u30ed\u30fc\u7c21\u7565\u5316\n* Airgap Scripts\u5c0e\u5165\n* ADA\u30cf\u30f3\u30c9\u30eb\u540d\u524d\u89e3\u6c7a\u30d0\u30b0\u4fee\u6b63\n</code></pre> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306b\u74b0\u5883\u5909\u6570\u3092\u8ffd\u52a0\u3057\u3066\u304f\u3060\u3055\u3044</p> <pre><code>echo alias airgap=\"'cd $HOME/cnode &amp;&amp; [ -f airgap-set.tar.gz ] &amp;&amp; tar -xOzf airgap-set.tar.gz airgap_script | bash -s verify || echo \"airgap-set.tar.gz \u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\"'\" &gt;&gt; $HOME/.bashrc\nsource $HOME/.bashrc\n</code></pre>"},{"location":"operation/sjg-tool-setup/#v397","title":"v3.9.7","text":"<pre><code>* cardano-cli 10.11.0.0\u5bfe\u5fdc\n</code></pre>"},{"location":"operation/sjg-tool-setup/#v396","title":"v3.9.6","text":"<pre><code>* \u30ac\u30d0\u30ca\u30f3\u30b9SPO\u6295\u7968\u30d0\u30b0\u4fee\u6b63\n</code></pre>"},{"location":"operation/sjg-tool-setup/#v395","title":"v3.9.5","text":"<pre><code>* \u30d6\u30ed\u30c3\u30af\u751f\u6210\u72b6\u614b\u30c1\u30a7\u30c3\u30af\u8868\u793a\u4fee\u6b63\n</code></pre>"},{"location":"operation/sjg-tool-setup/#v394","title":"v3.9.4","text":"<pre><code>* cardano-cli 10.8.0.0\u5bfe\u5fdc\n* ADA\u30cf\u30f3\u30c9\u30eb\u540d\u524d\u89e3\u6c7a\u30d0\u30b0\u4fee\u6b63\n</code></pre>"},{"location":"operation/sjg-tool-setup/#v393","title":"v3.9.3","text":"<pre><code>* cardano-node 10.2.1\u5bfe\u5fdc\n* Tx\u9001\u4fe1\u5f8c\u306e\u30c1\u30a7\u30fc\u30f3\u691c\u8a3c\u5c0e\u5165\n</code></pre>"},{"location":"operation/sjg-tool-setup/#v392","title":"v3.9.2","text":"<pre><code>* \u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u4e0d\u5177\u5408\u4fee\u6b63\n</code></pre>"},{"location":"operation/sjg-tool-setup/#v391","title":"v3.9.1","text":"<pre><code>* \u30b9\u30c6\u30fc\u30af\u30a2\u30c9\u30ec\u30b9DRep\u59d4\u4efb\u6a5f\u80fd\u30d0\u30b0\u4fee\u6b63\n</code></pre>"},{"location":"operation/sjg-tool-setup/#v390","title":"v3.9.0","text":"<pre><code>* \u30b9\u30c6\u30fc\u30af\u30a2\u30c9\u30ec\u30b9DRep\u59d4\u4efb\u6a5f\u80fd\u5b9f\u88c5\n</code></pre>"},{"location":"operation/sjg-tool-setup/#v382","title":"v3.8.2","text":"<pre><code>* \u8efd\u5fae\u306a\u4fee\u6b63\n</code></pre>"},{"location":"operation/sjg-tool-setup/#v381","title":"v3.8.1","text":"<pre><code>* \u30e1\u30cb\u30e5\u30fc\u4fee\u6b63\n* \u8efd\u5fae\u306a\u4fee\u6b63\n</code></pre>"},{"location":"operation/sjg-tool-setup/#v380","title":"v3.8.0","text":"<pre><code>* \u30ac\u30d0\u30ca\u30f3\u30b9\u30a2\u30af\u30b7\u30e7\u30f3SPO\u6295\u7968\u5b9f\u88c5\n* \u8efd\u5fae\u306a\u4fee\u6b63\n</code></pre>"},{"location":"operation/sjg-tool-setup/#v375","title":"v3.7.5","text":"<pre><code>* \u5831\u916c/\u8cc7\u91d1\u51fa\u91d1\u306e\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u304c\u5931\u6557\u3059\u308b\u30d0\u30b0\u3092\u4fee\u6b63\n</code></pre>"},{"location":"operation/sjg-tool-setup/#v374","title":"v3.7.4","text":"<pre><code>* ADA\u30cf\u30f3\u30c9\u30eb\u540d\u524d\u89e3\u6c7a\u30d0\u30b0\u89e3\u6d88\n</code></pre>"},{"location":"operation/sjg-tool-setup/#v373","title":"v3.7.3","text":"<pre><code>* env\u304b\u3089\u4efb\u610fPrometheus\u30dd\u30fc\u30c8\u53d6\u5f97 `PROM_PORT`\n</code></pre>"},{"location":"operation/sjg-tool-setup/#v371","title":"v3.7.1","text":"<pre><code>* \u30d6\u30ed\u30c3\u30af\u751f\u6210\u72b6\u614b\u30c1\u30a7\u30c3\u30af\u3000\u8a93\u7d04\u30c1\u30a7\u30c3\u30af\u5224\u5b9a\u4fee\u6b63\n   (payment.addr + stake.addr\u5831\u916c\u5408\u8a08)\n* Pledge\u5909\u66f4\u6642\u306e\u6709\u52b9\u30a8\u30dd\u30c3\u30af\u30c1\u30a7\u30c3\u30af\u5c0e\u5165\n</code></pre>"},{"location":"operation/sjg-tool-setup/#v370","title":"v3.7.0","text":"<pre><code>* CLI 8.17.0.0\u5bfe\u5fdc\n* \u30c7\u30a3\u30b9\u30af\u7a7a\u304d\u5bb9\u91cf\u3068DB\u5bb9\u91cf\u8868\u793a\u8ffd\u52a0\n</code></pre>"},{"location":"operation/sjg-tool-setup/#v364","title":"v3.6.4","text":"<pre><code>* gLiveView1.28.x\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u6a5f\u80fd\n* \u30d7\u30fc\u30ebID\u30d5\u30a1\u30a4\u30eb\u540d\u5909\u66f4  \n\u3000stakepoolid_hex \u2192 pool.id  \n\u3000stakepoolid_bech32 \u2192 pool.id-bech32\n</code></pre>"},{"location":"operation/sjg-tool-setup/#v363","title":"v3.6.3","text":"<pre><code>* Catalyst\u6709\u6a29\u8005\u767b\u9332\u6a5f\u80fd\u3000payment.addr\u30a8\u30e9\u30fc\u4fee\u6b63\n</code></pre>"},{"location":"operation/sjg-tool-setup/#v362","title":"v3.6.2","text":"<pre><code>* Catalyst\u6709\u6a29\u8005\u767b\u9332\u6a5f\u80fd\u3000\u8868\u793a\u6587\u8a00\u4fee\u6b63\n</code></pre>"},{"location":"operation/sjg-tool-setup/#v360","title":"v3.6.0","text":"<pre><code>* Catalyst\u6709\u6a29\u8005\u767b\u9332\u6a5f\u80fd\u3000\u5b9f\u88c5\n\u3000payment.addr\u306eADA\u3092Catalyst Voting\u30d1\u30ef\u30fc\u306b\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002\n</code></pre>"},{"location":"operation/sjg-tool-setup/#v351","title":"v3.5.1","text":"<pre><code>* SPO\u6295\u7968\u6a5f\u80fd\n\u3000cardano-cli 8.0.0-untested\u4f7f\u7528\u6642\u3001Tx\u304c\u4f5c\u6210\u3055\u308c\u306a\u3044\u4e0d\u5177\u5408\u3092\u89e3\u6d88\n</code></pre>"},{"location":"operation/sjg-tool-setup/#v350","title":"v3.5.0","text":"<pre><code>* SPO\u6295\u7968\u6a5f\u80fd\u5b9f\u88c5\n\u3000\u7c21\u6613\u30e1\u30c3\u30bb\u30fc\u30b8\u6dfb\u4ed8\u53ef\u80fd\n</code></pre>"},{"location":"operation/sjg-tool-setup/#v346","title":"v3.4.6","text":"<pre><code>* \u30d6\u30ed\u30c3\u30af\u751f\u6210\u72b6\u614b\u30c1\u30a7\u30c3\u30af\n    * \u30e1\u30bf\u30c7\u30fc\u30bf\u30cf\u30c3\u30b7\u30e5\u30c1\u30a7\u30c3\u30af\u8ffd\u52a0\n    * PeerIn\u30ab\u30a6\u30f3\u30c8\u304b\u3089127.0.0.1\u3092\u9664\u5916\n* Preview\u30cd\u30c3\u30c8\u30ef\u30fc\u30afTx\u78ba\u8a8d\u30ea\u30f3\u30af\u3092CardanoScan\u3078\u5909\u66f4\n</code></pre>"},{"location":"operation/sjg-tool-setup/#v344","title":"v3.4.4","text":"<pre><code>* Preview / PreProd \u30c6\u30b9\u30c8\u30cd\u30c3\u30c8\u5bfe\u5fdc\uff08env\u30d5\u30a1\u30a4\u30eb\u66f4\u65b0\u5fc5\u9808\uff09\n* \u30d6\u30ed\u30c3\u30af\u751f\u6210\u30c1\u30a7\u30c3\u30af\u7dcf\u5408\u5224\u5b9a\u5c0e\u5165\n</code></pre>"},{"location":"operation/sjg-tool-setup/#v343","title":"v3.4.3","text":"<pre><code>* \u8efd\u5fae\u306a\u4fee\u6b63\n</code></pre>"},{"location":"operation/sjg-tool-setup/#v342","title":"v3.4.2","text":"<pre><code>* 364\u7279\u5225\u5bfe\u5fdc\u524a\u9664\n* env\u30d5\u30a1\u30a4\u30eb\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u30c1\u30a7\u30c3\u30af\u30d5\u30e9\u30b0\u5207\u66ff\u6a5f\u80fd\u8ffd\u52a0\n* \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u9001\u4fe1\u5f8c\u3001\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u78ba\u8a8dURL\u3092\u8868\u793a\n</code></pre>"},{"location":"operation/sjg-tool-setup/#v331","title":"v3.3.1","text":"<pre><code>* 364\u30a8\u30dd\u30c3\u30af\u7279\u5225\u5bfe\u5fdc cncli.sh\u30d1\u30c3\u30c1\u9069\u7528\u8ffd\u52a0\n</code></pre>"},{"location":"operation/sjg-tool-setup/#v330","title":"v3.3.0","text":"<pre><code>* \u5831\u916c/\u8cc7\u91d1\u51fa\u91d1\u3000\u4efb\u610f\u30a2\u30c9\u30ec\u30b9\u51fa\u91d1ADA Handle\u306b\u5bfe\u5fdc\n</code></pre>"},{"location":"operation/sjg-tool-setup/#v321","title":"v3.2.1","text":"<pre><code>* \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30b3\u30de\u30f3\u30c9\u3092\u4fee\u6b63\n</code></pre>"},{"location":"operation/sjg-tool-setup/#v320","title":"v3.2.0","text":"<pre><code>* KES\u66f4\u65b0\u6642\u306e\u30ab\u30a6\u30f3\u30bf\u30fc\u30d5\u30a1\u30a4\u30eb\u30c1\u30a7\u30c3\u30af\u30fb\u4f5c\u6210\u624b\u9806\u8ffd\u52a0\n* \u30d6\u30ed\u30c3\u30af\u751f\u6210\u72b6\u614b\u30c1\u30a7\u30c3\u30af KES\u30d5\u30a1\u30a4\u30eb\u30c1\u30a7\u30c3\u30af\u30eb\u30fc\u30eb\u5909\u66f4\n</code></pre>"},{"location":"operation/sjg-tool-setup/#v310","title":"v3.1.0","text":"<pre><code>* KES\u66f4\u65b0\u6642\u306enode.cert\u30d0\u30c3\u30af\u30a2\u30c3\u30d7/\u524a\u9664\u8ffd\u52a0\n</code></pre>"},{"location":"operation/sjg-tool-setup/#v300","title":"v3.0.0","text":"<ul> <li>KES\u66f4\u65b0\u6a5f\u80fd\u8ffd\u52a0</li> </ul> <p>\u3053\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u306b\u4f34\u3044\u3001env\u30d5\u30a1\u30a4\u30eb\u306e\u4fee\u6b63\u304c\u5fc5\u8981\u3068\u306a\u308a\u307e\u3059\u3002 v2.x.x\u4ee5\u4e0a\u3092\u3059\u3067\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u3066\u3001\u30d7\u30fc\u30eb\u306eKES\u79d8\u5bc6\u9375\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u304ckes.skey\u306e\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u30921\u56de\u3060\u3051\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002 \u9055\u3046\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u3054\u5229\u7528\u306e\u5834\u5408\u306f\u4efb\u610f\u306b\u66f8\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002 <pre><code>sed -i $NODE_HOME/scripts/env \\\n-e '1,116s!#POOL_HOTKEY_SK_FILENAME=\"hot.skey\"!POOL_HOTKEY_SK_FILENAME=\"kes.skey\"!'\n</code></pre></p>"},{"location":"operation/sjg-tool-setup/#v210","title":"v2.1.0","text":"<ul> <li>DdzF\u30a2\u30c9\u30ec\u30b9\u3078\u306e\u5831\u916c/\u8cc7\u91d1\u51fa\u91d1\u3092\u8a31\u53ef</li> <li>payment.addr\u51fa\u91d1\u6642\u3001\u51fa\u91d1\u984d\u8868\u793a\u5358\u4f4d\u30d0\u30b0\u3092\u4fee\u6b63</li> </ul>"},{"location":"operation/spo-poll/","title":"\u30ab\u30eb\u30c0\u30ce\u8ca1\u56e3SPO\u6295\u7968\u30de\u30cb\u30e5\u30a2\u30eb","text":"<p>\u6982\u8981</p> <ul> <li>\u6295\u7968\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3 fae7bda85acb99c513aeab5f86986047b6f6cbd33a8e11f11c5005513a054dc8</li> <li>\u6295\u7968\u671f\u9650\uff1a413\u30a8\u30dd\u30c3\u30af\u7d42\u4e86\u307e\u3067</li> <li>CIP-0094\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9 Adastat.net [Mainnet] / Cardanoscan.io [Mainnet]</li> <li>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u624b\u6570\u6599\u306e\u307f\u3067\u6295\u7968\u3067\u304d\u307e\u3059</li> <li>CIP-0094\u306b\u5bfe\u5fdc\u3057\u305fcardano-cli(v8.0.0-untested \u307e\u305f\u306f v8.0.0)\u304c\u5fc5\u8981\u3067\u3059</li> <li>\u6295\u7968\u306f\u521d\u56de\uff11\u56de\u306e\u307f\u304c\u6709\u52b9\u3067\u3059\u3002</li> </ul>"},{"location":"operation/spo-poll/#1-sjg-tool","title":"1. SJG TOOL\u3067\u6295\u7968\u3059\u308b","text":"<p>SJG TOOL\u6295\u7968\u4ed5\u69d8</p> <ul> <li>\u6295\u7968\u30c7\u30fc\u30bf\u306b\u7c21\u6613\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u6dfb\u4ed8\u53ef\u80fd\uff01 ADASTAT\u306b\u5b9f\u88c5\u3055\u308c\u305f\u6295\u7968\u30c7\u30fc\u30bf\u7c21\u6613\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u8868\u793a\u3067\u304d\u307e\u3059\u3002</li> <li>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u306eCLI\u304cCIP-0094\u975e\u5bfe\u5fdc\u306e\u5834\u5408\u306f\u3001<code>cardano-cli v8.0.0-untested</code>\u3092\u5225\u9014\u81ea\u52d5\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\u3053\u308c\u306f\u6295\u7968\u306e\u307f\u306b\u4f7f\u7528\u3057\u3001\u901a\u5e38\u306e\u30aa\u30da\u30ec\u30fc\u30b7\u30e7\u30f3\u306b\u306f\u4f7f\u7528\u3057\u307e\u305b\u3093\u3002</li> <li>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306b<code>cardano-cli v8.0.0-untested</code>\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u3002</li> <li>\u6295\u7968\u5185\u5bb9\u306e\u81ea\u52d5\u7ffb\u8a33\u306fAPI\u81ea\u52d5\u7ffb\u8a33\u306e\u305f\u3081\u3001\u6b63\u3057\u3044\u65e5\u672c\u8a9e\u306b\u306a\u3063\u3066\u3044\u306a\u3044\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002 </li> </ul> <p>1-1. SJG TOOL\u3092\u8d77\u52d5\u3057\u3001v5.3\u3078\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>1-2. <code>[5] SPO\u6295\u7968\u30c4\u30fc\u30eb</code> \u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044</p> <p>1-3. \u6295\u7968\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30cf\u30c3\u30b7\u30e5\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044 </p> <pre><code>fae7bda85acb99c513aeab5f86986047b6f6cbd33a8e11f11c5005513a054dc8\n</code></pre> <p>1-4. \u753b\u9762\u306e\u6307\u793a\u306b\u5f93\u3063\u3066\u9032\u3081\u3066\u304f\u3060\u3055\u3044\u3002(\u4e2d\u65ad\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059)</p> <p>1-5. \u6295\u7968\u78ba\u8a8d CIP-0094\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3067\u81ea\u8eab\u306e\u6295\u7968\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u3087\u3046\uff01     Adastat.net [Mainnet] / Cardanoscan.io [Mainnet]</p> <p>\u4ee5\u4e0a\u3067\u3059\u3002</p>"},{"location":"operation/spo-poll/#2-cli","title":"2. CLI\u30b3\u30de\u30f3\u30c9\u3067\u6295\u7968\u3059\u308b","text":"<p>CLI\u30b3\u30de\u30f3\u30c9\u6295\u7968\u4ed5\u69d8</p> <ul> <li>\u6295\u7968\u30c7\u30fc\u30bf\u7c21\u6613\u30e1\u30c3\u30bb\u30fc\u30b8\u6dfb\u4ed8\u306b\u306f\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u305b\u3093\u3002\u6dfb\u4ed8\u3057\u305f\u3044\u5834\u5408\u306f\u5404\u81ea\u3067\u30e1\u30bf\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3059\u308b\u304bSJGTOOL\u3092\u5229\u7528\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> </ul> <p>2-1.CLI\u30d0\u30fc\u30b8\u30e7\u30f3\u30c1\u30a7\u30c3\u30af <pre><code>cardano-cli version\n</code></pre></p> <p>v8.0.0\u306fCIP-0094\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u3059\u3002</p> <p>CLI\u30d1\u30b9\u3092\u8a2d\u5b9a\u3059\u308b <pre><code>cli_path=$(which cardano-cli)\n</code></pre></p> <p>\u4f5c\u696d\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3059\u308b <pre><code>mkdir $HOME/git/spo-poll &amp;&amp; cd $HOME/git/spo-poll\n</code></pre></p> <p>CLI v1.35.7\u4ee5\u4e0b\u306e\u5834\u5408</p> <p>CIP-0094\u306b\u5bfe\u5fdc\u3057\u305fCLI\u304c\u5fc5\u8981\u306e\u305f\u3081\u3001\u4ee5\u4e0b\u3092\u5b9f\u884c\u3057<code>v8.0.0-untested</code>\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304f\u3060\u3055\u3044\u3002 \u3053\u308c\u306f\u6295\u7968\u306e\u307f\u306b\u4f7f\u7528\u3057\u3001\u901a\u5e38\u306e\u30aa\u30da\u30ec\u30fc\u30b7\u30e7\u30f3\u306b\u306f\u4f7f\u7528\u3057\u307e\u305b\u3093\u3002</p> <p>v8.0.0-untested\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b <pre><code>wget -q https://github.com/btbf/spojapanguild/raw/d7cd9792ab4cb532b74a8cd1bf30de3c1c03b8a6/scripts/spo-poll/cardano-cli.gz\ngzip -d cardano-cli.gz\nchmod 755 $HOME/git/spo-poll/cardano-cli\n</code></pre> \u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>$HOME/git/spo-poll/cardano-cli version\n</code></pre></p> <p>cardano-cli 8.0.0 - linux-x86_64 - ghc-8.10 git rev 0000000000000000000000000000000000000000</p> <p>CLI\u30d1\u30b9\u3092\u4e0a\u66f8\u304d\u3059\u308b <pre><code>cli_path=$HOME/git/spo-poll/cardano-cli\n</code></pre></p> <ul> <li>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306b<code>cardano-cli v8.0.0-untested</code>\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u3002</li> </ul> <p>\u6295\u7968\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30cf\u30c3\u30b7\u30e5\u3092\u8a2d\u5b9a\u3059\u308b <pre><code>txHash=\"fae7bda85acb99c513aeab5f86986047b6f6cbd33a8e11f11c5005513a054dc8\"\n</code></pre></p> <p>\u6295\u7968Cbor\u30c7\u30fc\u30bf(json)\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b <pre><code>wget https://raw.githubusercontent.com/cardano-foundation/CIP-0094-polls/main/networks/${NODE_CONFIG}/${txHash}/poll.json -O $HOME/git/spo-poll/poll_${txHash}-CBOR.json\n</code></pre></p> <p>\u6295\u7968\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b</p> <pre><code>${cli_path} governance answer-poll --poll-file $HOME/git/spo-poll/poll_${txHash}-CBOR.json &gt; $HOME/git/spo-poll/poll_${txHash}-poll-answer.json\n</code></pre> <p>\u6295\u7968\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u9001\u4fe1\u6e96\u5099</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <p>\u30a6\u30a9\u30ec\u30c3\u30c8\u6b8b\u9ad8\u78ba\u8a8d <pre><code>cd $NODE_HOME\ncardano-cli conway query utxo \\\n    --address $(cat payment.addr) \\\n    $NODE_NETWORK \\\n    --output-text \\\n    --out-file fullUtxo.out\n\ntail -n +3 fullUtxo.out | sort -k3 -nr | sed -e '/lovelace + [0-9]/d' &gt; balance.out\n\ncat balance.out\n</code></pre></p> <p>UTXO\u8a08\u7b97 <pre><code>tx_in=\"\"\ntotal_balance=0\nwhile read -r utxo; do\n    in_addr=$(awk '{ print $1 }' &lt;&lt;&lt; \"${utxo}\")\n    idx=$(awk '{ print $2 }' &lt;&lt;&lt; \"${utxo}\")\n    utxo_balance=$(awk '{ print $3 }' &lt;&lt;&lt; \"${utxo}\")\n    total_balance=$((${total_balance}+${utxo_balance}))\n    echo TxHash: ${in_addr}#${idx}\n    echo ADA: ${utxo_balance}\n    tx_in=\"${tx_in} --tx-in ${in_addr}#${idx}\"\ndone &lt; balance.out\ntxcnt=$(cat balance.out | wc -l)\necho Total ADA balance: ${total_balance}\necho Number of UTXOs: ${txcnt}\n</code></pre></p> <p>\u6295\u7968\u7528\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b <pre><code>cd $NODE_HOME\ncardano-cli conway transaction build \\\n    $NODE_NETWORK \\\n    ${tx_in} \\\n    --change-address $(cat payment.addr) \\\n    --metadata-json-file $HOME/git/spo-poll/poll_${txHash}-poll-answer.json \\\n    --json-metadata-detailed-schema \\\n    --required-signer-hash $(cat pool.id) \\\n    --out-file $NODE_HOME/poll-answer.tx\n</code></pre></p> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>BP\u306e<code>poll-answer.tx</code> \u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[BP] --&gt;|poll-answer.tx| B[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7];</code></pre></p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u3067\u7f72\u540d\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\nchmod u+rwx $HOME/cold-keys\ncardano-cli conway transaction sign \\\n    --tx-body-file poll-answer.tx \\\n    --signing-key-file $HOME/cold-keys/node.skey \\\n    --signing-key-file payment.skey \\\n    $NODE_NETWORK \\\n    --out-file poll-answer-tx.signed\nchmod a-rwx $HOME/cold-keys\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306e<code>poll-answer-tx.signed</code> \u3092BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|poll-answer-tx.signed| B[BP];</code></pre></p> <p>BP\u3067\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u9001\u4fe1\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>submit_txHash=$(cardano-cli conway transaction txid --tx-file $NODE_HOME/poll-answer.tx)\ncardano-cli conway transaction submit --tx-file $NODE_HOME/poll-answer-tx.signed $NODE_NETWORK\n</code></pre> <p>\u6570\u5206\u5f8c\u306b\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30e1\u30bf\u30c7\u30fc\u30bf\u3092\u78ba\u8a8d\u3059\u308b <pre><code>curl -sX POST \"https://api.koios.rest/api/v1/tx_metadata\" -H \"accept: application/json\" -H \"content-type: application/json\"  -d \"{\\\"_tx_hashes\\\":[\\\"${submit_txHash}\\\"]}\" | jq .\n</code></pre></p>"},{"location":"operation/spo-poll/#2-1","title":"2-1. \u6295\u7968\u78ba\u8a8d","text":"<p>CIP-0094\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3067\u81ea\u8eab\u306e\u6295\u7968\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u3087\u3046\uff01 Adastat.net [Mainnet] / Cardanoscan.io [Mainnet]</p> <p>\u4ee5\u4e0a\u3067\u3059\u3002</p>"},{"location":"operation/topology-updater/","title":"\u624b\u52d5\u30c8\u30dd\u30ed\u30b8\u30fc\u8a2d\u5b9a","text":"<p>\u6ce8\u610f</p> <p>\u73fe\u5728\u306e\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u30c8\u30dd\u30ed\u30b8\u30fc\u5f62\u6210\u306f\u30c0\u30a4\u30ca\u30df\u30c3\u30afP2P\u3078\u79fb\u884c\u3057\u3066\u3044\u307e\u3059\u3002 \u3053\u306e\u8a2d\u5b9a\u306f\u4eca\u5f8c\u5ec3\u6b62\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"operation/topology-updater/#_2","title":"\u4e8b\u524d\u6e96\u5099","text":"<p>\u30ce\u30fc\u30c9\u3092\u30b9\u30c8\u30c3\u30d7\u3059\u308b <pre><code>sudo systemctl stop cardano-node\n</code></pre></p> <p>\u624b\u52d5P2P\u7528\u306e\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9 <pre><code>cd $NODE_HOME\nwget --no-use-server-timestamps -q https://book.play.dev.cardano.org/environments/${NODE_CONFIG}/topology-legacy.json -O ${NODE_CONFIG}-topology.json\n</code></pre></p> <p>\u30c0\u30a4\u30ca\u30df\u30c3\u30afP2P\u3092\u7121\u52b9\u306b\u3059\u308b <pre><code>sed -i ${NODE_CONFIG}-config.json \\\n    -e 's!\"EnableP2P\": true!\"EnableP2P\": false!'\n</code></pre></p>"},{"location":"operation/topology-updater/#1-topologyupdater","title":"1. TopologyUpdater\u306e\u8a2d\u5b9a","text":"\u30d5\u30a1\u30a4\u30eb \u7528\u9014 <code>topologyUpdater.sh</code> \u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a7\u30c3\u30c1\u30ea\u30b9\u30c8\u767b\u9332\u30b9\u30af\u30ea\u30d7\u30c8 <code>relay-topology_pull.sh</code> \u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u751f\u6210\u30b9\u30af\u30ea\u30d7\u30c8 <p>\u30ce\u30fc\u30c9\u60c5\u5831\u3092\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a7\u30c3\u30c1\u30ea\u30b9\u30c8\u306b\u767b\u9332\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u300c<code>topologyUpdater.sh</code>\u300d\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p> <p>topologyUpdater.sh\u306b\u3064\u3044\u3066</p> <p>\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u60c5\u5831(IP\u30a2\u30c9\u30ec\u30b9\u3068\u30dd\u30fc\u30c8\u756a\u53f7\u3001\u30aa\u30f3/\u30aa\u30d5\u30e9\u30a4\u30f3\u72b6\u614b)\u3092\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a7\u30c3\u30c1\u30ea\u30b9\u30c8\u30781\u6642\u9593\u306b1\u56de\u9001\u4fe1\u3059\u308b\u3053\u3068\u3067\u3001\u4e16\u754c\u4e2d\u306e\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u306b\u81ea\u30d7\u30fc\u30eb\u306e\u30ea\u30ec\u30fc\u60c5\u5831\u304c\u767b\u9332\u3055\u308c\u308b\u4ed5\u7d44\u307f\u3067\u3059</p>"},{"location":"operation/topology-updater/#1-1","title":"1-1. \u30b9\u30af\u30ea\u30d7\u30c8\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210","text":"<p>\u6ce8\u610f</p> <p>\u4ee5\u4e0b\u306f\u3001\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u306e\u30d1\u30d6\u30ea\u30c3\u30afIP\u3068\u30ce\u30fc\u30c9\u30dd\u30fc\u30c8\u306b\u5408\u308f\u305b\u308b  </p> <ul> <li>CNODE_HOSTNAME\u306e\u300cxxx.xxx.xxx.xx\u300d\u306f\u30ea\u30ec\u30fc\u306e\u30d1\u30d6\u30ea\u30c3\u30afIP(\u9759\u7684)\u30a2\u30c9\u30ec\u30b9\u307e\u305f\u306fDNS\u540d\u306b\u7f6e\u304d\u63db\u3048\u3066\u4e0b\u3055\u3044</li> <li>\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u30dd\u30fc\u30c8\u756a\u53f7\u30926000\u304b\u3089\u5909\u66f4\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u4fee\u6b63\u3057\u3066\u304f\u3060\u3055\u3044</li> <li>\u203b26\u884c\u76ee\u306e\"CHANGE ME\"\u306f\u5909\u66f4\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044</li> </ul> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9 \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/topologyUpdater.sh &lt;&lt; EOF\n#!/bin/bash\n# shellcheck disable=SC2086,SC2034\n\nUSERNAME=$(whoami)\nCNODE_PORT=6000\nCNODE_HOSTNAME=\"xxx.xxx.xxx.xx\"\nCNODE_BIN=\"/usr/local/bin\"\nCNODE_HOME=$NODE_HOME\nCNODE_LOG_DIR=\"\\${CNODE_HOME}/logs\"\nGENESIS_JSON=\"\\${CNODE_HOME}/${NODE_CONFIG}-shelley-genesis.json\"\nNETWORKID=\\$(jq -r .networkId \\$GENESIS_JSON)\nCNODE_VALENCY=1   # optional for multi-IP hostnames\nNWMAGIC=\\$(jq -r .networkMagic &lt; \\$GENESIS_JSON)\n[[ \"\\${NETWORKID}\" = \"Mainnet\" ]] &amp;&amp; HASH_IDENTIFIER=\"--mainnet\" || HASH_IDENTIFIER=\"--testnet-magic \\${NWMAGIC}\"\n[[ \"\\${NWMAGIC}\" = \"764824073\" ]] &amp;&amp; NETWORK_IDENTIFIER=\"--mainnet\" || NETWORK_IDENTIFIER=\"--testnet-magic \\${NWMAGIC}\"\n\nexport PATH=\"\\${CNODE_BIN}:\\${PATH}\"\nexport CARDANO_NODE_SOCKET_PATH=\"\\${CNODE_HOME}/db/socket\"\n\nblockNo=\\$(/usr/local/bin/cardano-cli conway query tip \\${NETWORK_IDENTIFIER} | jq -r .block )\n\n# Note:\n# if you run your node in IPv4/IPv6 dual stack network configuration and want announced the\n# IPv4 address only please add the -4 parameter to the curl command below  (curl -4 -s ...)\nif [ \"\\${CNODE_HOSTNAME}\" != \"CHANGE ME\" ]; then\nT_HOSTNAME=\"&amp;hostname=\\${CNODE_HOSTNAME}\"\nelse\nT_HOSTNAME=''\nfi\n\nif [ ! -d \\${CNODE_LOG_DIR} ]; then\nmkdir -p \\${CNODE_LOG_DIR};\nfi\n\ncurl -4 -s \"https://api.clio.one/htopology/v1/?port=\\${CNODE_PORT}&amp;blockNo=\\${blockNo}&amp;valency=\\${CNODE_VALENCY}&amp;magic=\\${NWMAGIC}\\${T_HOSTNAME}\" | tee -a \\$CNODE_LOG_DIR/topologyUpdater_lastresult.json\nEOF\n</code></pre> <p>\u6a29\u9650\u3092\u8ffd\u52a0\u3057\u3001\u300ctopologyUpdater.sh\u300d\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\nchmod +x topologyUpdater.sh\n./topologyUpdater.sh\n</code></pre> <p><code>topologyUpdater.sh</code>\u304c\u6b63\u5e38\u306b\u5b9f\u884c\u3055\u308c\u305f\u5834\u5408\u3001\u4ee5\u4e0b\u306e\u5f62\u5f0f\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002</p> <p><code>{ \"resultcode\": \"201\", \"datetime\":\"2020-07-28 01:23:45\", \"clientIp\": \"1.2.3.4\", \"iptype\": 4, \"msg\": \"nice to meet you\" }</code></p> <p>\u6ce8\u610f</p> <p>\u203b<code>topologyUpdater.sh</code>\u306f1\u6642\u9593\u4ee5\u5185\u306b2\u56de\u4ee5\u4e0a\u5b9f\u884c\u3057\u306a\u3044\u3067\u4e0b\u3055\u3044\u3002\u6700\u60aa\u306e\u5834\u5408\u30d6\u30e9\u30c3\u30af\u30ea\u30b9\u30c8\u306b\u8ffd\u52a0\u3055\u308c\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u5b9f\u884c\u3055\u308c\u308b\u305f\u3073\u306b\u3001<code>$NODE_HOME/logs</code>\u306b\u30ed\u30b0\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002 </p>"},{"location":"operation/topology-updater/#1-2-cron","title":"1-2. Cron\u30b8\u30e7\u30d6\u306e\u8a2d\u5b9a","text":"<p>crontab\u30b8\u30e7\u30d6\u3092\u8ffd\u52a0\u3057\u3001\u300ctopologyUpdater.sh\u300d\u30921\u6642\u9593\u306b1\u56de\u81ea\u52d5\u5b9f\u884c\u3055\u308c\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002</p> <p>\u6ce8\u610f</p> <ul> <li>\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u306f\u8907\u6570\u56de\u5b9f\u884c\u3057\u306a\u3044\u3067\u4e0b\u3055\u3044\u3002\u8907\u6570\u56de\u5b9f\u884c\u3057\u305f\u5834\u5408\u3001\u540c\u3058\u6642\u9593\u306b\u8907\u6570\u81ea\u52d5\u5b9f\u884c\u3055\u308c\u308b\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u304c\u767b\u9332\u3055\u308c\u3066\u3057\u307e\u3046\u306e\u3067\u3001\u30d6\u30e9\u30c3\u30af\u30ea\u30b9\u30c8\u306b\u5165\u308a\u307e\u3059\u3002</li> <li>\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u306f\u6bce\u66425\u5206\u306b\u5b9f\u884c\u3055\u308c\u308b\u3088\u3046\u306b\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002 \u3000</li> </ul> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9 \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/crontab-fragment.txt &lt;&lt; EOF\n5 * * * * ${NODE_HOME}/topologyUpdater.sh\nEOF\ncrontab -l | cat - crontab-fragment.txt &gt;crontab.txt &amp;&amp; crontab crontab.txt\nrm crontab-fragment.txt\n</code></pre> <p>no crontab for ~~ \u3068\u3044\u3046\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u304c\u3001Cron\u521d\u56de\u8a2d\u5b9a\u6642\u306b\u8868\u793a\u3055\u308c\u308b\u30e1\u30c3\u30bb\u30fc\u30b8\u3068\u306a\u308a\u307e\u3059\u306e\u3067\u3001\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002</p> <p><pre><code>crontab -l\n</code></pre> \u4ee5\u4e0b\u304c\u8fd4\u308a\u5024\u3068\u3057\u3066\u8868\u793a\u3055\u308c\u308c\u3070OK\u3002</p> <p>\"5 * * * * /home/***/cnode/topologyUpdater.sh\"</p> <p>\u30d5\u30a7\u30c3\u30c1\u30ea\u30b9\u30c8\u3078\u306e\u767b\u9332\u306b\u3064\u3044\u3066</p> <p>4\u6642\u9593\u306e\u9593\u30674\u56de\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u5b9f\u884c\u3055\u308c\u305f\u5f8c\u306b\u3001\u30ce\u30fc\u30c9\u304c\u30aa\u30f3\u30e9\u30a4\u30f3\u72b6\u614b\u3067\u6709\u308b\u3053\u3068\u304c\u8a8d\u3081\u3089\u308c\u305f\u5834\u5408\u306b\u30ce\u30fc\u30c9IP\u304c\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a7\u30c3\u30c1\u30ea\u30b9\u30c8\u306b\u767b\u9332\u3055\u308c\u307e\u3059\u3002\u4e0a\u8a18\u8a2d\u5b9a\u304b\u30894\u6642\u9593\u5f8c\u306b\u6b21\u306e\u9805\u76ee\u3092\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"operation/topology-updater/#1-3","title":"1-3. \u30d5\u30a7\u30c3\u30c1\u30ea\u30b9\u30c8\u767b\u9332\u78ba\u8a8d","text":"\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME/logs\ncat topologyUpdater_lastresult.json\n</code></pre> <p>\u4ee5\u4e0b\u306e\u5185\u5bb9\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308c\u3070\u767b\u9332\u6210\u529f \u6700\u5f8c\u306e\u4e00\u884c\u304c\u6700\u65b0\u306eresultcode\u306b\u306a\u308a\u3001400\u756a\u53f0\u30fb500\u756a\u53f0\u306e\u5834\u5408\u306f\u3001\u30b5\u30fc\u30d0\u8a2d\u5b9a\u306b\u554f\u984c\u304c\u3042\u308a\u307e\u3059\u3002 <pre><code>{ \"resultcode\": \"201\", \"datetime\":\"2021-01-10 18:30:06\", \"clientIp\": \"000.000.000.000\", \"iptype\": 4, \"msg\": \"nice to meet you\" }\n{ \"resultcode\": \"203\", \"datetime\":\"2021-01-10 19:30:03\", \"clientIp\": \"000.000.000.000\", \"iptype\": 4, \"msg\": \"welcome to the topology\" }\n{ \"resultcode\": \"204\", \"datetime\":\"2021-01-10 20:30:04\", \"clientIp\": \"000.000.000.000\", \"iptype\": 4, \"msg\": \"glad you're staying with us\" }\n</code></pre></p>"},{"location":"operation/topology-updater/#1-4","title":"1-4. \u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3059\u308b","text":"<p>\u524d\u63d0\u6761\u4ef6</p> <p>\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9IP\u304c\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a7\u30c3\u30c1\u30ea\u30b9\u30c8\u306b\u767b\u9332\u3055\u308c\u305f\u3053\u3068\u3092\u78ba\u8a8d\u5f8c\u3001\u4ee5\u4e0b\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u3092\u5b9f\u884c\u3057\u3066\u4e0b\u3055\u3044\u3002</p> \u30c8\u30dd\u30ed\u30b8\u30fc\u306e\u5f62\u6210\u65b9\u6cd5\u25bc <p>\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u3092\u66f4\u65b0\u3059\u308b<code>relay-topology_pull.sh</code>\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002  \u3053\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f5c\u6210\u30fb\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\u3001\u4e16\u754c\u4e2d\u306e\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u60c5\u5831\u306e\u4e2d\u304b\u3089\u81ea\u5206\u306e\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u306b\u5bfe\u3057\u3066\u8fd1\u8ddd\u96e2\u30fb\u4e2d\u8ddd\u96e2\u30fb\u9060\u8ddd\u96e2\u306b\u5206\u6563\u3057\u305f\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u3092\u62bd\u51fa\u3057\u534a\u81ea\u52d5\u3067\u30c8\u30dd\u30ed\u30b8\u30fc\u3092\u5f62\u6210\u3067\u304d\u307e\u3059\u3002 </p> \u500b\u5225\u306b\u8ffd\u52a0\u3057\u305f\u3044\u5834\u5408\u25bc <p>\u203b\u304a\u77e5\u308a\u5408\u3044\u306e\u30ce\u30fc\u30c9\u3084\u81ea\u30ce\u30fc\u30c9\u304c\u8907\u6570\u3042\u308b\u5834\u5408\u306f\u3001IOHK\u30ce\u30fc\u30c9\u60c5\u5831\u306e\u5f8c\u306b \"|\" \u3067\u533a\u5207\u3063\u3066<code>IP\u30a2\u30c9\u30ec\u30b9</code>:<code>\u30dd\u30fc\u30c8\u756a\u53f7</code>:<code>Valency</code> \u306e\u5f62\u5f0f\u3067\u8ffd\u52a0\u3067\u304d\u307e\u3059\u3002 <pre><code>|relays-new.cardano-mainnet.iohk.io:3001:2|relay1-eu.xstakepool.com:3001:1|00.000.000.00:3001:1\n</code></pre></p> <p>\u6ce8\u610f</p> <p>\u4ee5\u4e0b\u306f\u3001BP\u306e\u30d1\u30d6\u30ea\u30c3\u30afIP\u3068\u30ce\u30fc\u30c9\u30dd\u30fc\u30c8\u306b\u66f8\u304d\u63db\u3048\u3066\u304b\u3089\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b BLOCKPRODUCING_IP\u306e\u300cxxx.xxx.xxx\u300d\u306fBP\u306e\u30d1\u30d6\u30ea\u30c3\u30afIP(\u9759\u7684)\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u3066\u4e0b\u3055\u3044 BLOCKPRODUCING_PORT\u306f\u4efb\u610f\u3067\u8a2d\u5b9a\u3057\u305f\u756a\u53f7\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9 \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/relay-topology_pull.sh &lt;&lt; EOF\n#!/bin/bash\nBLOCKPRODUCING_IP=xxx.xxx.xxx\nBLOCKPRODUCING_PORT=xxxxx\nPEERS=18\ncp $NODE_HOME/${NODE_CONFIG}-topology.json $NODE_HOME/${NODE_CONFIG}-topology-bk.json\ncurl -4 -s -o $NODE_HOME/${NODE_CONFIG}-topology.json \"https://api.clio.one/htopology/v1/fetch/?max=\\${PEERS}&amp;customPeers=\\${BLOCKPRODUCING_IP}:\\${BLOCKPRODUCING_PORT}:1|relays-new.cardano-mainnet.iohk.io:3001:2\"\nEOF\n</code></pre> <p>sh\u30d5\u30a1\u30a4\u30eb\u306b\u6a29\u9650\u3092\u8ffd\u52a0\u3057\u3001relay-topology_pull.sh\u3092\u5b9f\u884c\u3059\u308b</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\nchmod +x relay-topology_pull.sh\n./relay-topology_pull.sh\n</code></pre> <p>relay-topology_pull.sh\u3092\u5b9f\u884c\u3059\u308b\u3068\u65b0\u3057\u3044\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb(mainnet-topology.json)\u3092\u751f\u6210\u3057\u307e\u3059\u3002</p> <p>\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u3092\u66f4\u65b0\u3057\u305f\u5834\u5408\u306f\u3001\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u3092\u518d\u8d77\u52d5\u3059\u308b\u3053\u3068\u3092\u5fd8\u308c\u306a\u3044\u3067\u4e0b\u3055\u3044\u3002</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9 <pre><code>sudo systemctl start cardano-node\n</code></pre>"},{"location":"operation/topology-updater/#1-5","title":"1-5. \u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u66f4\u65b0\u65b9\u6cd5","text":"<p>\u6982\u8981</p> <p>\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u306b\u8a18\u8f09\u3055\u308c\u3066\u308b\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u306f\u5e38\u306b\u6700\u65b0\u72b6\u614b\u3092\u4fdd\u3064\u3053\u3068\u304c\u671b\u307e\u3057\u3044\u305f\u3081\u30011\u30a8\u30dd\u30c3\u30af\u306b1\u56de\u306f\u66f8\u304d\u63db\u3048\u308b\u3053\u3068\u3092\u63a8\u5968\u3057\u307e\u3059\u3002</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\n./relay-topology_pull.sh\n</code></pre> <p>\u30d2\u30f3\u30c8</p> <p>relay-topology_pull.sh\u3092\u5b9f\u884c\u3059\u308b\u3068\u65b0\u3057\u3044\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb(mainnet-topology.json)\u3092\u751f\u6210\u3057\u307e\u3059\u3002 \u65b0\u3057\u3044\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u306f\u30ce\u30fc\u30c9\u518d\u8d77\u52d5\u5f8c\u306b\u6709\u52b9\u306b\u306a\u308a\u307e\u3059\u3002</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9 <pre><code>sudo systemctl reload-or-restart cardano-node\n</code></pre>"},{"location":"operation/transfer/","title":"\u30b5\u30fc\u30d0\u30fc\u9593\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001","text":"<p>\u30e1\u30ea\u30c3\u30c8</p> <p>\u8907\u6570\u53f0\u306e\u30b5\u30fc\u30d0\u30fc\u304c\u3042\u308b\u5834\u5408\u306b\u3001\u4ee5\u4e0b\u306e\u51e6\u7406\u3092\u884c\u3046\u3053\u3068\u3067\u30d3\u30eb\u30c9\u6642\u9593\u306e\u77ed\u7e2e\u3084\u30ce\u30fc\u30c9\u306e\u30c0\u30a6\u30f3\u30bf\u30a4\u30e0\u3092\u6291\u3048\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002</p> <p>\u30c7\u30e1\u30ea\u30c3\u30c8</p> <ul> <li>RSYNC+SSH\u3092\u5229\u7528\u3057\u305f\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u65b9\u6cd5\u306f\u3001\u8ee2\u9001\u5143\u30fb\u8ee2\u9001\u5148\u30b5\u30fc\u30d0\u30fc\u306e\u30c7\u30a3\u30b9\u30af\u7a7a\u304d\u5bb9\u91cf\u304c150GB\u4ee5\u4e0a\u5fc5\u8981\u3068\u306a\u308a\u307e\u3059\u3002</li> </ul> <p>\u306f\u3058\u3081\u306b</p> <ul> <li>RSYNC\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\u3001\u6700\u521d\u306b\u4e8b\u524d\u8a2d\u5b9a\u3092\u884c\u3063\u3066\u304f\u3060\u3055\u3044</li> </ul>"},{"location":"operation/transfer/#1-nodecli","title":"1. \u30d0\u30a4\u30ca\u30ea\u30d5\u30a1\u30a4\u30eb(node/cli)\u8ee2\u9001\u306e\u5834\u5408","text":""},{"location":"operation/transfer/#1-1","title":"1-1.\u8ee2\u9001\u5143\u30b5\u30fc\u30d0\u30fc\u4f5c\u696d","text":"\u8ee2\u9001\u5143\u30b5\u30fc\u30d0\u30fc <p>\u30d0\u30a4\u30ca\u30ea\u30fc\u30d5\u30a1\u30a4\u30eb\u3092\u8ee2\u9001\u30d5\u30a9\u30eb\u30c0\u7528\u306b\u30b3\u30d4\u30fc\u3059\u308b <pre><code>mkdir $NODE_HOME/Transfer\ncp $(find $HOME/git/cardano-node/dist-newstyle/build -type f -name \"cardano-cli\") $NODE_HOME/Transfer/cardano-cli\ncp $(find $HOME/git/cardano-node/dist-newstyle/build -type f -name \"cardano-node\") $NODE_HOME/Transfer/cardano-node\n</code></pre></p> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>$NODE_HOME/Transfer/cardano-cli version\n$NODE_HOME/Transfer/cardano-node version\n</code></pre></p> <p>\u5e0c\u671b\u3059\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u306a\u3063\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3059\u308b</p>"},{"location":"operation/transfer/#1-2","title":"1-2.\u8ee2\u9001\u5143\u304b\u3089\u8ee2\u9001\u5148\u3078\u8ee2\u9001\u3059\u308b","text":"<p>\u5909\u6570<code>for</code>\u306b\u8ee2\u9001\u5148\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u4ee3\u5165\u3059\u308b</p> \u8ee2\u9001\u5143\u30b5\u30fc\u30d0\u30fc <p>\u8ee2\u9001\u5148\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u6307\u5b9a\u3059\u308b</p> <pre><code>for=xxxx\n</code></pre> <p>\u8ee2\u9001\u5148\u30a8\u30a4\u30ea\u30a2\u30b9\u306f\u3001\u4e8b\u524d\u8a2d\u5b9a\u306e 1-2.SSH\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210 \u3067\u8a2d\u5b9a\u3057\u305f\u8ee2\u9001\u5148Host\u540d(\u30a8\u30a4\u30ea\u30a2\u30b9)\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002</p> <p>\u30d5\u30a1\u30a4\u30eb\u3092\u8ee2\u9001\u3059\u308b <pre><code>rsync -P --rsh=ssh $NODE_HOME/Transfer/cardano-cli $for::Server/cardano-cli\n</code></pre></p> <p>\u8ee2\u9001\u304c\u5b8c\u4e86\u3059\u308b\u307e\u3067\u5f85\u3064</p> <pre><code>rsync -P --rsh=ssh $NODE_HOME/Transfer/cardano-node $for::Server/cardano-node\n</code></pre> <p>\u8ee2\u9001\u304c\u5b8c\u4e86\u3059\u308b\u307e\u3067\u5f85\u3064</p>"},{"location":"operation/transfer/#1-3","title":"1-3.\u8ee2\u9001\u5148\u30b5\u30fc\u30d0\u30fc\u4f5c\u696d","text":"\u8ee2\u9001\u5148\u30b5\u30fc\u30d0\u30fc <p>\u30ce\u30fc\u30c9\u3092\u505c\u6b62\u3059\u308b <pre><code>sudo systemctl stop cardano-node\n</code></pre></p> <p>\u30d0\u30a4\u30ca\u30ea\u30fc\u30d5\u30a1\u30a4\u30eb\u3092\u30b7\u30b9\u30c6\u30e0\u30d5\u30a9\u30eb\u30c0\u30fc\u3078\u30b3\u30d4\u30fc\u3059\u308b <pre><code>sudo cp $NODE_HOME/cardano-cli /usr/local/bin/cardano-cli\n</code></pre> <pre><code>sudo cp $NODE_HOME/cardano-node /usr/local/bin/cardano-node\n</code></pre> \u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>cardano-cli version\ncardano-node version\n</code></pre></p> <p>\u5e0c\u671b\u3059\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u306a\u3063\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3059\u308b</p> <p>\u30ce\u30fc\u30c9\u3092\u8d77\u52d5\u3059\u308b <pre><code>sudo systemctl start cardano-node\n</code></pre></p> <p>\u30d2\u30f3\u30c8</p> <ul> <li>GliveView\u3067\u30ce\u30fc\u30c9\u72b6\u6cc1\u3092\u78ba\u8a8d\u3059\u308b</li> <li>Syncing 100%\u304cTip(diff): ** :)\u3068\u306a\u308b\u307e\u3067\u5f85\u3064</li> </ul>"},{"location":"operation/transfer/#2-db","title":"2. DB\u30d5\u30a9\u30eb\u30c0\u8ee2\u9001\u306e\u5834\u5408","text":""},{"location":"operation/transfer/#2-1","title":"2-1. \u8ee2\u9001\u5143\u30b5\u30fc\u30d0\u30fc\u4f5c\u696d","text":"<p>\u5bb9\u91cf\u78ba\u8a8d \u8ee2\u9001\u5143\u30fb\u8ee2\u9001\u5148\u30b5\u30fc\u30d0\u30fc\u4e21\u65b9\u3067\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044 <pre><code>df -h /usr\n</code></pre> Avail\u304c180GB\u4ee5\u4e0a\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> \u8ee2\u9001\u5143\u30b5\u30fc\u30d0\u30fc <p>\u30ce\u30fc\u30c9\u3092\u505c\u6b62\u3059\u308b <pre><code>sudo systemctl stop cardano-node\n</code></pre></p> <p>DB\u30d5\u30a9\u30eb\u30c0\u3092\u5727\u7e2e\u3059\u308b</p> <p>\u65b0\u3057\u3044TMUX\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u958b\u304f <pre><code>tmux new -s tar\n</code></pre> \u5727\u7e2e\u3059\u308b <pre><code>tar cvzf $NODE_HOME/Transfer/cardano-db.tar.gz -C $NODE_HOME db\n</code></pre></p> <p>\u5727\u7e2e\u304c\u7d42\u4e86\u3057\u305f\u3089TMUX\u3092\u9589\u3058\u308b <pre><code>exit\n</code></pre></p> <p>\u30ce\u30fc\u30c9\u3092\u30b9\u30bf\u30fc\u30c8\u3059\u308b <pre><code>sudo systemctl start cardano-node\n</code></pre></p>"},{"location":"operation/transfer/#2-2","title":"2-2. \u8ee2\u9001\u5143\u304b\u3089\u8ee2\u9001\u5148\u3078\u8ee2\u9001\u3059\u308b","text":"\u8ee2\u9001\u5143\u30b5\u30fc\u30d0\u30fc <p>\u65b0\u3057\u3044TMUX\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u958b\u304f <pre><code>tmux new -s rsync\n</code></pre></p> <p>\u8ee2\u9001\u5148\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u6307\u5b9a\u3059\u308b\u3002\u5909\u6570<code>for</code>\u306b\u8ee2\u9001\u5148\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u4ee3\u5165\u3059\u308b</p> <pre><code>for=xxxx\n</code></pre> <p>\u8ee2\u9001\u5148\u30a8\u30a4\u30ea\u30a2\u30b9\u306f\u3001\u4e8b\u524d\u8a2d\u5b9a\u306e 1-2.SSH\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210 \u3067\u8a2d\u5b9a\u3057\u305f\u8ee2\u9001\u5148Host\u540d(\u30a8\u30a4\u30ea\u30a2\u30b9)\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002</p> <p>\u5727\u7e2e\u3055\u308c\u305fDB\u3092\u8ee2\u9001\u3059\u308b <pre><code>rsync -P --rsh=ssh $NODE_HOME/Transfer/cardano-db.tar.gz $for::Server/cardano-db.tar.gz\n</code></pre></p> <p>\u8ee2\u9001\u304c\u5b8c\u4e86\u3059\u308b\u307e\u3067\u5f85\u3064</p> <p>\u8ee2\u9001\u304c\u7d42\u4e86\u3057\u305f\u3089TMUX\u3092\u9589\u3058\u308b <pre><code>exit\n</code></pre></p>"},{"location":"operation/transfer/#2-3","title":"2-3. \u8ee2\u9001\u5148\u30b5\u30fc\u30d0\u30fc\u4f5c\u696d","text":"<p>\u65b0\u3057\u3044TMUX\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u958b\u304f <pre><code>tmux new -s tar\n</code></pre></p> \u8ee2\u9001\u5148\u30b5\u30fc\u30d0\u30fc <p>SSD\u306e\u7a7a\u304d\u5bb9\u91cf\u3092\u518d\u78ba\u8a8d\u3059\u308b <pre><code>df -h /usr\n</code></pre> Avail\u304c100GB\u4ee5\u4e0a\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>DB\u3092\u89e3\u51cd\u3059\u308b <pre><code>mkdir $NODE_HOME/temp\ntar -xzvf $NODE_HOME/cardano-db.tar.gz -C $NODE_HOME/temp/\n</code></pre></p> <p>DB\u306e\u89e3\u51cd\u304c\u7d42\u308f\u308b\u307e\u3067\u5f85\u3061\u307e\u3059</p> <p>\u89e3\u51cd\u304c\u7d42\u308f\u3063\u305f\u3089TMUX\u3092\u9589\u3058\u308b <pre><code>exit\n</code></pre></p> <p>\u30ce\u30fc\u30c9\u3092\u505c\u6b62\u3059\u308b <pre><code>sudo systemctl stop cardano-node\n</code></pre></p> <p>DB\u30d5\u30a9\u30eb\u30c0\u3092\u5165\u308c\u66ff\u3048\u308b <pre><code>mv $NODE_HOME/db $NODE_HOME/db_134\nmv $NODE_HOME/temp/db $NODE_HOME/db\n</code></pre></p> <p>\u30ce\u30fc\u30c9\u3092\u8d77\u52d5\u3059\u308b <pre><code>sudo systemctl start cardano-node\n</code></pre></p> <p>\u30d2\u30f3\u30c8</p> <ul> <li>GliveView\u3067\u30ce\u30fc\u30c9\u72b6\u6cc1\u3092\u78ba\u8a8d\u3059\u308b</li> <li>Syncing 100%\u304cTip(diff): ** :)\u3068\u306a\u308b\u307e\u3067\u5f85\u3064</li> </ul> <p>\u30d0\u30a4\u30ca\u30ea\u30fc\u30d5\u30a1\u30a4\u30eb\u3092\u79fb\u52d5\u3059\u308b <pre><code>cd $HOME/git\nrm -rf cardano-node-old/\nmv $HOME/git/cardano-node/ $HOME/git/cardano-node-old/\nmkdir cardano-node\nmv $NODE_HOME/cardano-cli $HOME/git/cardano-node/\nmv $NODE_HOME/cardano-node $HOME/git/cardano-node/\n</code></pre></p> <p>\u78ba\u8a8d</p> <p>\u30ce\u30fc\u30c9\u306e\u540c\u671f\u304c\u6210\u529f\u3057\u30d6\u30ed\u30c3\u30af\u751f\u6210\u306b\u6210\u529f\u3057\u6570\u30a8\u30dd\u30c3\u30af\u69d8\u5b50\u3092\u898b\u305f\u3042\u3068\u3001\u8ee2\u9001\u7528\u30d5\u30a1\u30a4\u30eb\u30fb\u30d0\u30c3\u30af\u30a2\u30c3\u30d7DB\u3092\u524a\u9664\u3057\u3066\u304f\u3060\u3055\u3044</p> \u8ee2\u9001\u5143\u8ee2\u9001\u5148 <pre><code>rm -rf $NODE_HOME/Transfer\n</code></pre> <pre><code>rm -rf $NODE_HOME/db_134\nrm $NODE_HOME/1.35.3-db.tar.gz\n</code></pre>"},{"location":"operation/ubuntu22-migration/","title":"Ubuntu20.04\u219222.04\u3078\u306e\u79fb\u884c","text":"<p>\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u524d\u306e\u78ba\u8a8d\u4e8b\u9805</p> <ul> <li>2025\u5e743\u6708\u6642\u70b9\u306b\u304a\u3044\u3066\u3001\u3053\u306e\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u306f\u5fc5\u9808\u3067\u3059\u3002</li> <li>20.04LTS\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b5\u30dd\u30fc\u30c8\u306f2025\u5e744\u6708\u307e\u3067\u6709\u52b9\u3067\u3059\u3002</li> <li>\u4f5c\u696d\u524d\u306b\u4e00\u901a\u308a\u719f\u8aad\u3057\u3001\u4f5c\u696d\u30d5\u30ed\u30fc\u3092\u7406\u89e3\u3057\u3066\u4e0b\u3055\u3044\u3002</li> <li>OS\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u306e\u305f\u3081\u3001\u4f5c\u696d\u306f\u614e\u91cd\u306b\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> </ul>"},{"location":"operation/ubuntu22-migration/#1","title":"1. \u4e8b\u524d\u6e96\u5099","text":""},{"location":"operation/ubuntu22-migration/#1-1","title":"1-1. \u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u306e\u4f5c\u6210","text":"<p>\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u306e\u4f5c\u6210</p> <p>\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u524d\u306b\u5fc5\u305a\u3001VPS\u306e\u30b5\u30fc\u30d0\u30fc\u7ba1\u7406\u753b\u9762\u304b\u3089\u73fe\u6642\u70b9\u306e\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8(\u30d0\u30c3\u30af\u30a2\u30c3\u30d7)\u3092\u4f5c\u6210\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u4e07\u4e00\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u306b\u5931\u6557\u3057\u305f\u5834\u5408\u3001\u7d20\u65e9\u304f\u5fa9\u65e7\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"operation/ubuntu22-migration/#1-2-ssh","title":"1-2. SSH\u9375\u306e\u7a2e\u985e\u3092\u78ba\u8a8d\u3059\u308b","text":"<p>SSH\u63a5\u7d9a\u7528\u306e\u30ed\u30fc\u30ab\u30eb\u30d1\u30bd\u30b3\u30f3\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u3001SSH\u79d8\u5bc6\u9375\u30d5\u30a1\u30a4\u30eb\u306e\u7a2e\u985e\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <ul> <li>id_rsa</li> <li>ssh_ed25519</li> </ul> <p>\u306e\u3069\u3061\u3089\u304b</p>"},{"location":"operation/ubuntu22-migration/#1-3-ssh","title":"1-3. SSH\u30bf\u30fc\u30df\u30ca\u30eb\u30d0\u30fc\u30b8\u30e7\u30f3\u6700\u65b0\u5316","text":"<p>Windows\u3067R-login\u3092\u3054\u5229\u7528\u306e\u5834\u5408\u306f\u3001\u6700\u65b0\u306eRLogin\u3092\u4f7f\u7528\u3057\u3066\u4e0b\u3055\u3044\u3002</p>"},{"location":"operation/ubuntu22-migration/#1-4","title":"1-4. \u4f5c\u696d\u5bfe\u8c61\u30b5\u30fc\u30d0\u30ed\u30b0\u30a4\u30f3","text":"<p>\u63a5\u7d9a\u65b9\u6cd5</p> <p>1-4\uff5e1-8\u306f\u901a\u5e38\u306eSSH\u63a5\u7d9a\u3067\u4f5c\u696d\u3059\u308b</p> id_rsa\u306e\u5834\u5408ssh_ed25519\u306e\u5834\u5408 <p>22.04\u3067\u306fRSA\u65b9\u5f0f\u304c\u7121\u52b9\u3068\u306a\u3063\u3066\u304a\u308a\u3001\u65b0\u3057\u3044\u9375\u30da\u30a2(ed25519\u6697\u53f7\u65b9\u5f0f)\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p> <p>\u30da\u30a2\u9375\u306e\u4f5c\u6210</p> <pre><code>ssh-keygen -t ed25519 -N '' -C ssh_connect -f ~/.ssh/ssh_ed25519\n</code></pre> <p>ssh_ed25519\uff08\u79d8\u5bc6\u9375\uff09\u3068ssh_ed25519.pub\uff08\u516c\u958b\u9375\uff09\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3059\u308b\u3002</p> <pre><code>cd ~/.ssh\nls\n</code></pre> <p>\u516c\u958b\u9375\u3092\u8a8d\u8a3c\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304d\u8fbc\u3080 <pre><code>cat ssh_ed25519.pub &gt;&gt; authorized_keys\n</code></pre></p> <p>SSH\u9375\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b</p> <ol> <li>R-login\u306e\u5834\u5408\u306f\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u958b\u304f  </li> <li>\u5de6\u5074\u30a6\u30a3\u30f3\u30c9\u30a6(\u30ed\u30fc\u30ab\u30eb\u5074)\u306f\u4efb\u610f\u306e\u968e\u5c64\u306b\u30d5\u30a9\u30eb\u30c0\u3092\u4f5c\u6210\u3059\u308b\u3002  </li> <li>\u53f3\u5074\u30a6\u30a3\u30f3\u30c9\u30a6(\u30b5\u30fc\u30d0\u5074)\u306f\u300c.ssh\u300d\u30d5\u30a9\u30eb\u30c0\u3092\u9078\u629e\u3059\u308b  </li> <li>\u53f3\u5074\u30a6\u30a3\u30f3\u30c9\u30a6\u304b\u3089\u3001<code>ssh_ed25519</code>\u3068<code>ssh_ed25519.pub</code>\u306e\u4e0a\u3067\u53f3\u30af\u30ea\u30c3\u30af\u3057\u3066  \u300c\u30d5\u30a1\u30a4\u30eb\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u300d\u3092\u9078\u629e\u3059\u308b  </li> <li>\u4e00\u65e6\u30b5\u30fc\u30d0\u304b\u3089\u30ed\u30b0\u30a2\u30a6\u30c8\u3059\u308b  </li> <li>R-Login\u306e\u30b5\u30fc\u30d0\u63a5\u7d9a\u7de8\u96c6\u753b\u9762\u3092\u958b\u304d\u3001\u300cSSH\u8a8d\u8a3c\u9375\u300d\u3092\u30af\u30ea\u30c3\u30af\u30574\u3067\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f<code>ssh_ed25519</code>\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u3076  </li> <li>\u30b5\u30fc\u30d0\u3078\u63a5\u7d9a\u3059\u308b</li> </ol> <p>\u203b4\u3067\u30ed\u30fc\u30ab\u30eb\u306b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305fSSH\u9375\u30da\u30a2\u306f\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u3092\u30aa\u30b9\u30b9\u30e1\u3057\u307e\u3059\u3002</p> <p>\u30b5\u30fc\u30d0\u30fc\u306b\u63a5\u7d9a\u3067\u304d\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u3001\u30b5\u30fc\u30d0\u30fc\u5185\u306e\u9375\u3092\u524a\u9664\u3059\u308b <pre><code>rm ~/.ssh/ssh_ed25519\nrm ~/.ssh/ssh_ed25519.pub\n</code></pre></p> <p>Ubuntu22.04\u306b\u5bfe\u5fdc\u3057\u305f\u6697\u53f7\u65b9\u5f0f\u3067\u3059\u3002\u6b21\u306e\u9805\u76ee\u306b\u79fb\u52d5\u3057\u3066\u4e0b\u3055\u3044\u3002</p>"},{"location":"operation/ubuntu22-migration/#1-5","title":"1-5. \u30ce\u30fc\u30c9\u3092\u505c\u6b62\u3059\u308b","text":"<pre><code>sudo systemctl stop cardano-node\n</code></pre> <p>\u81ea\u52d5\u8d77\u52d5\u3092\u4e00\u65e6\u505c\u6b62\u3059\u308b <pre><code>sudo systemctl disable cardano-node\n</code></pre></p>"},{"location":"operation/ubuntu22-migration/#1-6","title":"1-6. \u30b7\u30b9\u30c6\u30e0\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8","text":"<p><pre><code>sudo apt update -y &amp;&amp; sudo apt upgrade -y\n</code></pre> <pre><code>cd /usr/lib/python3/dist-packages/\nsudo cp apt_pkg.cpython-38-x86_64-linux-gnu.so apt_pkg.so\n</code></pre> <pre><code>sudo apt install --reinstall python3-apt\n</code></pre></p> <p>Python\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3059\u308b <pre><code>python3 -V\n</code></pre></p> <p>3.10\u4ee5\u4e0b\u3067\u3042\u308c\u3070OK</p> \u623b\u308a\u5024\u304cpython3.12\u306e\u5834\u5408 <p><pre><code>sudo update-alternatives --install /usr/bin/python3 python3 /usr/bin/python3.8 2\n</code></pre> <pre><code>python3 -V\n</code></pre></p> <p>Python 3.8.10\u306b\u306a\u3063\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b</p>"},{"location":"operation/ubuntu22-migration/#1-7","title":"1-7. \u30d1\u30c3\u30b1\u30fc\u30b8\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<pre><code>sudo apt install update-manager-core\n</code></pre>"},{"location":"operation/ubuntu22-migration/#1-8-ubuntu","title":"1-8. Ubuntu\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d","text":"<p>\u73fe\u5728\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3059\u308b</p> <pre><code>cat /etc/os-release | grep \"VERSION=\"\n</code></pre> <p>VERSION=\"20.04.x LTS (Focal Fossa)\"\u3000x\u306e\u6570\u5b57\u306f\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u6642\u671f\u306b\u3088\u3063\u3066\u5909\u308f\u308a\u307e\u3059</p> <p>\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u53ef\u80fd\u306a\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3059\u308b</p> <pre><code>sudo do-release-upgrade -c | grep \"New release\"\n</code></pre> <p>New release '22.04.x LTS' available.\u3000x\u306e\u6570\u5b57\u306f\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u6642\u671f\u306b\u3088\u3063\u3066\u5909\u308f\u308a\u307e\u3059</p>"},{"location":"operation/ubuntu22-migration/#1-9","title":"1-9. \u30b7\u30b9\u30c6\u30e0\u3092\u518d\u8d77\u52d5","text":"<pre><code>sudo reboot\n</code></pre>"},{"location":"operation/ubuntu22-migration/#2-ubuntu","title":"2. Ubuntu\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9","text":"<p>\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u306e\u6ce8\u610f\u70b9</p> <p>Ubuntu22.04\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9(\u4ee5\u4e0b\u306e\u4f5c\u696d)\u306b\u304a\u3044\u3066\u3001SSH\u63a5\u7d9a\u3067\u306e\u4f5c\u696d\u306f\u4e0d\u610f\u306a\u5207\u65ad\u304c\u767a\u751f\u3057\u305f\u5834\u5408\u306b\u5fa9\u65e7\u304c\u56f0\u96e3\u306b\u306a\u308b\u305f\u3081\u975e\u63a8\u5968\u3068\u306a\u3063\u3066\u304a\u308a\u307e\u3059\u3002</p> <p>\u305d\u306e\u305f\u3081\u3001\u5951\u7d04\u4e8b\u696d\u8005(VPS)\u306e\u30de\u30a4\u30da\u30fc\u30b8\u307e\u305f\u306f\u30b5\u30fc\u30d0\u30d1\u30cd\u30eb\u306b\u4ed8\u968f\u3057\u3066\u3044\u308b\u30b3\u30f3\u30bd\u30fc\u30eb\u753b\u9762(VNC\u307e\u305f\u306fKVN\u306a\u3069)\u304b\u3089\u306e\u4f5c\u696d\u3092\u30aa\u30b9\u30b9\u30e1\u3057\u307e\u3059\u3002</p> <p>\u305f\u3060\u3057\u4ee5\u4e0b\u306e\u70b9\u306b\u3054\u4e86\u627f\u9802\u3051\u308b\u5834\u5408\u306fSSH\u63a5\u7d9a\u3067\u4f5c\u696d\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002</p> <ul> <li>\u4e8b\u524d\u306b\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8(\u30d0\u30c3\u30af\u30a2\u30c3\u30d7)\u4f5c\u6210\u304c\u53ef\u80fd\u306a\u65b9</li> <li>\u4e0d\u610f\u306aSSH\u5207\u65ad\u3067\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u304c\u4e2d\u65ad\u3057\u3066\u3082\u3054\u81ea\u8eab\u3067\u5fa9\u65e7\u51fa\u6765\u308b\u65b9</li> </ul> <p>SSH\u3067\u4f5c\u696d\u3059\u308b\u5834\u5408</p> <ul> <li> <p>\u4e88\u5099\u306eSSH\u30dd\u30fc\u30c8\u3092\u958b\u653e\u3057\u3066\u304f\u3060\u3055\u3044\u3002 \u203b\u305f\u3060\u3057AWS\u3084IONOS\u306a\u3069\u3001VPS\u30b5\u30fc\u30d0\u30fc\u7ba1\u7406\u753b\u9762\u304b\u3089\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u3092\u8a2d\u5b9a\u3059\u308b\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u306f\u5b9f\u884c\u305b\u305aVPS\u7ba1\u7406\u753b\u9762\u304b\u3089\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002 <pre><code>sudo ufw allow 1022/tcp\nsudo ufw reload\n</code></pre></p> </li> <li> <p>R-login\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\u306f\u3001\u4e0d\u610f\u306a\u5207\u65ad\u3092\u9632\u3050\u305f\u3081\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u884c\u3063\u3066\u4e0b\u3055\u3044\u3002</p> </li> </ul> <p>\u300c\u30d5\u30a1\u30a4\u30eb\u300d\u2192\u300c\u30b5\u30fc\u30d0\u30fc\u306b\u63a5\u7d9a\u300d\u2192 \u63a5\u7d9a\u5148\u53f3\u30af\u30ea\u30c3\u30af\u3057\u300c\u63a5\u7d9a\u3092\u7de8\u96c6\u3059\u308b\u300d\u2192\u300c\u30d7\u30ed\u30c8\u30b3\u30eb\u300d\u2192 SSH\u67a0\u306e\u300cKeepAlve\u30d1\u30b1\u30c3\u30c8\u9001\u4fe1\u9593\u9694(sec)\u300d\u306b\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u3001\u7a7a\u6b04\u306b<code>20</code>\u3092\u5165\u529b\u3059\u308b\u3002</p>"},{"location":"operation/ubuntu22-migration/#2-1","title":"2-1. \u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u5b9f\u884c","text":"<p>\u63a5\u7d9a\u30d1\u30bf\u30fc\u30f3</p> <ul> <li>\u30d1\u30bf\u30fc\u30f31\uff1aVPS\u30b5\u30fc\u30d0\u30fc\u7ba1\u7406\u753b\u9762\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u63a5\u7d9a\u3059\u308b</li> <li>\u30d1\u30bf\u30fc\u30f32\uff1a\u30ed\u30fc\u30ab\u30ebPC\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305fVNC\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089\u63a5\u7d9a\u3059\u308b(\u4e3b\u306bContabo)</li> <li>\u30d1\u30bf\u30fc\u30f33\uff1a\u3044\u3064\u3082\u901a\u308aSSH\u3067\u63a5\u7d9a\u3059\u308b</li> </ul> <p>\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b <pre><code>sudo do-release-upgrade\n</code></pre></p>"},{"location":"operation/ubuntu22-migration/#2-2","title":"2-2. \u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u30e1\u30c3\u30bb\u30fc\u30b8","text":"<p>\u4ee5\u4e0b\u3001\u78ba\u8a8d\u30e1\u30c3\u30bb\u30fc\u30b8\u4f8b\u3067\u3059\u3002\u3054\u5229\u7528\u306e\u30b5\u30fc\u30d0\u30fc\u306b\u3088\u3063\u3066\u8868\u793a\u5185\u5bb9\u304c\u7570\u306a\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\u8868\u793a\u3055\u308c\u305f\u5185\u5bb9\u3092\u3088\u304f\u8aad\u3093\u3067\u4e0b\u3055\u3044\u3002</p> <p>SSH\u3067\u4f5c\u696d\u3059\u308b\u5834\u5408</p> <p>\u30d0\u30c3\u30af\u30a2\u30c3\u30d7SSH\u30dd\u30fc\u30c8\u958b\u653e <code>y</code> \u3092\u5165\u529b\u3057\u3066Enter <pre><code>Continue running under SSH?\n\nThis session appears to be running under ssh. It is not recommended\nto perform a upgrade over ssh currently because in case of failure it\nis harder to recover.\n\nIf you continue, an additional ssh daemon will be started at port\n'1022'.\nDo you want to continue?\n\nContinue [yN] y      # y \u3092\u5165\u529b\u3057\u3066Enter\n</code></pre></p> <p>sshd\u306b1022\u30dd\u30fc\u30c8\u8ffd\u52a0\u306e\u304a\u77e5\u3089\u305b \u305d\u306e\u307e\u307e<code>ENTER</code> <pre><code>Starting additional sshd\n\nTo make recovery in case of failure easier, an additional sshd will\nbe started on port '1022'. If anything goes wrong with the running\nssh you can still connect to the additional one.\nIf you run a firewall, you may need to temporarily open this port. As\nthis is potentially dangerous it's not done automatically. You can\nopen the port with e.g.:\n'iptables -I INPUT -p tcp --dport 1022 -j ACCEPT'\n\nTo continue please press [ENTER]  # ENTER \n</code></pre></p> <p>\u30d1\u30c3\u30b1\u30fc\u30b8\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u30ea\u30dd\u30b8\u30c8\u30ea\u66f4\u65b0\u3057\u307e\u3059\u304b\uff1f <code>y</code> \u3092\u5165\u529b\u3057\u3066Enter <pre><code>Updating repository information\n\nNo valid mirror found\n\nWhile scanning your repository information no mirror entry for the\nupgrade was found. This can happen if you run an internal mirror or\nif the mirror information is out of date.\n\nDo you want to rewrite your 'sources.list' file anyway? If you choose\n'Yes' here it will update all 'focal' to 'jammy' entries.\nIf you select 'No' the upgrade will cancel.\n\nContinue [yN] y      # y \u3092\u5165\u529b\u3057\u3066Enter\n</code></pre></p> <p>\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u958b\u59cb\u3057\u307e\u3059\u304b\uff1f <code>y</code> \u3092\u5165\u529b\u3057\u3066Enter <pre><code>Do you want to start the upgrade?\n\n\n3 installed packages are no longer supported by Canonical. You can\nstill get support from the community.\n\n5 packages are going to be removed. 117 new packages are going to be\ninstalled. 629 packages are going to be upgraded.\n\nYou have to download a total of 694 M. This download will take about\n2 minutes with a 40Mbit connection and about 18 minutes with a 5Mbit\nconnection.\n\nFetching and installing the upgrade can take several hours. Once the\ndownload has finished, the process cannot be canceled.\n\n Continue [yN]  Details [d] y      # y \u3092\u5165\u529b\u3057\u3066Enter\n</code></pre></p> <p>libc6\u306a\u3069\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u304b\uff1f \u30ab\u30fc\u30bd\u30eb\u30ad\u30fc\u3067<code>YES</code>\u3092\u9078\u629e\u3057\u3066<code>ENTER</code> </p> <p>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u66f4\u65b0\u306e\u6709\u7121 <code>N</code> \u3092\u5165\u529b\u3057\u3066Enter <pre><code>Configuration file '/etc/ssh/ssh_config'\n ==&gt; Modified (by you or by a script) since installation.\n ==&gt; Package distributor has shipped an updated version.\n   What would you like to do about it ? Your options are:\n    Y or I : install the package maintainer's version\n    N or O : keep your currently-installed version\n      D : show the differences between the versions\n      Z : start a shell to examine the situation\n The default action is to keep your current version.\n*** ssh_config (Y/I/N/O/D/Z) [default=N] ?  N       # N \u3092\u5165\u529b\u3057\u3066Enter\n</code></pre></p> <p>\u6ce8\u610f</p> <ul> <li>\u3053\u306e\u7a2e\u985e\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u306f\u5fc5\u305a <code>N</code> \u3092\u5165\u529b\u3057\u3066\u3001\u300ckeep your currently-installed version\uff08\u73fe\u5728\u306e\u8a2d\u5b9a\u3092\u7dad\u6301\u3059\u308b\uff09\u300d\u3092\u9078\u629e\u3057\u3066\u4e0b\u3055\u3044\u3002</li> <li>\u30b5\u30fc\u30d0\u30fc\u306b\u3088\u3063\u3066\u306f<code>ssh_config</code>\u4ee5\u5916\u306b\u3082\u540c\u69d8\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002(<code>chrony</code>,<code>opne-ssh</code>,<code>sudoers</code>,<code>sysctl.conf</code>\u306a\u3069) \u3044\u305a\u308c\u3082 <code>N</code> \u300ckeep your currently-installed version\uff08\u73fe\u5728\u306e\u8a2d\u5b9a\u3092\u7dad\u6301\u3059\u308b\uff09\u300d\u3092\u9078\u629e\u3057\u3066\u4e0b\u3055\u3044\u3002</li> </ul> <p>\u65b0\u3057\u3044\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u51e6\u7406\u65b9\u6cd5\u306b\u3064\u3044\u3066 <code>keep the local version currently installed</code>\uff08\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u306e\u30ed\u30fc\u30ab\u30eb\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u7dad\u6301\u3059\u308b\uff09\u304c\u9078\u629e\u3055\u308c\u305f\u72b6\u614b\u3067<code>ENTER</code> </p> <p>\u6ce8\u610f</p> <ul> <li>\u3053\u306e\u7a2e\u985e\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u306f\u5fc5\u305a \u300c<code>keep the local version currently installed</code>\uff08\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u306e\u30ed\u30fc\u30ab\u30eb\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u7dad\u6301\u3059\u308b\uff09\u300d\u3092\u9078\u629e\u3057\u3066\u4e0b\u3055\u3044\u3002</li> <li>\u30b5\u30fc\u30d0\u30fc\u306b\u3088\u3063\u3066\u306f<code>chrony</code>\u4ee5\u5916\u306b\u3082\u540c\u69d8\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002(<code>sshd</code>\u306a\u3069) \u3044\u305a\u308c\u3082 <code>keep the local version currently installed</code>\uff08\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u306e\u30ed\u30fc\u30ab\u30eb\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u7dad\u6301\u3059\u308b\uff09\u300d\u3092\u9078\u629e\u3057\u3066\u4e0b\u3055\u3044\u3002</li> </ul> <p>\u53e4\u3044\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u524a\u9664\u3057\u307e\u3059\u304b\uff1f <code>y</code> \u3092\u5165\u529b\u3057\u3066Enter <pre><code>Remove obsolete packages?\n\n\n73 packages are going to be removed.\n\n Continue [yN]  Details [d] y      # y \u3092\u5165\u529b\u3057\u3066Enter\n</code></pre></p> <p>\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f\u3002\u518d\u8d77\u52d5\u3057\u307e\u3059\u304b\uff1f <code>y</code> \u3092\u5165\u529b\u3057\u3066Enter <pre><code>System upgrade is complete.\n\nRestart required\n\nTo finish the upgrade, a restart is required.\nIf you select 'y' the system will be restarted.\n\nContinue [yN] y      # y \u3092\u5165\u529b\u3057\u3066Enter\n</code></pre></p>"},{"location":"operation/ubuntu22-migration/#3-ssh","title":"3. \u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u78ba\u8a8d(SSH\u63a5\u7d9a)","text":"<p>\u63a5\u7d9a\u65b9\u6cd5</p> <p>3~5\u306fSSH\u63a5\u7d9a\u3067\u4f5c\u696d\u3059\u308b</p>"},{"location":"operation/ubuntu22-migration/#3-1-ubuntu","title":"3-1. \u73fe\u5728\u306eUbuntu\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3059\u308b","text":"<pre><code>cat /etc/os-release | grep \"VERSION=\" # (1)!\n</code></pre> <ol> <li>22.04\u306f\u30d6\u30e9\u30b1\u30c3\u30c8\u30da\u30fc\u30b9\u30c8\u30e2\u30fc\u30c9\u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u305f\u3081\u30b3\u30de\u30f3\u30c9\u30da\u30fc\u30b9\u30c8\u5f8c\u3001ENTER\u3067\u5b9f\u884c\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</li> </ol> <p>VERSION=\"22.04.x LTS (Jammy Jellyfish)\"\u3000x\u306e\u6570\u5b57\u306f\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u6642\u671f\u306b\u3088\u3063\u3066\u5909\u308f\u308a\u307e\u3059</p>"},{"location":"operation/ubuntu22-migration/#3-2-off","title":"3-2. \u30d6\u30e9\u30b1\u30c3\u30c8\u30da\u30fc\u30b9\u30c8\u30e2\u30fc\u30c9OFF","text":"<pre><code>echo \"set enable-bracketed-paste off\" &gt;&gt; ~/.inputrc\n</code></pre>"},{"location":"operation/ubuntu22-migration/#3-3-ssh","title":"3-3. SSH\u518d\u63a5\u7d9a","text":"<pre><code>exit\n</code></pre> <p>SSH\u3067\u518d\u63a5\u7d9a\u3059\u308b</p>"},{"location":"operation/ubuntu22-migration/#4","title":"4. \u4f9d\u5b58\u95a2\u4fc2\u518d\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>\u30b7\u30b9\u30c6\u30e0\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8 <pre><code>sudo apt update -y &amp;&amp; sudo apt upgrade -y\n</code></pre></p> \u30ea\u30ec\u30fc\u306e\u5834\u5408BP\u306e\u5834\u5408 <pre><code>sudo apt install needrestart git jq bc automake tmux rsync htop curl build-essential pkg-config libffi-dev libgmp-dev libssl-dev libtinfo-dev libsystemd-dev zlib1g-dev make g++ wget libncursesw5 libtool autoconf liblmdb-dev -y\n</code></pre> <p><pre><code>sudo apt install needrestart git jq bc automake tmux rsync htop curl build-essential pkg-config libffi-dev libgmp-dev libssl-dev libtinfo-dev libsystemd-dev zlib1g-dev make g++ wget libncursesw5 libtool autoconf liblmdb-dev -y\n</code></pre> <pre><code>pip install discordwebhook python-dotenv slackweb\n</code></pre></p> <p>\u30c7\u30fc\u30e2\u30f3\u518d\u8d77\u52d5\u81ea\u52d5\u5316 <pre><code>echo \"\\$nrconf{restart} = 'a';\" | sudo tee /etc/needrestart/conf.d/50local.conf\n</code></pre> <pre><code>echo \"\\$nrconf{blacklist_rc} = [qr(^cardano-node\\\\.service$) =&gt; 0,];\" | sudo tee -a /etc/needrestart/conf.d/50local.conf\n</code></pre></p> <p>\u81ea\u52d5\u8d77\u52d5\u6709\u52b9\u5316 <pre><code>sudo systemctl enable cardano-node\n</code></pre></p> <p>\u30b3\u30f3\u30d1\u30a4\u30eb\u6e08\u307fHaskell\u30d1\u30c3\u30b1\u30fc\u30b8\u524a\u9664 <pre><code>cd ~/.cabal/store\nrm -rf ghc-8.10.7\n</code></pre></p> <p>SSH\u3067\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3092\u5b9f\u65bd\u3057\u305f\u5834\u5408</p> <p>1022\u30dd\u30fc\u30c8\u3092\u524a\u9664\u3059\u308b\uff08AWS\u3084IONOS\u306a\u3069\u306fVPS\u306e\u30b5\u30fc\u30d0\u30fc\u7ba1\u7406\u753b\u9762\u304b\u3089\uff09 <pre><code>sudo ufw deny 1022/tcp\nsudo ufw reload\n</code></pre></p>"},{"location":"operation/ubuntu22-migration/#5","title":"5. \u30ce\u30fc\u30c9\u518d\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304b\u3089\u30d3\u30eb\u30c9\u3055\u308c\u305fcardano-node/cli\u3092\u4f7f\u7528\u3057\u3066\u3044\u305f\u5834\u5408\u306e\u307f\u3001\u4ee5\u4e0b\u306e\u624b\u9806\u3092\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044</p> <p>\u518d\u30d3\u30eb\u30c9</p> <ol> <li>1-1. \u30b7\u30b9\u30c6\u30e0\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8 </li> <li>1-2. \u4f9d\u5b58\u95a2\u4fc2\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d </li> <li>2-1. \u30d0\u30a4\u30ca\u30ea\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9 </li> <li>2-2. \u30d0\u30a4\u30ca\u30ea\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb </li> </ol>"},{"location":"operation/ubuntu22-migration/#6","title":"6. \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9","text":""},{"location":"operation/ubuntu22-migration/#6-1","title":"6-1. \u4e8b\u524d\u6e96\u5099","text":"<ul> <li> 6-1-1.Ubuntu\u3078\u30ed\u30b0\u30a4\u30f3\u3057\u3001\u4e3b\u8981\u30d5\u30a1\u30a4\u30eb\u306e\u30a2\u30af\u30bb\u30b9\u5236\u9650\u3092\u89e3\u9664\u3059\u308b</li> </ul> <pre><code>cd $NODE_HOME\nchmod 700 payment.vkey\nchmod 700 payment.skey\nchmod 700 stake.vkey\nchmod 700 stake.skey\nchmod 700 stake.addr\nchmod 700 payment.addr\nchmod u+rwx $HOME/cold-keys\n</code></pre> <ul> <li> <p> 6-1-2.\u4ee5\u4e0b\u30d5\u30a9\u30eb\u30c0\u5185\u3059\u3079\u3066\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u5916\u90e8\u30b9\u30c8\u30ec\u30fc\u30b8\u306b\u9000\u907f\u3055\u305b\u308b</p> </li> <li> <p>/home/user/cnode (user\u306f\u5404\u81ea\u3067\u8a2d\u5b9a\u3057\u305f\u30e6\u30fc\u30b6\u30fc\u540d)</p> </li> <li> <p>/home/cold-keys</p> </li> <li> <p> 6-1-3.\u9000\u907f\u3055\u305b\u305f\u3089\u3001\u4e0a\u8a18\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u3059\u3079\u3066\u524a\u9664\u3059\u308b (\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30d5\u30a9\u30eb\u30c0\u306f\u6b8b\u3057\u3066\u4e0b\u3055\u3044)</p> </li> <li> <p> 6-1-4.Ubuntu\u3092\u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3(\u96fb\u6e90\u30aa\u30d5)\u3059\u308b</p> </li> </ul>"},{"location":"operation/ubuntu22-migration/#6-2-virtualbox","title":"6-2. VirtualBox\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9","text":"<p>VirtualBox\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u30b5\u30a4\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3001<code>VirtualBox 7.0.8 platform packages</code>\u306e<code>Windows hosts</code>\u307e\u305f\u306f<code>macOS</code>\u306e\u30ea\u30f3\u30af\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3001\u65e2\u5b58\u306eVirtuialBox\u306b\u5bfe\u3057\u3066\u4e0a\u66f8\u304d\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304f\u3060\u3055\u3044</p> <ul> <li>VirtualBox\u306e\u5165\u624b</li> </ul>"},{"location":"operation/ubuntu22-migration/#6-3","title":"6-3. \u30b7\u30b9\u30c6\u30e0\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8","text":"<ul> <li> <p> 6-3-1.VirtualBox\u306e\u30de\u30b7\u30f3\u8a2d\u5b9a\u304b\u3089\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u6709\u52b9\u306b\u3059\u308b </p> </li> <li> <p> 6-3-2.Ubuntu\u3092\u8d77\u52d5\u3059\u308b</p> </li> <li> <p> 6-3-3.\u30c7\u30a3\u30b9\u30af\u5bb9\u91cf\u3092\u78ba\u8a8d\u3059\u308b</p> </li> </ul> <pre><code>df -h /root\n</code></pre> <p>Avail\u306e\u5024\u304c10G\u4ee5\u4e0a\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b</p> <ul> <li> <p> Ubuntu\u8a2d\u5b9a\u304b\u3089\u300c\u96fb\u6e90\u7ba1\u7406\u300d\u2192\u300c\u30d6\u30e9\u30f3\u30af\u30b9\u30af\u30ea\u30fc\u30f3\u300d\u2192\u300c\u3057\u306a\u3044\u300d\u306b\u8a2d\u5b9a </p> </li> <li> <p> \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u4e00\u89a7\u304b\u3089<code>soft</code>\u3068\u691c\u7d22\u3057\u3001[\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3068\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8]\u3092\u8d77\u52d5 </p> </li> <li> <p> [\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8]\u30bf\u30d6\u306e\u9577\u671f\u30b5\u30dd\u30fc\u30c8(LTS)\u7248\u304c\u9078\u629e\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3001\u9589\u3058\u308b </p> </li> <li> <p> \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u4e00\u89a7\u304b\u3089<code>update</code>\u3068\u691c\u7d22\u3057\u3001[\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u66f4\u65b0]\u3092\u8d77\u52d5 </p> </li> <li> <p> \u300c\u4eca\u3059\u3050\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002 </p> </li> <li> <p> \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5f8c\u518d\u8d77\u52d5\u3092\u6c42\u3081\u3089\u308c\u305f\u3089\u518d\u8d77\u52d5\u3059\u308b\u3002</p> </li> </ul>"},{"location":"operation/ubuntu22-migration/#6-4-ubuntu","title":"6-4. Ubuntu\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9","text":"<ul> <li> <p> 6-4-1.\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u4e00\u89a7\u304b\u3089<code>update</code>\u3068\u691c\u7d22\u3057\u3001[\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u66f4\u65b0]\u3092\u8d77\u52d5 </p> </li> <li> <p> 6-4-2.\u300c\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u300d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b </p> </li> </ul> <p>\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9</p> <p>\u8868\u793a\u3055\u308c\u305f\u5185\u5bb9\u306b\u6cbf\u3063\u3066\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u306b\u306f\u6570\u5341\u5206\u304b\u304b\u308a\u307e\u3059\u3002</p> <ul> <li> 6-4-3.\u51e6\u7406\u304c\u9032\u3080\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u753b\u50cf\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002 </li> </ul> <p></p> <ul> <li> <p> 6-4-4.FireFox\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u753b\u50cf\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u300cNEXT\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044\u3002 </p> </li> <li> <p> 6-4-5.\u66f4\u306b\u51e6\u7406\u304c\u9032\u307f\u3001\u30b5\u30dd\u30fc\u30c8\u5916\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u524a\u9664\u3057\u307e\u3059 </p> </li> </ul>"},{"location":"operation/ubuntu22-migration/#6-5-guestaddtions","title":"6-5. GuestAddtions\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9","text":"<ul> <li> 6-5-1.GuestAddtions\u3092\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3059\u308b </li> </ul> <ul> <li> 6-5-2.Ubuntu\u3092\u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3(\u96fb\u6e90\u30aa\u30d5)\u3059\u308b</li> </ul>"},{"location":"operation/ubuntu22-migration/#6-6","title":"6-6. \u6700\u7d42\u4ed5\u4e0a\u3052","text":"<ul> <li> <p> 6-6-1.\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30aa\u30d5 </p> </li> <li> <p> 6-6-2.Ubuntu\u3092\u8d77\u52d5\u3059\u308b</p> </li> <li> <p> 6-6-3.\u30d6\u30e9\u30b1\u30c3\u30c8\u30da\u30fc\u30b9\u30c8\u30e2\u30fc\u30c9OFF</p> </li> </ul> <pre><code>echo \"set enable-bracketed-paste off\" &gt;&gt; ~/.inputrc\n</code></pre> <ul> <li> <p> 6-6-4.\u9000\u907f\u3057\u305f\u30ad\u30fc\u30d5\u30a1\u30a4\u30eb\u3092<code>cnode</code>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u623b\u3059</p> </li> <li> <p> 6-6-5.\u623b\u3057\u305f\u4e3b\u8981\u30d5\u30a1\u30a4\u30eb\u306e\u30a2\u30af\u30bb\u30b9\u5236\u9650</p> </li> </ul> <pre><code>cd $NODE_HOME\nchmod 400 payment.vkey\nchmod 400 payment.skey\nchmod 400 stake.vkey\nchmod 400 stake.skey\nchmod 400 stake.addr\nchmod 400 payment.addr\nchmod a-rwx $HOME/cold-keys\n</code></pre> <ul> <li> 6-6-6.Ubuntu22.04\u3067\u518d\u30d3\u30eb\u30c9\u3057\u305fcardano-cli\u3092\u30b3\u30d4\u30fc\u3059\u308b(\u53c2\u8003\u624b\u9806)</li> </ul>"},{"location":"operation/withdrawal/","title":"\u8cc7\u91d1\u5f15\u304d\u51fa\u3057","text":""},{"location":"operation/withdrawal/#1-stakeaddr","title":"1. stake.addr\u304b\u3089\u306e\u5f15\u304d\u51fa\u3057","text":"<p>\u6982\u8981</p> <ul> <li>\u5831\u916c\u306f <code>stake.addr</code> \u30a2\u30c9\u30ec\u30b9\u306b\u84c4\u7a4d\u3055\u308c\u3066\u3044\u304d\u307e\u3059\u3002  </li> <li>1\u56de\u306e\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3067\u5f15\u304d\u51fa\u305b\u308b\u91d1\u984d\u306f\u6b8b\u9ad8\u5168\u984d\u306e\u307f\u3067\u3059\u3002 (\u5206\u5272\u3057\u3066\u5f15\u304d\u51fa\u3059\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093)  </li> <li>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u624b\u6570\u6599\u306fpayment.addr\u304b\u3089\u5f15\u304d\u843d\u3068\u3055\u308c\u307e\u3059\u3002</li> </ul> <p>1-1 payment.addr\u3078\u9001\u91d1\u3059\u308b\u65b9\u6cd5\u306f\u3053\u3061\u3089</p> <p>1-2 \u4efb\u610f\u306e\u30a2\u30c9\u30ec\u30b9\u3078\u9001\u91d1\u3059\u308b\u65b9\u6cd5\u306f\u3053\u3061\u3089</p> <p>\u6ce8\u610f</p> <p>\u5165\u529b\u30df\u30b9\u306a\u3069\u3067\u9001\u91d1\u304c\u5931\u6557\u3057\u3066\u3082\u8cac\u4efb\u306f\u8ca0\u3048\u307e\u305b\u3093\u3002\u81ea\u5df1\u8cac\u4efb\u306e\u3082\u3068\u5b9f\u65bd\u4e0b\u3055\u3044\u3002 payment.skey\u3068stake.skey\u306f\u5fc5\u305a\u30aa\u30d5\u30e9\u30a4\u30f3\u74b0\u5883\u3067\u4fdd\u7ba1\u3057\u3066\u304f\u3060\u3055\u3044\u3002  </p>"},{"location":"operation/withdrawal/#1-1-paymentaddr","title":"1-1. payment.addr\u3078\u9001\u91d1\u3059\u308b\u65b9\u6cd5","text":"<p>\u73fe\u5728\u306e\u30b9\u30ed\u30c3\u30c8\u3092\u7b97\u51fa\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>currentSlot=$(cardano-cli conway query tip $NODE_NETWORK | jq -r '.slot')\necho Current Slot: $currentSlot\n</code></pre> <p>\u30b9\u30c6\u30fc\u30af\u30a2\u30c9\u30ec\u30b9\u306e\u6b8b\u9ad8\u3092\u7b97\u51fa\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\nrewardBalance=$(cardano-cli conway query stake-address-info \\\n    $NODE_NETWORK \\\n    --address $(cat stake.addr) | jq -r \".[0].rewardAccountBalance\")\necho rewardBalance: $rewardBalance\n</code></pre> <p>1 ADA = 1,000,000 lovelace.\u3068\u899a\u3048\u307e\u3057\u3087\u3046  </p> <p>\u5831\u916c\u306e\u79fb\u52d5\u5148\u3068\u306a\u308bpayment.addr\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002payment.addr\u306b\u306f\u53d6\u5f15\u624b\u6570\u6599\u3092\u652f\u6255\u3046\u305f\u3081\u306e\u6b8b\u9ad8\u304c\u5fc5\u8981\u3067\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>destinationAddress=$(cat payment.addr)\necho destinationAddress: $destinationAddress\n</code></pre> <p>payment.addr\u306e\u6b8b\u9ad8\u3092\u7b97\u51fa\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway query utxo \\\n    --address $(cat payment.addr) \\\n    $NODE_NETWORK \\\n    --output-text \\\n    --out-file fullUtxo.out\n\ntail -n +3 fullUtxo.out | sort -k3 -nr | sed -e '/lovelace + [0-9]/d' &gt; balance.out\n\ncat balance.out\n</code></pre> <p>UTXO\u3092\u7b97\u51fa\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>tx_in=\"\"\ntotal_balance=0\nwhile read -r utxo; do\n    in_addr=$(awk '{ print $1 }' &lt;&lt;&lt; \"${utxo}\")\n    idx=$(awk '{ print $2 }' &lt;&lt;&lt; \"${utxo}\")\n    utxo_balance=$(awk '{ print $3 }' &lt;&lt;&lt; \"${utxo}\")\n    total_balance=$((${total_balance}+${utxo_balance}))\n    echo TxHash: ${in_addr}#${idx}\n    echo ADA: ${utxo_balance}\n    tx_in=\"${tx_in} --tx-in ${in_addr}#${idx}\"\ndone &lt; balance.out\ntxcnt=$(cat balance.out | wc -l)\necho Total ADA balance: ${total_balance}\necho Number of UTXOs: ${txcnt}\n\nwithdrawalString=\"$(cat stake.addr)+${rewardBalance}\"\ntempRewardAmount=$(( ${total_balance}+${rewardBalance} ))\n</code></pre> <p>build-raw transaction\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction build-raw \\\n    ${tx_in} \\\n    --tx-out $(cat payment.addr)+${tempRewardAmount} \\\n    --invalid-hereafter $(( ${currentSlot} + 10000)) \\\n    --fee 200000 \\\n    --withdrawal ${withdrawalString} \\\n    --out-file tx.tmp\n</code></pre> <p>\u73fe\u5728\u306e\u6700\u4f4e\u6599\u91d1\u3092\u8a08\u7b97\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>fee=$(cardano-cli conway transaction calculate-min-fee \\\n    --tx-body-file tx.tmp \\\n    --witness-count 2 \\\n    --output-text \\\n    --protocol-params-file params.json | awk '{ print $1 }')\necho fee: $fee\n</code></pre> <p>\u5909\u66f4\u51fa\u529b\u3092\u8a08\u7b97\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>txOut=$((${total_balance}-${fee}+${rewardBalance}))\necho Change Output: ${txOut}\n</code></pre> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u30d3\u30eb\u30c9\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction build-raw \\\n    ${tx_in} \\\n    --tx-out $(cat payment.addr)+${txOut} \\\n    --invalid-hereafter $(( ${currentSlot} + 10000)) \\\n    --fee ${fee} \\\n    --withdrawal ${withdrawalString} \\\n    --out-file tx.raw\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>BP\u306e<code>tx.raw</code> \u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[BP] --&gt;|tx.raw| B[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7];</code></pre></p> <p>\u652f\u6255\u3044\u3068\u30b9\u30c6\u30fc\u30af\u306e\u79d8\u5bc6\u9375\u306e\u4e21\u65b9\u3092\u4f7f\u7528\u3057\u3066\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306b\u7f72\u540d\u3057\u307e\u3059\u3002</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\ncardano-cli conway transaction sign \\\n    --tx-body-file tx.raw \\\n    --signing-key-file payment.skey \\\n    --signing-key-file stake.skey \\\n    $NODE_NETWORK \\\n    --out-file tx.signed\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306e<code>tx.signed</code> \u3092BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|tx.signed| B[BP];</code></pre></p> <p>\u7f72\u540d\u3055\u308c\u305f\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u9001\u4fe1\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction submit \\\n    --tx-file tx.signed \\\n    $NODE_NETWORK\n</code></pre> <p>\u8cc7\u91d1\u304c\u5230\u7740\u3057\u305f\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway query utxo \\\n    --address $(cat payment.addr) \\\n    $NODE_NETWORK \\\n    --output-text\n</code></pre> <p>Transacsion Successfully submitted\u3068\u8868\u793a\u3055\u308c\u308c\u3070\u6210\u529f</p> <p>\u66f4\u65b0\u3055\u308c\u305f\u30e9\u30d6\u30ec\u30fc\u30b9\u306e\u6b8b\u9ad8\u3068\u5831\u916c\u3092\u8868\u793a\u3057\u307e\u3059\u3002</p> <pre><code>                           TxHash                                 TxIx        Lovelace\n----------------------------------------------------------------------------------------\n100322a39d02c2ead....  \n</code></pre>"},{"location":"operation/withdrawal/#1-2","title":"1-2. \u4efb\u610f\u306e\u30a2\u30c9\u30ec\u30b9\u3078\u9001\u91d1\u3059\u308b\u65b9\u6cd5","text":"<p>\u73fe\u5728\u306e\u30b9\u30ed\u30c3\u30c8No\u3092\u7b97\u51fa\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>currentSlot=$(cardano-cli conway query tip $NODE_NETWORK | jq -r '.slot')\necho Current Slot: $currentSlot\n</code></pre> <p>\u5165\u91d1\u5148\u30a2\u30c9\u30ec\u30b9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>destinationAddress=\u5165\u91d1\u5148\u30a2\u30c9\u30ec\u30b9\u3092\u6307\u5b9a\u3059\u308b\necho destinationAddress: $destinationAddress\n</code></pre> <p>\u5831\u916c\u30a2\u30c9\u30ec\u30b9\u6b8b\u9ad8\u3092\u7b97\u51fa\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\nrewardBalance=$(cardano-cli conway query stake-address-info \\\n    $NODE_NETWORK \\\n    --address $(cat stake.addr) | jq -r \".[0].rewardAccountBalance\")\necho rewardBalance: $rewardBalance\n</code></pre> <p>payment.addr \u306e\u6b8b\u9ad8\u3092\u7b97\u51fa</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway query utxo \\\n    --address $(cat payment.addr) \\\n    $NODE_NETWORK \\\n    --output-text \\\n    --out-file fullUtxo.out\n\ntail -n +3 fullUtxo.out | sort -k3 -nr | sed -e '/lovelace + [0-9]/d' &gt; balance.out\n\ncat balance.out\n</code></pre> <p>UTXO\u3092\u7b97\u51fa\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>tx_in=\"\"\ntotal_balance=0\nwhile read -r utxo; do\n    in_addr=$(awk '{ print $1 }' &lt;&lt;&lt; \"${utxo}\")\n    idx=$(awk '{ print $2 }' &lt;&lt;&lt; \"${utxo}\")\n    utxo_balance=$(awk '{ print $3 }' &lt;&lt;&lt; \"${utxo}\")\n    total_balance=$((${total_balance}+${utxo_balance}))\n    echo TxHash: ${in_addr}#${idx}\n    echo ADA: ${utxo_balance}\n    tx_in=\"${tx_in} --tx-in ${in_addr}#${idx}\"\ndone &lt; balance.out\ntxcnt=$(cat balance.out | wc -l)\necho Total ADA balance: ${total_balance}\necho Number of UTXOs: ${txcnt}\n\nwithdrawalString=\"$(cat stake.addr)+${rewardBalance}\"\necho ${withdrawalString}\n</code></pre> <p>build-raw transaction\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction build-raw \\\n    ${tx_in} \\\n    --tx-out $(cat payment.addr)+${total_balance} \\\n    --tx-out ${destinationAddress}+${rewardBalance} \\\n    --invalid-hereafter $(( ${currentSlot} + 10000)) \\\n    --fee 200000 \\\n    --withdrawal ${withdrawalString} \\\n    --out-file tx.tmp\n</code></pre> <p>\u73fe\u5728\u306e\u6700\u4f4e\u6599\u91d1\u3092\u8a08\u7b97\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>fee=$(cardano-cli conway transaction calculate-min-fee \\\n    --tx-body-file tx.tmp \\\n    --witness-count 2 \\\n    --output-text \\\n    --protocol-params-file params.json | awk '{ print $1 }')\necho fee: $fee\n</code></pre> <p>\u5909\u66f4\u51fa\u529b\u3092\u8a08\u7b97\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>txOut=$((${total_balance}-${fee}))\necho Change Output: ${txOut}\n</code></pre> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u30d3\u30eb\u30c9\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction build-raw \\\n    ${tx_in} \\\n    --tx-out $(cat payment.addr)+${txOut} \\\n    --tx-out ${destinationAddress}+${rewardBalance} \\\n    --invalid-hereafter $(( ${currentSlot} + 10000)) \\\n    --fee ${fee} \\\n    --withdrawal ${withdrawalString} \\\n    --out-file tx.raw\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>BP\u306e<code>tx.raw</code> \u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[BP] --&gt;|tx.raw| B[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7];</code></pre></p> <p>\u652f\u6255\u3044\u3068\u30b9\u30c6\u30fc\u30af\u306e\u79d8\u5bc6\u9375\u306e\u4e21\u65b9\u3092\u4f7f\u7528\u3057\u3066\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306b\u7f72\u540d\u3057\u307e\u3059\u3002</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\ncardano-cli conway transaction sign \\\n    --tx-body-file tx.raw \\\n    --signing-key-file payment.skey \\\n    --signing-key-file stake.skey \\\n    $NODE_NETWORK \\\n    --out-file tx.signed\n</code></pre> <p>tx.signed \u3092 \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002</p> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306e<code>tx.signed</code> \u3092BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|tx.signed| B[BP];</code></pre></p> <p>\u7f72\u540d\u3055\u308c\u305f\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u9001\u4fe1\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction submit \\\n    --tx-file tx.signed \\\n    $NODE_NETWORK\n</code></pre> <p>Transacsion Successfully submitted\u3068\u8868\u793a\u3055\u308c\u308c\u3070\u6210\u529f</p> <p>\u8cc7\u91d1\u304c\u5230\u7740\u3057\u305f\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway query utxo \\\n    --address ${destinationAddress} \\\n    $NODE_NETWORK \\\n    --output-text\n</code></pre> <p>\u66f4\u65b0\u3055\u308c\u305f\u30e9\u30d6\u30ec\u30fc\u30b9\u306e\u6b8b\u9ad8\u3068\u5831\u916c\u3092\u8868\u793a\u3057\u307e\u3059\u3002</p> <pre><code>                           TxHash                                 TxIx        Lovelace\n----------------------------------------------------------------------------------------\n100322a39d02c2ead....  \n</code></pre>"},{"location":"operation/withdrawal/#2-paymentaddr","title":"2. Payment.addr\u304b\u3089\u306e\u5f15\u304d\u51fa\u3057","text":"<p>\u6982\u8981</p> <p>payment.addr\u304b\u3089\u4efb\u610f\u306e\u30a2\u30c9\u30ec\u30b9\u3078\u9001\u4fe1\u3059\u308b\u4f8b\u3067\u3059</p> <p>\u6ce8\u610f</p> <ul> <li>\u5165\u529b\u30df\u30b9\u306a\u3069\u3067\u9001\u91d1\u304c\u5931\u6557\u3057\u3066\u3082\u8cac\u4efb\u306f\u8ca0\u3048\u307e\u305b\u3093\u3002\u81ea\u5df1\u8cac\u4efb\u306e\u3082\u3068\u5b9f\u65bd\u4e0b\u3055\u3044\u3002  </li> <li>\u5ba3\u8a00\u3057\u305f\u8a93\u7d04(Pledge)\u5206\u307e\u3067\u5f15\u304d\u51fa\u3057\u3066\u3057\u307e\u3046\u3068\u3001\u30d7\u30fc\u30eb\u5831\u916c\u304c\u30bc\u30ed\u306b\u306a\u308a\u307e\u3059\u306e\u3067\u3054\u6ce8\u610f\u304f\u3060\u3055\u3044</li> <li>payment.skey\u3068stake.skey\u306f\u5fc5\u305a\u30aa\u30d5\u30e9\u30a4\u30f3\u74b0\u5883\u3067\u4fdd\u7ba1\u3057\u3066\u304f\u3060\u3055\u3044\u3002  </li> </ul> <p>\u6700\u65b0\u306e\u30b9\u30ed\u30c3\u30c8\u756a\u53f7\u3092\u53d6\u5f97\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\ncurrentSlot=$(cardano-cli conway query tip $NODE_NETWORK | jq -r '.slot')\necho Current Slot: $currentSlot\n</code></pre> <p>lovelace\u5f62\u5f0f\u3067\u9001\u4fe1\u3059\u308b\u91d1\u984d\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u30021 ADA = 1,000,000 lovelace \u3067\u899a\u3048\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>amountToSend=10000000\necho amountToSend: $amountToSend\n</code></pre> <p>\u9001\u91d1\u5148\u306e\u30a2\u30c9\u30ec\u30b9\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>destinationAddress=\u9001\u91d1\u5148\u30a2\u30c9\u30ec\u30b9\necho destinationAddress: $destinationAddress\n</code></pre> <p>payment.addr\u306e\u6b8b\u9ad8\u3092\u7b97\u51fa\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway query utxo \\\n    --address $(cat payment.addr) \\\n    $NODE_NETWORK \\\n    --output-text \\\n    --out-file fullUtxo.out\n\ntail -n +3 fullUtxo.out | sort -k3 -nr | sed -e '/lovelace + [0-9]/d' &gt; balance.out\n\ncat balance.out\n</code></pre> <p>UTXO\u3092\u7b97\u51fa\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>tx_in=\"\"\ntotal_balance=0\nwhile read -r utxo; do\n    in_addr=$(awk '{ print $1 }' &lt;&lt;&lt; \"${utxo}\")\n    idx=$(awk '{ print $2 }' &lt;&lt;&lt; \"${utxo}\")\n    utxo_balance=$(awk '{ print $3 }' &lt;&lt;&lt; \"${utxo}\")\n    total_balance=$((${total_balance}+${utxo_balance}))\n    echo TxHash: ${in_addr}#${idx}\n    echo ADA: ${utxo_balance}\n    tx_in=\"${tx_in} --tx-in ${in_addr}#${idx}\"\ndone &lt; balance.out\ntxcnt=$(cat balance.out | wc -l)\necho Total ADA balance: ${total_balance}\necho Number of UTXOs: ${txcnt}\n\ntempBalanceAmont=$(( ${total_balance}-${amountToSend} ))\n</code></pre> <p>build-raw\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction build-raw \\\n    ${tx_in} \\\n    --tx-out $(cat payment.addr)+${tempBalanceAmont} \\\n    --tx-out ${destinationAddress}+${amountToSend} \\\n    --invalid-hereafter $(( ${currentSlot} + 10000)) \\\n    --fee 200000 \\\n    --out-file tx.tmp\n</code></pre> <p>\u6700\u4f4e\u624b\u6570\u6599\u3092\u51fa\u529b\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>fee=$(cardano-cli conway transaction calculate-min-fee \\\n    --tx-body-file tx.tmp \\\n    --witness-count 1 \\\n    --output-text \\\n    --protocol-params-file params.json | awk '{ print $1 }')\necho fee: $fee\n</code></pre> <p>\u8a08\u7b97\u7d50\u679c\u3092\u51fa\u529b\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>txOut=$((${total_balance}-${fee}-${amountToSend}))\necho Change Output: ${txOut}\n</code></pre> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction build-raw \\\n    ${tx_in} \\\n    --tx-out $(cat payment.addr)+${txOut} \\\n    --tx-out ${destinationAddress}+${amountToSend} \\\n    --invalid-hereafter $(( ${currentSlot} + 10000)) \\\n    --fee ${fee} \\\n    --out-file tx.raw\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>BP\u306e<code>tx.raw</code> \u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[BP] --&gt;|tx.raw| B[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7];</code></pre></p> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306b\u7f72\u540d\u3057\u307e\u3059\u3002</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\ncardano-cli conway transaction sign \\\n    --tx-body-file tx.raw \\\n    --signing-key-file payment.skey \\\n    $NODE_NETWORK \\\n    --out-file tx.signed\n</code></pre> <p>tx.signed \u3092\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002</p> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306e<code>tx.signed</code> \u3092BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|tx.signed| B[BP];</code></pre></p> <p>\u7f72\u540d\u3055\u308c\u305f\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u9001\u4fe1\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction submit \\\n    --tx-file tx.signed \\\n    $NODE_NETWORK\n</code></pre> <p>Transacsion Successfully submitted\u3068\u8868\u793a\u3055\u308c\u308c\u3070\u6210\u529f</p> <p>\u5165\u91d1\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway query utxo \\\n    --address ${destinationAddress} \\\n    $NODE_NETWORK \\\n    --output-text\n</code></pre> <p>\u5148\u7a0b\u6307\u5b9a\u3057\u305f\u91d1\u984d\u3068\u4e00\u81f4\u3057\u3066\u3044\u308c\u3070\u554f\u984c\u306a\u3044\u3067\u3059\u3002</p> <pre><code>                           TxHash                                 TxIx        Lovelace\n----------------------------------------------------------------------------------------\n100322a39d02c2ead....                                              0        10000000\n</code></pre>"},{"location":"setup/","title":"\u30d7\u30fc\u30eb\u69cb\u7bc9\u30de\u30cb\u30e5\u30a2\u30eb","text":""},{"location":"setup/#_2","title":"\u4e8b\u524d\u6e96\u5099","text":""},{"location":"setup/#_3","title":"\u30bf\u30fc\u30df\u30ca\u30eb\u30bd\u30d5\u30c8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u306e\u69cb\u7bc9\u30fb\u904b\u7528\u3067\u306f\u3001\u5404\u30b5\u30fc\u30d0\u30fc\u3078SSH\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u30bd\u30d5\u30c8\u304c\u5fc5\u8981\u3067\u3059\u3002 \u30bf\u30fc\u30df\u30ca\u30eb\u30bd\u30d5\u30c8\u306b\u306f\u3055\u307e\u3056\u307e\u306a\u7a2e\u985e\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u3053\u306e\u30de\u30cb\u30e5\u30a2\u30eb\u3067\u306f\u4ee3\u8868\u7684\u306a\u3082\u306e\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002 \u3054\u4f7f\u7528\u306eOS\u306b\u5408\u308f\u305b\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304f\u3060\u3055\u3044\u3002  </p> <p>\u5404\u7a2e\u30bf\u30fc\u30df\u30ca\u30eb\u30bd\u30d5\u30c8\u4e00\u89a7</p> <p>R-Login\uff08Windows\uff09</p> <p>Windows\u5411\u3051\u306e\u8efd\u91cfSSH\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3067\u3059\u3002 \u30bf\u30d6\u7ba1\u7406\u3084\u30ab\u30e9\u30fc\u8a2d\u5b9a\u304c\u5bb9\u6613\u3067\u3001SPO\u306e\u5229\u7528\u5b9f\u7e3e\u3082\u591a\u3044\u5b89\u5b9a\u3057\u305f\u30bd\u30d5\u30c8\u3067\u3059\u3002</p> <p>\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\uff1ahttps://kmiya-culti.github.io/RLogin/</p> R-Login \u63a8\u5968\u8a2d\u5b9a <p>\u30ab\u30e9\u30fc\u8a2d\u5b9a </p> <p>\u63a5\u7d9a\u72b6\u614b\u7dad\u6301\u8a2d\u5b9a </p> <p>Terminal\uff08macOS \u6a19\u6e96\u30bf\u30fc\u30df\u30ca\u30eb\uff09</p> <p>macOS\u306b\u6a19\u6e96\u642d\u8f09\u3055\u308c\u3066\u3044\u308b\u30bf\u30fc\u30df\u30ca\u30eb\u30a2\u30d7\u30ea\u3067\u3059\u3002 \u8ffd\u52a0\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u4e0d\u8981\u3067\u3001\u305d\u306e\u307e\u307eSSH\u63a5\u7d9a\u306b\u5229\u7528\u3067\u304d\u307e\u3059\u3002</p> <p>\u53c2\u8003\uff1ahttps://www.webdesignleaves.com/pr/plugins/mac_terminal_basics_01.html</p> <p>Termius\uff08Windows / macOS / Linux / iOS / Android\uff09</p> <p>\u8907\u6570OS\u306b\u5bfe\u5fdc\u3057\u305f\u9ad8\u6a5f\u80fdSSH\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3067\u3059\u3002 \u30af\u30e9\u30a6\u30c9\u540c\u671f\u306b\u3088\u308a\u3001PC\u3068\u30b9\u30de\u30db\u9593\u3067\u8a2d\u5b9a\u3092\u5171\u6709\u3067\u304d\u307e\u3059\u3002</p> <p>\u516c\u5f0f\u30b5\u30a4\u30c8\uff1ahttps://termius.com/</p>"},{"location":"setup/#ssh","title":"SSH\u9375\u4f5c\u6210","text":"Windows\u306e\u5834\u5408Mac\u306e\u5834\u5408 <p>1. \u7ba1\u7406\u8005\u30e2\u30fc\u30c9\u3067\u30bf\u30fc\u30df\u30ca\u30eb\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002 </p> <p><code>Win + X</code> \u3092\u62bc\u4e0b\u3057\u3001\u30bf\u30fc\u30df\u30ca\u30eb\uff08\u7ba1\u7406\u8005\uff09\u3092\u9078\u629e\u3057\u3001SSH\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306e\u6709\u7121\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>Get-WindowsCapability -Online | Where-Object Name -like 'OpenSSH.Client*'\n</code></pre></p> <p><code>State : Installed</code>\u3067\u3042\u308c\u3070\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002</p> <code>State : NotPresent</code>\u306e\u5834\u5408 <p>\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u8ffd\u52a0\u3057\u3066\u304f\u3060\u3055\u3044\u3002 <pre><code>Add-WindowsCapability -Online -Name OpenSSH.Client~~~~0.0.1.0\n</code></pre></p> <p>2. SSH\u9375\u751f\u6210 <pre><code>mkdir ~/.ssh -Force\nssh-keygen -t ed25519 -N \"\" -C \"ssh_connect\" -f ~/.ssh/ssh_ed25519\n</code></pre></p> <p>3. \u516c\u958b\u9375\u30d5\u30a1\u30a4\u30eb\u540d\u306e\u5909\u66f4 <pre><code>cd ~/.ssh\nmv ssh_ed25519.pub authorized_keys\n</code></pre></p> <p>1. \u30bf\u30fc\u30df\u30ca\u30eb\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002 </p> <p><code>\u2318 + Space\uff08Command + Space\uff09</code>\u3092\u62bc\u4e0b\u3057\u3001\u300c<code>terminal</code>\u300d\u3068\u5165\u529b\u3057\u3001Enter\u3092\u62bc\u4e0b\u3057\u307e\u3059\u3002</p> <p>2. SSH\u9375\u751f\u6210 <pre><code>mkdir -p ~/.ssh\nssh-keygen -t ed25519 -N \"\" -C \"ssh_connect\" -f ~/.ssh/ssh_ed25519\n</code></pre></p> <p>3. \u516c\u958b\u9375\u30d5\u30a1\u30a4\u30eb\u540d\u306e\u5909\u66f4 <pre><code>cd ~/.ssh\nmv ssh_ed25519.pub authorized_keys\n</code></pre></p> <p>\u6ce8\u610f</p> <p>\u4ee5\u4e0b\u306e\u9375\u306f\u7d76\u5bfe\u306b\u7d1b\u5931\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044\u3002 \u7d1b\u5931\u3059\u308b\u3068\u30b5\u30fc\u30d0\u30fc\u3078\u63a5\u7d9a\u3067\u304d\u306a\u304f\u306a\u308a\u307e\u3059\u3002  </p> <p><code>ssh_ed25519</code> \uff08\u79d8\u5bc6\u9375\uff09 <code>authorized_keys</code> \uff08\u516c\u958b\u9375\uff09</p>"},{"location":"setup/address-generate/","title":"\u30a2\u30c9\u30ec\u30b9\u751f\u6210","text":"<p>\u6ce8\u610f</p> <p>\u30d7\u30fc\u30eb\u767b\u9332\u5f8c\u3001\u4ee5\u4e0b\u306e\u624b\u9806\u3092\u3084\u308a\u76f4\u3057\u3059\u308b\u3068\u5909\u66f4\u624b\u7d9a\u304d\u304c\u9762\u5012\u306b\u306a\u308b\u306e\u3067\u3054\u6ce8\u610f\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"setup/address-generate/#1","title":"1. \u30d7\u30ed\u30c8\u30b3\u30eb\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u53d6\u5f97","text":"\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\ncardano-cli conway query protocol-parameters \\\n    $NODE_NETWORK \\\n    --out-file params.json\n</code></pre> <p>\u904b\u7528\u4e0a\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306b\u95a2\u3059\u308b\u91cd\u8981\u306a\u30a2\u30c9\u30d0\u30a4\u30b9</p> <p>\u30ad\u30fc\u306e\u751f\u6210\u306f\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3\u3067\u751f\u6210\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u3001\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u63a5\u7d9a\u304c\u7121\u304f\u3066\u3082\u751f\u6210\u53ef\u80fd\u3067\u3059\u3002 payment\u30ad\u30fc\u306f\u652f\u6255\u3044\u7528\u30a2\u30c9\u30ec\u30b9\u306b\u4f7f\u7528\u3055\u308c\u3001stake\u30ad\u30fc\u306f\u30d7\u30fc\u30eb\u59d4\u4efb\u30a2\u30c9\u30ec\u30b9\u7528\u306e\u7ba1\u7406\u306b\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"setup/address-generate/#2","title":"2. \u652f\u6255\u3044\u30a2\u30c9\u30ec\u30b9\u30ad\u30fc\u306e\u4f5c\u6210","text":"\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\ncardano-cli conway address key-gen \\\n    --verification-key-file payment.vkey \\\n    --signing-key-file payment.skey\n</code></pre>"},{"location":"setup/address-generate/#3","title":"3. \u30b9\u30c6\u30fc\u30af\u30a2\u30c9\u30ec\u30b9\u30ad\u30fc\u306e\u4f5c\u6210","text":"\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cardano-cli conway stake-address key-gen \\\n    --verification-key-file stake.vkey \\\n    --signing-key-file stake.skey\n</code></pre>"},{"location":"setup/address-generate/#4","title":"4. \u30b9\u30c6\u30fc\u30af\u30a2\u30c9\u30ec\u30b9\u306e\u4f5c\u6210","text":"\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cardano-cli conway stake-address build \\\n    --stake-verification-key-file stake.vkey \\\n    --out-file stake.addr \\\n    $NODE_NETWORK\n</code></pre>"},{"location":"setup/address-generate/#5","title":"5. \u652f\u6255\u3044\u7528\u30a2\u30c9\u30ec\u30b9\u306e\u4f5c\u6210","text":"\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cardano-cli conway address build \\\n    --payment-verification-key-file payment.vkey \\\n    --stake-verification-key-file stake.vkey \\\n    --out-file payment.addr \\\n    $NODE_NETWORK\n</code></pre> <p>\u4e0a\u66f8\u304d\u30fb\u524a\u9664\u3055\u308c\u306a\u3044\u3088\u3046\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3092\u5909\u66f4\u3059\u308b\u3002</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>chmod 400 payment.vkey\nchmod 400 payment.skey\nchmod 400 stake.vkey\nchmod 400 stake.skey\nchmod 400 stake.addr\nchmod 400 payment.addr\n</code></pre> \u30d5\u30a1\u30a4\u30eb \u7528\u9014 <code>payment.vkey</code> payment\u30a2\u30c9\u30ec\u30b9\u516c\u958b\u9375 <code>payment.skey</code> payment\u30a2\u30c9\u30ec\u30b9\u79d8\u5bc6\u9375 <code>payment.addr</code> payment\u30a2\u30c9\u30ec\u30b9\u30d5\u30a1\u30a4\u30eb <code>stake.vkey</code> \u30b9\u30c6\u30fc\u30af\u30a2\u30c9\u30ec\u30b9\u516c\u958b\u9375 <code>stake.skey</code> \u30b9\u30c6\u30fc\u30af\u30a2\u30c9\u30ec\u30b9\u79d8\u5bc6\u9375 <code>stake.addr</code> \u30b9\u30c6\u30fc\u30af\u30a2\u30c9\u30ec\u30b9\u30d5\u30a1\u30a4\u30eb <p>\u6ce8\u610f</p> <p>\u3053\u308c\u3089\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u7d1b\u5931\u3057\u306a\u3044\u3088\u3046\u306b\u3054\u6ce8\u610f\u304f\u3060\u3055\u3044\u3002\u7279\u306b.vkey/.skey\u3092\u7121\u304f\u3057\u305f\u5834\u5408\u3001\u30d7\u30fc\u30eb\u5831\u916c\u3084\u8a93\u7d04\u91d1\u3092\u5f15\u304d\u51fa\u305b\u306a\u304f\u306a\u308a\u307e\u3059\u3002\u8907\u6570\u306e\u5916\u90e8\u30c7\u30d0\u30a4\u30b9\u306b\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u53d6\u3063\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"setup/address-generate/#6","title":"6. \u652f\u6255\u3044\u7528\u30a2\u30c9\u30ec\u30b9\u306b\u5165\u91d1\u3059\u308b","text":"<p>\u6b21\u306e\u30b9\u30c6\u30c3\u30d7\u306f\u3001\u3042\u306a\u305f\u306e\u652f\u6255\u3044\u30a2\u30c9\u30ec\u30b9\u306b\u9001\u91d1\u3059\u308b\u624b\u9806\u3067\u3059\u3002</p> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306epayment.addr\u3068stake.addr \u3092BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|payment.addr / stake.addr| B[BP];</code></pre></p> \u30e1\u30a4\u30f3\u30cd\u30c3\u30c8\u30c6\u30b9\u30c8\u30cd\u30c3\u30c8 <p>\u4ee5\u4e0b\u306e\u30a6\u30a9\u30ec\u30c3\u30c8\u304b\u3089\u9001\u91d1\u304c\u53ef\u80fd\u3067\u3059</p> <ul> <li>\u30c0\u30a4\u30c0\u30ed\u30b9 / \u30e8\u30ed\u30a4\u30a6\u30a9\u30ec\u30c3\u30c8 / nami / ccvault.io</li> </ul> <p>\u652f\u6255\u3044\u30a2\u30c9\u30ec\u30b9\u3092\u8868\u793a\u3055\u305b\u3001\u3053\u306e\u30a2\u30c9\u30ec\u30b9\u306b\u9001\u91d1\u3057\u307e\u3059\u3002</p> <pre><code>echo \"$(cat $NODE_HOME/payment.addr)\"\n</code></pre> <p>\u4f55ADA\u5165\u91d1\u3057\u305f\u3089\u3044\u3044\uff1f</p> <p>\u521d\u56de\u306f\u30c6\u30b9\u30c8\u3067\u5c11\u984d\u304b\u3089\u5165\u91d1\u3057\u3066\u304f\u3060\u3055\u3044  </p> <p>payment.addr\u306f\u4ee5\u4e0b\u306e\u5f79\u5272\u304c\u3042\u308b\u305f\u3081\u5fc5\u8981\u5206\u5165\u91d1\u3057\u3066\u304f\u3060\u3055\u3044 \u25cf\u30d7\u30fc\u30eb\u767b\u9332\u6599\u306e\u652f\u6255\u3044(500ADA) \u25cf\u30b9\u30c6\u30fc\u30af\u30a2\u30c9\u30ec\u30b9\u767b\u9332\u6599\u306e\u652f\u6255\u3044(2ADA) \u25cf\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u624b\u6570\u6599\u306e\u652f\u6255\u3044(\u6570ADA) \u25cf\u8a93\u7d04\u91d1\u306e\u9810\u3051\u5148(\u8a93\u7d04\u3068\u3057\u3066\u8a2d\u5b9a\u3057\u305f\u3044\u984d)  </p> <p>\u30c6\u30b9\u30c8\u30cd\u30c3\u30c8\u7528tADA\u306e\u8acb\u6c42</p> <p>\u30c6\u30b9\u30c8\u30cd\u30c3\u30c8\u7528\u53e3\u5ea7\u306b\u3042\u306a\u305f\u306e\u652f\u6255\u3044\u7528\u30a2\u30c9\u30ec\u30b9\u3092\u30ea\u30af\u30a8\u30b9\u30c8\u3057\u307e\u3059\u3002 \u30c6\u30b9\u30c8\u30cd\u30c3\u30c8\u7528\u53e3\u5ea7\u306f24\u6642\u9593\u3054\u3068\u306b10000tADA\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002</p> <p>\u6b21\u306e\u30b3\u30fc\u30c9\u3092\u5b9f\u884c\u3057\u3002\u652f\u6255\u3044\u30a2\u30c9\u30ec\u30b9\u3092\u8868\u793a\u3055\u305b\u307e\u3059\u3002</p> <pre><code>echo \"$(cat $NODE_HOME/payment.addr)\"\n</code></pre> <p>\u3053\u306e\u30a2\u30c9\u30ec\u30b9\u3092\u4e0a\u8a18\u30da\u30fc\u30b8\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u6b04\u306b\u8cbc\u308a\u4ed8\u3051\u307e\u3059\u3002</p> <p>\u652f\u6255\u3044\u7528\u30a2\u30c9\u30ec\u30b9\u306b\u9001\u91d1\u5f8c\u3001\u6b8b\u9ad8\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u30ce\u30fc\u30c9\u3092\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u3068\u5b8c\u5168\u306b\u540c\u671f\u3055\u305b\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u5b8c\u5168\u306b\u540c\u671f\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u3001\u6b8b\u9ad8\u304c\u8868\u793a\u3055\u308c\u307e\u305b\u3093\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway query utxo \\\n    --address $(cat payment.addr) \\\n    $NODE_NETWORK \\\n    --output-text\n</code></pre> <p>\u6b21\u306e\u3088\u3046\u306b\u8868\u793a\u3055\u308c\u305f\u3089\u5165\u91d1\u5b8c\u4e86\u3067\u3059\u3002</p> <pre><code>                        TxHash                                 TxIx        Lovelace\n----------------------------------------------------------------------------------------\n100322a39d02c2ead....                                              0        1000000000\n</code></pre>"},{"location":"setup/air-gapped-setup/","title":"\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u74b0\u5883\u69cb\u7bc9","text":"<p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u3068\u306f</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u3068\u306f\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u304b\u3089\u5b8c\u5168\u306b\u9694\u96e2\u3055\u308c\u305f\u30aa\u30d5\u30e9\u30a4\u30f3\u74b0\u5883\u3067\u52d5\u4f5c\u3059\u308b\u5c02\u7528\u30de\u30b7\u30f3\u3092\u6307\u3057\u307e\u3059\u3002 \u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u904b\u7528\u306b\u304a\u3044\u3066\u306f\u3001\u30a6\u30a9\u30ec\u30c3\u30c8\u306e\u79d8\u5bc6\u9375\u304a\u3088\u3073\u30d7\u30fc\u30eb\u904b\u55b6\u7528\u306e\u79d8\u5bc6\u9375\u3092\u5b89\u5168\u306b\u7ba1\u7406\u3057\u3001\u30aa\u30d5\u30e9\u30a4\u30f3\u72b6\u614b\u3067<code>cardano-cli</code>\u3092\u7528\u3044\u305f\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u7f72\u540d\u3092\u884c\u3046\u305f\u3081\u306b\u4f7f\u7528\u3057\u307e\u3059\u3002 \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306e\u4e00\u822c\u7684\u306a\u5b9a\u7fa9\u304a\u3088\u3073\u8003\u3048\u65b9\u306b\u3064\u3044\u3066\u306f\u3001Wikipedia\u306e\u89e3\u8aac\u3092\u3054\u53c2\u7167\u304f\u3060\u3055\u3044\u3002</p> <p>\u79d8\u5bc6\u9375\u30aa\u30f3\u30e9\u30a4\u30f3\u4fdd\u5b58\u306e\u30ea\u30b9\u30af</p> <p>\u3053\u308c\u3089\u306e\u79d8\u5bc6\u9375\u3092\u30aa\u30f3\u30e9\u30a4\u30f3\u74b0\u5883\uff08BP/\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u7b49\uff09\u306b\u4fdd\u5b58\u3059\u308b\u3068\u3001\u30cf\u30c3\u30ad\u30f3\u30b0\u30fb\u30de\u30eb\u30a6\u30a7\u30a2\u611f\u67d3\u306a\u3069\u306b\u3088\u308a\u3001\u8cc7\u91d1\u3084\u30d7\u30fc\u30eb\u904b\u55b6\u6a29\u9650\u306e\u76d7\u96e3\u7b49\u306b\u3064\u306a\u304c\u308b\u91cd\u5927\u306a\u30ea\u30b9\u30af\u304c\u767a\u751f\u3057\u307e\u3059\u3002   \u305d\u306e\u305f\u3081\u3001\u79d8\u5bc6\u9375\u306e\u7ba1\u7406\u3068\u7f72\u540d\u51e6\u7406\u306f\u5fc5\u305a\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u4e0a\u3067\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044\u3002 </p>"},{"location":"setup/air-gapped-setup/#_2","title":"\u65b9\u91dd","text":"<p>\u524d\u63d0</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u74b0\u5883\u3068\u3057\u3066\u306e\u5b89\u5168\u6027\u3092\u78ba\u4fdd\u3059\u308b\u305f\u3081\u3001\u672c\u30de\u30cb\u30e5\u30a2\u30eb\u3067\u306f\u3001USB\u30d6\u30fc\u30c8\u306b\u3088\u308a Ubuntu 24.04 \u3092\u7269\u7406\u30de\u30b7\u30f3\u3078\u30cd\u30a4\u30c6\u30a3\u30d6\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb \u3057\u3001\u65e2\u5b58OS\u3092\u524a\u9664\u3057\u305f\u5358\u4e00OS\u69cb\u6210\u3067\u904b\u7528\u3059\u308b\u3053\u3068\u3092\u524d\u63d0\u3068\u3057\u307e\u3059\u3002</p> <p>Live\u30d6\u30fc\u30c8\u3001\u30c7\u30e5\u30a2\u30eb\u30d6\u30fc\u30c8\u69cb\u6210\u3001\u306a\u3089\u3073\u306b \u30db\u30b9\u30c8OS\u306b\u4f9d\u5b58\u3059\u308b\u3042\u3089\u3086\u308b\u4eee\u60f3\u5316\u30fb\u30b3\u30f3\u30c6\u30ca\u5b9f\u884c\u74b0\u5883\uff08\u30cf\u30a4\u30d1\u30fc\u30d0\u30a4\u30b6\u30fc\u578b\u304a\u3088\u3073 OS \u30ec\u30d9\u30eb\u4eee\u60f3\u5316\u3092\u542b\u3080\uff09\u306f\u3001\u6c38\u7d9a\u6027\u3084\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u5883\u754c\u3092\u4fdd\u8a3c\u3067\u304d\u306a\u3044\u305f\u3081\u3001\u672c\u30de\u30cb\u30e5\u30a2\u30eb\u3067\u306f\u63a1\u7528\u3057\u307e\u305b\u3093\u3002</p>"},{"location":"setup/air-gapped-setup/#_3","title":"\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306e\u69cb\u7bc9\u624b\u9806","text":"<p>\u6ce8\u610f\u70b9</p> <p>Ubuntu\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5bfe\u8c61\u306e\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u4e2d\u3082\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306b\u7e4b\u304c\u306a\u3044\u3067\u304f\u3060\u3055\u3044</p> <p>\u6e96\u5099\u30d0\u30bd\u30b3\u30f3\u306f2\u53f0\u3067\u3059\u3002  </p> <ul> <li>\u8d77\u52d5\u7528USB\u4f5c\u6210PC Windows\uff0fmacOS\uff0fIntel Mac\uff0fApple Silicon Mac \u3044\u305a\u308c\u3067\u3082\u53ef\uff08ISO\u30d5\u30a1\u30a4\u30eb\u306e\u66f8\u304d\u8fbc\u307f\u5c02\u7528\uff09</li> <li>Ubuntu\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5bfe\u8c61\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7PC Ubuntu\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308bPC\uff08\u65e2\u5b58OS\u304c\u6d88\u53bb\u3055\u308c\u3066\u3082\u554f\u984c\u306a\u3044PC / x86_64\uff09 \u63a8\u5968\u30b9\u30da\u30c3\u30af\uff1aCPU2\u30b3\u30a2\u4ee5\u4e0a\u3001RAM4GB\u4ee5\u4e0a\u3001\u30c7\u30a3\u30b9\u30af25GB\u4ee5\u4e0a</li> </ul>"},{"location":"setup/air-gapped-setup/#1-ubuntu-desktop","title":"1. Ubuntu Desktop\u30a4\u30e1\u30fc\u30b8\u306e\u53d6\u5f97","text":"<p>Ubuntu <code>Desktop</code> \u30a4\u30e1\u30fc\u30b8\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002</p> <p>Ubuntu 24.04.* (Noble Numbat) \u203b \u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u5b8c\u4e86\u307e\u3067\u5c11\u3057\u304b\u304b\u308b\u306e\u3067\u3057\u3070\u3089\u304f\u304a\u5f85\u3061\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"setup/air-gapped-setup/#2-usbbalenaetcher","title":"2. USB\u30d6\u30fc\u30c8\u30c7\u30a3\u30b9\u30af\u4f5c\u6210\uff08balenaEtcher\uff09","text":""},{"location":"setup/air-gapped-setup/#_4","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u30d2\u30f3\u30c8</p> <ul> <li>\u521d\u671f\u5316\u3057\u3066\u3082\u554f\u984c\u306a\u3044\u5bb9\u91cf<code>12GB</code>\u4ee5\u4e0a\u306eUSB\u30e1\u30e2\u30ea\u30c7\u30d0\u30a4\u30b9  </li> <li><code>Windows</code>\u307e\u305f\u306f<code>macOS</code>\u304c\u52d5\u4f5c\u3059\u308bPC  </li> <li>1. Ubuntu Desktop\u30a4\u30e1\u30fc\u30b8\u306e\u53d6\u5f97\u3067\u53d6\u5f97\u3057\u305fISO\u30a4\u30e1\u30fc\u30b8\u30d5\u30a1\u30a4\u30eb</li> </ul>"},{"location":"setup/air-gapped-setup/#balenaetcher","title":"<code>balenaEtcher</code>\u306e\u4f7f\u7528\u6982\u8981","text":"<p>balenaEtcher\u306f\u3001\u7121\u6599\u304b\u3064\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306eUSB\u66f8\u304d\u8fbc\u307f\u30c4\u30fc\u30eb\u3067\u3042\u308a\u3001Ubuntu\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u4f7f\u7528\u3059\u308b\u30d6\u30fc\u30c8\u53ef\u80fd\u306aUSB\u30e1\u30c7\u30a3\u30a2\u3092\u5b89\u5168\u304b\u3064\u7c21\u5358\u306b\u4f5c\u6210\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"setup/air-gapped-setup/#2-1-etcher","title":"2-1. Etcher\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>balenaEtcher\u306e\u516c\u5f0f\u30b5\u30a4\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30e9\u30fc\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002</p> <p>https://etcher.balena.io</p> <p>\u5404OS\u3067\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806</p> Windows\u306e\u5834\u5408Mac\u306e\u5834\u5408 <p>1. <code>Etcher for Windows (x86|x64) (Installer)</code>\u306e\u53f3\u5074\u306e\u300c<code>Download</code>\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002 2. Windows 64-bit\u7528\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30e9\u30fc\uff08<code>balenaEtcher-*.*.*.Setup.exe</code>\uff09\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002 3. \u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f<code>.exe</code>\u30d5\u30a1\u30a4\u30eb\u3092\u5b9f\u884c\u3057\u3001\u753b\u9762\u306e\u6307\u793a\u306b\u5f93\u3063\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u5b8c\u4e86\u3055\u305b\u307e\u3059\u3002</p> <ul> <li>\u30a8\u30af\u30b9\u30d7\u30ed\u30fc\u30e9\u30fc\u3092\u958b\u304d\u3001\u5de6\u5074\u30e1\u30cb\u30e5\u30fc\u306e\u300c\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u300d\u3092\u9078\u629e</li> <li><code>balenaEtcher-*.*.*.Setup.exe</code>\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30d6\u30eb\u30af\u30ea\u30c3\u30af <p>\u30a4\u30f3\u30b9\u30c8\u30fc\u30e9\u30fc\u306e\u6307\u793a\u306b\u5f93\u3044\u9032\u3081\u3066\u304f\u3060\u3055\u3044</p> </li> </ul> <p>1. \u5229\u7528\u3057\u3066\u3044\u308bMac\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306b\u5fdc\u3058\u3066\u3001\u5bfe\u5fdc\u3059\u308b <code>Etcher for macOS</code> \u306e\u300c<code>Download</code>\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002</p> <ul> <li>Apple Silicon (M1/M2/M3 \u306a\u3069) \u2192 <code>Etcher for macOS (arm64)</code></li> <li>Intel Mac \u2192 <code>Etcher for macOS (x64)</code></li> </ul> <p>2. \u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f <code>.dmg</code> \u30d5\u30a1\u30a4\u30eb\uff08\u4f8b\uff1a  </p> <ul> <li><code>balenaEtcher-*.*.*-arm64.dmg</code> </li> <li><code>balenaEtcher-*.*.*-x64.dmg</code> </li> </ul> <p>\uff09\u3092\u958b\u304d\u3001<code>Etcher</code> \u30a2\u30a4\u30b3\u30f3\u3092 \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30d5\u30a9\u30eb\u30c0\u3078\u30c9\u30e9\u30c3\u30b0\uff06\u30c9\u30ed\u30c3\u30d7 \u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002</p> <p>3. \u521d\u56de\u8d77\u52d5\u6642\u306b\u8b66\u544a\u304c\u8868\u793a\u3055\u308c\u3066\u3082\u3001\u4e0a\u8a18\u624b\u9806\u3067\u53d6\u5f97\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u3067\u3042\u308c\u3070\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002 \u300c<code>\u958b\u304f</code>\u300d\u3092\u9078\u629e\u3057\u3066\u7d9a\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"setup/air-gapped-setup/#2-2-usb","title":"2-2. USB\u30e1\u30c7\u30a3\u30a2\u306e\u4f5c\u6210","text":"<p>USB\u30d6\u30fc\u30c8\u30c7\u30a3\u30b9\u30af\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p> <p>\u624b\u9806</p> <p>1. USB\u30e1\u30e2\u30ea\u3092PC\u306b\u633f\u5165\u3057\u307e\u3059\u3002  </p> <p>USB\u30dd\u30fc\u30c8\u306b\u6b63\u3057\u304f\u63a5\u7d9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>2. Etcher\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002</p> <p>3. Ubuntu ISO \u30a4\u30e1\u30fc\u30b8\u3092\u9078\u629e\u3057\u307e\u3059\u3002   </p> <p>\u300cFlash from file\u300d\u3092\u9078\u629e\u3057\u3001\u4e8b\u524d\u306b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305fUbuntu ISO \u30a4\u30e1\u30fc\u30b8\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u629e\u3057\u307e\u3059\u3002</p> <p>4. USB\u30e1\u30e2\u30ea\u3092\u9078\u629e\u3057\u307e\u3059\u3002  </p> <p>\u300cSelect target\u300d\u3092\u9078\u629e\u3057\u3001\u66f8\u304d\u8fbc\u307f\u5148\u3068\u306a\u308bUSB\u30e1\u30e2\u30ea\u3092\u9078\u629e\u5f8c\u3001\u300c<code>Select 1</code>\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002  </p> <p>\u8aa4\u3063\u305f\u30c7\u30a3\u30b9\u30af\u3092\u9078\u3070\u306a\u3044\u3088\u3046\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>USB\u4ee5\u5916\u306e\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u9078\u629e\u3059\u308b\u3068\u30c7\u30fc\u30bf\u304c\u6d88\u53bb\u3055\u308c\u307e\u3059\u3002  </p> <p>5. \u300cFlash\u300d\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002 \u300cFlash!\u300d\u3092\u9078\u629e\u3059\u308b\u3068\u66f8\u304d\u8fbc\u307f\u6a29\u9650\u306e\u4ed8\u4e0e\u304c\u6c42\u3081\u3089\u308c\u308b\u306e\u3067PC\uff08Windows/macOS\uff09\u306e\u7ba1\u7406\u8005\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3001\u300c<code>Ok</code>\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002  </p> <p>\u300c\u201cbalenaEtcher.app\u201d \u304c\u30ea\u30e0\u30fc\u30d0\u30d6\u30eb\u30dc\u30ea\u30e5\u30fc\u30e0\u4e0a\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3088\u3046\u3068\u3057\u3066\u3044\u307e\u3059\u3002\u300d\u3068\u3044\u3046\u30c0\u30a4\u30a2\u30ed\u30b0\u304c\u8868\u793a\u3055\u308c\u305f\u5834\u5408\u306f\u3001\u300c\u8a31\u53ef\u300d\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u3002 USB\u30e1\u30e2\u30ea\u306e\u66f8\u304d\u8fbc\u307f\u901f\u5ea6\u306b\u4f9d\u5b58\u3057\u307e\u3059\u304c\u3001\u51e6\u7406\u306e\u5b8c\u4e86\u307e\u3067\u6570\u5206\u304b\u308915\u5206\u7a0b\u5ea6\u3092\u8981\u3057\u307e\u3059\u3002</p> <p>6. \u66f8\u304d\u8fbc\u307f\u5b8c\u4e86\u5f8c\u306e\u78ba\u8a8d</p> <p>\u66f8\u304d\u8fbc\u307f\u304c\u5b8c\u4e86\u3059\u308b\u3068Etcher\u4e0a\u3067\u300cFlash Completed!\u300d\u3068\u8868\u793a\u3055\u308c\u307e\u3059\u306e\u3067\u753b\u9762\u3092\u9589\u3058\u3066\u7d42\u4e86\u3057\u3001USB\u3092\u629c\u3044\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u30d2\u30f3\u30c8</p> <p>macOS\u74b0\u5883\u3067\u306f\u3001USB\u30e1\u30c7\u30a3\u30a2\u304c\u300c\u8aad\u307f\u53d6\u308c\u307e\u305b\u3093\u300d\u3068\u3044\u3063\u305f\u8b66\u544a\u304c\u8868\u793a\u3055\u308c\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u3053\u308c\u306f\u6b63\u5e38\u3067\u3059\u306e\u3067USB\u3092\u53d6\u308a\u5916\u3057\u3066\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002</p>"},{"location":"setup/air-gapped-setup/#3-usbubuntu","title":"3. USB\u30d6\u30fc\u30c8\u306b\u3088\u308bUbuntu\u306e\u8d77\u52d5","text":"<ol> <li>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u3068\u3057\u3066\u4f7f\u7528\u3059\u308bPC\u306b\u5148\u307b\u3069\u66f8\u304d\u8fbc\u3093\u3060USB\u3092\u633f\u5165\u3057\u307e\u3059\u3002    </li> <li>\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u30fc\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002  </li> <li>\u8868\u793a\u3055\u308c\u305f\u30e1\u30cb\u30e5\u30fc\u304b\u3089\u300c<code>Try or Install Ubuntu</code>\u300d\u3092\u9078\u629e\u3057\u3001Enter\u30ad\u30fc\u3092\u62bc\u4e0b\u3057\u307e\u3059\u3002 \u305d\u306e\u5f8c\u306f\u753b\u9762\u306e\u6307\u793a\u306b\u5f93\u3063\u3066\u901a\u5e38\u306eUbuntu Desktop\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u9032\u3081\u3066\u304f\u3060\u3055\u3044\u3002   <p>Ubuntu\u304c\u8d77\u52d5\u3057\u306a\u3044\u5834\u5408\u306f\u3001\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u30fc\u3092\u518d\u8d77\u52d5\u3057\u3066\u304f\u3060\u3055\u3044\u3002 \u305d\u306e\u969bWindows\u3067\u306f\u4e3b\u306b<code>F12</code>\u3001Mac\u3060\u3068<code>Option</code>\u307e\u305f\u306f<code>Alt</code>\u30ad\u30fc\u3092\u62bc\u3057\u7d9a\u3051\u3066\u304f\u3060\u3055\u3044\u3002</p> </li> </ol> <p></p>"},{"location":"setup/air-gapped-setup/#3-1","title":"3-1. \u30a4\u30f3\u30b9\u30c8\u30fc\u30e9\u30fc\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7","text":"<p>\u203b \u4ee5\u964d\u306e\u753b\u50cf\u306f\u4e00\u4f8b\u3067\u3042\u308a\u3001\u74b0\u5883\u306b\u3088\u3063\u3066\u8868\u793a\u304c\u7570\u306a\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002  </p> <ol> <li> <p>\u8a00\u8a9e\u3092\u9078\u629e\u3002 </p> </li> <li> <p>\u30a2\u30af\u30bb\u30b7\u30d3\u30ea\u30c6\u30a3\u8a2d\u5b9a\u306f\u9078\u629e\u305b\u305a\u3001\u300c<code>\u6b21</code>\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002 </p> </li> <li> <p>\u4f7f\u7528\u3057\u3066\u3044\u308b\u30ad\u30fc\u30dc\u30fc\u30c9\u30ec\u30a4\u30a2\u30a6\u30c8\u3092\u9078\u629e\u3057\u307e\u3059\u3002 </p> </li> <li> <p>\u300c<code>\u4eca\u306f\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306b\u63a5\u7d9a\u3057\u306a\u3044</code>\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002 </p> </li> <li> <p>\u300c<code>Ubuntu\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb</code>\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002 </p> </li> <li> <p>\u5bfe\u8a71\u578b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u300c<code>\u5bfe\u8a71\u5f0f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb</code>\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002 </p> </li> <li> <p>\u300c<code>\u898f\u5b9a\u306e\u9078\u629e</code>\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002 </p> </li> <li> <p>\u4e0d\u8981\u306a\u30c9\u30e9\u30a4\u30d0\u3084\u30d0\u30a4\u30ca\u30ea\u3092\u6700\u5c0f\u5316\u3059\u308b\u305f\u3081\u3001\u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3\u88fd\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u305b\u3093\u3002 </p> </li> </ol>"},{"location":"setup/air-gapped-setup/#3-2","title":"3-2. \u30c7\u30a3\u30b9\u30af\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7","text":"<ol> <li> <p>\u300c<code>\u30c7\u30a3\u30b9\u30af\u3092\u524a\u9664\u3057\u3066Ubuntu\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b</code>\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002 </p> </li> <li> <p>\u30e6\u30fc\u30b6\u30fc\u540d\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002 </p> <p>\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u30fc\u540d\u306e\u672b\u5c3e\u306f\u81ea\u52d5\u3067\u5165\u529b\u3055\u308c\u307e\u3059\u3002  </p> </li> <li> <p>\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u306e\u9078\u629e\u3092\u3057\u307e\u3059\u3002 </p> </li> <li> <p>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u6e96\u5099\u304c\u5b8c\u4e86\u3057\u305f\u306e\u3067\u78ba\u8a8d\u3057\u3001\u300c<code>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb</code>\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002 </p> </li> </ol>"},{"location":"setup/air-gapped-setup/#3-3","title":"3-3. \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u5b8c\u4e86","text":"<ol> <li> <p>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5b8c\u4e86\u753b\u9762\u3092\u5f85\u6a5f\u3057\u3001\u5b8c\u4e86\u5f8c\u300c<code>\u4eca\u3059\u3050\u518d\u8d77\u52d5</code>\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002 </p> </li> <li> <p>USB\u3092\u53d6\u308a\u5916\u3059\u305f\u3081\u300c<code>Enter</code>\u300d\u3092\u62bc\u4e0b\u3057\u3066\u304f\u3060\u3055\u3044\u3002 \u300c<code>Enter</code>\u300d\u3092\u62bc\u4e0b\u5f8c\u3001\u3059\u3050USB\u3092\u629c\u3044\u3066\u304f\u3060\u3055\u3044\u3002 </p> </li> <li> <p>\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u3067\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u307e\u3059\u3002 </p> </li> </ol>"},{"location":"setup/air-gapped-setup/#3-4","title":"3-4. \u8ffd\u52a0\u8a2d\u5b9a","text":"<ol> <li> <p>\u4ee5\u4e0b\u306e\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u305f\u3089\u53f3\u4e0a\u306e\u300c<code>\u6b21\u3078</code>\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002 </p> </li> <li> <p>\u300c<code>Skip for now</code>\u300d\u304c\u9078\u629e\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3001\u53f3\u4e0a\u306e\u300c<code>\u30b9\u30ad\u30c3\u30d7</code>\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002 </p> </li> <li> <p>\u300c<code>\u3044\u3044\u3048\u3001\u30b7\u30b9\u30c6\u30e0\u30c7\u30fc\u30bf\u3092\u5171\u6709\u3057\u307e\u305b\u3093</code>\u300d\u3092\u9078\u629e\u3057\u3001\u53f3\u4e0a\u306e\u300c<code>\u6b21\u3078</code>\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002 </p> </li> <li> <p>\u53f3\u4e0a\u306e\u300c<code>\u5b8c\u4e86</code>\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002 </p> </li> <li> <p>\u8ffd\u52a0\u8a2d\u5b9a\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f\u3002   </p> </li> </ol>"},{"location":"setup/air-gapped-setup/#3-5","title":"3-5. \u30bf\u30fc\u30df\u30ca\u30eb\u306e\u8a2d\u5b9a","text":"<ol> <li> <p>\u30bf\u30fc\u30df\u30ca\u30eb\u306e\u8a2d\u5b9a\u3092\u3059\u308b\u305f\u3081\u5de6\u4e0b\u306e\u30a2\u30a4\u30b3\u30f3\u3092\u9078\u629e\u3057\u3001\u300c<code>\u7aef\u672b</code>\u300d\u30a2\u30a4\u30b3\u30f3\u3092\u9078\u629e\u3057\u307e\u3059\u3002 </p> </li> <li> <p>\u30bf\u30fc\u30df\u30ca\u30eb\u3092\u53f3\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001\u300c<code>\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306b\u30d4\u30f3\u7559\u3081</code>\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002 </p> </li> </ol>"},{"location":"setup/air-gapped-setup/#3-6","title":"3-6. \u5404\u7a2e\u8a2d\u5b9a","text":"<ol> <li> <p>\u30d6\u30e9\u30b1\u30c3\u30c8\u30e2\u30fc\u30c9\u306e\u7121\u52b9\u5316\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002 <pre><code>echo 'set enable-bracketed-paste off' &gt;&gt; ~/.inputrc\n</code></pre></p> </li> <li> <p>\u30bf\u30fc\u30df\u30ca\u30eb\u3092\u7d42\u4e86\u3057\u307e\u3059\u3002 <pre><code>exit\n</code></pre></p> </li> <li> <p>\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u8a2d\u5b9a\uff08\u4efb\u610f\uff09 \u597d\u307f\u306b\u5fdc\u3058\u3066\u3001\u753b\u9762\u3092\u53f3\u30af\u30ea\u30c3\u30af\u3057\u3066\u300c<code>Display Settings</code>\u300d\u3092\u958b\u304d\u3001\u300c<code>Scale</code>\u300d\u3092\u300c<code>200%</code>\u300d\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002</p> </li> </ol>"},{"location":"setup/air-gapped-setup/#3-7","title":"3-7. \u901a\u4fe1\u6a5f\u80fd\u306e\u5b8c\u5168\u7121\u52b9\u5316","text":"<p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30fb\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3\u3068\u3057\u3066\u904b\u7528\u3059\u308b\u305f\u3081\u3001<code>Wi-Fi</code> / <code>Bluetooth</code> / <code>\u6709\u7dda\u901a\u4fe1</code>\u3092\u542b\u3080\u3059\u3079\u3066\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u6a5f\u80fd\u3092<code>OS</code>\u30ec\u30d9\u30eb\u3067\u7121\u52b9\u5316\u3057\u307e\u3059\u3002 \u203b \u6a5f\u5185\u30e2\u30fc\u30c9\u306f\u518d\u8d77\u52d5\u5f8c\u306b\u89e3\u9664\u3055\u308c\u308b\u305f\u3081\u4f7f\u7528\u3057\u307e\u305b\u3093\u3002</p> <ol> <li> <p><code>NetworkManager</code>\u306e\u5b8c\u5168\u505c\u6b62 <pre><code>sudo systemctl stop NetworkManager\n</code></pre> <pre><code>sudo systemctl disable NetworkManager\n</code></pre></p> </li> <li> <p><code>Bluetooth</code> \u30b5\u30fc\u30d3\u30b9\u306e\u5b8c\u5168\u7121\u52b9\u5316 <pre><code>sudo systemctl stop bluetooth\n</code></pre> <pre><code>sudo systemctl disable bluetooth\n</code></pre> <pre><code>sudo systemctl mask bluetooth\n</code></pre></p> </li> <li> <p><code>rfkill</code> \u306b\u3088\u308b\u7121\u7dda\u30c7\u30d0\u30a4\u30b9\u906e\u65ad <pre><code>sudo rfkill block all\n</code></pre></p> </li> <li> <p>\u7121\u7dda\u30c7\u30d0\u30a4\u30b9\u906e\u65ad\u306e\u78ba\u8a8d <pre><code>rfkill list\n</code></pre> <code>Soft blocked: yes</code> \u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u3000\u3000</p> </li> <li> <p><code>rfkill</code> \u306e\u6c38\u7d9a\u5316 <pre><code>sudo tee /etc/systemd/system/rfkill-block.service &gt; /dev/null &lt;&lt; 'EOF'\n[Unit]\nDescription=Block all radios (air-gapped)\nAfter=multi-user.target\n\n[Service]\nType=oneshot\nExecStart=/usr/sbin/rfkill block all\n\n[Install]\nWantedBy=multi-user.target\nEOF\n</code></pre></p> </li> <li> <p>\u6709\u52b9\u5316 <pre><code>sudo systemctl daemon-reload\n</code></pre> <pre><code>sudo systemctl enable rfkill-block.service\n</code></pre></p> </li> <li> <p>\u30b7\u30b9\u30c6\u30e0\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002 <pre><code>sudo reboot\n</code></pre></p> </li> </ol> <p>\u72b6\u614b\u78ba\u8a8d </p> <ol> <li> <p><code>NetworkManager</code> <pre><code>nmcli general status\n</code></pre> \u671f\u5f85\u3055\u308c\u308b\u8868\u793a\u4f8b\uff1a <pre><code>Error: NetworkManager is not running.\n</code></pre></p> </li> <li> <p><code>Wi-Fi</code> / <code>\u7121\u7dda</code> <pre><code>nmcli radio\n</code></pre> \u671f\u5f85\u3055\u308c\u308b\u8868\u793a\u4f8b\uff1a <pre><code>Error: NetworkManager is not running.\n</code></pre></p> </li> <li> <p><code>rfkill</code> <pre><code>rfkill list\n</code></pre></p> <p><code>Soft blocked: yes</code> \u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</p> </li> <li> <p>Bluetooth \u30b5\u30fc\u30d3\u30b9\u306e\u72b6\u614b\u78ba\u8a8d <pre><code>systemctl status bluetooth --no-pager\n</code></pre> \u671f\u5f85\u3055\u308c\u308b\u8868\u793a\u4f8b\uff1a <pre><code>\u25cb bluetooth.service\n     Loaded: masked (Reason: Unit bluetooth.service is masked.)\n     Active: inactive (dead)\n</code></pre></p> </li> </ol> <p>\u4ee5\u4e0a\u306e\u8a2d\u5b9a\u306b\u3088\u308a\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u74b0\u5883\u306e\u69cb\u7bc9\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f\u3002</p>"},{"location":"setup/air-gapped-setup/#4","title":"4. \u65e7\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u304b\u3089\u306e\u79fb\u884c","text":"<p>\u65e7\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\uff08VirtualBox\u7b49\uff09\u304b\u3089\u79fb\u884c\u3059\u308b\u5834\u5408\u306e\u624b\u9806\u3067\u3059\u3002</p>"},{"location":"setup/air-gapped-setup/#4-1","title":"4-1. \u74b0\u5883\u5909\u6570\u306e\u8a2d\u5b9a","text":"<pre><code>echo 'export NODE_HOME=\"$HOME/cnode\"' &gt;&gt; ~/.bashrc\necho 'export NODE_NETWORK=\"--mainnet\"' &gt;&gt; ~/.bashrc\necho 'export CARDANO_NODE_NETWORK_ID=mainnet' &gt;&gt; ~/.bashrc\necho alias airgap=\"'cd $HOME/cnode &amp;&amp; [ -f airgap-set.tar.gz ] &amp;&amp; tar -xOzf airgap-set.tar.gz airgap_script | bash -s verify || echo \"airgap-set.tar.gz \u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\"'\" &gt;&gt; $HOME/.bashrc\n\nsource ~/.bashrc\nmkdir -p ${NODE_HOME}\n</code></pre> \u30c6\u30b9\u30c8\u30cd\u30c3\u30c8\u306e\u5834\u5408\u306f\u3053\u3061\u3089 PreviewPreProd <pre><code>echo 'export NODE_HOME=\"$HOME/cnode\"' &gt;&gt; $HOME/.bashrc\necho 'export NODE_NETWORK=\"--testnet-magic 2\"' &gt;&gt; $HOME/.bashrc\necho 'export CARDANO_NODE_NETWORK_ID=2' &gt;&gt; $HOME/.bashrc\necho alias airgap=\"'cd $HOME/cnode &amp;&amp; [ -f airgap-set.tar.gz ] &amp;&amp; tar -xOzf airgap-set.tar.gz airgap_script | bash -s verify || echo \"airgap-set.tar.gz \u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\"'\" &gt;&gt; $HOME/.bashrc\n\nsource $HOME/.bashrc\nmkdir -p ${NODE_HOME}\n</code></pre> <pre><code>echo 'export NODE_HOME=\"$HOME/cnode\"' &gt;&gt; $HOME/.bashrc\necho 'export NODE_NETWORK=\"--testnet-magic 1\"' &gt;&gt; $HOME/.bashrc\necho 'export CARDANO_NODE_NETWORK_ID=1' &gt;&gt; $HOME/.bashrc\necho alias airgap=\"'cd $HOME/cnode &amp;&amp; [ -f airgap-set.tar.gz ] &amp;&amp; tar -xOzf airgap-set.tar.gz airgap_script | bash -s verify || echo \"airgap-set.tar.gz \u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\"'\" &gt;&gt; $HOME/.bashrc\n\nsource $HOME/.bashrc\nmkdir -p ${NODE_HOME}\n</code></pre>"},{"location":"setup/air-gapped-setup/#4-2","title":"4-2. \u30d5\u30a1\u30a4\u30eb\u306e\u79fb\u52d5","text":"<p>\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u5909\u66f4</p> VirtualBox\u5074 <pre><code>chmod u+rx $HOME/cold-keys\n</code></pre> <p>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30b3\u30d4\u30fc VirtualBox\u5074\u304b\u3089\u4ee5\u4e0b\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u30b3\u30d4\u30fc\u3057\u3066\u65b0\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306e$HOME\u76f4\u4e0b\u306b\u79fb\u52d5\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>($HOME\u306f/home/\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u6307\u3057\u307e\u3059)   <ul> <li>$HOME/cnode  </li> <li>$HOME/cold-kes  </li> </ul> <p>\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u5909\u66f4</p> \u65b0\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u5074 <pre><code>chmod a-rx $HOME/cold-keys\n</code></pre>"},{"location":"setup/air-gapped-setup/#4-3-cli","title":"4-3. CLI\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>cardano-cli\u30d0\u30a4\u30ca\u30ea\u30fc\u30d5\u30a1\u30a4\u30eb\u30b3\u30d4\u30fc\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044</p>"},{"location":"setup/blocklog-setup/","title":"\u30d6\u30ed\u30c3\u30af\u30ed\u30b0\u8a2d\u5b9a","text":"<p>\u30d6\u30ed\u30c3\u30af\u30ed\u30b0\u306b\u3064\u3044\u3066</p> <p>\u3053\u306e\u30c4\u30fc\u30eb\u306f\u30a6\u30ed\u30dc\u30ed\u30b9\u306b\u304a\u3051\u308b\u81ea\u30d7\u30fc\u30eb\u306e\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3092\u4e8b\u524d\u306b\u53d6\u5f97\u3059\u308b\u30c4\u30fc\u30eb\u3067\u3059\u3002 \u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u306f\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u4e0a\u30d1\u30d6\u30ea\u30c3\u30af\u306b\u306f\u516c\u958b\u3055\u308c\u307e\u305b\u3093\u3002</p>"},{"location":"setup/blocklog-setup/#1","title":"1. \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u8981\u4ef6","text":"<p>\u8a2d\u5b9a\u30b5\u30fc\u30d0\u30fc</p> <ul> <li>BP\u30ce\u30fc\u30c9\u9650\u5b9a</li> </ul> <p>\u7a3c\u50cd\u8981\u4ef6</p> <ul> <li>\uff14\u3064\u306e\u30b5\u30fc\u30d3\u30b9(\u30d7\u30ed\u30b0\u30e9\u30e0)\u3092systemd\u306b\u3066\u5e38\u99d0\u3055\u305b\u307e\u3059\u3002</li> <li>\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u540c\u671f\u7528DB\u3092\u65b0\u3057\u304f\u8a2d\u7f6e\u3057\u307e\u3059(sqlite3)</li> <li>\u65e5\u672c\u8a9e\u30de\u30cb\u30e5\u30a2\u30eb\u306e\u30d5\u30a9\u30eb\u30c0\u69cb\u6210\u306b\u5408\u308f\u305b\u3066\u4f5c\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u3002</li> <li>vrf.skey \u3068 vrf.vkey\u304c\u5fc5\u8981\u3067\u3059\u3002</li> </ul> <p>\u30d7\u30ed\u30b0\u30e9\u30e0\u69cb\u6210\u56f3</p> <pre><code>    flowchart TB\n        a1[cardano-node] --&gt; a2[log\u30d5\u30a1\u30a4\u30eb]\n        a3 --&gt; a5[leaderlog.service]\n        a3 --&gt; a6[validate.service]\n        a1[cardano-node] --&gt; a3[cncli.service]\n        a2 --&gt; a4[logmonitor.service]\n        a3[cncli.service]\n        a4[logmonitor.service]\n        a5[leaderlog.service]\n        a6[validate.service]\n        subgraph Guild-DB\n            a7[cncli.db]\n            a8[blocklog.db]\n        end\n        subgraph \u30b9\u30c6\u30fc\u30bf\u30b9\u901a\u77e5\n            a9[blocknotify] --&gt; \u5404\u30a2\u30d7\u30ea\n        end\n        Guild-DB --&gt; blocks.sh\n        a8[blocklog.db] --&gt; a9[blocknotify]\n        a3[cncli.service] --&gt; a7[cncli.db]\n        a5[leaderlog.service] --&gt; a8[blocklog.db]\n        a6[validate.service] --&gt; a8[blocklog.db]\n</code></pre>"},{"location":"setup/blocklog-setup/#2-cncli","title":"2. CNCLI\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>CNCLI\u306b\u3064\u3044\u3066</p> <p>AndrewWestberg\u3055\u3093\u306b\u3088\u3063\u3066\u958b\u767a\u3055\u308c\u305fCNCLI\u306f\u30d7\u30fc\u30eb\u306e\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3092\u7b97\u51fa\u3057\u3001Shelley\u671f\u306b\u304a\u3051\u308bSPO\u306b\u9769\u547d\u3092\u3082\u305f\u3089\u3057\u307e\u3057\u305f\u3002</p> <p>RUST\u74b0\u5883\u3092\u6e96\u5099\u3057\u307e\u3059</p> <pre><code>mkdir $HOME/.cargo &amp;&amp; mkdir $HOME/.cargo/bin\nchown -R $USER $HOME/.cargo\ntouch $HOME/.profile\nchown $USER $HOME/.profile\n</code></pre> <p>rustup\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059-\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u7d9a\u884c\u3057\u307e\u3059\uff08\u30aa\u30d7\u30b7\u30e7\u30f31\uff09 <pre><code>curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh\n</code></pre></p> <p>1) Proceed with installation (default)  1\u3092\u5165\u529b\u3057\u3066Enter</p> <pre><code>source $HOME/.cargo/env\nrustup install stable\nrustup default stable\nrustup update\nrustup component add clippy rustfmt\nrustup target add x86_64-unknown-linux-musl\n</code></pre> <p>\u4f9d\u5b58\u95a2\u4fc2\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059</p> <pre><code>source $HOME/.cargo/env\nsudo apt update -y &amp;&amp; sudo apt install -y automake build-essential pkg-config libffi-dev libgmp-dev libssl-dev libtinfo-dev libsystemd-dev zlib1g-dev make g++ tmux git jq wget libncursesw5 libtool autoconf musl-tools\n</code></pre> <p>CNCLI\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u30fb\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb <pre><code>cd $HOME\ncncli_release=\"$(curl -s https://api.github.com/repos/cardano-community/cncli/releases/latest | jq -r '.tag_name' | sed -e \"s/^.\\{1\\}//\")\"\n</code></pre> <pre><code>curl -sLJ https://github.com/cardano-community/cncli/releases/download/v${cncli_release}/cncli-${cncli_release}-ubuntu22-x86_64-unknown-linux-gnu.tar.gz -o $HOME/cncli-${cncli_release}-x86_64-unknown-linux-gnu.tar.gz\n</code></pre> <pre><code>tar xzvf $HOME/cncli-${cncli_release}-x86_64-unknown-linux-gnu.tar.gz -C $HOME/.cargo/bin/\n</code></pre> <pre><code>rm $HOME/cncli-${cncli_release}-x86_64-unknown-linux-gnu.tar.gz\n</code></pre></p> <p>CNCLI\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>cncli --version\n</code></pre></p> <p>6.7.0 \u304c\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u3059</p>"},{"location":"setup/blocklog-setup/#3-sqlite3","title":"3. sqlite3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<pre><code>sudo apt install sqlite3\nsqlite3 --version\n</code></pre> <p>3.31.1\u4ee5\u4e0a\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305f\u3089OK\u3067\u3059\u3002</p>"},{"location":"setup/blocklog-setup/#4","title":"4. \u4f9d\u5b58\u30d5\u30a1\u30a4\u30eb\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9","text":"<p>\u4f9d\u5b58\u95a2\u4fc2\u306e\u3042\u308b\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002</p> <pre><code>cd $NODE_HOME\nmkdir scripts\ncd $NODE_HOME/scripts\nwget https://raw.githubusercontent.com/cardano-community/guild-operators/master/scripts/cnode-helper-scripts/cncli.sh -O ./cncli.sh\nwget https://raw.githubusercontent.com/cardano-community/guild-operators/master/scripts/cnode-helper-scripts/env -O ./env\nwget https://raw.githubusercontent.com/cardano-community/guild-operators/master/scripts/cnode-helper-scripts/gLiveView.sh -O ./gLiveView.sh\nwget https://raw.githubusercontent.com/cardano-community/guild-operators/master/scripts/cnode-helper-scripts/cntools.library -O ./cntools.library\nwget https://raw.githubusercontent.com/btbf/spojapanguild/master/scripts/blocks.sh -O ./blocks.sh \nwget https://raw.githubusercontent.com/btbf/spojapanguild/master/scripts/logMonitor.sh -q -O ./logMonitor.sh\n</code></pre> <p>\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\u3059\u308b <pre><code>chmod 755 cncli.sh\nchmod 755 logMonitor.sh\nchmod 755 gLiveView.sh\nchmod 755 blocks.sh\n</code></pre></p> <p>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4fee\u6b63\u3059\u308b</p> <p>env\u30d5\u30a1\u30a4\u30eb\u3092\u4fee\u6b63\u3057\u307e\u3059</p> <p><pre><code>PORT=`grep \"PORT=\" $NODE_HOME/startBlockProducingNode.sh`\nb_PORT=${PORT#\"PORT=\"}\necho \"BP\u30dd\u30fc\u30c8\u306f${b_PORT}\u3067\u3059\"\n</code></pre> <pre><code>sed -i $NODE_HOME/scripts/env \\\n  -e '1,73s!#CNODEBIN=\"${HOME}/.local/bin/cardano-node\"!CNODEBIN=\"/usr/local/bin/cardano-node\"!' \\\n  -e '1,73s!#CCLI=\"${HOME}/.local/bin/cardano-cli\"!CCLI=\"/usr/local/bin/cardano-cli\"!' \\\n  -e '1,73s!#CNCLI=\"${HOME}/.local/bin/cncli\"!CNCLI=\"${HOME}/.cargo/bin/cncli\"!' \\\n  -e '1,73s!#CNODE_HOME=\"/opt/cardano/cnode\"!CNODE_HOME=\"'${NODE_HOME}'\"!' \\\n  -e '1,73s!#CNODE_PORT=6000!CNODE_PORT='${b_PORT}'!' \\\n  -e '1,73s!#UPDATE_CHECK=\"Y\"!UPDATE_CHECK=\"N\"!' \\\n  -e '1,73s!#CONFIG=\"${CNODE_HOME}/files/config.json\"!CONFIG=\"${CNODE_HOME}/'${NODE_CONFIG}'-config.json\"!' \\\n  -e '1,73s!#SOCKET=\"${CNODE_HOME}/sockets/node.socket\"!SOCKET=\"${CNODE_HOME}/db/socket\"!' \\\n  -e '1,73s!#PROM_HOST=127.0.0.1!PROM_HOST=127.0.0.1!' \\\n  -e '1,73s!#PROM_PORT=12798!PROM_PORT=12798!' \\\n  -e '1,73s!#BLOCKLOG_TZ=\"UTC\"!BLOCKLOG_TZ=\"Asia/Tokyo\"!' \\\n  -e '1,73s!#POOL_NAME=\"\"!POOL_DIR=${CNODE_HOME}!'\n</code></pre></p> <p>cncli.sh\u30d5\u30a1\u30a4\u30eb\u3092\u4fee\u6b63\u3057\u307e\u3059</p> <p>\u30d7\u30fc\u30ebID\u3092\u78ba\u8a8d\u3059\u308b\u3002\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044 <pre><code>pool_hex=`cat $NODE_HOME/pool.id`\npool_bech32=`cat $NODE_HOME/pool.id-bech32`\nprintf \"\\n\u30d7\u30fc\u30ebID(hex)\u306f \\e[32m${pool_hex}\\e[m \u3067\u3059\\n\\n\"\nprintf \"\\n\u30d7\u30fc\u30ebID(bech32)\u306f \\e[32m${pool_bech32}\\e[m \u3067\u3059\\n\\n\"\n</code></pre></p> <p>\u3054\u81ea\u8eab\u306e\u30d7\u30fc\u30ebID <code>2\u7a2e\u985e</code>\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044 \u30d7\u30fc\u30ebID\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u3001\u3053\u3061\u3089\u306e\u624b\u9806\u3092\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044  </p> <p> cncli.sh\u30d5\u30a1\u30a4\u30eb\u3092\u4fee\u6b63\u3057\u307e\u3059\u3002\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044 <pre><code>sed -i $NODE_HOME/scripts/cncli.sh \\\n-e '1,30s!#POOL_ID=\"\"!POOL_ID=\"'${pool_hex}'\"!' \\\n-e '1,30s!#POOL_ID_BECH32=\"\"!POOL_ID_BECH32=\"'${pool_bech32}'\"!' \\\n-e '1,30s!#POOL_VRF_SKEY=\"\"!POOL_VRF_SKEY=\"${CNODE_HOME}/vrf.skey\"!' \\\n-e '1,30s!#POOL_VRF_VKEY=\"\"!POOL_VRF_VKEY=\"${CNODE_HOME}/vrf.vkey\"!'\n</code></pre></p>"},{"location":"setup/blocklog-setup/#5","title":"5. \u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\u30fb\u767b\u9332","text":"<pre><code>cd $NODE_HOME\nmkdir service\ncd service\n</code></pre> cnclivalidateleaderloglogmonitor \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/service/cnode-cncli-sync.service &lt;&lt; EOF \n# file: /etc/systemd/system/cnode-cncli-sync.service\n\n[Unit]\nDescription=Cardano Node - CNCLI sync\nBindsTo=cardano-node.service\nAfter=cardano-node.service\n\n[Service]\nType=simple\nRestart=on-failure\nRestartSec=20\nUser=$(whoami)\nWorkingDirectory=${NODE_HOME}/scripts\nExecStart=/bin/bash -l -c \"exec ${NODE_HOME}/scripts/cncli.sh sync\"\nExecStop=/bin/bash -l -c \"exec kill -2 \\$(ps -ef | grep [c]ncli.sync.*.${NODE_HOME}/ | tr -s ' ' | cut -d ' ' -f2) &amp;&gt;/dev/null\"\nKillSignal=SIGINT\nSuccessExitStatus=143\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=cnode-cncli-sync\nTimeoutStopSec=5\nKillMode=mixed\n\n[Install]\nWantedBy=cardano-node.service\nEOF\n</code></pre> \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/service/cnode-cncli-validate.service &lt;&lt; EOF \n# file: /etc/systemd/system/cnode-cncli-validate.service\n\n[Unit]\nDescription=Cardano Node - CNCLI validate\nBindsTo=cnode-cncli-sync.service\nAfter=cnode-cncli-sync.service\n\n[Service]\nType=simple\nRestart=on-failure\nRestartSec=20\nUser=$(whoami)\nWorkingDirectory=${NODE_HOME}/scripts\nExecStartPre=/bin/sleep 5\nExecStart=/bin/bash -l -c \"exec ${NODE_HOME}/scripts/cncli.sh validate\"\nSuccessExitStatus=143\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=cnode-cncli-validate\nTimeoutStopSec=5\nKillMode=mixed\n\n[Install]\nWantedBy=cnode-cncli-sync.service\nEOF\n</code></pre> \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/service/cnode-cncli-leaderlog.service &lt;&lt; EOF\n# file: /etc/systemd/system/cnode-cncli-leaderlog.service\n\n[Unit]\nDescription=Cardano Node - CNCLI Leaderlog\nBindsTo=cnode-cncli-sync.service\nAfter=cnode-cncli-sync.service\n\n[Service]\nType=simple\nRestart=on-failure\nRestartSec=20\nUser=$(whoami)\nWorkingDirectory=${NODE_HOME}\nExecStart=/bin/bash -l -c \"exec ${NODE_HOME}/scripts/cncli.sh leaderlog\"\nSuccessExitStatus=143\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=cnode-cncli-leaderlog\nTimeoutStopSec=5\nKillMode=mixed\n\n[Install]\nWantedBy=cnode-cncli-sync.service\nEOF\n</code></pre> \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/service/cnode-logmonitor.service &lt;&lt; EOF \n# file: /etc/systemd/system/cnode-logmonitor.service\n\n[Unit]\nDescription=Cardano Node - CNCLI logmonitor\nBindsTo=cardano-node.service\nAfter=cardano-node.service\n\n[Service]\nType=simple\nRestart=on-failure\nRestartSec=1\nUser=$(whoami)\nWorkingDirectory=${NODE_HOME}\nExecStart=/bin/bash -l -c \"exec ${NODE_HOME}/scripts/logMonitor.sh\"\nExecStop=/bin/bash -l -c \"exec kill -2 \\$(ps -ef | grep -m1 ${NODE_HOME}/scripts/logMonitor.sh | tr -s ' ' | cut -d ' ' -f2) &amp;&gt;/dev/null\"\nKillSignal=SIGINT\nSuccessExitStatus=143\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=cnode-logmonitor\nTimeoutStopSec=5\nKillMode=mixed\n\n[Install]\nWantedBy=cardano-node.service\nEOF\n</code></pre> <p>\u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u30b7\u30b9\u30c6\u30e0\u30d5\u30a9\u30eb\u30c0\u306b\u30b3\u30d4\u30fc\u3057\u3066\u6a29\u9650\u3092\u4ed8\u4e0e\u3057\u307e\u3059</p> <p>1\u884c\u305a\u3064\u30b3\u30de\u30f3\u30c9\u306b\u8cbc\u308a\u4ed8\u3051\u3066\u304f\u3060\u3055\u3044 <pre><code>sudo cp $NODE_HOME/service/cnode-cncli-sync.service /etc/systemd/system/cnode-cncli-sync.service\nsudo cp $NODE_HOME/service/cnode-cncli-validate.service /etc/systemd/system/cnode-cncli-validate.service\nsudo cp $NODE_HOME/service/cnode-cncli-leaderlog.service /etc/systemd/system/cnode-cncli-leaderlog.service\nsudo cp $NODE_HOME/service/cnode-logmonitor.service /etc/systemd/system/cnode-logmonitor.service\n</code></pre></p> <pre><code>sudo chmod 644 /etc/systemd/system/cnode-cncli-sync.service\nsudo chmod 644 /etc/systemd/system/cnode-cncli-validate.service\nsudo chmod 644 /etc/systemd/system/cnode-cncli-leaderlog.service\nsudo chmod 644 /etc/systemd/system/cnode-logmonitor.service\n</code></pre> <p>\u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u6709\u52b9\u5316\u3057\u307e\u3059</p> <pre><code>sudo systemctl daemon-reload\nsudo systemctl enable cnode-cncli-sync.service\nsudo systemctl enable cnode-cncli-validate.service\nsudo systemctl enable cnode-cncli-leaderlog.service\nsudo systemctl enable cnode-logmonitor.service\n</code></pre> <p>\u4fbf\u5229\u306a\u30a8\u30a4\u30ea\u30a2\u30b9\u8a2d\u5b9a</p> <p>\u30a8\u30a4\u30ea\u30a2\u30b9\u8a2d\u5b9a</p> <p>\u30b9\u30af\u30ea\u30d7\u30c8\u3078\u306e\u30d1\u30b9\u3092\u901a\u3057\u3001\u30a8\u30a4\u30ea\u30a2\u30b9\u3067\u8d77\u52d5\u51fa\u6765\u308b\u3088\u3046\u306b\u3059\u308b\u3002 <pre><code>echo alias cnclilog='\"journalctl --no-hostname -u cnode-cncli-sync -f\"' &gt;&gt; $HOME/.bashrc\necho alias validate='\"journalctl --no-hostname -u cnode-cncli-validate -f\"' &gt;&gt; $HOME/.bashrc\necho alias leaderlog='\"journalctl --no-hostname -u cnode-cncli-leaderlog -f\"' &gt;&gt; $HOME/.bashrc\necho alias logmonitor='\"journalctl --no-hostname -u cnode-logmonitor -f\"' &gt;&gt; $HOME/.bashrc\n</code></pre></p> <p>\u74b0\u5883\u5909\u6570\u518d\u8aad\u307f\u8fbc\u307f <pre><code>source $HOME/.bashrc\n</code></pre></p> <p>\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5165\u529b\u3057\u3066\u5b9f\u884c\u3059\u308b\u3068\u3001\u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u30ed\u30b0\u304c\u95b2\u89a7\u3067\u304d\u307e\u3059\u3002 \u5358\u8a9e\u3092\u5165\u529b\u3059\u308b\u3060\u3051\u3067\u3001\u8d77\u52d5\u72b6\u614b(\u30ed\u30b0)\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002 <code>cnclilog</code> <code>validate</code> <code>leaderlog</code> <code>logmonitor</code></p>"},{"location":"setup/blocklog-setup/#6-db","title":"6. \u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u3068DB\u3092\u540c\u671f","text":"<p>cncli-sync\u30b5\u30fc\u30d3\u30b9\u3092\u958b\u59cb\u3057\u307e\u3059 <pre><code>sudo systemctl start cnode-cncli-sync.service\n</code></pre></p> <p>cncli\u30ed\u30b0\u78ba\u8a8d <pre><code>cnclilog\n</code></pre></p> <p>\u78ba\u8a8d</p> <ul> <li>cncli\u540c\u671f\u78ba\u8a8d\u300c100.00% synced\u300d\u306b\u306a\u308b\u307e\u3067\u5f85\u3061\u307e\u3059\u3002 100%\u306b\u306a\u3063\u305f\u3089\u3001Ctrl+c\u3067\u9589\u3058\u307e\u3059\u3002</li> </ul> <p>\u4ed6\u30b5\u30fc\u30d3\u30b9\u306e\u8d77\u52d5\u78ba\u8a8d</p> validateleaderloglogmonitor <p>\u3053\u3061\u3089\u306e\u30b5\u30fc\u30d3\u30b9\u306f\u751f\u6210\u3057\u305f\u30d6\u30ed\u30c3\u30af\u304c\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u4e0a\u306b\u8a18\u9332\u3055\u308c\u3066\u3044\u308b\u304b\u7167\u5408\u3057\u307e\u3059\u3002</p> <pre><code>validate\n</code></pre> <p>\u4ee5\u4e0b\u306e\u8868\u793a\u306a\u3089\u6b63\u5e38\u3067\u3059\u3002</p> <p>~ CNCLI Block Validation started ~</p> <p>Ctrl+c\u3067\u9589\u3058\u307e\u3059</p> <p>\u3053\u3061\u3089\u306e\u30b5\u30fc\u30d3\u30b9\u306f\u30b9\u30ed\u30c3\u30c8\u30ea\u30fc\u30c0\u30fc\u3092\u81ea\u52d5\u7684\u306b\u7b97\u51fa\u3057\u307e\u3059\u3002  \u6b21\u30a8\u30dd\u30c3\u30af\u306e1.5\u65e5\u524d\u304b\u3089\u6b21\u30a8\u30dd\u30c3\u30af\u306e\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3092\u7b97\u51fa\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <pre><code>leaderlog\n</code></pre> <p>\u4ee5\u4e0b\u306e\u8868\u793a\u306a\u3089\u6b63\u5e38\u3067\u3059\u3002  </p> <p>~ CNCLI Leaderlog started ~</p> <p>Ctrl+c\u3067\u9589\u3058\u307e\u3059</p> <p>\u3053\u3061\u3089\u306e\u30b5\u30fc\u30d3\u30b9\u306f\u30d7\u30fc\u30eb\u306e\u30ce\u30fc\u30c9\u30ed\u30b0\u304b\u3089\u30d6\u30ed\u30c3\u30af\u751f\u6210\u7d50\u679c\u3092\u62bd\u51fa\u3057\u307e\u3059\u3002</p> <pre><code>logmonitor\n</code></pre> <p>\u4ee5\u4e0b\u306e\u8868\u793a\u306a\u3089\u6b63\u5e38\u3067\u3059\u3002  </p> <p>~~ LOG MONITOR STARTED ~~ monitoring logs/node.json for traces</p> <p>Ctrl+c\u3067\u9589\u3058\u307e\u3059</p>"},{"location":"setup/blocklog-setup/#7","title":"7. \u30d6\u30ed\u30c3\u30af\u30ed\u30b0\u3092\u8868\u793a\u3059\u308b","text":"<p>\u3053\u306e\u30c4\u30fc\u30eb\u3067\u306f\u4e0a\u8a18\u3067\u8a2d\u5b9a\u3057\u3066\u304d\u305f\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u7d44\u307f\u5408\u308f\u305b\u3001\u5272\u308a\u5f53\u3066\u3089\u308c\u305f\u30b9\u30ed\u30c3\u30c8\u30ea\u30fc\u30c0\u30fc\u306b\u5bfe\u3057\u3066\u306e\u30d6\u30ed\u30c3\u30af\u751f\u6210\u7d50\u679c\u3092\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u683c\u7d0d\u3057\u3001\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <pre><code>cd $NODE_HOME/scripts\n./blocks.sh\n</code></pre> <p>\u4fbf\u5229\u306a\u8a2d\u5b9a</p> <p>\u30b9\u30af\u30ea\u30d7\u30c8\u3078\u306e\u30d1\u30b9\u3092\u901a\u3057\u3001\u4efb\u610f\u306e\u5358\u8a9e\u3067\u8d77\u52d5\u51fa\u6765\u308b\u3088\u3046\u306b\u3059\u308b\u3002 <pre><code>echo alias blocks=\"'cd $NODE_HOME/scripts; ./blocks.sh'\" &gt;&gt; $HOME/.bashrc\nsource $HOME/.bashrc\n</code></pre></p> <p>\u30bf\u30fc\u30df\u30ca\u30eb\u4e0a\u3067<code>blocks</code>\u3068\u5165\u529b\u3057\u5b9f\u884c\u3059\u308b\u3060\u3051\u3067\u8d77\u52d5\u3067\u304d\u307e\u3059\u3002  </p> <p></p> <p>\uff08\uff53\uff09\u5b9f\u7e3e\u6982\u8981---\u30a8\u30dd\u30c3\u30af\u6bce\u306e\u30d6\u30ed\u30c3\u30af\u751f\u6210\u5b9f\u7e3e\u53c2\u7167 \uff08\uff45\uff09\u30a8\u30dd\u30c3\u30af\u8a73\u7d30---\u500b\u5225\u30a8\u30dd\u30c3\u30af\u306e\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u304a\u3088\u3073\u751f\u6210\u5b9f\u7e3e\u53c2\u7167</p> <p></p> <p>\u30d6\u30ed\u30c3\u30af\u30b9\u30c6\u30fc\u30bf\u30b9</p> \u9805\u76ee \u610f\u5473 Leader \u30d6\u30ed\u30c3\u30af\u751f\u6210\u5272\u308a\u5f53\u3066\u6570 Ideal \u30a2\u30af\u30c6\u30a3\u30d6\u30b9\u30c6\u30fc\u30af\uff08\u30b7\u30b0\u30de\uff09\u306b\u57fa\u3065\u3044\u3066\u5272\u308a\u5f53\u3066\u3089\u308c\u305f\u30d6\u30ed\u30c3\u30af\u6570\u306e\u671f\u5f85\u5024/\u7406\u60f3\u5024 Luck \u671f\u5f85\u5024\u306b\u304a\u3051\u308b\u5b9f\u969b\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u305f\u30b9\u30ed\u30c3\u30c8\u30ea\u30fc\u30c0\u30fc\u6570\u306e\u30d1\u30fc\u30bb\u30f3\u30c6\u30fc\u30b8 Adopted \u30d6\u30ed\u30c3\u30af\u751f\u6210\u30d5\u30e9\u30b0 Confirmed \u751f\u6210\u3057\u305f\u30d6\u30ed\u30c3\u30af\u306e\u3046\u3061\u78ba\u5b9f\u306b\u30aa\u30f3\u30c1\u30a7\u30fc\u30f3\u3067\u3042\u308b\u3053\u3068\u304c\u691c\u8a3c\u3055\u308c\u305f\u30d6\u30ed\u30c3\u30af (\u30d6\u30ed\u30c3\u30af\u751f\u6210\u6210\u529f) Missed \u30b9\u30ed\u30c3\u30c8\u3067\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u304c\u3001 cncli DB \u306b\u306f\u8a18\u9332\u3055\u308c\u3066\u304a\u3089\u305a\u4ed6\u306e\u30d7\u30fc\u30eb\u304c\u3053\u306e\u30b9\u30ed\u30c3\u30c8\u306e\u305f\u3081\u306b\u30d6\u30ed\u30c3\u30af\u3092\u4f5c\u3063\u305f\u53ef\u80fd\u6027 Ghosted \u30d6\u30ed\u30c3\u30af\u306f\u4f5c\u6210\u3055\u308c\u307e\u3057\u305f\u304c\u300cOrphans(\u5b64\u7acb\u30d6\u30ed\u30c3\u30af)\u300d\u3068\u306a\u3063\u3066\u304a\u308a\u307e\u3059\u3002 \u30b9\u30ed\u30c3\u30c8\u30d0\u30c8\u30eb\u30fb\u30cf\u30a4\u30c8\u30d0\u30c8\u30eb\u3067\u6557\u5317\u3057\u305f\u304b\u3001\u30d6\u30ed\u30c3\u30af\u4f1d\u64ad\u306e\u554f\u984c\u3067\u6709\u52b9\u306a\u30d6\u30ed\u30c3\u30af\u306b\u306a\u3063\u3066\u3044\u307e\u305b\u3093 Stolen \u5225\u306e\u30d7\u30fc\u30eb\u306b\u6709\u52b9\u306a\u30d6\u30ed\u30c3\u30af\u304c\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u3001\u30b9\u30ed\u30c3\u30c8\u30d0\u30c8\u30eb\u3067\u6557\u5317\u3057\u305f\u53ef\u80fd\u6027 Invalid \u30d7\u30fc\u30eb\u306f\u30d6\u30ed\u30c3\u30af\u306e\u4f5c\u6210\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002base64\u3067\u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u304clogmonitor\u306b\u8868\u793a\u3055\u308c\u307e\u3059 <p>Invalid\u306e\u30a8\u30e9\u30fc\u5185\u5bb9\u306f\u6b21\u306e\u30b3\u30fc\u30c9\u3067\u30c7\u30b3\u30fc\u30c9\u3067\u304d\u307e\u3059  <pre><code>echo (base64\u30b3\u30fc\u30c9\u3092\u5165\u308c\u308b) | base64 -d | jq -r\n</code></pre></p> <p>\u30e1\u30cb\u30e5\u30fc\u9805\u76ee\u304c\u6587\u5b57\u5316\u3051\u3059\u308b\u5834\u5408\u306f\u3001\u30b7\u30b9\u30c6\u30e0\u6587\u5b57\u30b3\u30fc\u30c9\u304c\u300cUTF-8\u300d\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002 <pre><code>echo $LANG\n</code></pre></p>"},{"location":"setup/blocklog-setup/#8","title":"8. \u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3092\u53d6\u5f97\u3059\u308b","text":"<p>\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u53d6\u5f97\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u306b\u3064\u3044\u3066</p> <p>\u53d6\u5f97\u30bf\u30a4\u30df\u30f3\u30b0\u306f\u3001\u30a8\u30dd\u30c3\u30af\u30b9\u30ed\u30c3\u30c8\u304c\u7d04302400\u3092\u904e\u304e\u3066\u304b\u3089\u6b21\u30a8\u30dd\u30c3\u30af\u306e\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3092\u81ea\u52d5\u53d6\u5f97\u3057\u307e\u3059(\u6b21\u30a8\u30dd\u30c3\u30af\u306e1.5\u65e5\u524d) SPO BlockNotify\u8a2d\u5b9a\u3092\u5c0e\u5165\u3059\u308b\u3053\u3068\u3067\u4efb\u610f\u306e\u901a\u77e5\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3078\u901a\u77e5\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002    </p> <p>\u30d2\u30f3\u30c8</p> <ul> <li><code>Leaderslots: 0 - Ideal slots for epoch based on active stake: 0.01 - Luck factor 0%</code>\u304c\u8868\u793a\u3055\u308c\u305f\u5834\u5408\u306f\u3001\u6b8b\u5ff5\u304c\u3089\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u306f\u3042\u308a\u307e\u305b\u3093\u3002</li> </ul> <p>1\u30a8\u30dd\u30c3\u30af\u30671\u30d6\u30ed\u30c3\u30af\u5272\u308a\u5f53\u3066\u3089\u308c\u308b\u305f\u3081\u306b\u5fc5\u8981\u306a\u59d4\u4efb\u91cf\u306e\u76ee\u5b89\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002%\u306f\u78ba\u7387 1M 60% 2M 85% 3M 95%  </p> <p>\u30d7\u30fc\u30eb\u958b\u8a2d\u6642\u306f\u30012\u30a8\u30dd\u30c3\u30af\u5f8c\u304b\u3089\u5272\u308a\u5f53\u3066\u304c\u30b9\u30bf\u30fc\u30c8\u3057\u307e\u3059\u3002 303 \u30d7\u30fc\u30eb\u767b\u9332  304 \u5f85\u6a5f\u671f\u9593 \u6b21\u30a8\u30dd\u30c3\u30af\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u7b97\u51fa 305 \u59d4\u4efb\u6709\u52b9 \u30d6\u30ed\u30c3\u30af\u751f\u6210 306 \u5831\u916c\u8a08\u7b97 307 \u5831\u916c\u632f\u308a\u8fbc\u307f   </p> <p>\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u901a\u77e5\u3059\u308b</p> <p>\u30d6\u30ed\u30c3\u30af\u30ed\u30b0DB\u306b\u4fdd\u5b58\u3055\u308c\u308b\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u3092LINE/Slack/discord/telegram\u306b\u901a\u77e5\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 \u8a2d\u5b9a\u624b\u9806\u306fSPO BlockNotify\u8a2d\u5b9a\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"setup/blocklog-setup/#9-cncli","title":"9. CNCLI\u66f4\u65b0\u624b\u9806","text":"<p>\u4ee5\u4e0b\u306f\u6700\u65b0\u7248\u304c\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u305f\u5834\u5408\u306b\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044 </p> <p>cncli\u65e7\u30d0\u30fc\u30b8\u30e7\u30f3\u304b\u3089\u306e\u66f4\u65b0\u624b\u9806</p> <p>\u6ce8\u610f</p> <p>\uff11\u6642\u9593\u4ee5\u5185\u306b\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u304c\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304b\u3089\u3001\u4ee5\u4e0b\u3092\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044</p> <p>CNCLI\u3092\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b</p> <p><pre><code>cd $HOME\ncncli_release=\"$(curl -s https://api.github.com/repos/cardano-community/cncli/releases/latest | jq -r '.tag_name' | sed -e \"s/^.\\{1\\}//\")\"\n</code></pre> <pre><code>curl -sLJ https://github.com/cardano-community/cncli/releases/download/v${cncli_release}/cncli-${cncli_release}-ubuntu22-x86_64-unknown-linux-gnu.tar.gz -o $HOME/cncli-${cncli_release}-x86_64-unknown-linux-gnu.tar.gz\n</code></pre> <pre><code>tar xzvf $HOME/cncli-${cncli_release}-x86_64-unknown-linux-gnu.tar.gz -C $HOME/.cargo/bin/\n</code></pre> <pre><code>rm $HOME/cncli-${cncli_release}-x86_64-unknown-linux-gnu.tar.gz\n</code></pre></p> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>cncli --version\n</code></pre></p> <p>cncli 6.7.0\u306b\u306a\u3063\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b </p> <p>\u30ce\u30fc\u30c9\u3092\u518d\u8d77\u52d5\u3059\u308b <pre><code>sudo systemctl reload-or-restart cardano-node\n</code></pre></p> <p>\u30ce\u30fc\u30c9\u304c\u540c\u671f\u3057\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b</p> <pre><code>cnclilog\n</code></pre> <p>100% synced\u306b\u306a\u3063\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b</p>"},{"location":"setup/blocklog-setup/#9-1","title":"9-1. \u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u306b\u306a\u3044\u30d6\u30ed\u30c3\u30af\u304c\u751f\u6210\u3055\u308c\u308b\u5834\u5408","text":"<p>CNCLI\u306e\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u306f\u6b63\u3057\u3044\u5024\u304c\u53d6\u5f97\u3067\u304d\u3066\u3044\u308c\u3070\u3001100%\u6b63\u78ba\u3067\u3059\u3002 cncli.db\u3092\u518d\u4f5c\u6210\u3059\u308b\u3053\u3068\u3067\u6b63\u3057\u3044\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3092\u53d6\u5f97\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <p>\u4fee\u6b63\u624b\u9806</p> <p>\u30fb\u30b5\u30fc\u30d3\u30b9\u3092\u6b62\u3081\u308b <pre><code>sudo systemctl stop cnode-cncli-sync.service\n</code></pre></p> <p>cncli.db\u3092\u524a\u9664\u3059\u308b <pre><code>rm $NODE_HOME/guild-db/cncli/cncli.db\n</code></pre></p> <p>\u30b5\u30fc\u30d3\u30b9\u3092\u8d77\u52d5\u3057\u3001\u540c\u671f\u304c100\uff05\u306b\u306a\u308b\u307e\u3067\u5f85\u3064 <pre><code>sudo systemctl restart cnode-cncli-sync.service\n</code></pre></p> <p>100% synced\u306b\u306a\u308b\u307e\u3067\u5f85\u3064 <pre><code>cnclilog\n</code></pre></p> <p>\u5236\u4f5c\u30af\u30ec\u30b8\u30c3\u30c8</p> <p>\u3053\u306e\u30c4\u30fc\u30eb\u306f\u6d77\u5916\u30ae\u30eb\u30c9\u30aa\u30da\u30ec\u30fc\u30bf\u30fc\u5236\u4f5c\u306eCNCLI By AndrewWestberg\u3001Guild LiveView\u3001BLOCK LOG for CNTools\u3092\u7d44\u307f\u5408\u308f\u305b\u305f\u30c4\u30fc\u30eb\u3068\u306a\u3063\u3066\u304a\u308a\u307e\u3059\u3002\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3059\u308b\u306b\u3042\u305f\u308a\u3001\u958b\u767a\u8005\u306eAHLNET(AHL)\u306b\u3054\u5354\u529b\u9802\u304d\u307e\u3057\u305f\u3002\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\u3002</p>"},{"location":"setup/blocknotify-setup/","title":"SPO BlockNotify\u8a2d\u5b9a","text":"<p>\u6982\u8981</p> <p>\u6700\u7d42\u66f4\u65b0\u65e5\uff1a2025/3/6  v2.5.0</p> <ul> <li> <p>\u30d6\u30ed\u30c3\u30af\u30ed\u30b0\u3067\u8868\u793a\u3055\u308c\u308b\u30d6\u30ed\u30c3\u30af\u751f\u6210\u7d50\u679c\u3092\u4efb\u610f\u306e\u30bd\u30fc\u30b7\u30e3\u30eb\u30a2\u30d7\u30ea\u3078\u901a\u77e5\u3057\u307e\u3059\u3002  </p> </li> <li> <p>\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3092\u81ea\u52d5\u53d6\u5f97\u3057\u3001\u53d6\u5f97\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u4e00\u89a7\u3092\u901a\u77e5\u3057\u307e\u3059\u3002 </p> </li> <li> <p>\u901a\u77e5\u5148\u5bfe\u5fdc\u30a2\u30d7\u30ea LINE/Slack/discord/telegram</p> </li> <li> <p>\u591a\u8a00\u8a9e\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\u3059\u308b\u3053\u3068\u3067\u69d8\u3005\u306a\u8a00\u8a9e\u306b\u5bfe\u5fdc\u3057\u307e\u3057\u305f\uff01</p> </li> <li> <p>\u30d6\u30ed\u30c3\u30af\u30ed\u30b0\u3068\u9023\u52d5\u3057\u3066\u304a\u308a\u307e\u3059\u306e\u3067\u3001\u307e\u3060\u8a2d\u5b9a\u3055\u308c\u3066\u306a\u3044\u5834\u5408\u306f\u30d6\u30ed\u30c3\u30af\u30ed\u30b0\u8a2d\u5b9a\u3092\u5148\u306b\u5c0e\u5165\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> </li> <li> <p>\u4ee5\u4e0b\u306e\u4f5c\u696d\u306fguild-db\u304c\u5b58\u5728\u3059\u308bBP\u30b5\u30fc\u30d0\u30fc\u306e\u307f\u3067\u5b9f\u65bd\u3057\u3001\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u304c\u306a\u3044\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044\u3002 </p> </li> <li> <p>\u8a2d\u5b9a\u306f\u4efb\u610f\u3067\u3059\u3002(\u8a2d\u5b9a\u3057\u306a\u304f\u3066\u3082\u30d6\u30ed\u30c3\u30af\u751f\u6210\u306b\u5f71\u97ff\u306f\u3042\u308a\u307e\u305b\u3093)</p> </li> <li> <p>\u5404\u30b5\u30fc\u30d3\u30b9\u306eAPI\u3092\u5229\u7528\u3059\u308b\u305f\u3081\u9001\u4fe1\u30c7\u30fc\u30bf\u304c\u5404\u30b5\u30fc\u30d3\u30b9\u306e\u30b5\u30fc\u30d0\u30fc\u306b\u6d41\u308c\u307e\u3059\u3002\u305d\u306e\u70b9\u3092\u5341\u5206\u306b\u7406\u89e3\u3057\u3054\u6d3b\u7528\u304f\u3060\u3055\u3044\u3002</p> </li> <li> <p>\u30a8\u30dd\u30c3\u30af\u306e\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u901a\u77e5\u306f\u30aa\u30f3/\u30aa\u30d5\u8a2d\u5b9a\u53ef\u80fd\u3067\u3059</p> </li> </ul> \u66f4\u65b0\u5c65\u6b74\u25bc <ul> <li>2.5.0  \u30fbLINE Messaging API\u5bfe\u5fdc</li> <li>2.3.0  \u30fb\u901a\u77e5\u306b\u30d6\u30ed\u30c3\u30af\u30b5\u30a4\u30ba\u3092\u8868\u793a \u3000\u3000\u3000\u3000\u3000\u30fb\u30b9\u30da\u30a4\u30f3\u8a9e\u3001\u30d5\u30e9\u30f3\u30b9\u8a9e\u3001\u30dd\u30eb\u30c8\u30ac\u30eb\u8a9e\u3092\u8ffd\u52a0</li> <li>2.2.2  \u30fb\u4efb\u610f\u306ePrometheus\u30dd\u30fc\u30c8\u3092\u8a2d\u5b9a\u53ef\u80fd \u3000\u3000\u3000\u3000\u3000\u30fb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u63a5\u7d9a\u306e\u6700\u9069\u5316</li> <li>2.2.1  \u30fb\u7279\u5b9a\u306e\u6761\u4ef6\u4e0b\u306b\u304a\u3051\u308b\u7121\u9650\u30eb\u30fc\u30d7\u30d0\u30b0\u3092\u89e3\u6d88</li> <li>2.2.0  \u30fb\u30b5\u30fc\u30d3\u30b9\u518d\u8d77\u52d5\u6642\u306e\u5f37\u5236\u7d42\u4e86\u30d0\u30b0\u3092\u89e3\u6d88 \u3000\u3000\u3000\u3000\u3000\u30fb\u30d7\u30ed\u30b0\u30e9\u30e0\u6700\u9069\u5316 \u3000\u3000\u3000\u3000\u3000\u30fbPython3.10\u4ee5\u4e0a</li> <li>2.1.3\u3000\u30fb\u6b21\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u304c\u7121\u3044\u5834\u5408\u306e\u30a8\u30e9\u30fc\u89e3\u6d88</li> <li>2.1.2\u3000\u30fb\u6b21\u30a8\u30dd\u30c3\u30af\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u65e5\u4ed8\u306e\u901a\u77e5\u6709\u7121\u5bfe\u5fdc</li> <li>2.1.1\u3000\u30fb\u30d6\u30ed\u30c3\u30af\u30ed\u30b0\u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u5bfe\u5fdc</li> <li>2.0.0\u3000\u30fb\u591a\u8a00\u8a9e\u5bfe\u5fdc</li> <li>1.9.5\u3000\u30fbLINE\u901a\u77e5\u4e0d\u5177\u5408\u4fee\u6b63</li> <li>1.9.4\u3000\u30fb\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u53d6\u5f97\u30b9\u30ed\u30c3\u30c8\u3092<code>303300</code>\uff5e<code>317700</code>\u9593\u3067\u30e9\u30f3\u30c0\u30e0\u5316</li> <li>1.9.0\u3000\u30fb\u30ce\u30fc\u30c9\u518d\u8d77\u52d5\u6642\u306e\u30a8\u30e9\u30fc\u4fee\u6b63</li> <li> <p>1.8.9\u3000\u30fb\u30a8\u30dd\u30c3\u30af\u5883\u754c\u306e\u901a\u77e5\u5185\u5bb9\u4e0d\u5177\u5408\u4fee\u6b63 \u3000\u3000\u3000\u30fb\u901a\u77e5\u5185\u5bb9\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u5909\u66f4</p> </li> <li> <p>1.8.8 \u30fb\u30b9\u30c6\u30fc\u30bf\u30b9\u901a\u77e5\u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\u6642\u306b\u901a\u77e5 \u3000\u3000\u3000\u30fb\u901a\u77e5\u5148\u30c8\u30fc\u30af\u30f3\u672a\u5165\u529b\u306e\u5834\u5408\u306b\u30b5\u30fc\u30d3\u30b9\u753b\u9762\u3067\u30a8\u30e9\u30fc\u6392\u51fa</p> </li> <li>1.8.7 \u30ce\u30fc\u30c9\u518d\u8d77\u52d5\u5f8c\u3001\u901a\u77e5\u3055\u308c\u306a\u3044\u4e0d\u5177\u5408\u3092\u4fee\u6b63</li> <li>1.8.6 \u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u53d6\u5f97\u81ea\u52d5\u5316\u5c0e\u5165(\u9078\u629e\u5f0f) \u3000\u3000\u3000\u30fb\u53d6\u5f97\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u4e00\u89a7\u901a\u77e5</li> <li>1.7 \u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u53d6\u5f97\u30bf\u30a4\u30df\u30f3\u30b0\u901a\u77e5 \u3000\u3000\u3000\u30fb\u751f\u6210\u30d6\u30ed\u30c3\u30af\u306ePooltool\u30ea\u30f3\u30af\u8ffd\u52a0</li> <li>1.6 \u30d6\u30ed\u30c3\u30af\u672a\u751f\u6210\u30d7\u30fc\u30eb\u3067\u4f7f\u7528\u3059\u308b\u5834\u5408\u306e\u8d77\u52d5\u6642\u30a8\u30e9\u30fc\u3092\u4fee\u6b63</li> <li>1.5 10\u5206\u4ee5\u5185\u306b\u8907\u6570\u306e\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u304c\u3042\u308b\u5834\u5408\u306e\u901a\u77e5\u30d0\u30b0\u4fee\u6b63</li> <li>1.4 \u6b21\u306e\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3092\u8868\u793a</li> <li>1.3 \u30ce\u30fc\u30c9\u518d\u8d77\u52d5\u6642\u306e\u4e0d\u5177\u5408\u3092\u4fee\u6b63</li> <li>1.2.3 \u30a8\u30dd\u30c3\u30af\u53d6\u5f97\u30d5\u30ed\u30fc\u4fee\u6b63</li> <li>1.2.2 \u901a\u77e5\u30d0\u30b0\u4fee\u6b63</li> <li>1.2 \u30fbTelegram\u3001Slack\u306b\u5bfe\u5fdc \u3000\u3000\u3000\u30fb\u901a\u77e5\u57fa\u6e96\u8a2d\u5b9a( \u5168\u3066/confirm\u4ee5\u5916\u5168\u3066/Missed\u3068ivaild\u306e\u307f) \u3000\u3000\u3000\u30fb\u901a\u77e5\u5185\u5bb9\u3092\u5909\u66f4(X\u756a\u76ee/\u30c8\u30fc\u30bf\u30eb\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u6570)  </li> <li>1.1 \u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u53d6\u5f97\u6642\u3001\u305d\u306e\u4ed6\u901a\u77e5\u5224\u5b9a\u4fee\u6b63  </li> <li>1.0.1 \u8efd\u5fae\u306a\u4fee\u6b63  </li> <li>1.0 \u521d\u7248\u30ea\u30ea\u30fc\u30b9  </li> </ul>"},{"location":"setup/blocknotify-setup/#1","title":"1. \u4f9d\u5b58\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>Python\u74b0\u5883\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7</p> <p>\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u66f4\u65b0\u3059\u308b <pre><code>sudo apt update &amp;&amp; sudo apt upgrade -y\n</code></pre></p> <p>python\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3059\u308b <pre><code>python3 -V\n</code></pre></p> <p>Python 3.10\u4ee5\u4e0a</p> Python 3.9\u4ee5\u4e0b\u306e\u5834\u5408\u3053\u3061\u3089\u306e\u30c4\u30fc\u30eb\u3067\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3057\u3066\u304f\u3060\u3055\u3044 <p>pythonUpdate.sh\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u81ea\u52d5\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b <pre><code>cd\nwget https://raw.githubusercontent.com/btbf/spojapanguild/master/scripts/pythonUpdate.sh\nchmod +x pythonUpdate.sh\n./pythonUpdate.sh\n</code></pre></p> <p>\u4f9d\u5b58\u95a2\u4fc2\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b <pre><code>sudo apt install -y build-essential libssl-dev libffi-dev python3-dev python3-pip python3-testresources\n</code></pre> <pre><code>pip3 install watchdog pytz python-dateutil requests discordwebhook slackweb i18nice\n</code></pre></p> <p>\u5b9f\u884c\u30b9\u30af\u30ea\u30d7\u30c8\u3068\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b</p> <pre><code>bn_release=\"$(curl -s https://api.github.com/repos/btbf/block-notify/releases/latest | jq -r '.tag_name')\"\nwget https://github.com/btbf/block-notify/archive/refs/tags/${bn_release}.tar.gz -P $NODE_HOME/scripts\ncd $NODE_HOME/scripts\ntar zxvf ${bn_release}.tar.gz block-notify-${bn_release}/block_notify.py block-notify-${bn_release}/config.ini block-notify-${bn_release}/i18n/ \nmv block-notify-${bn_release} block-notify\nrm ${bn_release}.tar.gz\n</code></pre>"},{"location":"setup/blocknotify-setup/#2","title":"2. \u901a\u77e5\u30a2\u30d7\u30ea\u306e\u8a2d\u5b9a","text":"<p>\u901a\u77e5\u3055\u305b\u305f\u3044\u30a2\u30d7\u30ea\u306e\u30bf\u30d6\u3092\u30af\u30ea\u30c3\u30af\u3057\u8a2d\u5b9a\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> LINEDiscordTelegramSlack <p>\u304a\u77e5\u3089\u305b</p> <p>2025\u5e743\u6708\u672b\u3092\u3082\u3063\u3066LINE Notify\u30b5\u30fc\u30d3\u30b9\u7d42\u4e86\u306b\u4f34\u3044\u3001LINE Messaging API\u306b\u5bfe\u5fdc\u3057\u307e\u3057\u305f\u3002 \u7121\u6599\u7248\u306b\u304a\u3044\u3066\u306f\u3001\u6708\u306e\u9001\u4fe1\u4e0a\u9650\u304c200\u901a\u307e\u3067\u3068\u306a\u3063\u3066\u304a\u308a\u307e\u3059\u3002 (\u8907\u6570\u4eba\u3067\u904b\u7528\u3059\u308b\u5834\u5408\u306f\u300c\u9001\u4fe1\u6570\u00d7\u4eba\u6570\u300d\u3067\u30ab\u30a6\u30f3\u30c8\u3055\u308c\u307e\u3059\u306e\u3067\u3054\u6ce8\u610f\u304f\u3060\u3055\u3044)  \u65b0\u3057\u3044API\u306fLINE\u516c\u5f0f\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u901a\u3058\u3066\u914d\u4fe1\u3055\u308c\u308b\u305f\u3081\u3001\u8a2d\u5b9a\u3092\u9593\u9055\u3048\u308b\u3068\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u6f0f\u6d29\u306e\u30ea\u30b9\u30af\u304c\u3042\u308a\u307e\u3059\u3002\u8907\u6570\u4eba\u3067\u904b\u7528\u3059\u308b\u5834\u5408\u306f\u3054\u6ce8\u610f\u304f\u3060\u3055\u3044 </p> <ul> <li> <p>1.LINE\u30d3\u30b8\u30cd\u30b9ID\u3092\u4f5c\u6210\u3059\u308b LINE Bussiness ID https://manager.line.biz/ \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3001\u304a\u6301\u3061\u306eLINE\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u304b\u65b0\u898f\u3067BussinessID\u3092\u4f5c\u6210\u3057\u3066\u304f\u3060\u3055\u3044 </p> </li> <li> <p>2.LINE\u516c\u5f0f\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f5c\u6210\u3059\u308b </p> </li> </ul> <p>\u30a2\u30ab\u30a6\u30f3\u30c8\u540d\uff1a\u4efb\u610f\u306e\u540d\u524d \u904b\u7528\u76ee\u7684\uff1a\u305d\u306e\u4ed6 \u4e3b\u306a\u4f7f\u3044\u65b9\uff1a\u30e1\u30c3\u30bb\u30fc\u30b8\u914d\u4fe1\u7528  </p> <p> LINE\u30e4\u30d5\u30fc for Bussiness\u3092\u53cb\u3060\u3061\u8ffd\u52a0\u306e\u30c1\u30a7\u30c3\u30af\u3092\u5916\u3059   LINE Official Account Manager\u3078\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b  </p> <ul> <li> <p>3.Messaging API\u306e\u8a2d\u5b9a \u53f3\u4e0a\u306e\u300c\u8a2d\u5b9a\u3092\u300d\u30af\u30ea\u30c3\u30af\u3059\u308b \u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u753b\u50cf\u3092\u7de8\u96c6\u3059\u308b\u3068\u30d7\u30fc\u30eb\u30a2\u30a4\u30b3\u30f3\u3092\u8a2d\u5b9a\u3067\u304d\u307e\u3059 \u5de6\u30e1\u30cb\u30e5\u30fc\u306e\u300cMessaging API\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u300cMessaging API\u3092\u5229\u7528\u3059\u308b\u300d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b \u300c\u30d7\u30ed\u30d0\u30a4\u30c0\u30fc\u3092\u4f5c\u6210\u300d\u6b04\u306b\u300cnotify\u300d\u3068\u5165\u529b\u3057\u3001\u300c\u540c\u610f\u3059\u308b\u300d\u3092\u30af\u30ea\u30c3\u30af \u7a7a\u6b04\u306e\u307e\u307e\u300cOK\u300d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b </p> </li> <li> <p>4.LINE Developers\u8a2d\u5b9a \u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u30ed\u30b0\u30a4\u30f3\u3059\u308b \u30d7\u30ed\u30d0\u30a4\u30c0\u30fc\u304b\u3089\u5148\u307b\u3069\u4f5c\u6210\u3057\u305f\u300cnotify\u300d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b 2\u3067\u4f5c\u6210\u3057\u305fLINE\u516c\u5f0f\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b \u300cMessaging API\u300d\u30bf\u30d6\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b \u30da\u30fc\u30b8\u4e0b\u90e8\u306e\u300c\u30c1\u30e3\u30f3\u30cd\u30eb\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3(\u9577\u671f)\u300d\u3067\u300c\u5b9f\u884c\u300d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b \u767a\u884c\u3055\u308c\u305f\u30c8\u30fc\u30af\u30f3\u3092\u63a7\u3048\u308b \uff08\u767a\u884c\u3055\u308c\u305f\u30c8\u30fc\u30af\u30f3\u306f\u3044\u3064\u3067\u3082\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\uff09 <code>line_notify_token</code>\u306e\u5024\u3068\u3057\u3066\u4f7f\u7528\u3057\u307e\u3059 \u4e0a\u90e8\u306b\u623b\u308a\u300c\u30c1\u30e3\u30f3\u30cd\u30eb\u57fa\u672c\u8a2d\u5b9a\u300d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b \u300c\u3042\u306a\u305f\u306e\u30e6\u30fc\u30b6\u30fcID\u300d\u3092\u63a7\u3048\u308b <code>line_user_id</code>\u306e\u5024\u3068\u3057\u3066\u4f7f\u7528\u3057\u307e\u3059 </p> </li> </ul> <ul> <li> <p>1.\u30b5\u30fc\u30d0\u30fc\u3092\u8ffd\u52a0\u3059\u308b </p> </li> <li> <p>2.\u300c\u30aa\u30ea\u30b8\u30ca\u30eb\u306e\u4f5c\u6210\u300d\u3092\u9078\u629e\u3059\u308b </p> </li> <li> <p>3.\u300c\u81ea\u5206\u3068\u53cb\u9054\u306e\u305f\u3081\u300d\u3092\u9078\u629e\u3059\u308b </p> </li> <li> <p>4.\u4efb\u610f\u306e\u30b5\u30fc\u30d0\u30fc\u540d\u3092\u5165\u529b\u3057\u3066\u300c\u65b0\u898f\u4f5c\u6210\u300d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b </p> </li> <li> <p>5.\u901a\u77e5\u3057\u305f\u3044\u30c1\u30e3\u30f3\u30cd\u30eb\u306e\u6b6f\u8eca\u30de\u30fc\u30af\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b </p> </li> <li> <p>6.\u300c\u9023\u643a\u30b5\u30fc\u30d3\u30b9\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u300c\u30a6\u30a7\u30d6\u30d5\u30c3\u30af\u3092\u4f5c\u6210\u300d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b </p> </li> <li> <p>7.\u300c\u30a6\u30a7\u30d6\u30d5\u30c3\u30afURL\u3092\u30b3\u30d4\u30fc\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u4e00\u65e6\u30e1\u30e2\u5e33\u306a\u3069\u306b\u8cbc\u308a\u4ed8\u3051\u308b </p> </li> </ul> <ul> <li> <p>1.Telegram\u306e\u691c\u7d22\u6b04\u3067\u300c@botFather\u300d\u3092\u691c\u7d22\u3057\u3066\u8a8d\u8a3c\u30de\u30fc\u30af\u4ed8\u304d\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b </p> </li> <li> <p>2.\u300cSTART\u300d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b </p> </li> <li> <p>3.\u300c/newbot\u300d\u30b3\u30de\u30f3\u30c9\u3092\u5165\u529b\u3059\u308b </p> </li> <li> <p>4.\u4efb\u610f\u306ebot\u540d\u3092\u5165\u529b\u3059\u308b \u4f8b\uff09\u300cbtbf_bot\u300d\u6700\u5f8c\u306f\u5fc5\u305a<code>_bot</code>\u3067\u7d42\u308f\u308b\u3088\u3046\u306b\u3059\u308b </p> </li> <li> <p>5.\u7dd1\u3067\u96a0\u3057\u305f\u90e8\u5206\u306eAPI\u30c8\u30fc\u30af\u30f3\u3092\u30e1\u30e2\u5e33\u306b\u63a7\u3048\u308b </p> </li> <li> <p>6.\u8d64\u67a0\u3067\u56f2\u3063\u305fbot\u30c1\u30e3\u30f3\u30cd\u30eb\u306b\u53c2\u52a0\u3059\u308b </p> </li> <li> <p>7.\u691c\u7d22\u6b04\u3067\u300c@RawDataBot\u300d\u3092\u691c\u7d22\u3057\u3066\u30af\u30ea\u30c3\u30af\u3059\u308b </p> </li> <li> <p>8.\u300cSTART\u300d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b </p> </li> <li> <p>9.\u300cChat id\u300d\u3092\u30e1\u30e2\u5e33\u306b\u63a7\u3048\u308b </p> </li> </ul> <ul> <li> <p>1.Slack\u3092\u8d77\u52d5\u3057\u3001\u901a\u77e5\u7528\u306e\u30ef\u30fc\u30af\u30b9\u30da\u30fc\u30b9\u3068\u30c1\u30e3\u30f3\u30cd\u30eb\u3092\u8a2d\u5b9a\u3059\u308b</p> </li> <li> <p>2.Incoming Webhook\u306e\u8a2d\u5b9a\u30da\u30fc\u30b8\u3078\u30a2\u30af\u30bb\u30b9\u3059\u308b</p> </li> <li> <p>3.\u901a\u77e5\u3057\u305f\u3044\u30ef\u30fc\u30af\u30b9\u30da\u30fc\u30b9\u3068\u30c1\u30e3\u30f3\u30cd\u30eb\u3092\u9078\u629e\u3059\u308b </p> </li> <li> <p>4.\u300cWebhook URL\u300d\u3092\u30e1\u30e2\u5e33\u306b\u63a7\u3048\u308b </p> </li> <li> <p>5.\u30da\u30fc\u30b8\u4e0b\u90e8\u306e\u300c\u8a2d\u5b9a\u3092\u4fdd\u5b58\u3059\u308b\u300d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b </p> </li> </ul>"},{"location":"setup/blocknotify-setup/#3","title":"3. \u901a\u77e5\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u8a2d\u5b9a","text":"<p>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092SJG\u7528\u306b\u66f8\u304d\u63db\u3048\u308b <pre><code>cd block-notify\nsed -i config.ini \\\n    -e 's!/opt/cardano/cnode!'${NODE_HOME}'!' \\\n    -e 's!files/!'${NODE_CONFIG}-'!' \\\n    -e 's!notify_language = en!notify_language = ja!' \\\n    -e 's!Etc/UTC!Asia/Tokyo!'\n</code></pre></p> <p>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u7de8\u96c6 \u4ee5\u4e0b\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u5185\u5bb9\u8a73\u7d30\u3092\u53c2\u7167\u3057\u3001\u3054\u81ea\u8eab\u306e\u74b0\u5883\u306b\u5408\u308f\u305b\u305f\u5024\u3092\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <pre><code>cd $NODE_HOME/scripts/block-notify\nnano config.ini\n</code></pre> <p>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u5185\u5bb9\u8a73\u7d30</p> \u9805\u76ee \u5024 \u4f7f\u7528\u7528\u9014 <code>pool_ticker</code> ex.) SJG \u30d7\u30fc\u30eb\u30c6\u30a3\u30c3\u30ab\u30fc\u540d\u3092\u5165\u529b\u3059\u308b <code>notify_language</code> \u82f1\u8a9e:<code>en</code>\u65e5\u672c\u8a9e:<code>ja</code> \u901a\u77e5\u8a00\u8a9e\u3092\u5165\u529b\u3059\u308b <code>notify_timezone</code> Asia/Tokyo\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u4e00\u89a7 \u304a\u4f4f\u3044\u306e\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u3092\u6307\u5b9a\u3059\u308b <code>notify_platform</code> <code>Line</code><code>Discord</code><code>Slack</code><code>Telegram</code> \u901a\u77e5\u5148\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3092\u6307\u5b9a\u3059\u308b (\u8907\u6570\u6307\u5b9a\u306f\u7121\u52b9) <code>notify_level</code> \u5168\u3066:<code>All</code>Confirm\u4ee5\u5916:<code>ExceptCofirm</code>Miss\u306e\u307f:<code>OnlyMissed</code> \u901a\u77e5\u57fa\u6e96\u3092\u8a2d\u5b9a\u3059\u308b <code>nextepoch_leader_date</code> \u6982\u8981\u306e\u307f:<code>SummaryOnly</code>\u6982\u8981\u3068\u65e5\u4ed8:<code>SummaryDate</code> \u6b21\u30a8\u30dd\u30c3\u30af\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u65e5\u6642\u306e\u901a\u77e5\u6709\u7121\u6b21\u30a8\u30dd\u30c3\u30af\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u65e5\u4ed8\u4e00\u89a7\u3092\u901a\u77e5\u306b\u6d41\u3057\u305f\u304f\u306a\u3044\u5834\u5408\u306f<code>SummaryOnly</code>\u3092\u8a18\u8f09\u3057\u3066\u304f\u3060\u3055\u3044 <code>line_notify_token</code> LINE\u8a2d\u5b9a\u3067\u767a\u884c\u3057\u305f\u30c1\u30e3\u30f3\u30cd\u30eb\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3 Line\u901a\u77e5\u7528\u306e\u30c8\u30fc\u30af\u30f3\u3092\u5165\u529b\u3059\u308b <code>line_user_id</code> LINE\u8a2d\u5b9a\u3067\u767a\u884c\u3057\u305f\u30e6\u30fc\u30b6\u30fcID Line\u901a\u77e5\u7528\u306e\u30e6\u30fc\u30b6\u30fcID\u3092\u5165\u529b\u3059\u308b <code>discord_webhook_url</code> Discord\u8a2d\u5b9a\u306e(7)\u3067\u767a\u884c\u3057\u305f\u30a6\u30a7\u30d6\u30d5\u30c3\u30afURL Discord\u30a6\u30a7\u30d6\u30d5\u30c3\u30afURL\u3092\u5165\u529b\u3059\u308b <code>slack_webhook_url</code> Slack\u8a2d\u5b9a\u306e(4)\u3067\u767a\u884c\u3057\u305fWebhook URL Slack\u30a6\u30a7\u30d6\u30d5\u30c3\u30afURL\u3092\u5165\u529b\u3059\u308b <code>telegram_token</code> Telegram\u8a2d\u5b9a\u306e(5)\u3067\u767a\u884c\u3057\u305fAPI\u30c8\u30fc\u30af\u30f3 Telegram API\u30c8\u30fc\u30af\u30f3\u3092\u5165\u529b\u3059\u308b <code>telegram_id</code> Telegram\u8a2d\u5b9a\u306e(9)\u3067\u8868\u793a\u3055\u308c\u305fChat id Telegram ChatID\u3092\u5165\u529b\u3059\u308b <code>node_home</code> ex.)<code>/home/usr/cnode</code> node_home\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30d1\u30b9\u3092\u5165\u529b\u3059\u308b <code>guild_db_dir</code> ex.)<code>%(node_home)s/guild-db/blocklog/</code> guild-db\u306e\u30d1\u30b9\u3092\u5165\u529b\u3059\u308b<code>%(node_home)s</code>\u306f\u5909\u6570\u306e\u305f\u3081\u5909\u66f4\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044 <code>shelley_genesis</code> ex.)<code>%(node_home)s/files/shelley-genesis.json</code> shelley_genesis\u306e\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u3092\u5165\u529b\u3059\u308b<code>%(node_home)s</code>\u306f\u5909\u6570\u306e\u305f\u3081\u5909\u66f4\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044 <code>byron_genesis</code> ex.)<code>%(node_home)s/files/byron-genesis.json</code> byron_genesis\u306e\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u3092\u5165\u529b\u3059\u308b<code>%(node_home)s</code>\u306f\u5909\u6570\u306e\u305f\u3081\u5909\u66f4\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044 <p>\u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u8a2d\u5b9a\u3059\u308b</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/service/cnode-blocknotify.service &lt;&lt; EOF \n# file: /etc/systemd/system/cnode-blocknotify.service\n\n[Unit]\nDescription=Cardano Node - SPO Blocknotify\nBindsTo=cnode-cncli-sync.service\nAfter=cnode-cncli-sync.service\n\n[Service]\nType=simple\nUser=$(whoami)\nWorkingDirectory=${NODE_HOME}/scripts/block-notify\nExecStart=/bin/bash -c 'cd ${NODE_HOME}/scripts/block-notify/ &amp;&amp; python3 -u block_notify.py'\nRestart=on-failure\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=cnode-blocknotify\n\n[Install]\nWantedBy=cnode-cncli-sync.service\nEOF\n</code></pre> <pre><code>sudo cp $NODE_HOME/service/cnode-blocknotify.service /etc/systemd/system/cnode-blocknotify.service\n</code></pre> <p>Ubuntu22.04\u306e\u5834\u5408\u306f\uff11\u884c\u3065\u3064\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>sudo chmod 644 /etc/systemd/system/cnode-blocknotify.service\nsudo systemctl daemon-reload\nsudo systemctl enable cnode-blocknotify.service\n</code></pre> SPO BlockNotify\u3092\u8d77\u52d5\u3059\u308b <pre><code>sudo systemctl start cnode-blocknotify.service\n</code></pre></p> <p>\u74b0\u5883\u5909\u6570\u306b\u30ed\u30b0\u78ba\u8a8d\u7528\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u8ffd\u52a0\u3059\u308b <pre><code>echo alias blocknotify='\"journalctl --no-hostname -u cnode-blocknotify -f\"' &gt;&gt; $HOME/.bashrc\n</code></pre> \u74b0\u5883\u5909\u6570\u518d\u8aad\u307f\u8fbc\u307f <pre><code>source $HOME/.bashrc\n</code></pre></p> <p>\u8d77\u52d5\u78ba\u8a8d <pre><code>blocknotify\n</code></pre> \u4ee5\u4e0b\u306e\u8868\u793a\u306a\u3089\u6b63\u5e38\u3067\u3059\u3002</p> <p>[xxx] \u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u901a\u77e5\u3092\u8d77\u52d5\u3057\u307e\u3057\u305f </p> <p>\u65b0\u898f\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u306f\u4ee5\u4e0a\u3067\u3059\u3002</p>"},{"location":"setup/blocknotify-setup/#4","title":"4. \u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806","text":"<p>SPO BlockNotify\u3092\u505c\u6b62\u3059\u308b <pre><code>sudo systemctl stop cnode-blocknotify.service\n</code></pre></p> <p>\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b <pre><code>bn_release=\"$(curl -s https://api.github.com/repos/btbf/block-notify/releases/latest | jq -r '.tag_name')\"\nwget https://github.com/btbf/block-notify/archive/refs/tags/${bn_release}.tar.gz -P $NODE_HOME/scripts\ncd $NODE_HOME/scripts\ntar zxvf ${bn_release}.tar.gz block-notify-${bn_release}/block_notify.py block-notify-${bn_release}/i18n\ncp block-notify-${bn_release}/block_notify.py block-notify/block_notify.py\ncp -r block-notify-${bn_release}/i18n block-notify/\nrm -rf block-notify-${bn_release} ${bn_release}.tar.gz\n</code></pre></p> <p>v2.4.1\u4ee5\u4e0b\u304b\u3089v2.5.0\u3078\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u306e\u5834\u5408\u306f\u4ee5\u4e0b\u3082\u5b9f\u65bd</p> <pre><code>cd $NODE_HOME/scripts/block-notify/\nsed -i '13a line_user_id = ' config.ini\n</code></pre> <p>LINE\u901a\u77e5\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u65b9\u3078</p> <p>2025\u5e743\u6708\u672b\u3092\u3082\u3063\u3066LINE Notify\u30b5\u30fc\u30d3\u30b9\u7d42\u4e86\u306b\u4f34\u3044\u3001LINE Messaging API\u306b\u5bfe\u5fdc\u3057\u307e\u3057\u305f\u3002 \u7121\u6599\u7248\u306b\u304a\u3044\u3066\u306f\u3001\u6708\u306e\u9001\u4fe1\u4e0a\u9650\u304c200\u901a\u307e\u3067\u3068\u306a\u3063\u3066\u304a\u308a\u307e\u3059\u3002 (\u8907\u6570\u4eba\u3067\u904b\u7528\u3059\u308b\u5834\u5408\u306f\u300c\u9001\u4fe1\u6570\u00d7\u4eba\u6570\u300d\u3067\u30ab\u30a6\u30f3\u30c8\u3055\u308c\u307e\u3059\u306e\u3067\u3054\u6ce8\u610f\u304f\u3060\u3055\u3044) \u65b0\u3057\u3044API\u306fLINE\u516c\u5f0f\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u901a\u3058\u3066\u914d\u4fe1\u3055\u308c\u308b\u305f\u3081\u3001\u8a2d\u5b9a\u3092\u9593\u9055\u3048\u308b\u3068\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u6f0f\u6d29\u306e\u30ea\u30b9\u30af\u304c\u3042\u308a\u307e\u3059\u3002\u8907\u6570\u4eba\u3067\u904b\u7528\u3059\u308b\u5834\u5408\u306f\u3054\u6ce8\u610f\u304f\u3060\u3055\u3044  \u4e0a\u8a18\u306e\u70b9\u3092\u8e0f\u307e\u3048\u3001\u4ed6\u306e\u901a\u77e5\u30b7\u30b9\u30c6\u30e0(Discord/Telegram/Slack)\u3078\u79fb\u884c\u3059\u308b\u304b\u65b0\u3057\u3044LINE\u901a\u77e5\u306e\u8a2d\u5b9a\u3092\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044\u3002\uff08\u6d41\u308c\u306711-3\u307e\u3067\u5b9f\u65bd\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044\uff09 LINE\u516c\u5f0f\u30a2\u30ab\u30a6\u30f3\u30c8\u767a\u884c\u5f8c\u3001<code>config.ini</code>\u306e<code>line_notify_token</code>\u3068<code>line_user_id</code>\u3092\u767a\u884c\u3057\u305f\u5024\u306b\u66f8\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>SPO BlockNotify\u3092\u8d77\u52d5\u3059\u308b <pre><code>sudo systemctl start cnode-blocknotify.service\n</code></pre></p> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>python3 $NODE_HOME/scripts/block-notify/block_notify.py version\n</code></pre></p>"},{"location":"setup/blocknotify-setup/#5","title":"5. \u30a2\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806","text":"<p><pre><code>sudo systemctl stop cnode-blocknotify.service\n</code></pre> <pre><code>sudo systemctl disable cnode-blocknotify.service\nsudo rm /etc/systemd/system/cnode-blocknotify.service\n</code></pre></p>"},{"location":"setup/bp-key-setup/","title":"BP\u7528\u30ad\u30fc\u751f\u6210","text":"<p>\u4e8b\u524d\u78ba\u8a8d</p> <p>\u4ee5\u4e0b\u306e\u9805\u76ee\u3092\u5b9f\u65bd\u3059\u308b\u524d\u306bBP\u30ce\u30fc\u30c9\u304c\u8d77\u52d5\u3057\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002 <pre><code>cardano-cli conway query tip --mainnet | grep syncProgress\n</code></pre></p> <p>\u623b\u308a\u5024\u78ba\u8a8d <code>\"syncProgress\": \"100.00\"</code> \u623b\u308a\u5024\u304c99\u4ee5\u4e0b\u306e\u5834\u5408\u306f100(\u6700\u65b0\u30d6\u30ed\u30c3\u30af\u307e\u3067\u540c\u671f)\u306b\u306a\u308b\u307e\u3067\u5f85\u3061\u307e\u3057\u3087\u3046\u3002</p> <p>BP\u8d77\u52d5\u306b\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u3068\u306f\uff1f</p> <p>\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9\u3067\u306f\uff13\u3064\u306e\u30ad\u30fc\u3092\u751f\u6210\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> <ul> <li>\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u306e\u904b\u7528\u8a3c\u660e\u66f8 (node.cert)</li> <li>\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30ad\u30fc (kes.skey)</li> <li>\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u306eVRF\u30ad\u30fc (vrf.skey)</li> </ul>"},{"location":"setup/bp-key-setup/#1-kes","title":"1. KES\u30ad\u30fc\u306e\u4f5c\u6210","text":"<p>KES\u30ad\u30fc\u306b\u3064\u3044\u3066</p> <p>(KES=Key Evolving Signature)\u306e\u7565 \u30ad\u30fc\u3092\u60aa\u7528\u3059\u308b\u30cf\u30c3\u30ab\u30fc\u304b\u3089\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u3092\u4fdd\u8b77\u3059\u308b\u305f\u3081\u306b\u4f5c\u6210\u3055\u308c\u300190\u65e5\u3054\u3068\u306b\u518d\u751f\u6210\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u8a73\u7d30\u306f\u904b\u7528\u30de\u30cb\u30e5\u30a2\u30eb\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\ncardano-cli conway node key-gen-KES \\\n    --verification-key-file kes.vkey \\\n    --signing-key-file kes.skey\n</code></pre>"},{"location":"setup/bp-key-setup/#2","title":"2. \u30b3\u30fc\u30eb\u30c9\u30ad\u30fc\u306e\u4f5c\u6210","text":"<p>\u6ce8\u610f</p> <p>\u30b3\u30fc\u30eb\u30c9\u30ad\u30fc\u306f\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3\u3067\u751f\u6210\u3057\u4fdd\u7ba1\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059 \u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u30d7\u30fc\u30eb\u904b\u55b6\u3067\u91cd\u8981\u306a\u30b3\u30fc\u30eb\u30c9\u30ad\u30fc\u3067\u3059\u3002\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u3067\u4f5c\u6210\u3057\u30aa\u30f3\u30e9\u30a4\u30f3\u74b0\u5883\u306b\u4fdd\u7ba1\u3057\u306a\u3044\u3088\u3046\u3054\u6ce8\u610f\u4e0b\u3055\u3044\u3002 \u5916\u90e8\u306b\u6d41\u51fa\u3059\u308b\u3068\u30d7\u30fc\u30eb\u304c\u4e57\u3063\u53d6\u3089\u308c\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u306e\u3067\u7ba1\u7406\u306b\u306f\u5341\u5206\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044 \u307e\u305f\u8907\u6570\u306eUSB\u306b\u4fdd\u7ba1\u3057\u3001\u7d76\u5bfe\u306b\u4e0a\u66f8\u304d\u30fb\u524a\u9664\u3057\u306a\u3044\u3088\u3046\u3054\u6ce8\u610f\u4e0b\u3055\u3044\u3002 \u30b3\u30fc\u30eb\u30c9\u30ad\u30fc\u306f\u6b21\u306e\u30d1\u30b9\u306b\u683c\u7d0d\u3055\u308c\u307e\u3059 <code>$HOME/cold-keys</code> </p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>mkdir $HOME/cold-keys\n</code></pre> <p>\u30b3\u30fc\u30eb\u30c9\u30ad\u30fc\u306e\u30da\u30a2\u30ad\u30fc\u3068\u30ab\u30a6\u30f3\u30bf\u30fc\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p> <p><pre><code>cd $HOME/cold-keys\ncardano-cli conway node key-gen \\\n    --cold-verification-key-file node.vkey \\\n    --cold-signing-key-file node.skey \\\n    --operational-certificate-issue-counter node.counter\n</code></pre> \u30a2\u30af\u30bb\u30b9\u6a29\u3092\u8aad\u307f\u53d6\u308a\u5c02\u7528\u306b\u66f4\u65b0\u3057\u307e\u3059\u3002 <pre><code>chmod 400 node.vkey\nchmod 400 node.skey\n</code></pre></p> <p>\u91cd\u8981</p> <p>\u3059\u3079\u3066\u306e\u30ad\u30fc\u3092\u5225\u306e\u5b89\u5168\u306a\u30b9\u30c8\u30ec\u30fc\u30b8\u30c7\u30d0\u30a4\u30b9(USB)\u306a\u3069\u306b\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3057\u307e\u3057\u3087\u3046\uff01\u8907\u6570\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u3092\u304a\u3059\u3059\u3081\u3057\u307e\u3059\u3002</p>"},{"location":"setup/bp-key-setup/#3","title":"3. \u30d7\u30fc\u30eb\u904b\u7528\u8a3c\u660e\u66f8\u306e\u4f5c\u6210","text":"<p>\u4e8b\u524d\u78ba\u8a8d</p> <p>\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u3068\u5b8c\u5168\u306b\u540c\u671f\u3057\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 \u540c\u671f\u304c\u9014\u4e2d\u306e\u5834\u5408\u3001\u6b63\u3057\u3044slotsPerKESPeriod\u3092\u53d6\u5f97\u3067\u304d\u307e\u305b\u3093\u3002 \u3042\u306a\u305f\u306eBP\u30ce\u30fc\u30c9\u304c\u5b8c\u5168\u306b\u540c\u671f\u3055\u308c\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u306b\u306f\u3001Cardano Explorer\u3067\u81ea\u8eab\u306e\u540c\u671f\u6e08\u307f\u30a8\u30dd\u30c3\u30af\u3068\u30b9\u30ed\u30c3\u30c8\u304c\u4e00\u81f4\u3057\u3066\u3044\u308b\u304b\u3092\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <p>\u30b8\u30a7\u30cd\u30b7\u30b9\u30d5\u30a1\u30a4\u30eb\u304b\u3089slotsPerKESPeriod\u3092\u51fa\u529b\u3057\u307e\u3059\u3002 <pre><code>cd $NODE_HOME\nslotsPerKESPeriod=$(cat $NODE_HOME/${NODE_CONFIG}-shelley-genesis.json | jq -r '.slotsPerKESPeriod')\necho slotsPerKESPeriod: ${slotsPerKESPeriod}\n</code></pre> \u540c\u671f\u6e08\u307fslotNo\u3092\u7b97\u51fa\u3057\u307e\u3059\u3002 <pre><code>slotNo=$(cardano-cli conway query tip $NODE_NETWORK | jq -r '.slot')\necho slotNo: ${slotNo}\n</code></pre></p> <p>startKesPeriod\u3092\u7b97\u51fa\u3057\u307e\u3059\u3002</p> <pre><code>kesPeriod=$((${slotNo} / ${slotsPerKESPeriod}))\necho kesPeriod: ${kesPeriod}\nstartKesPeriod=${kesPeriod}\necho startKesPeriod: ${startKesPeriod}\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>BP\u306e<code>kes.skey</code>\u3068<code>kes.vkey</code> \u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[BP] --&gt;|kes.skey / kes.vkey| B[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7];</code></pre></p> <p>BP\u3068\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u3067<code>kes.vkey</code>\u30d5\u30a1\u30a4\u30eb\u30cf\u30c3\u30b7\u30e5\u3092\u6bd4\u8f03\u3059\u308b</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\nsha256sum kes.vkey\n</code></pre> <p>BP\u3068\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u3067\u8868\u793a\u3055\u308c\u305f\u623b\u308a\u5024\u3092\u6bd4\u8f03\u3057\u3066\u3001\u30cf\u30c3\u30b7\u30e5\u5024\u304c\u4e00\u81f4\u3057\u3066\u3044\u308c\u3070OK  </p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\nsha256sum kes.vkey\n</code></pre> <p>\u78ba\u8a8d</p> <p>\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u30aa\u30da\u30ec\u30fc\u30bf\u306f\u3001\u30d7\u30fc\u30eb\u3092\u5b9f\u884c\u3059\u308b\u6a29\u9650\u304c\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u305f\u3081\u306e\u904b\u7528\u8a3c\u660e\u66f8\u3092\u767a\u884c\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u8a3c\u660e\u66f8\u306b\u306f\u3001\u30aa\u30da\u30ec\u30fc\u30bf\u306e\u7f72\u540d\u304c\u542b\u307e\u308c\u30d7\u30fc\u30eb\u306b\u95a2\u3059\u308b\u60c5\u5831\uff08\u30a2\u30c9\u30ec\u30b9\u3001\u30ad\u30fc\u306a\u3069\uff09\u304c\u542b\u307e\u308c\u307e\u3059\u3002</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\nread -p \"BP\u3067\u7b97\u51fa\u3057\u305fstartKesPeriod\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044:\" kes\n</code></pre> <p>\u2191\u3053\u306e\u307e\u307e\u30b3\u30de\u30f3\u30c9\u306b\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044 \u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u5f8c\u306b\u3001\u6570\u5b57\u5165\u529b\u30e2\u30fc\u30c9\u306b\u306a\u308a\u307e\u3059\u306e\u3067 \u305d\u3053\u3067BP\u3067\u7b97\u51fa\u3057\u305f<code>startKesPeriod</code>\u306e\u6570\u5b57\u3092\u5165\u529b\u3057\u307e\u3059</p> <p>\u5165\u529b\u3057\u305f\u6570\u5b57\u304c\u623b\u308a\u5024\u306b\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u8a3c\u660e\u66f8\u3092\u4f5c\u6210\u3059\u308b <pre><code>echo \"\u5165\u529b\u3057\u305f\u6570\u5b57\u306f$kes\u3067\u3059\"\n</code></pre></p> <pre><code>cardano-cli conway node issue-op-cert \\\n    --kes-verification-key-file kes.vkey \\\n    --cold-signing-key-file $HOME/cold-keys/node.skey \\\n    --operational-certificate-issue-counter $HOME/cold-keys/node.counter \\\n    --kes-period $kes \\\n    --out-file node.cert\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306enode.cert \u3092BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002</p> <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|node.cert| B[BP];</code></pre> <p>** BP\u3068\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u3067<code>node.cert</code>\u30d5\u30a1\u30a4\u30eb\u30cf\u30c3\u30b7\u30e5\u3092\u6bd4\u8f03\u3059\u308b **</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\nsha256sum node.cert\n</code></pre> <p>BP\u3068\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u3067\u8868\u793a\u3055\u308c\u305f\u623b\u308a\u5024\u3092\u6bd4\u8f03\u3057\u3066\u3001\u30cf\u30c3\u30b7\u30e5\u5024\u304c\u4e00\u81f4\u3057\u3066\u3044\u308c\u3070OK  </p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\nsha256sum node.cert\n</code></pre>"},{"location":"setup/bp-key-setup/#4-vrf","title":"4. VRF\u30ad\u30fc\u306e\u4f5c\u6210","text":"\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\ncardano-cli conway node key-gen-VRF \\\n    --verification-key-file vrf.vkey \\\n    --signing-key-file vrf.skey\n</code></pre> <p>vrf\u30ad\u30fc\u306e\u30a2\u30af\u30bb\u30b9\u6a29\u3092\u8aad\u307f\u53d6\u308a\u5c02\u7528\u306b\u66f4\u65b0\u3057\u307e\u3059\u3002 <pre><code>chmod 400 vrf.skey\nchmod 400 vrf.vkey\n</code></pre></p> <p>\u6ce8\u610f</p> <p>vrf\u30ad\u30fc\u3092\u8aa4\u3063\u3066\u524a\u9664\u3057\u306a\u3044\u3088\u3046\u306b\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"setup/bp-key-setup/#5-bp","title":"5. BP\u30ce\u30fc\u30c9\u3068\u3057\u3066\u518d\u8d77\u52d5","text":"<p>BP\u30ce\u30fc\u30c9\u3092\u4e00\u65e6\u505c\u6b62\u3059\u308b  </p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>sudo systemctl stop cardano-node\n</code></pre> <p>\u30ce\u30fc\u30c9\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u78ba\u8a8d\u3059\u308b <pre><code>PORT=`grep \"PORT=\" $NODE_HOME/startBlockProducingNode.sh`\nb_PORT=${PORT#\"PORT=\"}\necho \"BP\u30dd\u30fc\u30c8\u306f${b_PORT}\u3067\u3059\"\n</code></pre></p> <p>\u2191\u305d\u306e\u307e\u307e\u5b9f\u884c\u3057\u3001BP\u306e\u30dd\u30fc\u30c8\u756a\u53f7\u304c\u8868\u793a\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b</p> <p>\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u306bKES\u3001VRF\u3001\u904b\u7528\u8a3c\u660e\u66f8\u306e\u30d1\u30b9\u3092\u8ffd\u8a18\u3057\u66f4\u65b0\u3057\u307e\u3059\u3002</p> \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/startBlockProducingNode.sh &lt;&lt; EOF \n#!/bin/bash\nDIRECTORY=$NODE_HOME\nPORT=${b_PORT}\nHOSTADDR=0.0.0.0\nTOPOLOGY=\\${DIRECTORY}/${NODE_CONFIG}-topology.json\nDB_PATH=\\${DIRECTORY}/db\nSOCKET_PATH=\\${DIRECTORY}/db/socket\nCONFIG=\\${DIRECTORY}/${NODE_CONFIG}-config.json\nKES=\\${DIRECTORY}/kes.skey\nVRF=\\${DIRECTORY}/vrf.skey\nCERT=\\${DIRECTORY}/node.cert\n/usr/local/bin/cardano-node +RTS -N --disable-delayed-os-memory-return -I0.1 -Iw300 -A32m -n4m -F1.5 -H2500M -RTS run --topology \\${TOPOLOGY} --database-path \\${DB_PATH} --socket-path \\${SOCKET_PATH} --host-addr \\${HOSTADDR} --port \\${PORT} --config \\${CONFIG} --shelley-kes-key \\${KES} --shelley-vrf-key \\${VRF} --shelley-operational-certificate \\${CERT}\nEOF\n</code></pre> <p>BP\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002</p> <pre><code>sudo systemctl start cardano-node\n</code></pre> <p>BP\u3068\u3057\u3066\u8d77\u52d5\u3057\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3059\u308b</p> <pre><code>cd $NODE_HOME/scripts\n./gLiveView.sh\n</code></pre> <p>\u30c1\u30a7\u30fc\u30f3\u540c\u671f\u5f8c\u306bCore\u306e\u8868\u793a\u304c\u3042\u308c\u3070OK</p> <p>\u6ce8\u610f\u4e8b\u9805</p> <p>\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306b\u306f\u3001\u4ee5\u4e0b\u306e\uff13\u3064\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u5fc5\u8981\u3067\u3059\u3002\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u63c3\u3063\u3066\u3044\u306a\u3044\u5834\u5408\u3084\u8d77\u52d5\u6642\u306b\u6307\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u30d6\u30ed\u30c3\u30af\u304c\u751f\u6210\u3067\u304d\u307e\u305b\u3093\u3002</p> <ul> <li>kes.skey</li> <li>vrf.skey</li> <li>node.cert</li> </ul>"},{"location":"setup/donation-credit/","title":"\u5bc4\u4ed8\u3068\u30af\u30ec\u30b8\u30c3\u30c8","text":"<p>SPO JAPAN GUILD\u3067\u306f\u3001\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u69cb\u7bc9\u30de\u30cb\u30e5\u30a2\u30eb\u306e\u6574\u5099\u3001\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u306e\u904b\u55b6\u3001\u30db\u30fc\u30e0\u30da\u30fc\u30b8\u3067\u306e\u8a8d\u77e5\u6d3b\u52d5\u306a\u3069\u7686\u69d8\u306e\u30d7\u30fc\u30eb\u904b\u55b6\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u304a\u308a\u307e\u3059\u3002 \u4eca\u5f8c\u3082\u30ab\u30eb\u30c0\u30ce\u5206\u6563\u5316\u3092\u4fc3\u9032\u3059\u308b\u305f\u3081\u306b\u3082\u3001\u7d99\u7d9a\u6027\u306e\u3042\u308b\u6d3b\u52d5\u3092\u884c\u3063\u3066\u307e\u3044\u308a\u307e\u3059\u3002 \u5bc4\u4ed8\u3057\u3066\u9802\u3044\u305f\u8cc7\u91d1\u306f\u3001\u30db\u30fc\u30e0\u30da\u30fc\u30b8\u30b5\u30fc\u30d0\u30fc\u4ee3\u3001\u30c9\u30e1\u30a4\u30f3\u4ee3\u3001\u958b\u767a\u8cbb\u3001\u4eba\u4ef6\u8cbb\u3001\u30de\u30fc\u30b1\u30c6\u30a3\u30f3\u30b0\u8cbb\u306b\u4f7f\u7528\u3055\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3059\u3002</p>"},{"location":"setup/donation-credit/#spo-japan-guild","title":"SPO JAPAN GUILD\u30d7\u30fc\u30eb\u3078\u306e\u59d4\u4efb","text":"<p>\u79c1\u9054\u3092\u30b5\u30dd\u30fc\u30c8\u9802\u3051\u308b\u65b9\u306f\u5f53\u30d7\u30fc\u30eb\u3078\u59d4\u4efb\u9802\u3051\u307e\u3059\u3068\u5e78\u3044\u3067\u3059\u3002  </p> <p>Ticker\uff1aSJG</p> <p><pre><code>pool1sqpksswmxpgk6yxllyq9ad4qhtnt5qyz2pv5xmz6kkt5ujrgqwf\n</code></pre>   [SJG] SPO JAPAN GUILD POOLpool1sqpksswmxpgk6yxllyq9ad4qhtnt5qyz2pv5xmz6kkt5ujrgqwf</p> <ul> <li>\u56fa\u5b9a\u624b\u6570\u6599\uff1a340ADA</li> <li>\u5909\u52d5\u624b\u6570\u6599\uff1a20%\uff5e</li> </ul>"},{"location":"setup/donation-credit/#spo-japan-guild_1","title":"SPO JAPAN GUILD\u3078\u306e\u5bc4\u4ed8","text":"<p>ADA\u30a2\u30c9\u30ec\u30b9</p> <pre><code>addr1qxq6jar2wtktu3nlak78ghugtd8vcxcze33wsk2ehlwkavp2f4gnzre574n6an99yql25wcy09ygededc7e6f77jutvs0lgxef\n</code></pre> <p>ADA Handle</p> <p>ADA Handle\u5bfe\u5fdc\u30a6\u30a9\u30ec\u30c3\u30c8\u304b\u3089\u306a\u3089 \u300c$spojapanguild\u300d\u5b9b\u3066\u3067\u3082\u5bc4\u4ed8\u3044\u305f\u3060\u3051\u307e\u3059\uff01 <pre><code>$spojapanguild\n</code></pre> </p>"},{"location":"setup/final-checks/","title":"\u6700\u7d42\u30c1\u30a7\u30c3\u30af","text":""},{"location":"setup/final-checks/#1-tx","title":"1. Tx\u306e\u78ba\u8a8d","text":"<p>\u91cd\u8981\u306a\u78ba\u8a8d\u4e8b\u9805</p> <p>\u30d6\u30ed\u30c3\u30af\u3092\u751f\u6210\u3059\u308b\u306b\u306f\u3001\u300cTotal Tx\u300d\u304c\u5897\u52a0\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u30d7\u30fc\u30eb\u767b\u9332\u304b\u3089\u7d0412\u6642\u9593\u5f8c\u304b\u3089\u4ed6\u306e\u30ea\u30ec\u30fc\u304b\u3089\u306e\u63a5\u7d9a(Incoming)\u304c\u5897\u3048\u3066\u304d\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3001Tx\u304c\u5897\u52a0\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u4e07\u4e00\u3001\u5897\u52a0\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u306b\u306f\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u3084\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u306e\u5185\u5bb9\u3092\u518d\u78ba\u8a8d\u3057\u3066\u4e0b\u3055\u3044\u3002</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9/BP <pre><code>cd $NODE_HOME/scripts\n./gLiveView.sh\n</code></pre> <p>\u30d7\u30fc\u30eb\u767b\u9332\u304b\u3089\u7d0412\u6642\u9593~24\u6642\u9593\u5f8c\u306b\u300cTotal Tx\u300d\u304c\u5897\u52a0\u3057\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3059\u308b</p> <p></p>"},{"location":"setup/final-checks/#2-tracemempool","title":"2. Tracemempool\u7121\u52b9","text":"<p>\u91cd\u8981\u306a\u6700\u7d42\u8abf\u6574</p> <p>\u30ce\u30fc\u30c9\u7a3c\u50cd\u6642\u306e\u3001CPU/\u30e1\u30e2\u30ea\u6d88\u8cbb\u3092\u6291\u3048\u308b\u305f\u3081\u30ce\u30fc\u30c9\u8a2d\u5b9a\u3092\u8abf\u6574\u3057\u307e\u3059\u3002 \u3053\u306e\u8abf\u6574\u306f\u30d7\u30fc\u30eb\u904b\u55b6\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3092\u5de6\u53f3\u3057\u307e\u3059\u306e\u3067\u63a8\u5968\u8a2d\u5b9a\u3068\u306a\u308a\u307e\u3059\u3002</p> <ul> <li>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u6d41\u5165\u30ed\u30b0\u3092\u30c8\u30ec\u30fc\u30b9(\u8a18\u9332)\u3059\u308b\u3053\u3068\u3067\u3001CPU/\u30e1\u30e2\u30ea\u6d88\u8cbb\u3092\u5897\u52a0\u3055\u305b\u308b\u539f\u56e0\u3068\u306a\u308b\u3053\u3068\u304c\u308f\u304b\u3063\u3066\u3044\u308b\u305f\u3081\u3001\u3053\u306e\u6a5f\u80fd\u3092\u7121\u52b9\u306b\u3057\u307e\u3059\u3002  </li> <li>\u3053\u306e\u8a2d\u5b9a\u3092\u884c\u3046\u3068\u3001\u4e0a\u8a18\u3067\u78ba\u8a8d\u3057\u305f\u300cTotal TX\u300d\u300cPending Tx\u300d\u306f\u5897\u52a0\u3057\u306a\u304f\u306a\u308a\u307e\u3059\u304c\u3001\u4e0a\u8a18\u3067\u5897\u52a0\u304c\u78ba\u8a8d\u3067\u304d\u3066\u3044\u308c\u3070\u554f\u984c\u3054\u3056\u3044\u307e\u305b\u3093</li> </ul> \u30ea\u30ec\u30fc/BP <pre><code>sed -i $NODE_HOME/${NODE_CONFIG}-config.json \\\n    -e \"s/TraceMempool\\\": true/TraceMempool\\\": false/g\"\n</code></pre> <p>\u30ce\u30fc\u30c9\u3092\u518d\u8d77\u52d5\u3059\u308b <pre><code>sudo systemctl reload-or-restart cardano-node\n</code></pre></p> <p>\u30ce\u30fc\u30c9\u30ed\u30b0\u306b\u30a8\u30e9\u30fc\u304c\u51fa\u3066\u3044\u306a\u3044\u304b\u78ba\u8a8d\u3059\u308b <pre><code>journalctl --unit=cardano-node --follow\n</code></pre></p>"},{"location":"setup/final-checks/#3","title":"3. \u30d6\u30ed\u30c3\u30af\u751f\u6210\u53ef\u80fd\u72b6\u614b\u30c1\u30a7\u30c3\u30af","text":"<p>SPO JAPAN GUILD TOOL\u3092\u5c0e\u5165\u3059\u308b</p> <p>\u5c0e\u5165\u624b\u9806\u306f\u30d7\u30fc\u30eb\u69cb\u7bc9\u30de\u30cb\u30e5\u30a2\u30eb\u5185\u306eSJG\u30c4\u30fc\u30eb\u5c0e\u5165\u8a2d\u5b9a\u3092\u3054\u53c2\u7167\u304f\u3060\u3055\u3044</p> <p>TOOL\u3092\u5b9f\u884c\u3059\u308b</p> <pre><code>gtool\n</code></pre> <p>[2] \u30d6\u30ed\u30c3\u30af\u751f\u6210\u72b6\u614b\u30c1\u30a7\u30c3\u30af \u3092\u9078\u629e\u3059\u308b</p> <p>\uff01\u91cd\u8981\uff01</p> <p>\u30d7\u30fc\u30eb\u904b\u7528\u30de\u30cb\u30e5\u30a2\u30eb\u3092\u5fc5\u305a\u78ba\u8a8d\u3057\u3001\u30d7\u30fc\u30eb\u904b\u55b6\u306b\u3064\u3044\u3066\u5b66\u7fd2\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"setup/monitoring-setup/","title":"\u76e3\u8996\u30c4\u30fc\u30eb\u8a2d\u5b9a","text":"<p>\u30d7\u30ed\u30e1\u30c6\u30a6\u30b9\u306f\u30bf\u30fc\u30b2\u30c3\u30c8\u306b\u6307\u5b9a\u3057\u305f\u30e1\u30c8\u30ea\u30c3\u30afHTTP\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3057\u3001\u60c5\u5831\u3092\u53ce\u96c6\u3059\u308b\u76e3\u8996\u30c4\u30fc\u30eb\u3067\u3059\u3002\u30aa\u30d5\u30a3\u30b7\u30e3\u30eb\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u3053\u3061\u3089 \u30b0\u30e9\u30d5\u30a1\u30ca\u306f\u53ce\u96c6\u3055\u308c\u305f\u30c7\u30fc\u30bf\u3092\u8996\u899a\u7684\u306b\u8868\u793a\u3055\u305b\u308b\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u30c4\u30fc\u30eb\u3067\u3059\u3002</p>"},{"location":"setup/monitoring-setup/#1","title":"1. \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>\u6982\u8981</p> <p>\u300cprometheus\u300d\u304a\u3088\u3073\u300cprometheus node exporter\u300d\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002 \u3053\u306e\u624b\u9806\u3067\u306f\u3001\u30ea\u30ec\u30fc\u30ce\u30fc\u30c91\u3067prometheus\u3068Grafana\u672c\u4f53\u3092\u7a3c\u50cd\u3055\u305b\u3001\u5404\u30b5\u30fc\u30d0\u30fc\u306e\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\u65b9\u6cd5\u3067\u3059\u3002</p> <p>\u69cb\u6210\u56f3 <pre><code>    flowchart TB\n        bp[\u30ed\u30fc\u30ab\u30ebPC] -- 3000\u30dd\u30fc\u30c8\u958b\u653e --&gt; a1[Grafana] \n        a2[prometheus] -- \u30ea\u30ec\u30fc1IP\u6307\u5b9a\u3067&lt;br&gt;9100/12798\u30dd\u30fc\u30c8\u958b\u653e --&gt; ide2[BP] &amp; ide3[\u30ea\u30ec\u30fc2]\n        subgraph ide1[\u30ea\u30ec\u30fc1]\n            a1[Grafana] &lt;--&gt; a2[prometheus]\n        end\n        subgraph ide2[BP]\n            a3[node-exporter]\n        end\n        subgraph ide3[\u30ea\u30ec\u30fc2]\n            a4[node-exporter]\n        end</code></pre></p> <p>prometheus\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c91BP\u307e\u305f\u306f\u30ea\u30ec\u30fc2\u4ee5\u964d <pre><code>sudo apt install -y prometheus prometheus-node-exporter\n</code></pre> <pre><code>sudo apt install -y prometheus-node-exporter\n</code></pre> <p>grafana\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c91 <p><pre><code>sudo apt-get install -y apt-transport-https software-properties-common\n</code></pre> <pre><code>sudo wget -q -O /usr/share/keyrings/grafana.key https://apt.grafana.com/gpg.key\n</code></pre> <pre><code>echo \"deb [signed-by=/usr/share/keyrings/grafana.key] https://apt.grafana.com stable main\" &gt; grafana.list\nsudo mv grafana.list /etc/apt/sources.list.d/grafana.list\n</code></pre> <pre><code>sudo apt update &amp;&amp; sudo apt install -y grafana\n</code></pre></p> <p>\u30b5\u30fc\u30d3\u30b9\u6709\u52b9\u5316\u3068\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u3092\u8a2d\u5b9a\u3059\u308b\u3002</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c91BP\u307e\u305f\u306f\u30ea\u30ec\u30fc2\u4ee5\u964d Ubuntu22.04\u306e\u5834\u5408\u306f\uff11\u884c\u3065\u3064\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>sudo systemctl enable grafana-server.service\nsudo systemctl enable prometheus.service\nsudo systemctl enable prometheus-node-exporter.service\n</code></pre> <p>FW\u8a2d\u5b9a\u3067Grafana\u30dd\u30fc\u30c8\u3092\u958b\u653e\u3059\u308b <pre><code>sudo ufw allow 3000/tcp\nsudo ufw reload\n</code></pre></p> <pre><code>sudo systemctl enable prometheus-node-exporter.service\n</code></pre> <p>FW\u8a2d\u5b9a\u3067Prometheus\u30e1\u30c8\u30ea\u30af\u30b9\u30dd\u30fc\u30c8\u3092\u30ea\u30ec\u30fc1\u306eIP\u9650\u5b9a\u3067\u958b\u653e\u3059\u308b</p> Ubuntu22.04\u306e\u5834\u5408\u306f\uff11\u884c\u3065\u3064\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>sudo ufw allow from &lt;\u30ea\u30ec\u30fc\u30ce\u30fc\u30c91\u306eIP&gt; to any port 12798\nsudo ufw allow from &lt;\u30ea\u30ec\u30fc\u30ce\u30fc\u30c91\u306eIP&gt; to any port 9100\nsudo ufw reload\n</code></pre> <p>prometheus-node-exporter\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9/BP <p>prometheus-node-exporter\u306e\u30d1\u30b9\u3092\u53d6\u5f97\u3059\u308b <pre><code>cd $HOME/git\nnodeexPath=`which prometheus-node-exporter`\n</code></pre></p> <p>1.5.0\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b <pre><code>wget https://github.com/prometheus/node_exporter/releases/download/v1.5.0/node_exporter-1.5.0.linux-amd64.tar.gz\n</code></pre></p> <p>\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u30d5\u30a1\u30a4\u30eb\u3092\u89e3\u51cd\u3059\u308b <pre><code>tar xvf node_exporter-1.5.0.linux-amd64.tar.gz\n</code></pre></p> <p>\u30b5\u30fc\u30d3\u30b9\u3092\u505c\u6b62\u3059\u308b <pre><code>sudo systemctl stop prometheus-node-exporter.service\n</code></pre></p> <p>\u30d0\u30a4\u30ca\u30ea\u30d5\u30a1\u30a4\u30eb\u3092\u30b7\u30b9\u30c6\u30e0\u30d5\u30a9\u30eb\u30c0\u3078\u30b3\u30d4\u30fc\u3059\u308b <pre><code>cd node_exporter-1.5.0.linux-amd64\nsudo cp node_exporter $nodeexPath\n</code></pre></p> <p>\u30b5\u30fc\u30d3\u30b9\u3092\u30b9\u30bf\u30fc\u30c8\u3059\u308b <pre><code>sudo systemctl start prometheus-node-exporter.service\n</code></pre></p> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d</p> <pre><code>prometheus-node-exporter --version\n</code></pre> <p>\u623b\u308a\u50241\u884c\u76ee\u304c<code>node_exporter, version 1.5.0</code>\u306a\u3089OK</p>"},{"location":"setup/monitoring-setup/#2","title":"2. \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210","text":"<p>\u30ea\u30ec\u30fc\u30ce\u30fc\u30c91\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305fPrometheus\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u3053\u3053\u306b\u8a18\u8f09\u3055\u308c\u305f\u30b5\u30fc\u30d0\u30fc\u306e\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002</p> <p>\u6ce8\u610f</p> <p>targets:\u306e\u300cxxx.xxx.xxx\u300d\u306f\u3001BP\u306e\u30d1\u30d6\u30ea\u30c3\u30afIP(\u9759\u7684)\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u3066\u4e0b\u3055\u3044\u3002 targets:\u306e\u300cbb.xxx.xxx\u300d\u306f\u3001\u30ea\u30ec\u30fc2\u306e\u30d1\u30d6\u30ea\u30c3\u30afIP(\u9759\u7684)\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u3066\u4e0b\u3055\u3044\u3002</p> <pre><code>cat &gt; $HOME/prometheus.yml &lt;&lt; EOF\nglobal:\n  scrape_interval:     15s # By default, scrape targets every 15 seconds.\n\n  # Attach these labels to any time series or alerts when communicating with\n  # external systems (federation, remote storage, Alertmanager).\n  external_labels:\n    monitor: 'codelab-monitor'\n\n# A scrape configuration containing exactly one endpoint to scrape:\n# Here it's Prometheus itself.\nscrape_configs:\n  # The job name is added as a label job=&lt;job_name&gt; to any timeseries scraped from this config.\n  - job_name: 'prometheus'\n\n    static_configs:\n      - targets: ['localhost:9100']\n        labels:\n          alias: 'relaynode1'\n          type:  'system'\n      - targets: ['bb.xxx.xxx.xxx:9100']\n        labels:\n          alias: 'relaynode2'\n          type:  'system'\n      - targets: ['xx.xxx.xxx.xxx:9100']\n        labels:\n          alias: 'block-producing-node'\n          type:  'system'\n      - targets: ['xxx.xxx.xxx.xxx:12798']\n        labels:\n          alias: 'block-producing-node'\n          type:  'cardano-node'\n      - targets: ['localhost:12798']\n        labels:\n          alias: 'relaynode1'\n          type:  'cardano-node'\n      - targets: ['bb.xxx.xxx.xxx:12798']\n        labels:\n          alias: 'relaynode2'\n          type:  'cardano-node'\nEOF\n</code></pre> <p>prometheus.yml\u69cb\u6587\u30c1\u30a7\u30c3\u30af</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c91 <pre><code>sudo promtool check config $HOME/prometheus.yml\n</code></pre> <p>\u623b\u308a\u5024\u78ba\u8a8d</p> <p>\u69cb\u6587\u30a8\u30e9\u30fc\u306a\u3057\u306e\u5834\u5408 <pre><code>Checking /home/user/prometheus.yml\nSUCCESS: 0 rule files found\n</code></pre></p> <p>\u69cb\u6587\u30a8\u30e9\u30fc\u306e\u5834\u5408(\u4e00\u4f8b) <pre><code>Checking /home/user/prometheus.yml\nFAILED: parsing YAML file /home/user/prometheus.yml: yaml: line XX: did not find expected '-' indicator\n</code></pre></p> <p>\u203b/home/user/prometheus.yml\uff08user\u306f\u5404\u81ea\u3067\u8a2d\u5b9a\u3057\u305f\u30e6\u30fc\u30b6\u30fc\u540d\uff09</p> <p>\u69cb\u6587\u30a8\u30e9\u30fc\u3060\u3063\u305f\u5834\u5408\u306f\u3001$HOME/prometheus.yml\u3092\u958b\u3044\u3066\u4f59\u5206\u306a\u30b9\u30da\u30fc\u30b9\u3084\u8a18\u53f7\u306e\u6709\u7121\u306a\u3069\u3092\u78ba\u8a8d\u3057\u3001\u4fee\u6b63\u3057\u3066\u304f\u3060\u3055\u3044\u3002 <pre><code>sudo nano $HOME/prometheus.yml\n</code></pre></p> <p>\u4fee\u6b63\u3057\u305f\u3089\u3001Ctrl + O\u3067\u4fdd\u5b58\u3057\u3001Enter\u3002\u305d\u306e\u5f8cCtrl + X\u3067\u9589\u3058\u308b</p> <p>prometheus.yml\u3092\u79fb\u52d5\u3057\u307e\u3059   <pre><code>sudo mv $HOME/prometheus.yml /etc/prometheus/prometheus.yml\n</code></pre></p> <p>Grafana\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b   <pre><code>sudo grafana-cli plugins install yesoreyeram-infinity-datasource\n</code></pre></p> <p>\u30b5\u30fc\u30d3\u30b9\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c91 Ubuntu22.04\u306e\u5834\u5408\u306f\uff11\u884c\u3065\u3064\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>sudo systemctl restart grafana-server.service\nsudo systemctl restart prometheus.service\nsudo systemctl restart prometheus-node-exporter.service\n</code></pre> <p>\u30b5\u30fc\u30d3\u30b9\u304c\u6b63\u3057\u304f\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c91 <pre><code>sudo systemctl --no-pager status grafana-server.service prometheus.service prometheus-node-exporter.service\n</code></pre> <p>\u623b\u308a\u5024\u78ba\u8a8d</p> <ul> <li>grafana-server.service</li> <li>prometheus.service</li> <li>prometheus-node-exporter.service \u4e0a\u8a183\u3064\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u304c \u7dd1\u8272 <code>active (running)</code> \u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002</li> </ul>"},{"location":"setup/monitoring-setup/#2-1","title":"2-1. \u65e2\u5b58\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u66f4\u65b0\u3059\u308b\u5834\u5408","text":"<pre><code>sudo nano /etc/prometheus/prometheus.yml\n</code></pre> <p>\u4fee\u6b63\u3057\u305f\u3089\u3001Ctrl + O\u3067\u4fdd\u5b58\u3057\u3001Enter\u3002\u305d\u306e\u5f8cCtrl + X\u3067\u9589\u3058\u308b</p> <p>prometheus.yml\u69cb\u6587\u30c1\u30a7\u30c3\u30af</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c91 <pre><code>sudo promtool check config /etc/prometheus/prometheus.yml\n</code></pre> <p>\u623b\u308a\u5024\u78ba\u8a8d</p> <p>\u69cb\u6587\u30a8\u30e9\u30fc\u306a\u3057\u306e\u5834\u5408 <pre><code>Checking /etc/prometheus/prometheus.yml\nSUCCESS: 0 rule files found\n</code></pre></p> <p>\u69cb\u6587\u30a8\u30e9\u30fc\u306e\u5834\u5408(\u4e00\u4f8b) <pre><code>Checking /etc/prometheus/prometheus.yml\nFAILED: parsing YAML file /etc/prometheus/prometheus.yml: yaml: line XX: did not find expected '-' indicator\n</code></pre> /etc/prometheus/prometheus.yml\u3092\u958b\u3044\u3066\u4f59\u5206\u306a\u30b9\u30da\u30fc\u30b9\u3084\u8a18\u53f7\u306e\u6709\u7121\u306a\u3069\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u30b5\u30fc\u30d3\u30b9\u3092\u518d\u8d77\u52d5\u3059\u308b <pre><code>sudo systemctl restart prometheus.service\n</code></pre></p>"},{"location":"setup/monitoring-setup/#3-grafana","title":"3. Grafana\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306e\u8a2d\u5b9a","text":"<ol> <li>\u30ed\u30fc\u30ab\u30ebPC\u306e\u30d6\u30e9\u30a6\u30b6\u304b\u3089 http://\u30ea\u30ec\u30fc\u30ce\u30fc\u30c91IP\u30a2\u30c9\u30ec\u30b9:3000 \u3092\u958b\u304d\u307e\u3059\u3002</li> <li>\u30ed\u30b0\u30a4\u30f3\u540d\u30fbPW\u306f admin / admin</li> <li>\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5909\u66f4\u3057\u307e\u3059\u3002</li> <li>\u5de6\u4e0a\u306e\u4e09\u672c\u7dda\u30e1\u30cb\u30e5\u30fc\u3092\u958b\u304d\u300cConnections\u300d\u2192\u300cData sources\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</li> <li>\u300cAdd new data source\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u300cPrometheus\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002</li> <li>\u540d\u524d\u306f <code>Prometheus</code>\u3068\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>URL \u3092 <code>http://localhost:9090</code>\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002</li> <li>Save &amp; Test\u3092\u30af\u30ea\u30c3\u30af\u3057<code>Successfully queried the Prometheus API.</code>\u3068\u8868\u793a\u3055\u308c\u305f\u3089\u518d\u5ea6<code>Data sources</code>\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</li> <li>\u300cAdd new data source\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u4e0b\u90e8\u306b\u3042\u308b\u300cInfinity\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</li> <li>\u8a2d\u5b9a\u5185\u5bb9\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u306a\u304f\u3001Save &amp; Test\u3092\u30af\u30ea\u30c3\u30af\u3057<code>Settings saved</code>\u3068\u8868\u793a\u3055\u308c\u305f\u3089OK\u3002</li> <li>BP\u30b5\u30fc\u30d0\u30fc\u3067\u30d1\u30cd\u30eb\u7528JSON\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002</li> </ol> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <p><pre><code>curl -s -o $NODE_HOME/SJG_Grafana_Dashboard.json https://raw.githubusercontent.com/akyo3/Extends-SJG-Knowledge/main/SJG_Grafana_Dashboard.json\n</code></pre>   \u4e00\u90e8\u30d5\u30a1\u30a4\u30eb\u5185\u5bb9\u3092\u66f8\u304d\u63db\u3048\u308b   <pre><code>sed -i $NODE_HOME/SJG_Grafana_Dashboard.json \\\n    -e \"s/bech32_id_of_your_pool/$(cat $NODE_HOME/pool.id-bech32)/g\"\n</code></pre> 12. BP\u306e<code>cnode</code>\u30d5\u30a9\u30eb\u30c0\u306b\u3042\u308b<code>SJG_Grafana_Dashboard.json</code>\u3092\u30ed\u30fc\u30ab\u30ebPC\u306b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059 13. \u5de6\u30e1\u30cb\u30e5\u30fc\u306e\u300cDashboards\u300d\u2192\u300cNew\u300d\u2192\u300c<code>+import</code>\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002 14. \u300cUpload JSON file\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u300110\u3067\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f<code>SJG_Grafana_Dashboard.json</code>\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002 15. \u300cPrometheus\u300d\u3068\u300cInfinity\u300d\u306e\u30d7\u30eb\u30c0\u30a6\u30f3\u3092\u9078\u629e\u3057<code>Import</code>\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002  </p> <p></p> <p>\ud83c\udf8a\u304a\u3081\u3067\u3068\u3046\u3054\u3056\u3044\u307e\u3059\ud83c\udf8a</p> <p>\u3053\u308c\u3067\u57fa\u672c\u7684\u306a\u76e3\u8996\u8a2d\u5b9a\u306f\u5b8c\u4e86\u3067\u3059\u3002</p> <p>\u4ee5\u4e0b\u306e\u8ffd\u52a0\u8a2d\u5b9a\u3082\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <ul> <li>Grafana\u30a2\u30e9\u30fc\u30c8\u8a2d\u5b9a</li> <li>Grafana\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u5f37\u5316</li> </ul>"},{"location":"setup/node-setup/","title":"\u30ce\u30fc\u30c9\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7","text":"<p>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30d0\u30fc\u30b8\u30e7\u30f3</p> Node CLI GHC Cabal CNCLI 10.5.3 10.11.0.0 9.6.7 3.12.1.0 6.7.0 <p>\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u6642\u306e\u6ce8\u610f\u70b9</p> <ul> <li>Ubuntu\u30b3\u30de\u30f3\u30c9\u521d\u5fc3\u8005\u306e\u65b9\u306f\u3001\u30b3\u30fc\u30c9\u30dc\u30c3\u30af\u30b9\u306b\u8907\u6570\u884c\u306e\u30b3\u30de\u30f3\u30c9\u304c\u3042\u308b\u5834\u5408\u3067\u3082\u3001\u30b3\u30de\u30f3\u30c9\u30921\u884c\u3065\u3064\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u305f\u3060\u3057 <code>cat &gt; xxx &lt;&lt; EOF</code>\u306e\u30dc\u30c3\u30af\u30b9\u306b\u3064\u3044\u3066\u306f\u30b3\u30fc\u30c9\u30dc\u30c3\u30af\u30b9\u306e\u30b3\u30d4\u30fc\u30dc\u30bf\u30f3\u3092\u4f7f\u7528\u3057\u3066\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u306b\u8cbc\u308a\u4ed8\u3051\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>\u8907\u6570\u884c\u306e\u30b3\u30fc\u30c9\u3092\u30b3\u30fc\u30c9\u30dc\u30c3\u30af\u30b9\u306e\u30b3\u30d4\u30fc\u30dc\u30bf\u30f3\u3092\u4f7f\u7528\u3057\u3066\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u306b\u8cbc\u308a\u4ed8\u3051\u308b\u5834\u5408\u3001\u9014\u4e2d\u306e\u30b3\u30de\u30f3\u30c9\u3067\u30a8\u30e9\u30fc\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u306e\u3067\u898b\u843d\u3068\u3055\u306a\u3044\u3088\u3046\u3054\u6ce8\u610f\u304f\u3060\u3055\u3044\u3002\u307e\u305f\u3001\u6700\u5f8c\u306e\u884c\u304c\u81ea\u52d5\u5b9f\u884c\u3055\u308c\u306a\u3044\u305f\u3081\u78ba\u8a8d\u306e\u4e0aEnter\u3092\u62bc\u3057\u3066\u30b3\u30fc\u30c9\u3092\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>\u8907\u6570\u884c\u306esudo\u30b3\u30de\u30f3\u30c9\u3092\u4e00\u5ea6\u306b\u8cbc\u308a\u4ed8\u3051\u3066sudo\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u6c42\u3081\u3089\u308c\u305f\u5834\u5408\u30011\u884c\u76ee\u306e\u30b3\u30de\u30f3\u30c9\u3057\u304b\u5b9f\u884c\u3055\u308c\u307e\u305b\u3093\u306e\u3067\u6b8b\u308a\u306e\u30b3\u30de\u30f3\u30c9\u3092\u518d\u5ea6\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>Ubuntu22.04\u306e\u5834\u5408\u3001\u8907\u6570\u884c\u306esudo\u30b3\u30de\u30f3\u30c9\u30921\u5ea6\u306b\u8cbc\u308a\u4ed8\u3051\u308b\u30681\u884c\u76ee\u3057\u304b\u5b9f\u884c\u3055\u308c\u307e\u305b\u3093\u306e\u3067\u3001\u5fc5\u305a1\u884c\u305a\u3064\u8cbc\u308a\u4ed8\u3051\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> </ul>"},{"location":"setup/node-setup/#1","title":"1. \u4f9d\u5b58\u95a2\u4fc2\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>\u30bf\u30fc\u30df\u30ca\u30eb\u3092\u8d77\u52d5\u3057\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5165\u529b\u3057\u307e\u3057\u3087\u3046\uff01</p> <p>\u307e\u305a\u306f\u3058\u3081\u306b\u3001\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u66f4\u65b0\u3057Ubuntu\u3092\u6700\u65b0\u306e\u72b6\u614b\u306b\u4fdd\u3061\u307e\u3059\u3002</p> <p><pre><code>sudo apt update -y &amp;&amp; sudo apt upgrade -y\n</code></pre> <pre><code>sudo apt install git jq bc automake tmux rsync htop curl build-essential pkg-config libffi-dev libgmp-dev libssl-dev libtinfo-dev libsystemd-dev zlib1g-dev make g++ wget libncursesw5 libtool autoconf liblmdb-dev -y\n</code></pre></p> <p>\u65b0\u3057\u3044TMUX\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u958b\u304f</p> <pre><code>tmux new -s build\n</code></pre>"},{"location":"setup/node-setup/#1-1-libsodium","title":"1-1. Libsodium\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<pre><code>mkdir $HOME/git\ncd $HOME/git\ngit clone https://github.com/IntersectMBO/libsodium\ncd libsodium\ngit checkout dbb48cc\n./autogen.sh\nsleep 1\n./configure\nmake\nmake check\n</code></pre> <p>make\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u5f8c\u534a\u306b\u51fa\u73fe\u3059\u308b <code>warning</code> \u306f\u7121\u8996\u3057\u3066\u5927\u4e08\u592b\u3067\u3059\u3002</p> <p>\u623b\u308a\u5024\u78ba\u8a8d</p> <pre><code>Testsuite summary for libsodium 1.0.18\n============================================================================\n# TOTAL: 82\n# PASS:  82\n# SKIP:  0\n# XFAIL: 0\n# FAIL:  0\n# XPASS: 0\n# ERROR: 0\n============================================================================\n</code></pre> <p>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30b3\u30de\u30f3\u30c9\u3092\u5fc5\u305a\u5b9f\u884c\u3059\u308b <pre><code>sudo make install\n</code></pre></p>"},{"location":"setup/node-setup/#1-2-secp256k1","title":"1-2. Secp256k1\u30e9\u30a4\u30d6\u30e9\u30ea\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<pre><code>cd $HOME/git\ngit clone https://github.com/bitcoin-core/secp256k1.git\n</code></pre> <pre><code>cd secp256k1/\ngit checkout acf5c55\n./autogen.sh\nsleep 1\n./configure --prefix=/usr --enable-module-schnorrsig --enable-experimental\nmake\nmake check\n</code></pre> <p>\u623b\u308a\u5024\u78ba\u8a8d</p> <pre><code>Testsuite summary for libsecp256k1 0.3.2\n============================================================================\n# TOTAL: 3\n# PASS:  3\n# SKIP:  0\n# XFAIL: 0\n# FAIL:  0\n# XPASS: 0\n# ERROR: 0\n============================================================================\n</code></pre> <p>PASS:3\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b</p> <p>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30b3\u30de\u30f3\u30c9\u3092\u5fc5\u305a\u5b9f\u884c\u3059\u308b <pre><code>sudo make install\n</code></pre></p>"},{"location":"setup/node-setup/#1-3-blst","title":"1-3. blst\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>1.blst\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9 <pre><code>cd $HOME/git\ngit clone https://github.com/supranational/blst\ncd blst\ngit checkout v0.3.14\n./build.sh\n</code></pre></p> <p>2.\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210</p> \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; libblst.pc &lt;&lt; EOF\nprefix=/usr/local\nexec_prefix=\\${prefix}\nlibdir=\\${exec_prefix}/lib\nincludedir=\\${prefix}/include\n\nName: libblst\nDescription: Multilingual BLS12-381 signature library\nURL: https://github.com/supranational/blst\nVersion: 0.3.14\nCflags: -I\\${includedir}\nLibs: -L\\${libdir} -lblst\nEOF\n</code></pre> <p>3.\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u30b3\u30d4\u30fc</p> <p><pre><code>sudo cp libblst.pc /usr/local/lib/pkgconfig/\n</code></pre> <pre><code>sudo cp bindings/blst_aux.h bindings/blst.h bindings/blst.hpp /usr/local/include/\n</code></pre> <pre><code>sudo cp libblst.a /usr/local/lib\n</code></pre> <pre><code>sudo chmod u=rw,go=r /usr/local/{lib/{libblst.a,pkgconfig/libblst.pc},include/{blst.{h,hpp},blst_aux.h}}\n</code></pre></p> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>cat /usr/local/lib/pkgconfig/libblst.pc | grep Version\n</code></pre></p> <p>Version 0.3.14</p>"},{"location":"setup/node-setup/#1-4-ghcup","title":"1-4. GHCUP\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5909\u6570\u8a2d\u5b9a <pre><code>cd $HOME\nexport BOOTSTRAP_HASKELL_NONINTERACTIVE=1\nexport BOOTSTRAP_HASKELL_NO_UPGRADE=1\nexport BOOTSTRAP_HASKELL_INSTALL_NO_STACK=yes\nexport BOOTSTRAP_HASKELL_ADJUST_BASHRC=1\nunset BOOTSTRAP_HASKELL_INSTALL_HLS\n</code></pre></p> <p>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb <pre><code>curl --proto '=https' --tlsv1.2 -sSf https://get-ghcup.haskell.org | bash\n</code></pre></p> <p>Cabal/GHC\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u3064\u3044\u3066</p> <p>\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u306fcardano-node/cli\u306e\u30d3\u30eb\u30c9\u306b\u5931\u6557\u3059\u308b\u305f\u3081\u5fc5\u305a\u4ee5\u4e0b\u3067\u6307\u5b9a\u3055\u308c\u305f\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>cabal\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb <pre><code>source ~/.bashrc\nghcup upgrade\nghcup install cabal 3.12.1.0\nghcup set cabal 3.12.1.0\n</code></pre></p> <p>GHC\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb</p> <pre><code>ghcup install ghc 9.6.7\nghcup set ghc 9.6.7\n</code></pre> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d</p> <pre><code>cabal update\ncabal --version\nghc --version\n</code></pre> <p>\u30c1\u30a7\u30c3\u30af</p> <p>Cabal\u30d0\u30fc\u30b8\u30e7\u30f3\uff1a\u300c3.12.1.0\u300d GHC\u30d0\u30fc\u30b8\u30e7\u30f3\uff1a\u300c9.6.7\u300d\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"setup/node-setup/#2","title":"2. \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304b\u3089\u30d3\u30eb\u30c9","text":"<p>\u78ba\u8a8d</p> <p>IOG\u306f\u73fe\u5728ARM\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u7528\u306e\u30d0\u30a4\u30ca\u30ea\u30d5\u30a1\u30a4\u30eb\u3092\u63d0\u4f9b\u3057\u3066\u3044\u307e\u305b\u3093\u3002Raspberry Pi\u3092\u4f7f\u7528\u3057\u3066\u30d7\u30fc\u30eb\u3092\u69cb\u7bc9\u3059\u308b\u5834\u5408\u306f\u3001ARM\u7528\u30b3\u30f3\u30d1\u30a4\u30e9\u3067\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> <p>Git\u304b\u3089\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3001\u6700\u65b0\u306e\u30bf\u30b0\u306b\u5207\u308a\u66ff\u3048\u307e\u3059\u3002</p> <pre><code>cd $HOME/git\ngit clone https://github.com/IntersectMBO/cardano-node.git\ncd cardano-node\ngit fetch --all --recurse-submodules --tags\ngit checkout tags/10.5.3\n</code></pre> <p>Cabal\u306e\u30d3\u30eb\u30c9\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u69cb\u6210\u3057\u307e\u3059\u3002</p> <pre><code>cabal clean\ncabal update\ncabal configure --with-compiler=ghc-9.6.7\n</code></pre> <p>\u30ab\u30eb\u30c0\u30ce\u30ce\u30fc\u30c9\u3092\u30d3\u30eb\u30c9\u3057\u307e\u3059\u3002</p> <pre><code>cabal build all cardano-cli\n</code></pre> <p>\u30d2\u30f3\u30c8</p> <p>\u30b5\u30fc\u30d0\u30b9\u30da\u30c3\u30af\u306b\u3088\u3063\u3066\u3001\u30d3\u30eb\u30c9\u5b8c\u4e86\u307e\u3067\u306b\u6570\u5206\u304b\u3089\u6570\u6642\u9593\u304b\u304b\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002</p> <p>cardano-cli\u30d5\u30a1\u30a4\u30eb\u3068 cardano-node\u30d5\u30a1\u30a4\u30eb\u3092bin\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002</p> <pre><code>cd $HOME/git/cardano-node\nsudo cp $(./scripts/bin-path.sh cardano-cli) /usr/local/bin/cardano-cli\n</code></pre> <pre><code>cd $HOME/git/cardano-node\nsudo cp $(./scripts/bin-path.sh cardano-node) /usr/local/bin/cardano-node\n</code></pre> <p>cardano-cli \u3068 cardano-node\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u6700\u65b0Git\u30bf\u30b0\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <pre><code>cardano-cli version\ncardano-node version\n</code></pre> <p>\u4ee5\u4e0b\u306e\u623b\u308a\u5024\u3092\u78ba\u8a8d\u3059\u308b  </p> <p>cardano-cli 10.11.0.0 - linux-x86_64 - ghc-9.6 6c034ec038d8d276a3595e10e2d38643f09bd1f2 </p> <p>cardano-node 10.5.3 - linux-x86_64 - ghc-9.6 6c034ec038d8d276a3595e10e2d38643f09bd1f2 </p> <p>TMUX\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u9589\u3058\u308b</p> <pre><code>exit\n</code></pre> <p>\u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\u3057\u30d1\u30b9\u3092\u901a\u3057\u307e\u3059\u3002 \u30ce\u30fc\u30c9\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306f $NODE_HOME(\u4f8b\uff1a/home/user/cnode) \u306b\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002</p> <pre><code>echo PATH=\"$HOME/.local/bin:$PATH\" &gt;&gt; $HOME/.bashrc\necho export LD_LIBRARY_PATH=\"/usr/local/lib:$LD_LIBRARY_PATH\" &gt;&gt; $HOME/.bashrc\necho export PKG_CONFIG_PATH=\"/usr/local/lib/pkgconfig:$PKG_CONFIG_PATH\" &gt;&gt; $HOME/.bashrc\necho export NODE_HOME=$HOME/cnode &gt;&gt; $HOME/.bashrc\n</code></pre> <p>\u74b0\u5883\u5909\u6570\u306b\u63a5\u7d9a\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u6307\u5b9a\u3059\u308b <pre><code>echo export NODE_CONFIG=mainnet &gt;&gt; $HOME/.bashrc\necho export NODE_NETWORK='\"--mainnet\"' &gt;&gt; $HOME/.bashrc\necho export CARDANO_NODE_NETWORK_ID=mainnet &gt;&gt; $HOME/.bashrc\n</code></pre></p> \u30c6\u30b9\u30c8\u30cd\u30c3\u30c8\u306e\u5834\u5408\u306f\u3053\u3061\u3089 Preview(\u30c6\u30b9\u30c8\u30cd\u30c3\u30c8)PreProd(\u30c6\u30b9\u30c8\u30cd\u30c3\u30c8) <pre><code>echo export NODE_CONFIG=preview &gt;&gt; $HOME/.bashrc\necho export NODE_NETWORK='\"--testnet-magic 2\"' &gt;&gt; $HOME/.bashrc\necho export CARDANO_NODE_NETWORK_ID=2 &gt;&gt; $HOME/.bashrc\n</code></pre> <pre><code>echo export NODE_CONFIG=preprod &gt;&gt; $HOME/.bashrc\necho export NODE_NETWORK='\"--testnet-magic 1\"' &gt;&gt; $HOME/.bashrc\necho export CARDANO_NODE_NETWORK_ID=1 &gt;&gt; $HOME/.bashrc\n</code></pre> <p>bashrc\u518d\u8aad\u307f\u8fbc\u307f <pre><code>source $HOME/.bashrc\n</code></pre></p>"},{"location":"setup/node-setup/#3","title":"3. \u30ce\u30fc\u30c9\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u4fee\u6b63","text":"<p>\u30ce\u30fc\u30c9\u69cb\u6210\u306b\u5fc5\u8981\u306a\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002 config.json\u3001genesis.json\u3001topology.json</p> <pre><code>mkdir $NODE_HOME\ncd $NODE_HOME\nwget -q https://spojapanguild.net/node_config/10.5.3/${NODE_CONFIG}-byron-genesis.json -O ${NODE_CONFIG}-byron-genesis.json\nwget -q https://spojapanguild.net/node_config/10.5.3/${NODE_CONFIG}-topology.json -O ${NODE_CONFIG}-topology.json\nwget -q https://spojapanguild.net/node_config/10.5.3/${NODE_CONFIG}-shelley-genesis.json -O ${NODE_CONFIG}-shelley-genesis.json\nwget -q https://spojapanguild.net/node_config/10.5.3/${NODE_CONFIG}-alonzo-genesis.json -O ${NODE_CONFIG}-alonzo-genesis.json\nwget -q https://spojapanguild.net/node_config/10.5.3/${NODE_CONFIG}-conway-genesis.json -O ${NODE_CONFIG}-conway-genesis.json\nwget -q https://spojapanguild.net/node_config/10.5.3/${NODE_CONFIG}-checkpoints.json -O ${NODE_CONFIG}-checkpoints.json\n</code></pre> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u3067\u5b9f\u65bd\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9\u3067\u5b9f\u65bd <pre><code>wget --no-use-server-timestamps -q https://spojapanguild.net/node_config/10.5.3/${NODE_CONFIG}-config.json -O ${NODE_CONFIG}-config.json\n</code></pre> <pre><code>wget --no-use-server-timestamps -q https://spojapanguild.net/node_config/10.5.3/${NODE_CONFIG}-config-bp.json -O ${NODE_CONFIG}-config.json\n</code></pre> <p>\u74b0\u5883\u5909\u6570\u3092\u8ffd\u52a0\u3057\u3001.bashrc\u30d5\u30a1\u30a4\u30eb\u3092\u66f4\u65b0\u3057\u307e\u3059\u3002</p> <pre><code>echo export CARDANO_NODE_SOCKET_PATH=\"$NODE_HOME/db/socket\" &gt;&gt; $HOME/.bashrc\nsource $HOME/.bashrc\n</code></pre>"},{"location":"setup/node-setup/#4","title":"4. \u30ce\u30fc\u30c9\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u4f5c\u6210","text":"<p>\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u306b\u306f\u3001\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3001\u30dd\u30fc\u30c8\u756a\u53f7\u3001DB\u30d1\u30b9\u3001\u69cb\u6210\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u3001\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u306a\u3069\u3001\u30ab\u30eb\u30c0\u30ce\u30ce\u30fc\u30c9\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306b\u5fc5\u8981\u306a\u5909\u6570\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <p>\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u3067\u4f7f\u7528\u3059\u308b\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u6307\u5b9a\u3057\u3066\u30bf\u30fc\u30df\u30ca\u30eb\u3067\u5b9f\u884c\u3059\u308b <pre><code>PORT=6000\n</code></pre></p> <p>\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/startRelayNode1.sh &lt;&lt; EOF \n#!/bin/bash\nDIRECTORY=$NODE_HOME\nPORT=${PORT}\nHOSTADDR=0.0.0.0\nTOPOLOGY=\\${DIRECTORY}/${NODE_CONFIG}-topology.json\nDB_PATH=\\${DIRECTORY}/db\nSOCKET_PATH=\\${DIRECTORY}/db/socket\nCONFIG=\\${DIRECTORY}/${NODE_CONFIG}-config.json\n/usr/local/bin/cardano-node +RTS -N --disable-delayed-os-memory-return -I0.1 -Iw300 -A16m -F1.5 -H2500M -RTS run --topology \\${TOPOLOGY} --database-path \\${DB_PATH} --socket-path \\${SOCKET_PATH} --host-addr \\${HOSTADDR} --port \\${PORT} --config \\${CONFIG}\nEOF\n</code></pre></p> <p>\u6ce8\u610f</p> <ul> <li>BP\u30ce\u30fc\u30c9\u30dd\u30fc\u30c8\u306f\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3092\u9ad8\u3081\u308b\u305f\u3081\u306b\u300149513\uff5e65535\u307e\u3067\u306e\u4efb\u610f\u756a\u53f7\u3092\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u3053\u3053\u3067\u8a2d\u5b9a\u3059\u308b\u756a\u53f7\u306f1-3\u3067\u8a2d\u5b9a\u3057\u305fSSH\u30dd\u30fc\u30c8\u756a\u53f7\u3068\u306f\u5225\u306e\u756a\u53f7\u3092\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044.</li> </ul> <p>BP\u30ce\u30fc\u30c9\u3067\u4f7f\u7528\u3059\u308b\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u6307\u5b9a\u3057\u3066\u30bf\u30fc\u30df\u30ca\u30eb\u3067\u5b9f\u884c\u3059\u308b <pre><code>PORT=xxxxx\n</code></pre></p> <p>\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/startBlockProducingNode.sh &lt;&lt; EOF \n#!/bin/bash\nDIRECTORY=$NODE_HOME\nPORT=${PORT}\nHOSTADDR=0.0.0.0\nTOPOLOGY=\\${DIRECTORY}/${NODE_CONFIG}-topology.json\nDB_PATH=\\${DIRECTORY}/db\nSOCKET_PATH=\\${DIRECTORY}/db/socket\nCONFIG=\\${DIRECTORY}/${NODE_CONFIG}-config.json\n/usr/local/bin/cardano-node +RTS -N --disable-delayed-os-memory-return -I0.1 -Iw300 -A16m -F1.5 -H2500M -RTS run --topology \\${TOPOLOGY} --database-path \\${DB_PATH} --socket-path \\${SOCKET_PATH} --host-addr \\${HOSTADDR} --port \\${PORT} --config \\${CONFIG}\nEOF\n</code></pre></p>"},{"location":"setup/node-setup/#5","title":"5. \u30ce\u30fc\u30c9\u8d77\u52d5","text":"<p>\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u306b\u5b9f\u884c\u6a29\u9650\u3092\u4ed8\u4e0e\u3057\u3001\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u306e\u540c\u671f\u3092\u958b\u59cb\u3057\u307e\u3059\u3002 </p> <p>\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u304b\u3089\u5b9f\u65bd\u3057\u307e\u3059\u3002</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\nchmod +x startRelayNode1.sh\n./startRelayNode1.sh\n</code></pre> <pre><code>cd $NODE_HOME\nchmod +x startBlockProducingNode.sh\n./startBlockProducingNode.sh\n</code></pre> <p>\u30ed\u30b0\u5185\u306b<code>Chain extended, new tip: xxxx</code>\u306e\u30ed\u30b0\u304c\u6d41\u308c\u3066\u3044\u305f\u3089\u6b63\u5e38\u3067\u3059\u3002</p> <p>\u4e00\u65e6\u30ce\u30fc\u30c9\u3092\u505c\u6b62\u3057\u307e\u3059\u3002 <pre><code>Ctrl+C\n</code></pre></p>"},{"location":"setup/node-setup/#6-systemd","title":"6. \u81ea\u52d5\u8d77\u52d5\u306e\u8a2d\u5b9a(systemd)","text":"<p>\u5148\u7a0b\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3060\u3051\u3067\u306f\u3001\u30bf\u30fc\u30df\u30ca\u30eb\u753b\u9762\u3092\u9589\u3058\u308b\u3068\u30ce\u30fc\u30c9\u304c\u7d42\u4e86\u3057\u3066\u3057\u307e\u3046\u306e\u3067\u3001\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u30b5\u30fc\u30d3\u30b9\u3068\u3057\u3066\u767b\u9332\u3057\u3001\u81ea\u52d5\u8d77\u52d5\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3057\u3087\u3046</p> <p>\u30ce\u30fc\u30c9\u8d77\u52d5\u306bsystemd\u3092\u4f7f\u7528\u3059\u308b\u30e1\u30ea\u30c3\u30c8</p> <ol> <li>\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u3084\u505c\u96fb\u306a\u3069\u3001\u81ea\u52d5\u7684\u306b\u30b5\u30fc\u30d0\u30fc\u304c\u518d\u8d77\u52d5\u3057\u305f\u3068\u304d\u30ce\u30fc\u30c9\u3092\u81ea\u52d5\u8d77\u52d5\u3057\u307e\u3059\u3002</li> <li>\u30af\u30e9\u30c3\u30b7\u30e5\u3057\u305f\u30ce\u30fc\u30c9\u30d7\u30ed\u30bb\u30b9\u3092\u81ea\u52d5\u7684\u306b\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002</li> <li>\u30ce\u30fc\u30c9\u306e\u7a3c\u50cd\u6642\u9593\u3068\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3092\u5411\u4e0a\u3055\u305b\u307e\u3059\u3002</li> </ol> <p>\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3092\u5b9f\u884c\u3057\u3066\u3001\u30e6\u30cb\u30c3\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/cardano-node.service &lt;&lt; EOF \n# The Cardano node service (part of systemd)\n# file: /etc/systemd/system/cardano-node.service \n\n[Unit]\nDescription     = Cardano node service\nWants           = network-online.target\nAfter           = network-online.target \n\n[Service]\nUser            = ${USER}\nType            = simple\nWorkingDirectory= ${NODE_HOME}\nExecStart       = /bin/bash -c '${NODE_HOME}/startRelayNode1.sh'\nKillSignal=SIGINT\nRestartKillSignal=SIGINT\nTimeoutStopSec=300\nLimitNOFILE=32768\nRestart=always\nRestartSec=5\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=cardano-node\n\n[Install]\nWantedBy    = multi-user.target\nEOF\n</code></pre> \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/cardano-node.service &lt;&lt; EOF \n# The Cardano node service (part of systemd)\n# file: /etc/systemd/system/cardano-node.service \n\n[Unit]\nDescription     = Cardano node service\nWants           = network-online.target\nAfter           = network-online.target \n\n[Service]\nUser            = ${USER}\nType            = simple\nWorkingDirectory= ${NODE_HOME}\nExecStart       = /bin/bash -c '${NODE_HOME}/startBlockProducingNode.sh'\nKillSignal=SIGINT\nRestartKillSignal=SIGINT\nTimeoutStopSec=300\nLimitNOFILE=32768\nRestart=always\nRestartSec=5\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=cardano-node\n\n[Install]\nWantedBy    = multi-user.target\nEOF\n</code></pre> <p><code>/etc/systemd/system</code>\u306b\u30e6\u30cb\u30c3\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30d4\u30fc\u3057\u3066\u3001\u6a29\u9650\u3092\u4ed8\u4e0e\u3057\u307e\u3059\u3002</p> <pre><code>sudo cp $NODE_HOME/cardano-node.service /etc/systemd/system/cardano-node.service\n</code></pre> <pre><code>sudo chmod 644 /etc/systemd/system/cardano-node.service\n</code></pre> <p>\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u3001OS\u8d77\u52d5\u6642\u306b\u30b5\u30fc\u30d3\u30b9\u306e\u81ea\u52d5\u8d77\u52d5\u3092\u6709\u52b9\u306b\u3057\u307e\u3059\u3002</p> <p><pre><code>sudo systemctl daemon-reload\n</code></pre> <pre><code>sudo systemctl enable cardano-node\n</code></pre> <pre><code>sudo systemctl start cardano-node\n</code></pre> \u30b7\u30b9\u30c6\u30e0\u8d77\u52d5\u5f8c\u306b\u3001\u30ed\u30b0\u30e2\u30cb\u30bf\u30fc\u3092\u8868\u793a\u3057\u307e\u3059</p> <pre><code>journalctl -u cardano-node -f\n</code></pre> <p>\u30b3\u30de\u30f3\u30c9\u5165\u529b\u306b\u623b\u308b\u5834\u5408\u306f\u300cCtrl\uff0bC\u300d\uff08\u3053\u306e\u5834\u5408\u30ce\u30fc\u30c9\u306f\u7d42\u4e86\u3057\u307e\u305b\u3093\uff09</p>"},{"location":"setup/node-setup/#6-1","title":"6-1. \u4fbf\u5229\u306a\u30a8\u30a4\u30ea\u30a2\u30b9\u8a2d\u5b9a","text":"<p>\u30a8\u30a4\u30ea\u30a2\u30b9\u8a2d\u5b9a</p> <p>\u30b9\u30af\u30ea\u30d7\u30c8\u3078\u306e\u30d1\u30b9\u3092\u901a\u3057\u3001\u4efb\u610f\u306e\u5358\u8a9e\u3067\u8d77\u52d5\u51fa\u6765\u308b\u3088\u3046\u306b\u3059\u308b\u3002 <pre><code>echo alias cnode='\"journalctl -u cardano-node -f\"' &gt;&gt; $HOME/.bashrc\necho alias cnstart='\"sudo systemctl start cardano-node\"' &gt;&gt; $HOME/.bashrc\necho alias cnrestart='\"sudo systemctl reload-or-restart cardano-node\"' &gt;&gt; $HOME/.bashrc\necho alias cnstop='\"sudo systemctl stop cardano-node\"' &gt;&gt; $HOME/.bashrc\necho alias cnreload='\"pkill -HUP cardano-node\"' &gt;&gt; $HOME/.bashrc\nsource $HOME/.bashrc\n</code></pre></p> <p>\u5358\u8a9e\u3092\u5165\u529b\u3059\u308b\u3060\u3051\u3067\u3001\u8d77\u52d5\u72b6\u614b(\u30ed\u30b0)\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002 <pre><code>cnode \u30fb\u30fb\u30fb\u30ed\u30b0\u8868\u793a\ncnstart \u30fb\u30fb\u30fb\u30ce\u30fc\u30c9\u8d77\u52d5\ncnrestart \u30fb\u30fb\u30fb\u30ce\u30fc\u30c9\u518d\u8d77\u52d5\ncnreload \u30fb\u30fb\u30fb\u8a2d\u5b9a\u518d\u8aad\u307f\u8fbc\u307f\ncnstop \u30fb\u30fb\u30fb\u30ce\u30fc\u30c9\u505c\u6b62\n</code></pre></p>"},{"location":"setup/node-setup/#7-gliveview","title":"7. gLiveView\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>cardano-node\u306f\u30ed\u30b0\u304c\u6d41\u308c\u308b\u753b\u9762\u3060\u3051\u3067\u306f\u4f55\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u306e\u304b\u3088\u304f\u308f\u304b\u308a\u307e\u305b\u3093\u3002 \u305d\u308c\u3092\u8996\u899a\u7684\u306b\u78ba\u8a8d\u3067\u304d\u308b\u30c4\u30fc\u30eb\u304cgLiveView\u3067\u3059\u3002</p> <p>gLiveView\u306f\u91cd\u8981\u306a\u30ce\u30fc\u30c9\u30b9\u30c6\u30fc\u30bf\u30b9\u60c5\u5831\u3092\u8868\u793a\u3057\u3001systemd\u30b5\u30fc\u30d3\u30b9\u3068\u3046\u307e\u304f\u9023\u643a\u3057\u307e\u3059\u3002 \u3053\u306e\u30c4\u30fc\u30eb\u3092\u4f5c\u6210\u3057\u305f Guild Operators\u306e\u529f\u7e3e\u306b\u3088\u308b\u3082\u306e\u3067\u3059\u3002</p> <p>Guild LiveView\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002</p> <p><pre><code>mkdir $NODE_HOME/scripts\ncd $NODE_HOME/scripts\nsudo apt install bc tcptraceroute -y\n</code></pre> <pre><code>curl -s -o gLiveView.sh https://raw.githubusercontent.com/cardano-community/guild-operators/master/scripts/cnode-helper-scripts/gLiveView.sh\ncurl -s -o env https://raw.githubusercontent.com/cardano-community/guild-operators/master/scripts/cnode-helper-scripts/env\nchmod 755 gLiveView.sh\n</code></pre></p> <p>env \u30d5\u30a1\u30a4\u30eb\u5185\u306e\u5b9a\u7fa9\u3092\u4fee\u6b63\u3057\u307e\u3059</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>PORT=`grep \"PORT=\" $NODE_HOME/startRelayNode1.sh`\nb_PORT=${PORT#\"PORT=\"}\necho \"\u30ea\u30ec\u30fc\u30dd\u30fc\u30c8\u306f${b_PORT}\u3067\u3059\"\n</code></pre> <pre><code>PORT=`grep \"PORT=\" $NODE_HOME/startBlockProducingNode.sh`\nb_PORT=${PORT#\"PORT=\"}\necho \"BP\u30dd\u30fc\u30c8\u306f${b_PORT}\u3067\u3059\"\n</code></pre> <pre><code>sed -i $NODE_HOME/scripts/env \\\n    -e '1,73s!#CNODE_HOME=\"/opt/cardano/cnode\"!CNODE_HOME=\"'${NODE_HOME}'\"!' \\\n    -e '1,73s!#CNODE_PORT=6000!CNODE_PORT='${b_PORT}'!' \\\n    -e '1,73s!#UPDATE_CHECK=\"Y\"!UPDATE_CHECK=\"N\"!' \\\n    -e '1,73s!#CONFIG=\"${CNODE_HOME}/files/config.json\"!CONFIG=\"${CNODE_HOME}/'${NODE_CONFIG}'-config.json\"!' \\\n    -e '1,73s!#SOCKET=\"${CNODE_HOME}/sockets/node.socket\"!SOCKET=\"${CNODE_HOME}/db/socket\"!' \\\n    -e '1,73s!#PROM_HOST=127.0.0.1!PROM_HOST=127.0.0.1!' \\\n    -e '1,73s!#PROM_PORT=12798!PROM_PORT=12798!'\n</code></pre> <p>Guild Liveview\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002</p> <pre><code>./gLiveView.sh\n</code></pre> <p></p> <p>GliveView\u8d77\u52d5\u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8\u30b3\u30fc\u30c9\u767b\u9332</p> <p>\u30b9\u30af\u30ea\u30d7\u30c8\u3078\u306e\u30d1\u30b9\u3092\u901a\u3057\u3001\u4efb\u610f\u306e\u5358\u8a9e\u3067\u8d77\u52d5\u51fa\u6765\u308b\u3088\u3046\u306b\u3059\u308b\u3002 <pre><code>echo alias glive=\"'cd $NODE_HOME/scripts; ./gLiveView.sh'\" &gt;&gt; $HOME/.bashrc\nsource $HOME/.bashrc\n</code></pre></p> <p>\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u306b<code>glive</code>\u3068\u5165\u529b\u3059\u308b\u3060\u3051\u3067\u3001\u3069\u3053\u304b\u3089\u3067\u3082\u8d77\u52d5\u3067\u304d\u307e\u3059\u3002   </p> gLiveView\u306b\u3064\u3044\u3066\u25bc <ul> <li>\u3053\u306e\u30c4\u30fc\u30eb\u3092\u7acb\u3061\u4e0a\u3052\u3066\u3082\u30ce\u30fc\u30c9\u306f\u8d77\u52d5\u3057\u307e\u305b\u3093\u3002\u30ce\u30fc\u30c9\u306f\u5225\u9014\u8d77\u52d5\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059 </li> <li>\u30ea\u30ec\u30fc\uff0fBP\u306e\u81ea\u52d5\u5224\u5225\u306f\u3001\u624b\u98064-5\u7d42\u4e86\u5f8c\u306b\u884c\u308f\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002 </li> <li>\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u3067\u306f\u57fa\u672c\u60c5\u5831\u306b\u52a0\u3048\u3001\u30c8\u30dd\u30ed\u30b8\u30fc\u63a5\u7d9a\u72b6\u6cc1\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002  </li> <li>BP\u30ce\u30fc\u30c9\u3067\u306f\u57fa\u672c\u60c5\u5831\u306b\u52a0\u3048\u3001KES\u6709\u52b9\u671f\u9650\u3001\u30d6\u30ed\u30c3\u30af\u751f\u6210\u72b6\u6cc1\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002  </li> </ul> <p>\u91cd\u8981\uff1a\u30ce\u30fc\u30c9\u540c\u671f\u306b\u3064\u3044\u3066</p> <p>0\u30a8\u30dd\u30c3\u30af\u304b\u3089\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u30c7\u30fc\u30bf\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u540c\u671f\u3057\u307e\u3059\u3002\u6700\u65b0\u30a8\u30dd\u30c3\u30af\u307e\u3067\u8ffd\u3044\u3064\u304f\u307e\u3067\u306b1\u65e5\u534a\uff5e2\u65e5\u304b\u304b\u308a\u3001\u5b8c\u5168\u306b\u540c\u671f\u3059\u308b\u307e\u3067\u6b21\u306e\u9805\u76ee\u306b\u306f\u9032\u3081\u307e\u305b\u3093\u3002 BP\u30b5\u30fc\u30d0\u30fc\u30842\u3064\u76ee\u306e\u30ea\u30ec\u30fc\u30b5\u30fc\u30d0\u30fc\u3067\u3082\u540c\u3058\u4f5c\u696d\u3092\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\uff1cMithril-Client\u306b\u3088\u308bDB\u540c\u671f\uff1e <code>Mithril-Client</code>\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u7d042\u65e5\u304b\u304b\u3063\u3066\u3044\u305f\u521d\u56de\u306eDB\u540c\u671f\u6642\u9593\u3092\u7d0430\u5206\u4ee5\u5185\u306b\u307e\u3067\u77ed\u7e2e\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 \u624b\u9806\u306f\u3053\u3061\u3089\u2192DB\u540c\u671f(Mithril)</p>"},{"location":"setup/node-setup/#8","title":"8. \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7","text":""},{"location":"setup/node-setup/#8-1-cardano-cli","title":"8-1. <code>cardano-cli</code>\u30d0\u30a4\u30ca\u30ea\u306e\u30b3\u30d4\u30fc","text":"<p>\u30ea\u30ec\u30fc\u30b5\u30fc\u30d0\u30fc\u3067\u30d0\u30a4\u30ca\u30ea\u30d5\u30a1\u30a4\u30eb\u306e\u30b3\u30d4\u30fc\u3092\u3057\u307e\u3059\u3002</p>"},{"location":"setup/node-setup/#8-2","title":"8-2. \u74b0\u5883\u5909\u6570\u306e\u8a2d\u5b9a","text":"<pre><code>echo 'export NODE_HOME=\"$HOME/cnode\"' &gt;&gt; ~/.bashrc\necho 'export NODE_NETWORK=\"--mainnet\"' &gt;&gt; ~/.bashrc\necho 'export CARDANO_NODE_NETWORK_ID=mainnet' &gt;&gt; ~/.bashrc\necho alias airgap=\"'cd $HOME/cnode &amp;&amp; [ -f airgap-set.tar.gz ] &amp;&amp; tar -xOzf airgap-set.tar.gz airgap_script | bash -s verify || echo \"airgap-set.tar.gz \u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\"'\" &gt;&gt; $HOME/.bashrc\n\nsource ~/.bashrc\nmkdir -p ${NODE_HOME}\n</code></pre> \u30c6\u30b9\u30c8\u30cd\u30c3\u30c8\u306e\u5834\u5408\u306f\u3053\u3061\u3089 PreviewPreProd <pre><code>echo 'export NODE_HOME=\"$HOME/cnode\"' &gt;&gt; $HOME/.bashrc\necho 'export NODE_NETWORK=\"--testnet-magic 2\"' &gt;&gt; $HOME/.bashrc\necho 'export CARDANO_NODE_NETWORK_ID=2' &gt;&gt; $HOME/.bashrc\n\nsource $HOME/.bashrc\nmkdir -p ${NODE_HOME}\n</code></pre> <pre><code>echo 'export NODE_HOME=\"$HOME/cnode\"' &gt;&gt; $HOME/.bashrc\necho 'export NODE_NETWORK=\"--testnet-magic 1\"' &gt;&gt; $HOME/.bashrc\necho 'export CARDANO_NODE_NETWORK_ID=1' &gt;&gt; $HOME/.bashrc\n\nsource $HOME/.bashrc\nmkdir -p ${NODE_HOME}\n</code></pre>"},{"location":"setup/node-setup/#8-3","title":"8-3. \u53cd\u6620\u78ba\u8a8d","text":"<pre><code>echo \"NODE_HOME=${NODE_HOME}\"\necho \"NODE_NETWORK=${NODE_NETWORK}\"\necho \"CARDANO_NODE_NETWORK_ID=${CARDANO_NODE_NETWORK_ID}\"\n</code></pre>"},{"location":"setup/relay-bp-setup/","title":"\u30ea\u30ec\u30fc/BP\u63a5\u7d9a\u8a2d\u5b9a","text":"<p>\u30ea\u30ec\u30fcBP\u3068\u306e\u5f79\u5272</p> <ul> <li> <p>\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9(\u30ea\u30ec\u30fc) \u81ea\u8eab\u306eBP\u3068\u4ed6\u306e\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9(\u30ab\u30eb\u30c0\u30ce\u30cd\u30c3\u30c8\u30ef\u30fc\u30af)\u3068\u306e\u7e4b\u304c\u308a\u3092\u6301\u3061\u6700\u65b0\u30b9\u30ed\u30c3\u30c8\u3092\u53d6\u5f97\u3057\u30d6\u30ed\u30c3\u30af\u4f1d\u64ad\u306e\u5f79\u5272\u3092\u679c\u305f\u3057\u307e\u3059\u3002</p> </li> <li> <p>\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9(BP) \u30d6\u30ed\u30c3\u30af\u751f\u6210\u5c02\u7528\u30ce\u30fc\u30c9\u3067\u3059\u3002\u30d6\u30ed\u30c3\u30af\u751f\u6210\u306b\u5fc5\u8981\u306a\u30ad\u30fc\u3068\u8a3c\u660e\u66f8 (node.cert, kes.skey vrf.skey)\u3092\u7528\u3044\u3066\u8d77\u52d5\u3057\u81ea\u8eab\u306e\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u306e\u307f\u306b\u63a5\u7d9a\u3059\u308b\u3053\u3068\u3067\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3092\u5f37\u5316\u3057\u307e\u3059\u3002  </p> </li> </ul>"},{"location":"setup/relay-bp-setup/#1-p2p","title":"1. \u30c0\u30a4\u30ca\u30df\u30c3\u30afP2P\u3092\u7406\u89e3\u3059\u308b","text":"<p>\u30c0\u30a4\u30ca\u30df\u30c3\u30afP2P\u306f\u30ab\u30eb\u30c0\u30ce\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u69cb\u6210\u3059\u308b\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u306e\u500b\u3005\u306e\u7e4b\u304c\u308a\u3092\u5f62\u6210\u3059\u308b\u305f\u3081\u306b\u9759\u7684\u63a5\u7d9a\u69cb\u6210\u30d5\u30a1\u30a4\u30eb\u3092\u5fc5\u8981\u3068\u305b\u305a\u3001\u53f0\u5e33\u306b\u767b\u9332\u3055\u308c\u305f\u5404\u30d7\u30fc\u30eb\u306e\u30ea\u30ec\u30fc\u30ea\u30b9\u30c8\u306e\u4e2d\u304b\u3089\u6700\u9069\u306a\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u3092\u691c\u51fa\u3057\u81ea\u52d5\u63a5\u7d9a\u3057\u307e\u3059\u3002 \u3053\u308c\u306b\u3088\u308a\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3092\u5411\u4e0a\u3055\u305b\u3001\u56de\u5fa9\u529b\u3001\u5206\u6563\u5316\u3092\u3055\u3089\u306b\u5f37\u5316\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"setup/relay-bp-setup/#1-1","title":"1-1. \u305d\u308c\u305e\u308c\u306e\u5185\u90e8\u6a5f\u80fd\u3068\u5f79\u5272","text":"\u6a5f\u80fd\u540d \u5f79\u5272 \u30a2\u30a6\u30c8\u30d0\u30a6\u30f3\u30c9\u30ac\u30d0\u30ca\u30fc \u81ea\u8eab\u306e\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u304b\u3089\u63a5\u7d9a\u3059\u308b\u30ce\u30fc\u30c9\u60c5\u5831\u3092\u7ba1\u7406 \u30a4\u30f3\u30d0\u30a6\u30f3\u30c9\u30ac\u30d0\u30ca\u30fc \u81ea\u8eab\u306e\u30ea\u30ec\u30fc\u306b\u63a5\u7d9a\u3057\u3066\u304f\u308b\u30ce\u30fc\u30c9\u60c5\u5831\u3092\u7ba1\u7406 \u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u30de\u30cd\u30fc\u30b8\u30e3\u30fc \u5168\u3066\u306eTCP\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u72b6\u614b\u7ba1\u7406\u30fb\u8ffd\u8de1 \u30d4\u30a2\u5171\u6709(Peer Sharing) \u30ce\u30fc\u30c9\u3092\u4ed6\u306e\u30ce\u30fc\u30c9\u306b\u4f1d\u9054\u30fb\u65e2\u77e5\u306e\u30d4\u30a2\u306b\u8ffd\u52a0\u3059\u308b\u6a5f\u80fd Genesis lite(Bootstrap Peers) Ouroboros Genesis\u5b9f\u88c5\u307e\u3067\u306e\u4fe1\u983c\u30ce\u30fc\u30c9\u30d6\u30fc\u30c8\u30b9\u30c8\u30e9\u30c3\u30d7\u6a5f\u80fd <p>\u30a2\u30a6\u30c8\u30d0\u30a6\u30f3\u30c9\u30ac\u30d0\u30ca\u30fc\u3068\u306f\uff1f(Outgoing)</p> <p>\u81ea\u8eab\u306e\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u304b\u3089\u63a5\u7d9a\u3059\u308b\u30ce\u30fc\u30c9\u60c5\u5831\u3092\u7ba1\u7406\u3059\u308b\u6a5f\u80fd\u3067\u3001\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb(mainnet-config.json)\u3067\u63a5\u7d9a\u6570\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u304c\u53ef\u80fd\u3002</p> \u8a2d\u5b9a\u30d5\u30e9\u30b0:\u30c7\u30d5\u30a9\u30eb\u30c8\u5024 \u5f79\u5272 \"TargetNumberOfKnownPeers:100\" \u5168\u4f53\u306e\u65e2\u77e5\u30eb\u30fc\u30c8\u30d4\u30a2\u6570(Hot/Warm/Cold\u5408\u8a08) \"TargetNumberOfEstablishedPeers:50\" \u63a5\u7d9a\u3092\u78ba\u7acb\u3055\u305b\u305f\u3044\u30eb\u30fc\u30c8\u30d4\u30a2\u6570(Hot/Warm/\u5408\u8a08) \"TargetNumberOfActivePeers:20\" Hot\u63a5\u7d9a\u3055\u305b\u305f\u3044\u30eb\u30fc\u30c8\u30d4\u30a2\u6570 \"TargetNumberOfRootPeers:100\" \u53f0\u5e33\u304b\u3089\u53d6\u5f97\u3059\u308b\u30eb\u30fc\u30c8\u30d4\u30a2\u306e\u6570 <ul> <li><code>TargetNumberOfRootPeers</code>\u306f\u3001\u5168\u4f53\u306e\u65e2\u77e5\u30d4\u30a2\u6570\u3092\u6c7a\u3081\u308b<code>TargetNumberOfKnownPeers</code>\u3068\u540c\u7b49\u304b\u305d\u308c\u4ee5\u4e0b\u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</li> <li><code>TargetNumberOfRootPeers</code>\u3092\u6e1b\u3089\u3059\u3053\u3068\u3067\u3001\u53f0\u5e33\u304b\u3089\u81ea\u52d5\u53d6\u5f97\u3059\u308b\u30d4\u30a2\u306e\u4ed6\u306b<code>PeerSharing</code>\u306b\u3088\u308a\u4ed6\u306e\u30ce\u30fc\u30c9\u304b\u3089\u4f1d\u9054\u3055\u308c\u305f\u30d4\u30a2\u60c5\u5831\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002</li> <li>Hot/Warm/Cold\u306e\u63a5\u7d9a\u9078\u5b9a\u306f\u305d\u306e\u30ce\u30fc\u30c9\u306b\u3068\u3063\u3066\u4e00\u756a\u6700\u9069\u306a\u63a5\u7d9a\u5148\u3092\u30ce\u30fc\u30c9\u304c\u5168\u81ea\u52d5\u3067\u5236\u5fa1\u3059\u308b\u306e\u3067SPO\u304c\u30de\u30cd\u30fc\u30b8\u30e1\u30f3\u30c8\u3059\u308b\u3053\u3068\u306f\u3042\u308a\u307e\u305b\u3093\u3002</li> </ul> <p></p> <p>\u30d4\u30a2\u5171\u6709\u3068\u306f\uff1f(Peer Sharing)</p> <p>\u30a2\u30a6\u30c8\u30d0\u30a6\u30f3\u30c9\u30ac\u30d0\u30ca\u30fc\u3078\u306e\u65e2\u77e5\u306e\u30d4\u30a2\u3092\u8ffd\u52a0\u3059\u308b2\u3064\u76ee\u306e\u65b9\u6cd5\u3067\u3059\u3002\u30d4\u30a2\u5171\u6709\u3092\u6709\u52b9\u306b\u3059\u308b\u3068\u3001\u63a5\u7d9a\u5148\u30ce\u30fc\u30c9\u304b\u3089\u30d4\u30a2\u60c5\u5831\u3092\u8981\u6c42\u3067\u304d\u308b\u3060\u3051\u3067\u306a\u304f\u3001\u81ea\u8eab\u306e\u30d4\u30a2\u3092\u4f1d\u9054\u3067\u304d\u307e\u3059\u3002\u7279\u306b\u53f0\u5e33\u306b\u767b\u9332\u3057\u3066\u3044\u306a\u3044\u30ea\u30ec\u30fc\u3092\u4ed6\u306e\u30ea\u30ec\u30fc\u306b\u77e5\u3089\u305b\u308b\u969b\u306b\u6709\u52b9\u3067\u3059\u3002  </p> <ul> <li>mainnet-topology.json\u30d5\u30a1\u30a4\u30eb\u3067\u4f1d\u9054\u3057\u305f\u3044\u30ea\u30ec\u30fc\u60c5\u5831\u306b\u5bfe\u3057\u3066<code>advertise: true</code>\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002</li> <li>\u30ea\u30ec\u30fc\u306e\u30c8\u30dd\u30ed\u30b8\u30fc\u306b\u8a18\u8f09\u3055\u308c\u305fBP\u60c5\u5831\u306b\u5bfe\u3057\u3066<code>advertise: true</code>\u3092\u6307\u5b9a\u3059\u308b\u3068BP\u306eIP\u30a2\u30c9\u30ec\u30b9\u304c\u5916\u90e8\u306b\u6f0f\u6d29\u3059\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u306e\u3067\u3001\u5fc5\u305a<code>advertise: false</code>\u3092\u6307\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> </ul>"},{"location":"setup/relay-bp-setup/#2","title":"2. \u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u8a2d\u5b9a\u5909\u66f4","text":"<p>mainnet-topology.json \u3068\u306f\uff1f</p> <ul> <li>P2P(\u30d4\u30a2\u30c4\u30fc\u30d4\u30a2)\u63a5\u7d9a\u306b\u304a\u3051\u308b\u56fa\u5b9a\u63a5\u7d9a\u5148\u30ce\u30fc\u30c9\u60c5\u5831\u3092\u8a18\u8ff0\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u3067\u3059\u3002</li> <li>\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u3067\u306f\u3001\u30d6\u30fc\u30c8\u30b9\u30c8\u30e9\u30c3\u30d7\u30ce\u30fc\u30c9\u3001\u30d1\u30d6\u30ea\u30c3\u30af\u30ce\u30fc\u30c9 (IOHK\u3084\u4ed6\u306e\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9) \u53ca\u3073\u3001\u81ea\u8eab\u306e\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9\u3001\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u60c5\u5831\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002</li> <li>\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9\u3067\u306f\u3001\u81ea\u8eab\u306e\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u60c5\u5831\u306e\u307f\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002</li> <li>\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u5185\u3067\u6307\u5b9a\u3059\u308bIP\u306f\u30b5\u30fc\u30d0\u30fc\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u305f\u30d1\u30d6\u30ea\u30c3\u30afIP(\u9759\u7684)\u30a2\u30c9\u30ec\u30b9\u306b\u66f8\u304d\u63db\u3048\u3066\u4e0b\u3055\u3044</li> <li>\u5404\u30ce\u30fc\u30c9\u306e\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u5909\u66f4\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u90fd\u5ea6\u4fee\u6b63\u3057\u3066\u304f\u3060\u3055\u3044</li> </ul> <p>\u8a2d\u5b9a\u306e\u524d\u63d0\u6761\u4ef6</p> <p>\u4ee5\u4e0b\u306e\u9805\u76ee\u3092\u5b9f\u65bd\u3059\u308b\u524d\u306b\u30ea\u30ec\u30fc/BP\u30ce\u30fc\u30c9\u304c\u6700\u65b0\u30d6\u30ed\u30c3\u30af\u3068\u540c\u671f\u3057\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002 <pre><code>cardano-cli conway query tip --mainnet | grep syncProgress\n</code></pre></p> <p>\u623b\u308a\u5024\u78ba\u8a8d <code>\"syncProgress\": \"100.00\"</code> </p> <p>\u623b\u308a\u5024\u304c99\u4ee5\u4e0b\u306e\u5834\u5408\u306f100(\u6700\u65b0\u30d6\u30ed\u30c3\u30af\u307e\u3067\u540c\u671f)\u306b\u306a\u308b\u307e\u3067\u5f85\u3061\u307e\u3057\u3087\u3046\u3002</p> <p>\u65b0\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u9805\u76ee\u89e3\u8aac</p> \u9805\u76ee \u8aac\u660e <code>bootstrapPeers</code> Genesis lite bootstrap\u7528\u30ce\u30fc\u30c9 <code>localRoots</code> \u5e38\u306bHot\u63a5\u7d9a\u3092\u56fa\u5b9a\u3057\u305f\u3044\u63a5\u7d9a\u5148\u3092\u8a18\u5165 <code>accessPoints</code> \u63a5\u7d9a\u5148\u30b0\u30eb\u30fc\u30d7 <code>advertise</code> PeerSharing\u4f1d\u64ad\u30d5\u30e9\u30b0 <code>trustable</code> \u4fe1\u983c\u30ce\u30fc\u30c9\u8a2d\u5b9a\u30d5\u30e9\u30b0 <code>valency</code> \u63a5\u7d9a\u6570(\u63a5\u7d9a\u5148\u30b0\u30eb\u30fc\u30d7\u5185\u306b\u8a18\u8f09\u3057\u305f\u6570\u3068\u4e00\u81f4\u3055\u305b\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059) <code>publicRoots</code> IOG\u30ea\u30ec\u30fc\u306a\u3069\u306e\u516c\u958b\u30ea\u30ec\u30fc\u63a5\u7d9a\u5148 <code>useLedgerAfterSlot</code> \u521d\u671f\u540c\u671f\u306e\u969b\u306b\u53f0\u5e33Peer\u691c\u7d22\u3092\u6709\u52b9\u306b\u3059\u308b\u30b9\u30ed\u30c3\u30c8\u756a\u53f7 <p>\u4ee5\u4e0b\u3001\u5404\u30ce\u30fc\u30c9\u3054\u3068\u306e\u30bf\u30d6\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u306e\u5834\u5408 <p>\u30ea\u30ec\u30fc\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u8a2d\u5b9a\u3092\u5909\u66f4</p> \u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u8a2d\u5b9a\u306e\u6ce8\u610f\u70b9 <p>\u3054\u5229\u7528\u306eVPS\u306b\u3088\u3063\u3066\u306f\u7ba1\u7406\u753b\u9762\u304b\u3089FW\u3092\u8a2d\u5b9a\u3059\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\uff08\u4f8bAWS\u7cfb\u306a\u3069\uff09 \u305d\u306e\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u884c\u308f\u305a\u3001VPS\u30de\u30a4\u30da\u30fc\u30b8\u7ba1\u7406\u753b\u9762\u306a\u3069\u304b\u3089\u500b\u5225\u306b\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002 \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u3067\u4f7f\u7528\u3059\u308b <code>6000</code> \u756a\u30dd\u30fc\u30c8\u306e\u30a4\u30f3\u30d0\u30a6\u30f3\u30c9\u901a\u4fe1\u3092\u8a31\u53ef\u3059\u308b\u3002\u4efb\u610f\u306e\u756a\u53f7\u3067\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u305d\u306e\u756a\u53f7\u3092\u8a31\u53ef\u3059\u308b\u3002</p> <p><pre><code>sudo ufw allow 6000/tcp\n</code></pre> <pre><code>sudo ufw reload\n</code></pre></p> <p>\u30ea\u30ec\u30fcTopology\u30d5\u30a1\u30a4\u30eb\u5909\u66f4</p> <p>\u81ea\u8eab\u306e\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u304b\u3089\u63a5\u7d9a\u3092\u56fa\u5b9a\u3059\u308b\u30ce\u30fc\u30c9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002</p> <ul> <li>IP\u306f\u5404\u30b5\u30fc\u30d0\u30fc\u306e\u30d1\u30d6\u30ea\u30c3\u30afIP(\u9759\u7684)\u30a2\u30c9\u30ec\u30b9\u3092\u6307\u5b9a\u3057\u3066\u4e0b\u3055\u3044\u3002</li> <li>\u30dd\u30fc\u30c8\u756a\u53f7\u306f4. \u30ce\u30fc\u30c9\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u4f5c\u6210\u3067\u8a2d\u5b9a\u3057\u305f\u5404\u30ce\u30fc\u30c9\u30dd\u30fc\u30c8\u756a\u53f7\u306b\u7f6e\u304d\u63db\u3048\u3066\u4e0b\u3055\u3044\u3002(SSH\u30dd\u30fc\u30c8\u3068\u9593\u9055\u3048\u306a\u3044\u3067\u304f\u3060\u3055\u3044)</li> </ul> <p>\u5b9f\u884c\u524d\u306b <code>+</code>\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u6ce8\u91c8\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002  </p> <p><pre><code>cat &gt; $NODE_HOME/${NODE_CONFIG}-topology.json &lt;&lt; EOF\n{\n\"bootstrapPeers\": [\n    {\n    \"address\": \"backbone.cardano.iog.io\",\n    \"port\": 3001\n    },\n    {\n    \"address\": \"backbone.mainnet.emurgornd.com\",\n    \"port\": 3001\n    },\n    {\n    \"address\": \"backbone.mainnet.cardanofoundation.org\",\n    \"port\": 3001\n    }\n],\n\"localRoots\": [\n    {\n    \"accessPoints\": [\n        {\n        \"address\": \"BP\u306eIP\",#(1)!\n        \"port\": 00000 #(2)!\n        }\n    ],\n        \"advertise\": false,#(5)!\n        \"trustable\": true,\n        \"valency\": 1\n    },\n    {\n    \"accessPoints\": [\n        {\n        \"address\": \"\u30ea\u30ec\u30fc\uff11\u306eIP\",#(3)!\n        \"port\": 6000 #(4)!\n        }\n    ],\n        \"advertise\": true,\n        \"trustable\": true,\n        \"valency\": 1\n    }\n],\n\"publicRoots\": [\n    {\n    \"accessPoints\": [],\n    \"advertise\": false\n    }\n],\n\"useLedgerAfterSlot\": 128908821\n}\nEOF\n</code></pre></p> <ol> <li>BP\u306eIP\u30a2\u30c9\u30ec\u30b9\u307e\u305f\u306fDNS\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>BP\u306e\u30dd\u30fc\u30c8\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>\u30ea\u30ec\u30fc\uff11\u306eIP\u30a2\u30c9\u30ec\u30b9\u307e\u305f\u306fDNS\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>\u30ea\u30ec\u30fc\uff11\u306e\u30dd\u30fc\u30c8\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>accessPoints\u306bBP\u3092\u6307\u5b9a\u3059\u308b\u6642\u306f\u5fc5\u305a<code>advertise</code>\u3092<code>false</code>\u306b\u3057\u3066\u304f\u3060\u3055\u3044</li> </ol> BP\u306e\u5834\u5408 <p>BP-Topology\u30d5\u30a1\u30a4\u30eb\u5909\u66f4  </p> <p>\u5b9f\u884c\u524d\u306b <code>+</code>\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u6ce8\u91c8\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002  </p> <p>BP\u3067\u306f<code>bootstrapPeers</code>\u3068<code>PeerSharing</code>\u3092\u7121\u52b9\u306b\u3057\u307e\u3059 <pre><code>cat &gt; $NODE_HOME/${NODE_CONFIG}-topology.json &lt;&lt; EOF\n{\n\"bootstrapPeers\": null,\n\"localRoots\": [\n    {\n      \"accessPoints\": [\n        {\n        \"address\": \"\u30ea\u30ec\u30fc\uff11\u306eIP\",#(1)!\n        \"port\": 6000 #(2)!\n        },\n        {\n        \"address\": \"\u30ea\u30ec\u30fc\uff12\u306eIP\",#(3)!\n        \"port\": 6000 #(4)!\n        }\n      ],\n      \"advertise\": false,#(8)!\n      \"trustable\": true,\n      \"valency\": 2 #(5)!\n    }\n],\n\"publicRoots\": [],#(6)!\n\"useLedgerAfterSlot\": -1 #(7)!\n}\nEOF\n</code></pre></p> <ol> <li>\u30ea\u30ec\u30fc\uff11\u306eIP\u30a2\u30c9\u30ec\u30b9\u307e\u305f\u306fDNS\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>\u30ea\u30ec\u30fc\uff11\u306e\u30dd\u30fc\u30c8\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>\u30ea\u30ec\u30fc\uff12\u306eIP\u30a2\u30c9\u30ec\u30b9\u307e\u305f\u306fDNS\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>\u30ea\u30ec\u30fc\uff12\u306e\u30dd\u30fc\u30c8\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>\u56fa\u5b9a\u63a5\u7d9a\u30d4\u30a2\u306e\u6570\u3092\u6307\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044</li> <li>\"publicRoots\":\u3092\u7a7a\u306b\u3057\u3066\u304f\u3060\u3055\u3044</li> <li><code>-1</code>\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u53f0\u5e33\u304b\u3089\u63a5\u7d9a\u5148\u3092\u53d6\u5f97\u3057\u306a\u3044BP\u30e2\u30fc\u30c9\u306b\u306a\u308a\u307e\u3059</li> <li>\u3053\u3053\u3067\u306f<code>advertise</code>\u3092<code>false</code>\u306b\u3057\u3066\u304f\u3060\u3055\u3044</li> </ol> <p>mainnet-topology.json\u69cb\u6587\u30c1\u30a7\u30c3\u30af <pre><code>cat $NODE_HOME/mainnet-topology.json | jq .\n</code></pre></p> \u6b63\u5e38parse error <p>mainnet-topology.json\u306e\u4e2d\u8eab\u304c\u305d\u306e\u307e\u307e\u8868\u793a\u3055\u308c\u307e\u3059</p> <p>json\u8a18\u6cd5\u306b\u8aa4\u308a\u304c\u3042\u308b\u305f\u3081\u4ee5\u4e0b\u306e\u30a8\u30e9\u30fc\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002mainnet-topology.json\u3092\u958b\u3044\u3066<code>{}</code> <code>[]</code> <code>,</code>\u304c\u6b63\u3057\u3044\u4f4d\u7f6e\u306b\u3042\u308b\u304b\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002 <pre><code>parse error: Expected another key-value pair at line x, column x\n</code></pre></p> <p>\u30ce\u30fc\u30c9\u3092\u518d\u8d77\u52d5\u3059\u308b <pre><code>cnrestart\n</code></pre></p>"},{"location":"setup/spo-newsletter/","title":"SPO\u30cb\u30e5\u30fc\u30b9\u30ec\u30bf\u30fc\u767b\u9332","text":"<p>\u6982\u8981</p> <p>SPO\u30cb\u30e5\u30fc\u30b9\u30ec\u30bf\u30fc\u65e5\u672c\u8a9e\u7248\u306fInput Output\u304c\u6bce\u67081\u56de\u767a\u884c\u3059\u308bSPO\u5411\u3051\u306e\u30e1\u30fc\u30eb\u30de\u30ac\u30b8\u30f3\u3067\u3059\u3002 \u6d77\u5916\u7248\u306b\u306f\u306a\u3044\u65e5\u672c\u72ec\u81ea\u306e\u30c8\u30d4\u30c3\u30af\u30b9\u3084\u3001\u30cf\u30fc\u30c9\u30d5\u30a9\u30fc\u30af\u60c5\u5831\u3001\u30d1\u30e9\u30e1\u30fc\u30bf\u5909\u66f4\u3001\u7814\u7a76\u3001\u4e3b\u8981\u306a\u30a8\u30b3\u30b7\u30b9\u30c6\u30e0\u306b\u95a2\u3059\u308b\u8b70\u8ad6\u306b\u95a2\u3059\u308b\u6700\u65b0\u60c5\u5831\u3092\u63d0\u4f9b\u3057\u30c4\u30fc\u30eb\u30e1\u30f3\u30c6\u30ca\u30fc\u3001\u30ce\u30fc\u30c9\u30d3\u30eb\u30c0\u30fc\u3001\u7814\u7a76\u8005\u3001\u30b3\u30a2\u958b\u767a\u8005\u3001\u652f\u6301\u8005\u3001\u30e1\u30f3\u30bf\u30fc\u3001\u30b5\u30fc\u30d3\u30b9\u30d7\u30ed\u30d0\u30a4\u30c0\u30fc\u306a\u3069\u3001\u30a8\u30b3\u30b7\u30b9\u30c6\u30e0\u5168\u4f53\u306e\u30d1\u30fc\u30c8\u30ca\u30fc\u3068\u5354\u529b\u3057\u3066\u3001SPO \u30a8\u30af\u30b9\u30da\u30ea\u30a8\u30f3\u30b9\u3092\u5411\u4e0a\u3055\u305b\u308b\u60c5\u5831\u3068\u6a5f\u4f1a\u3068\u306a\u3063\u3066\u304a\u308a\u307e\u3059\u3002</p>"},{"location":"setup/spo-newsletter/#_1","title":"\u767b\u9332\u65b9\u6cd5","text":"<p>\u767b\u9332\u306f\u3053\u3061\u3089\uff1a</p> <p>https://services.iohk.io/ja-jp/spo-newsletter-jp</p> <p>\u5165\u529b\u30d5\u30a9\u30fc\u30e0\u53c2\u8003\u4f8b 1. \u30cb\u30e5\u30fc\u30b9\u30ec\u30bf\u30fc\u3092\u53d7\u3051\u53d6\u308a\u305f\u3044\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044 2. DRep\u306e\u65b9\u306fDRepID\u306e\u5165\u529b\u3082\u304a\u9858\u3044\u81f4\u3057\u307e\u3059 3. SPO\u30ae\u30eb\u30c9\u6240\u5c5e\u6b04\u306b\u306f\u300cSPO JAPAN GUILD\u300d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044 </p>"},{"location":"setup/spo-newsletter/#_2","title":"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u8a8d\u8a3c","text":"<p>\u30d5\u30a9\u30fc\u30e0\u5165\u529b\u5f8c\u3001\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u8a8d\u8a3c\u7528\u306e\u30e1\u30fc\u30eb\u304c\u9001\u3089\u308c\u3066\u304d\u307e\u3059\u306e\u3067\u300cConfirm email address\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u8a8d\u8a3c\u3057\u3066\u304f\u3060\u3055\u3044\u3002 </p> <p>\u3053\u306e\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u305f\u3089\u8a8d\u8a3c\u5b8c\u4e86\u3067\u3059\u3002 \u203b\u8868\u793a\u3055\u308c\u308b\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u306f\u767b\u9332\u6642\u306b\u5165\u529b\u3057\u305f\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3067\u3059\u3002 </p>"},{"location":"setup/spo-newsletter/#x","title":"X\u30d5\u30a9\u30ed\u30fc","text":"<p>SPO JAPAN GUILD\u306e\u6700\u65b0\u60c5\u5831\u306fX\u3067\u3082\u767a\u4fe1\u3057\u3066\u304a\u308a\u307e\u3059\uff01  </p> <p>https://x.com/spojapanguild </p> <p></p>"},{"location":"setup/stake-address-register/","title":"\u30b9\u30c6\u30fc\u30af\u30a2\u30c9\u30ec\u30b9\u767b\u9332","text":""},{"location":"setup/stake-address-register/#1","title":"1. \u30b9\u30c6\u30fc\u30af\u8a3c\u660e\u66f8\u3092\u4f5c\u6210\u3059\u308b","text":"\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\ncardano-cli conway stake-address registration-certificate \\\n    --stake-verification-key-file stake.vkey \\\n    --key-reg-deposit-amt 2000000 \\\n    --out-file stake.cert\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306estake.cert \u3092BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|stake.cert| B[BP];</code></pre></p>"},{"location":"setup/stake-address-register/#2","title":"2. \u30b9\u30c6\u30fc\u30af\u30a2\u30c9\u30ec\u30b9\u3092\u767b\u9332\u3059\u308b","text":"<p>\u30b9\u30c6\u30fc\u30af\u30a2\u30c9\u30ec\u30b9\u306e\u767b\u9332\u306b\u306f2000000 lovelace (2ADA)\u304c\u5fc5\u8981\u3067\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\ncurrentSlot=$(cardano-cli conway query tip $NODE_NETWORK | jq -r '.slot')\necho Current Slot: $currentSlot\n</code></pre> <p>payment.addr\u306e\u6b8b\u9ad8\u3092\u51fa\u529b\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway query utxo \\\n    --address $(cat payment.addr) \\\n    $NODE_NETWORK \\\n    --output-text \\\n    --out-file fullUtxo.out\n\ntail -n +3 fullUtxo.out | sort -k3 -nr &gt; balance.out\n\ncat balance.out\n</code></pre> <p>UTXO\u3092\u7b97\u51fa\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>tx_in=\"\"\ntotal_balance=0\nwhile read -r utxo; do\n    in_addr=$(awk '{ print $1 }' &lt;&lt;&lt; \"${utxo}\")\n    idx=$(awk '{ print $2 }' &lt;&lt;&lt; \"${utxo}\")\n    utxo_balance=$(awk '{ print $3 }' &lt;&lt;&lt; \"${utxo}\")\n    total_balance=$((${total_balance}+${utxo_balance}))\n    echo TxHash: ${in_addr}#${idx}\n    echo ADA: ${utxo_balance}\n    tx_in=\"${tx_in} --tx-in ${in_addr}#${idx}\"\ndone &lt; balance.out\ntxcnt=$(cat balance.out | wc -l)\necho Total ADA balance: ${total_balance}\necho Number of UTXOs: ${txcnt}\n</code></pre> <p>keyDeposit\u306e\u5024\u3092\u51fa\u529b\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>keyDeposit=$(cat $NODE_HOME/params.json | jq -r '.stakeAddressDeposit')\necho keyDeposit: $keyDeposit\n</code></pre> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u4eee\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction build-raw \\\n    ${tx_in} \\\n    --tx-out $(cat payment.addr)+$(( ${total_balance} - ${keyDeposit} )) \\\n    --invalid-hereafter $(( ${currentSlot} + 10000)) \\\n    --fee 200000 \\\n    --out-file tx.tmp \\\n    --certificate stake.cert\n</code></pre> <p>\u73fe\u5728\u306e\u6700\u4f4e\u624b\u6570\u6599\u3092\u8a08\u7b97\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>fee=$(cardano-cli conway transaction calculate-min-fee \\\n    --tx-body-file tx.tmp \\\n    --witness-count 2 \\\n    --output-text \\\n    --protocol-params-file params.json | awk '{ print $1 }')\necho fee: $fee\n</code></pre> <p>\u8a08\u7b97\u7d50\u679c\u3092\u51fa\u529b\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>txOut=$((${total_balance}-${keyDeposit}-${fee}))\necho Change Output: ${txOut}\n</code></pre> <p>\u30b9\u30c6\u30fc\u30af\u30a2\u30c9\u30ec\u30b9\u3092\u767b\u9332\u3059\u308b\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction build-raw \\\n    ${tx_in} \\\n    --tx-out $(cat payment.addr)+${txOut} \\\n    --invalid-hereafter $(( ${currentSlot} + 10000)) \\\n    --fee ${fee} \\\n    --certificate-file stake.cert \\\n    --out-file tx.raw\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>BP\u306etx.raw\u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[BP] --&gt;|tx.raw| B[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7];</code></pre></p> <p>payment\u3068stake\u306e\u79d8\u5bc6\u9375\u3067\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u306b\u7f72\u540d\u3057\u307e\u3059\u3002</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\ncardano-cli conway transaction sign \\\n    --tx-body-file tx.raw \\\n    --signing-key-file payment.skey \\\n    --signing-key-file stake.skey \\\n    $NODE_NETWORK \\\n    --out-file tx.signed\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306etx.signed\u3092BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002</p> <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|tx.signed| B[BP];</code></pre> <p>\u7f72\u540d\u3055\u308c\u305f\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u9001\u4fe1\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction submit \\\n    --tx-file tx.signed \\\n    $NODE_NETWORK\n</code></pre> <p>Transacsion Successfully submitted\u3068\u8868\u793a\u3055\u308c\u308c\u3070\u6210\u529f</p>"},{"location":"setup/stake-pool-register/","title":"\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u767b\u9332","text":"<p>\u6982\u8981</p> <p>\u3053\u3061\u3089\u306e\u624b\u9806\u306f\u521d\u56de\u30d7\u30fc\u30eb\u767b\u9332\u6642\u306e\u307f\u6709\u52b9\u3067\u3059\u3002 \u30d7\u30fc\u30eb\u767b\u9332\u5f8c\u306b\u30e1\u30bf\u60c5\u5831\u3001\u8a93\u7d04\u3001\u56fa\u5b9a\u8cbb\u3001\u5909\u52d5\u8cbb\u3001\u30ea\u30ec\u30fc\u60c5\u5831\u3092\u5909\u66f4\u3059\u308b\u5834\u5408\u306f\u3001\u904b\u7528\u8a3c\u660e\u66f8(pool.cert)\u306e\u66f4\u65b0\u306e\u5909\u66f4\u624b\u9806\u3092\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u30d7\u30fc\u30eb\u767b\u9332\u6599</p> <p>\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u767b\u9332\u306b\u306f500ADA\u306e\u767b\u9332\u6599\u304c\u5fc5\u8981\u3067\u3059\u3002payment.addr\u306b\u5165\u91d1\u3055\u308c\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"setup/stake-pool-register/#1","title":"1. \u30e1\u30bf\u30c7\u30fc\u30bf\u306e\u4f5c\u6210","text":"<p>\u30db\u30fc\u30e0\u30da\u30fc\u30b8\u3092\u6301\u3063\u3066\u3044\u306a\u3044\u5834\u5408</p> <p>\u300cjson\u30d5\u30a1\u30a4\u30eb\u3092Github\u3067\u30db\u30b9\u30c8\u3059\u308b\u65b9\u6cd5\u300d\u3092\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044</p> json\u30d5\u30a1\u30a4\u30eb\u3092Github\u3067\u30db\u30b9\u30c8\u3059\u308b\u65b9\u6cd5\u3054\u81ea\u8eab\u306e\u30db\u30fc\u30e0\u30da\u30fc\u30b8\u30b5\u30fc\u30d0\u3067\u30db\u30b9\u30c8\u3059\u308b\u65b9\u6cd5 <p>1.Github\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f5c\u6210\u3057\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002 https://github.com/ \u30e6\u30fc\u30b6\u30fc\u540d\u3092\u6700\u592713\u6587\u5b57\u4ee5\u5185\u3067\u4f5c\u6210\u3057\u3066\u304f\u3060\u3055\u3044</p> <p>2.Repositories\u30bf\u30d6\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u53f3\u4e0a\u306eNew \u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002 </p> <p>3.\u30ea\u30dd\u30b8\u30c8\u30ea\u4f5c\u6210</p> <ul> <li>Repository name\u306b\u4efb\u610f\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u540d(\u6700\u592713\u6587\u5b57\u4ee5\u5185)\u3092\u5165\u529b</li> <li>Public\u3092\u9078\u629e</li> <li>Create repository\u3092\u30af\u30ea\u30c3\u30af</li> </ul> <p></p> <p>4.\u5c0f\u3055\u3044\u6587\u5b57\u3067\u66f8\u304b\u308c\u305f\"creating a new file\"\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002  </p> <p></p> <p>5.\u30d5\u30a1\u30a4\u30eb\u540d\u3092 poolMetaData.json \u3068\u3057\u3066\u5165\u529b\u3057 json \u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u8cbc\u308a\u4ed8\u3051\u307e\u3059\u3002</p> <p></p> <pre><code>{\n\"name\": \"MyPoolName\",\n\"description\": \"My pool description\",\n\"ticker\": \"MPN\",\n\"homepage\": \"https://myadapoolnamerocks.com\"\n}\n</code></pre> <p>\u4f5c\u6210\u6642\u306e\u6ce8\u610f</p> <ul> <li>\u4e0b\u8a18\u306f\u53c2\u8003\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3068\u306a\u308a\u307e\u3059\u3002\u3054\u81ea\u8eab\u306e\u30d7\u30fc\u30eb\u540d\u3001Ticker\u540d\u306b\u66f8\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044  </li> <li>\u307e\u3060homepage\u30a2\u30c9\u30ec\u30b9\u304c\u7121\u3044\u5834\u5408\u306f\u3001\u3054\u81ea\u8eab\u306eTwitter\u30a2\u30c9\u30ec\u30b9\u3067\u3082\u5927\u4e08\u592b\u3067\u3059\u3002</li> <li>ticker\u540d\u306e\u9577\u3055\u306f3\uff5e5\u6587\u5b57\u4ee5\u5185\u3067\u3001A-Z\u30680-9\u306e\u307f\u3067\u69cb\u6210\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002  </li> <li>description\u306e\u9577\u3055\u306f255\u6587\u5b57\u4ee5\u5185(255byte)\u3068\u306a\u308a\u307e\u3059\u3002\uff08\u3072\u3089\u304c\u306a\u3001\u6f22\u5b57\u3001\u30ab\u30bf\u30ab\u30ca\u306f1\u6587\u5b572byte\uff09</li> </ul> <p>6.Commit Changes...\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</p> <p> </p> <p>7.\u4e0a\u90e8\u306e\u30e1\u30cb\u30e5\u30fc\u30bf\u30d6\u304b\u3089Settings\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059</p> <p></p> <p>8.GitPages\u8a2d\u5b9a</p> <ul> <li>\u5de6\u30e1\u30cb\u30e5\u30fc\u304b\u3089Pages\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</li> <li>Branch\u306e\u30d7\u30eb\u30c0\u30a6\u30f3\u304b\u3089main /root\u3092\u9078\u629e\u3059\u308b</li> <li>Save\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059</li> </ul> <p></p> <p>9.URL\u306e\u751f\u6210</p> <ul> <li>\u5de6\u30e1\u30cb\u30e5\u30fc\u304b\u3089Pages\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</li> <li>\u4e0a\u90e8\u306b\u3053\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u516c\u958bURL\u304c\u8868\u793a\u3055\u308c\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059</li> <li>\u8d64\u67a0\u306eURL\u3092\u30b3\u30d4\u30fc\u3057\u307e\u3059</li> </ul> <p></p> <p>10.\u30e1\u30bf\u30c7\u30fc\u30bfURL\u306e\u751f\u6210</p> <p>9\u3067\u30b3\u30d4\u30fc\u3057\u305fURL\u306b<code>poolMetaData.json</code>\u3092\u7e4b\u3052\u307e\u3059</p> <p>\u4f8b\uff09https://btbf.github.io/sjg/poolMetaData.json</p> <p>\u3053\u306eURL\u306e\u6587\u5b57\u5217\u304c64\u6587\u5b57\u4ee5\u5185\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044</p> <p>11\uff0e\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9\u3067json\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3001\u30cf\u30c3\u30b7\u30e5\u5024\u3092\u8a08\u7b97\u3059\u308b\u3002  </p> <p>URL\u3092\u66f8\u304d\u63db\u3048\u3066\u304b\u3089\u5b9f\u884c\u3057\u3066\u4e0b\u3055\u3044</p> <p>10\u3067\u4f5c\u6210\u3057\u305f\u30e1\u30bf\u30c7\u30fc\u30bfURL\u3092\u7528\u3044\u3066\u4e0b\u3055\u3044\u3002</p> <pre><code>cd $NODE_HOME\nwget -O poolMetaData.json https://xxx.github.io/xxx/poolMetaData.json \n</code></pre> <p>\u4e0b\u8a18\u306f\u53c2\u8003\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3068\u306a\u308a\u307e\u3059\u3002\u3054\u81ea\u8eab\u306e\u30d7\u30fc\u30eb\u540d\u3001Ticker\u540d\u306b\u66f8\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044  </p> <p>\u4f5c\u6210\u30eb\u30fc\u30eb</p> <p>ticker\u540d\u306e\u9577\u3055\u306f3\uff5e5\u6587\u5b57\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u6587\u5b57\u306fA-Z\u30680-9\u306e\u307f\u3067\u69cb\u6210\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 description\u306e\u9577\u3055\u306f255\u6587\u5b57\u4ee5\u5185(255byte)\u3068\u306a\u308a\u307e\u3059\u3002\uff08\u3072\u3089\u304c\u306a\u3001\u6f22\u5b57\u3001\u30ab\u30bf\u30ab\u30ca\u306f1\u6587\u5b572byte\uff09</p> <p>\u30e1\u30bf\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\ncat &gt; poolMetaData.json &lt;&lt; EOF\n{\n\"name\": \"MyPoolName\",\n\"description\": \"My pool description\",\n\"ticker\": \"MPN\",\n\"homepage\": \"https://myadapoolnamerocks.com\"\n}\nEOF\n</code></pre> <p>\u6ce8\u610f</p> <p>poolMetaData.json\u3092\u3042\u306a\u305f\u306e\u516c\u958b\u7528WEB\u30b5\u30fc\u30d0\u3078\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u3066\u304f\u3060\u3055\u3044\u3002 </p> <p>\u30e1\u30bf\u30c7\u30fc\u30bfJSON\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b <pre><code>cat $NODE_HOME/poolMetaData.json | jq .\n</code></pre></p> <p>\u623b\u308a\u5024\u306b\u30a8\u30e9\u30fc\u304c\u8868\u793a\u3055\u308c\u308b\u5834\u5408</p> <p>\u623b\u308a\u4fa1\u306b<code>parse error:</code>\u304c\u8868\u793a\u3055\u308c\u308b\u5834\u5408\u306f\u3001JSON\u69cb\u6587\u306b\u8aa4\u308a\u304c\u3042\u308a\u307e\u3059\u3002 \u4f5c\u6210\u3057\u305f\u30e1\u30bf\u30c7\u30fc\u30bfJSON\u30d5\u30a1\u30a4\u30eb\u3092\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002</p> <p>\u30e1\u30bf\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u306e\u30cf\u30c3\u30b7\u30e5\u5024\u3092\u8a08\u7b97\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\ncardano-cli conway stake-pool metadata-hash --pool-metadata-file poolMetaData.json &gt; poolMetaDataHash.txt\n</code></pre>"},{"location":"setup/stake-pool-register/#2","title":"2. \u30d7\u30fc\u30eb\u767b\u9332\u8a3c\u660e\u66f8\u306e\u4f5c\u6210","text":"<p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>BP\u306b\u3042\u308b<code>vrf.vkey</code>\u3068<code>poolMetaDataHash.txt</code> \u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[BP] --&gt;| vrf.vkey / poolMetaDataHash.txt | B[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7];</code></pre></p> <p>** BP\u3068\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u3067<code>vrf.vkey</code>\u30d5\u30a1\u30a4\u30eb\u30cf\u30c3\u30b7\u30e5\u3092\u6bd4\u8f03\u3059\u308b **</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\nsha256sum vrf.vkey\n</code></pre> <p>BP\u3068\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u3067\u8868\u793a\u3055\u308c\u305f\u623b\u308a\u5024\u3092\u6bd4\u8f03\u3057\u3066\u3001\u30cf\u30c3\u30b7\u30e5\u5024\u304c\u4e00\u81f4\u3057\u3066\u3044\u308c\u3070OK  </p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\nsha256sum vrf.vkey\n</code></pre> <p>\u6700\u5c0f\u30d7\u30fc\u30eb\u30b3\u30b9\u30c8(\u6700\u4f4e\u56fa\u5b9a\u8cbb)\u3092\u51fa\u529b\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>minPoolCost=$(cat $NODE_HOME/params.json | jq -r .minPoolCost)\necho minPoolCost: ${minPoolCost}\n</code></pre> <p>minPoolCost(\u6700\u4f4e\u56fa\u5b9a\u8cbb)\u306f 170000000 lovelace (170 ADA)\u3067\u3059\u3002</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u3067pool.cert\u3092\u4f5c\u6210\u3059\u308b</p> <p>pool.cert\u4f5c\u6210\u6642\u306e\u6ce8\u610f\u70b9\u25bc</p> <p>pool.cert\u306f\u30d7\u30fc\u30eb\u767b\u9332\u8a3c\u660e\u66f8\u306e\u5f79\u5272\u3092\u679c\u305f\u3057\u3001\u30d7\u30fc\u30eb\u60c5\u5831\u3092\u8a18\u8f09\u3057\u307e\u3059\u3002\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306f\u4ee5\u4e0b\u306e\u5024\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002  </p> <ul> <li>\u8a93\u7d04 100ADA \u3000(--pool-pledge) \u3000\u6ce8\u91c8\u2192(1)  </li> <li>\u56fa\u5b9a\u624b\u6570\u6599 170ADA (--pool-cost) \u3000\u6ce8\u91c8\u2192(2)  </li> <li>\u5909\u52d5\u624b\u6570\u65995% (--pool-margin) \u3000\u6ce8\u91c8\u2192(3)  </li> </ul> <ol> <li> \u8a93\u7d04(Pledge)\u3068\u306f\uff1fPledge(\u8a93\u7d04)\u306f\u30b7\u30d3\u30eb\u653b\u6483\u3092\u9632\u3050\u76ee\u7684\u3067\u5c0e\u5165\u3055\u308c\u3066\u3044\u308b\u30d1\u30e9\u30e1\u30fc\u30bf\u3067\u3001SPO\u304c\u81ea\u8eab\u306e\u30d7\u30fc\u30eb\u306bADA\u3092\u3088\u308a\u9810\u3051\u308b\u3053\u3068\u3067\u59d4\u4efb\u8005\u69d8\u306e\u5831\u916c\u304c\u82e5\u5e72\u591a\u304f\u5206\u914d\u3055\u308c\u308b\u8a2d\u8a08\u306b\u306a\u3063\u3066\u304a\u308a\u3001\u8907\u6570\u30d7\u30fc\u30eb\u3092\u958b\u8a2d\u3059\u308b\u3088\u308a\u3082\u5358\u4e00\u30d7\u30fc\u30eb\u3067\u306e\u904b\u55b6\u30e1\u30ea\u30c3\u30c8\u4fc3\u3059\u305f\u3081\u306b\u8a2d\u3051\u3089\u308c\u305f\u5236\u5ea6\u3067\u3059\u30022022/02/16\u6642\u70b9\u3067\u306ePledge(\u8a93\u7d04)\u306e\u8a2d\u8a08\u306f\u3001SPO\u304c\u5dee\u3057\u51fa\u3059ADA(Pledge)\u304c10M ADA\u4ee5\u4e0a\u304b\u3089\u3058\u3083\u306a\u3044\u3068\u5831\u916c\u304c\u5897\u3048\u308b\u5272\u5408\u304c\u5909\u308f\u3089\u306a\u3044\u305f\u3081\u3001\u3042\u307e\u308a\u6a5f\u80fd\u3057\u3066\u3044\u306a\u3044\u306e\u304c\u5b9f\u60c5\u3067\u3059\u3002(\u73fe\u5728\u6539\u826f\u304c\u691c\u8a0e\u3055\u308c\u3066\u3044\u307e\u3059)</li> <li> \u56fa\u5b9a\u624b\u6570\u6599(cost)\u3068\u306f\uff1f\u30d7\u30fc\u30eb\u904b\u55b6\u306b\u304a\u3051\u308b\u30aa\u30da\u30ec\u30fc\u30bf\u30fc\u5831\u916c\u306e1\u3064\u3067\u3001\u6700\u4f4e170ADA\u304b\u3089\u8a2d\u5b9a\u53ef\u80fd</li> <li> \u5909\u52d5\u624b\u6570\u6599(margin)\u3068\u306f\uff1f\u30d7\u30fc\u30eb\u904b\u55b6\u306b\u304a\u3051\u308b\u30aa\u30da\u30ec\u30fc\u30bf\u30fc\u5831\u916c\u306e1\u3064\u3067 (\u7dcf\u5831\u916c-\u56fa\u5b9a\u624b\u6570\u6599\u8cbb)\u306b\u304a\u3051\u308b\u30aa\u30da\u30ec\u30fc\u30bf\u30fc\u5831\u916c\u7387</li> </ol> \u8a93\u7d04(Pledge)\u306b\u3064\u3044\u3066\u25bc <p>\u81ea\u5206\u306e\u30d7\u30fc\u30eb\u306b\u4fdd\u8a3c\u91d1\u3092\u9810\u3051\u308b\u3053\u3068\u3092Pledge(\u8a93\u7d04)\u3068\u547c\u3073\u307e\u3059</p> <ul> <li>\u652f\u6255\u3044\u7528\u30a2\u30c9\u30ec\u30b9(payment.addr)\u306e\u6b8b\u9ad8\u306fPledge\u984d\u3088\u308a\u3082\u5927\u304d\u3044\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</li> <li>\u8a93\u7d04\u91d1\u306fpayment.addr\u306b\u5165\u91d1\u3055\u308c\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</li> <li>\u8a2d\u5b9a\u3057\u305f\u8a93\u7d04\u6570\u3088\u308apayment.addr\u306b\u5165\u91d1\u3055\u308c\u3066\u308bADA\u304c\u4e0b\u56de\u3063\u3066\u3044\u308b\u5834\u5408\u3001\u30d7\u30fc\u30eb\u5831\u916c\u304c\uff10\u306b\u306a\u308a\u307e\u3059\u3002</li> <li>\u8a93\u7d04\u91d1\u306f\u30ed\u30c3\u30af\u3055\u308c\u307e\u305b\u3093\u3002\u3044\u3064\u3067\u3082\u81ea\u7531\u306b\u53d6\u308a\u51fa\u305b\u307e\u3059\u304c\u30d7\u30fc\u30eb\u767b\u9332\u8a3c\u660e\u66f8\u3092\u518d\u63d0\u51fa\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</li> </ul> \u30ea\u30ec\u30fc(--pool-relay-ipv4)\u306e\u8a18\u8ff0\u306b\u3064\u3044\u3066\u25bc <p>\u4e0a\u8a18\u306epool.cert\u4f5c\u6210\u6642\u3001\u81ea\u8eab\u306e\u30ea\u30ec\u30fc\u60c5\u5831\u3092\u4ee5\u4e0b\u306e3\u30d1\u30bf\u30fc\u30f3\u306e\u8a18\u8ff0\u65b9\u6cd5\u304c\u3042\u308a\u307e\u3059\u3002</p> <p>\u8907\u6570\u306e\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u3092\u69cb\u6210\u3059\u308b\u8a18\u8ff0\u65b9\u6cd5</p> <p>IP\u30a2\u30c9\u30ec\u30b9\u65b9\u5f0f\uff1a 1\u30ce\u30fc\u30c91IP\u30a2\u30c9\u30ec\u30b9\u306e\u5834\u5408(\u5206\u304b\u3089\u306a\u3044\u5834\u5408\u306f\u3053\u3061\u3089) [xxx.xxx.xxx]\u3092\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u306e\u30d1\u30d6\u30ea\u30c3\u30afIP(\u9759\u7684)\u30a2\u30c9\u30ec\u30b9\u3078\u66f8\u304d\u63db\u3048 <pre><code>    --pool-relay-ipv4 xxx.xxx.xxx \\\n    --pool-relay-port 6000 \\\n    --pool-relay-ipv4 xxx.xxx.xxx \\\n    --pool-relay-port 6000 \\\n</code></pre></p> <p>DNS\u65b9\u5f0f\uff1a1\u3064\u306e\u30a8\u30f3\u30c8\u30ea\u30fc\u306e\u5834\u5408 [relay1.yourdomain.com]\u3092\u3042\u306a\u305f\u306e\u30c9\u30e1\u30a4\u30f3\u540d\u306b\u66f8\u304d\u63db\u3048 <pre><code>    --single-host-pool-relay relay1.yourdomain.com \\\n    --pool-relay-port 6000 \\\n    --single-host-pool-relay relay2.yourdomain.com \\\n    --pool-relay-port 6000 \\\n</code></pre></p> <p>\u30e9\u30a6\u30f3\u30c9\u30ed\u30d3\u30f3DNS\u30d9\u30fc\u30b9 SRV DNS record\u306e\u5834\u5408 [relay.yourdomain.com]\u3092\u3042\u306a\u305f\u306e\u30c9\u30e1\u30a4\u30f3\u540d\u306b\u66f8\u304d\u63db\u3048 <pre><code>    --multi-host-pool-relay relay.yourdomain.com \\\n    --pool-relay-port 6000 \\\n</code></pre></p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3(\u30ea\u30ec\u30fc2\u53f0\u69cb\u6210) <p>\u4e0b\u8a18\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u306f\u4f8b\u3067\u3059\u3002\u3054\u81ea\u8eab\u306e\u30d7\u30fc\u30eb\u904b\u7528\u8a2d\u5b9a\u5024\u306b\u5909\u66f4\u3057\u3066\u304b\u3089\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002  </p> <p>\u5024\u3092\u5909\u66f4\u3059\u308b</p> <p><code>--pool-pledge</code> \u8a93\u7d04\u6570 <code>--pool-cost</code> \u56fa\u5b9a\u624b\u6570\u6599 <code>--pool-margin</code> \u5909\u52d5\u624b\u6570\u6599 <code>***.***.***.***</code>\u306f\u30ea\u30ec\u30fc1\u3001\u30ea\u30ec\u30fc2\u306eIP\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044  <code>https://xxx.github.io/xxx/poolMetaData.json</code> \u306f\u3054\u81ea\u8eab\u306e\u30e1\u30bf\u30c7\u30fc\u30bfURL\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</p> <pre><code>cd $NODE_HOME\ncardano-cli conway stake-pool registration-certificate \\\n    --cold-verification-key-file $HOME/cold-keys/node.vkey \\\n    --vrf-verification-key-file vrf.vkey \\\n    --pool-pledge 100000000 \\\n    --pool-cost 170000000 \\\n    --pool-margin 0.05 \\\n    --pool-reward-account-verification-key-file stake.vkey \\\n    --pool-owner-stake-verification-key-file stake.vkey \\\n    $NODE_NETWORK \\\n    --pool-relay-ipv4 ***.***.***.*** \\\n    --pool-relay-port 6000 \\\n    --pool-relay-ipv4 ***.***.***.*** \\\n    --pool-relay-port 6000 \\\n    --metadata-url https://xxx.github.io/xxx/poolMetaData.json \\\n    --metadata-hash $(cat poolMetaDataHash.txt) \\\n    --out-file pool.cert\n</code></pre> <p>\u81ea\u8eab\u306e\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u306b\u59d4\u4efb\u3059\u308b\u8a3c\u660e\u66f8(deleg.cert)\u3092\u4f5c\u6210\u3057\u307e\u3059</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3 <pre><code>cardano-cli conway stake-address stake-delegation-certificate \\\n    --stake-verification-key-file stake.vkey \\\n    --cold-verification-key-file $HOME/cold-keys/node.vkey \\\n    --out-file deleg.cert\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306e<code>pool.cert</code>\u3068<code>deleg.cert</code>\u3092BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|pool.cert / deleg.cert| B[BP];</code></pre></p>"},{"location":"setup/stake-pool-register/#3","title":"3. \u30d7\u30fc\u30eb\u767b\u9332\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306e\u9001\u4fe1","text":"<p>\u6700\u65b0\u306e\u30b9\u30ed\u30c3\u30c8\u756a\u53f7\u3092\u53d6\u5f97\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\ncurrentSlot=$(cardano-cli conway query tip $NODE_NETWORK | jq -r '.slot')\necho Current Slot: $currentSlot\n</code></pre> <p>payment.addr\u306e\u6b8b\u9ad8\u3092\u51fa\u529b\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway query utxo \\\n    --address $(cat payment.addr) \\\n    $NODE_NETWORK \\\n    --output-text \\\n    --out-file fullUtxo.out\n\ntail -n +3 fullUtxo.out | sort -k3 -nr &gt; balance.out\n\ncat balance.out\n</code></pre> <p>UTXO\u3092\u7b97\u51fa\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>tx_in=\"\"\ntotal_balance=0\nwhile read -r utxo; do\n    in_addr=$(awk '{ print $1 }' &lt;&lt;&lt; \"${utxo}\")\n    idx=$(awk '{ print $2 }' &lt;&lt;&lt; \"${utxo}\")\n    utxo_balance=$(awk '{ print $3 }' &lt;&lt;&lt; \"${utxo}\")\n    total_balance=$((${total_balance}+${utxo_balance}))\n    echo TxHash: ${in_addr}#${idx}\n    echo ADA: ${utxo_balance}\n    tx_in=\"${tx_in} --tx-in ${in_addr}#${idx}\"\ndone &lt; balance.out\ntxcnt=$(cat balance.out | wc -l)\necho Total ADA balance: ${total_balance}\necho Number of UTXOs: ${txcnt}\n</code></pre> <p>poolDeposit\u3092\u51fa\u529b\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>poolDeposit=$(cat $NODE_HOME/params.json | jq -r '.stakePoolDeposit')\necho poolDeposit: $poolDeposit\n</code></pre> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u4eee\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction build-raw \\\n    ${tx_in} \\\n    --tx-out $(cat payment.addr)+$(( ${total_balance} - ${poolDeposit})) \\\n    --invalid-hereafter $(( ${currentSlot} + 10000)) \\\n    --fee 200000 \\\n    --certificate-file pool.cert \\\n    --certificate-file deleg.cert \\\n    --out-file tx.tmp\n</code></pre> <p>\u6700\u4f4e\u624b\u6570\u6599\u3092\u8a08\u7b97\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>fee=$(cardano-cli conway transaction calculate-min-fee \\\n    --tx-body-file tx.tmp \\\n    --witness-count 3 \\\n    --output-text \\\n    --protocol-params-file params.json | awk '{ print $1 }')\necho fee: $fee\n</code></pre> <p>\u8a08\u7b97\u7d50\u679c\u3092\u51fa\u529b\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>txOut=$((${total_balance}-${poolDeposit}-${fee}))\necho txOut: ${txOut}\n</code></pre> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction build-raw \\\n    ${tx_in} \\\n    --tx-out $(cat payment.addr)+${txOut} \\\n    --invalid-hereafter $(( ${currentSlot} + 10000)) \\\n    --fee ${fee} \\\n    --certificate-file pool.cert \\\n    --certificate-file deleg.cert \\\n    --out-file tx.raw\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>BP\u306e<code>tx.raw</code>\u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002</p> <pre><code>graph LR\n    A[BP] --&gt;|tx.raw| B[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7];</code></pre> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306b\u7f72\u540d\u3057\u307e\u3059</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\ncardano-cli conway transaction sign \\\n    --tx-body-file tx.raw \\\n    --signing-key-file payment.skey \\\n    --signing-key-file $HOME/cold-keys/node.skey \\\n    --signing-key-file stake.skey \\\n    $NODE_NETWORK \\\n    --out-file tx.signed\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306e<code>tx.signed</code>\u3092BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|tx.signed| B[BP];</code></pre></p> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u9001\u4fe1\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction submit \\\n    --tx-file tx.signed \\\n    $NODE_NETWORK\n</code></pre> <p>Transacsion Successfully submitted\u3068\u8868\u793a\u3055\u308c\u308c\u3070\u6210\u529f</p>"},{"location":"setup/stake-pool-register/#4","title":"4. \u30d7\u30fc\u30eb\u767b\u9332\u78ba\u8a8d","text":"<p>\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30ebID\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3067\u304d\u307e\u3059</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3 <pre><code>chmod u+rwx $HOME/cold-keys\ncardano-cli conway stake-pool id --cold-verification-key-file $HOME/cold-keys/node.vkey --output-format bech32 --out-file pool.id-bech32\ncardano-cli conway stake-pool id --cold-verification-key-file $HOME/cold-keys/node.vkey --output-format hex --out-file pool.id\nchmod a-rwx $HOME/cold-keys\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306e<code>pool.id-bech32</code>\u3068<code>pool.id</code>\u3092BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|pool.id-bech32 / pool.id| B[BP];</code></pre></p> <p>\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3001\u30d7\u30fc\u30eb\u60c5\u5831\u304c\u8868\u793a\u3055\u308c\u308c\u3070\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u306b\u767b\u9332\u3055\u308c\u3066\u3044\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>curl -s -X POST \"https://api.koios.rest/api/v1/pool_info\" \\\n    -H \"Accept: application/json\" \\\n    -H \"Content-Type: application/json\" \\\n    -d '{\"_pool_bech32_ids\":[\"'$(cat $NODE_HOME/pool.id-bech32)'\"]}' | jq .\n</code></pre> <p>\u81ea\u5206\u306e\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u304c<code>Cardanoscan</code>\u306b\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\ncat pool.id-bech32\n</code></pre> <p>\u8868\u793a\u3055\u308c\u305fPoolID\u3067\u3042\u306a\u305f\u306e\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u304c\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u306b\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u304b\u3001\u6b21\u306e\u30b5\u30a4\u30c8\u3067\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002 Cardanoscan</p> <p>\u3042\u3068\u4e00\u606f\u3067\u3059\uff01</p> <p>\u4e0a\u8a18\u30b5\u30a4\u30c8\u3067\u3042\u306a\u305f\u306e\u30d7\u30fc\u30eb\u30c6\u30a3\u30c3\u30ab\u30fc\u304c\u8868\u793a\u3055\u308c\u305f\u3089\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u306b\u767b\u9332\u3055\u308c\u307e\u3057\u305f\uff01\u3057\u304b\u3057\u307e\u3060\u30d6\u30ed\u30c3\u30af\u751f\u6210\u3067\u304d\u308b\u72b6\u614b\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u3053\u306e\u5f8c\u3082\u91cd\u8981\u306a\u4f5c\u696d\u304c\u7d9a\u304d\u307e\u3059\u304c\u3082\u3046\u5c11\u3057\u9811\u5f35\u3063\u3066\u304f\u3060\u3055\u3044\uff01</p>"},{"location":"setup/ubuntu-setup/","title":"Ubuntu\u521d\u671f\u8a2d\u5b9a","text":"<p>\u30d2\u30f3\u30c8</p> <p>\u3053\u306e\u624b\u9806\u306f\u3001\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3\u306eUbuntu\u3067\u306f\u5b9f\u65bd\u3059\u308b\u5fc5\u8981\u306f\u3054\u3056\u3044\u307e\u305b\u3093\u3002</p> <p>AWS\u3092\u3054\u5229\u7528\u306e\u65b9</p> <p><code>AWS EC2</code> / <code>Lightsail</code> \u3067\u306f SSH \u9375\u8a8d\u8a3c\u3084\u30e6\u30fc\u30b6\u30fc\u69cb\u6210\u304c\u7570\u306a\u308b\u305f\u3081\u3001\u672c\u30de\u30cb\u30e5\u30a2\u30eb\u901a\u308a\u306b\u52d5\u4f5c\u3057\u306a\u3044\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"setup/ubuntu-setup/#1-root","title":"1. \u30b5\u30fc\u30d0\u30fc\u30ed\u30b0\u30a4\u30f3\uff08\u521d\u56de\u306e\u307f / root\uff09","text":"<p>\u91cd\u8981</p> <p>\u3053\u306e\u624b\u9806\u306f \u521d\u56de\u30ed\u30b0\u30a4\u30f3\u6642\u306e\u307f \u4f7f\u7528\u3057\u307e\u3059\u3002 \u4ee5\u964d\u306e\u8a2d\u5b9a\u3067\u3001<code>root</code>\u30ed\u30b0\u30a4\u30f3\u304a\u3088\u3073\u30d1\u30b9\u30ef\u30fc\u30c9\u8a8d\u8a3c\u306f\u7121\u52b9\u5316\u3057\u307e\u3059\u3002</p> \u9805\u76ee \u8a2d\u5b9a\u5024 \u30db\u30b9\u30c8 \u30b5\u30fc\u30d0\u30fcIP \u30dd\u30fc\u30c8 SSH\uff0822\uff09 \u30e6\u30fc\u30b6\u30fc root \u30d1\u30b9\u30ef\u30fc\u30c9 \u5951\u7d04\u6642\u306b\u9001\u4ed8\u3055\u308c\u308b\u521d\u671f root \u30d1\u30b9\u30ef\u30fc\u30c9"},{"location":"setup/ubuntu-setup/#2","title":"2. \u30e6\u30fc\u30b6\u30fc\u30a2\u30ab\u30a6\u30f3\u30c8\u4f5c\u6210","text":"<p>\u30d2\u30f3\u30c8</p> <p>\u65e5\u5e38\u904b\u7528\u3067\u306f<code>root</code>\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f7f\u7528\u305b\u305a\u3001sudo\u6a29\u9650\u3092\u4ed8\u4e0e\u3057\u305f\u4e00\u822c\u30e6\u30fc\u30b6\u30fc\u3067\u64cd\u4f5c\u3057\u307e\u3059\u3002</p> <p>\u65b0\u3057\u3044\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002  </p> <p>\u4efb\u610f\u306e\u30a2\u30eb\u30d5\u30a1\u30d9\u30c3\u30c8\u6587\u5b57\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002 \u3053\u306e\u4f8b\u3067\u306f<code>cardano</code> \u30e6\u30fc\u30b6\u30fc\u3068\u3057\u3066\u4ee5\u964d\u9032\u3081\u307e\u3059\u3002</p> <pre><code>adduser cardano\n</code></pre> <pre><code>New password:           # \u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\nRetype new password:    # \u78ba\u8a8d\u306e\u305f\u3081\u518d\u5165\u529b\n\nEnter the new value, or press ENTER for the default\n        Full Name []:   # \u30d5\u30eb\u30cd\u30fc\u30e0\u7b49\u306e\u60c5\u5831\u3092\u8a2d\u5b9a\uff08\u4e0d\u8981\u3067\u3042\u308c\u3070\u30d6\u30e9\u30f3\u30af\u3067\u3082\u554f\u984c\u3042\u308a\u307e\u305b\u3093\uff09\n        Room Number []:\n        Work Phone []:\n        Home Phone []:\n        Other []:\nIs the information correct? [Y/n] : y\n</code></pre> <p><code>cardano</code>\u306bsudo\u6a29\u9650\u3092\u4ed8\u4e0e\u3057\u307e\u3059\u3002 <pre><code>usermod -aG sudo cardano\n</code></pre></p> <p>root\u304b\u3089\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u307e\u3059\u3002 <pre><code>exit\n</code></pre></p> <p>\u30d2\u30f3\u30c8</p> <p>\u30bf\u30fc\u30df\u30ca\u30eb\u30bd\u30d5\u30c8\u306e\u63a5\u7d9a\u30e6\u30fc\u30b6\u30fc\u3092\u3001\u4e0a\u8a18\u3067\u4f5c\u6210\u3057\u305f\u30e6\u30fc\u30b6\u30fc\u540d\uff08<code>cardano</code>\uff09\u304a\u3088\u3073\u30d1\u30b9\u30ef\u30fc\u30c9\u306b\u5909\u66f4\u3057\u3066\u518d\u63a5\u7d9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p><code>Ubuntu 22.04</code>\u4ee5\u964d\u306e\u8a2d\u5b9a</p> <p>\u30d6\u30e9\u30b1\u30c3\u30c8\u30da\u30fc\u30b9\u30c8\u6a5f\u80fd\u3092\u7121\u52b9\u5316\u3057\u307e\u3059\u3002 <pre><code>echo \"set enable-bracketed-paste off\" &gt;&gt; ~/.inputrc\n</code></pre></p> <p>\u8a2d\u5b9a\u53cd\u6620\u306e\u305f\u3081\u3001\u30bf\u30fc\u30df\u30ca\u30eb\u304b\u3089\u4e00\u5ea6\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u3066\u518d\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u30c7\u30fc\u30e2\u30f3\u518d\u8d77\u52d5\u3092\u81ea\u52d5\u5316\u3057\u307e\u3059\u3002 <pre><code>echo \"\\$nrconf{restart} = 'a';\" | sudo tee /etc/needrestart/conf.d/50local.conf\n</code></pre> <pre><code>echo \"\\$nrconf{blacklist_rc} = [qr(^cardano-node\\\\.service$) =&gt; 0, qr(^cnode-blocknotify\\\\.service$) =&gt; 0, qr(^cnode-cncli-sync\\\\.service$) =&gt; 0,];\" | sudo tee -a /etc/needrestart/conf.d/50local.conf\n</code></pre></p>"},{"location":"setup/ubuntu-setup/#3-ssh","title":"3. SSH\u8a2d\u5b9a\u5909\u66f4","text":"<p>SSH\u5f37\u5316\u8a2d\u5b9a\u30eb\u30fc\u30eb</p> <ul> <li>SSH\u30ed\u30b0\u30a4\u30f3\u6642\u30d1\u30b9\u30ef\u30fc\u30c9\u7121\u52b9\u5316\uff08\u79d8\u5bc6\u9375\u3092\u4f7f\u7528\uff09</li> <li>SSH\u30c7\u30d5\u30a9\u30eb\u30c8\u30dd\u30fc\u30c8\uff0822\uff09\u306e\u5909\u66f4</li> <li>root\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u306eSSH\u30ed\u30b0\u30a4\u30f3\u7121\u52b9\u5316\uff08root\u6a29\u9650\u304c\u5fc5\u8981\u306a\u64cd\u4f5c\u306f <code>sudo</code> \u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\uff09</li> <li>\u8a31\u53ef\u3055\u308c\u3066\u3044\u306a\u3044\u30a2\u30ab\u30a6\u30f3\u30c8\u304b\u3089\u306e\u30ed\u30b0\u30a4\u30f3\u8a66\u884c\u3092\u30ed\u30b0\u306b\u8a18\u9332\uff08fail2ban \u7b49\u3067\u5bfe\u7b56\uff09  </li> <li>SSH\u30ed\u30b0\u30a4\u30f3\u5143\u306eIP\u30a2\u30c9\u30ec\u30b9\u7bc4\u56f2\u306e\u307f\u306b\u9650\u5b9a\uff08\u5e0c\u671b\u3059\u308b\u5834\u5408\u306e\u307f\uff09\u203b\u5229\u7528\u30d7\u30ed\u30d0\u30a4\u30c0\u30fc\u306b\u3088\u3063\u3066\u306f\u3001\u5b9a\u671f\u7684\u306b\u30b0\u30ed\u30fc\u30d0\u30ebIP\u304c\u5909\u66f4\u3055\u308c\u308b\u306e\u3067\u6ce8\u610f\u304c\u5fc5\u8981</li> </ul> <p>SSH\u30dd\u30fc\u30c8\u306e\u30d2\u30f3\u30c8</p> <p>SSH\u30dd\u30fc\u30c8\u306f\u4e16\u754c\u6a19\u6e96\u306722\u756a\u304c\u5272\u308a\u5f53\u3066\u3089\u308c\u3066\u3044\u307e\u3059\u3002 \u3057\u304b\u3057\u3001\u30dd\u30fc\u30c8\u30b9\u30ad\u30e3\u30f3\u3084\u30d6\u30eb\u30fc\u30c8\u30d5\u30a9\u30fc\u30b9\u653b\u6483\u306e\u6a19\u7684\u3068\u306a\u308a\u3084\u3059\u3044\u305f\u3081\u3001\u672c\u30de\u30cb\u30e5\u30a2\u30eb\u3067\u306f\u4efb\u610f\u306e\u30dd\u30fc\u30c8\u756a\u53f7\u3078\u306e\u5909\u66f4\u3092\u63a8\u5968\u3057\u307e\u3059\u3002 \u30dd\u30fc\u30c8\u756a\u53f7\u306f\u3001IANA\u304c\u5b9a\u7fa9\u3059\u308b\u52d5\u7684\uff0f\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30dd\u30fc\u30c8\u7bc4\u56f2\u3067\u3042\u308b49513\uff5e65535\u306e\u4e2d\u304b\u3089\u6307\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>SSH\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002 <pre><code>mkdir -p ~/.ssh\n</code></pre></p> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u4e8b\u524d\u6e96\u5099\u3067\u751f\u6210\u3057\u305f<code>authorized_keys</code>\u3092\u5bfe\u8c61\u30b5\u30fc\u30d0\u30fc\u306e<code>$HOME/.ssh</code>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[\u30ed\u30fc\u30ab\u30eb\u306e\u30db\u30b9\u30c8\u30de\u30b7\u30f3] --&gt;|**authorized_keys**| B[\u5bfe\u8c61\u30b5\u30fc\u30d0\u30fc];</code></pre></p> <p>\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002 <pre><code>chown -R \"$USER:$USER\" ~/.ssh\nchmod 700 ~/.ssh\nchmod 600 ~/.ssh/authorized_keys\n</code></pre></p> <p><code>49513\uff5e65535</code>\u306e\u7bc4\u56f2\u5185\u3067SSH\u30dd\u30fc\u30c8\u756a\u53f7\u3092<code>\"\"</code>\u5185\u306b\u6307\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002 <pre><code>PORT_NUM=\"\"\n</code></pre></p> <pre><code>sudo tee /etc/ssh/sshd_config.d/01-custom-ssh.conf &gt; /dev/null &lt;&lt; EOF\nPasswordAuthentication no\nKbdInteractiveAuthentication no\nPermitRootLogin no\nPermitEmptyPasswords no\nPort ${PORT_NUM}\nEOF\n</code></pre> <p>\u69cb\u6587\u3092\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\u3002 <pre><code>sudo sshd -t\n</code></pre></p> <p>\u6709\u52b9\u8a2d\u5b9a\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>sudo sshd -T | grep -iE 'passwordauthentication|kbdinteractiveauthentication|permitrootlogin|port'\n</code></pre> <pre><code>port xxxxx\npermitrootlogin no\npasswordauthentication no\nkbdinteractiveauthentication no\ngatewayports no\n</code></pre></p> <p>\u554f\u984c\u304c\u306a\u3051\u308c\u3070\u3001SSH\u30b5\u30fc\u30d3\u30b9\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002 <pre><code>sudo systemctl restart ssh\n</code></pre></p> <p>\u30bf\u30fc\u30df\u30ca\u30eb\u30bd\u30d5\u30c8\u8a2d\u5b9a\u306b\u3064\u3044\u3066</p> <ul> <li>\u73fe\u5728\u8d77\u52d5\u4e2d\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u306f\u63a5\u7d9a\u3057\u305f\u307e\u307e\u306b\u3057\u3066\u3082\u3046\u4e00\u3064\u8d77\u52d5\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>\u63a5\u7d9a\u8a2d\u5b9a\u306eSSH\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u5909\u66f4\u3057\u79d8\u5bc6\u9375\u3092\u8a2d\u5b9a\u3057\u30b5\u30fc\u30d0\u30fc\u3078\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u308b\u304b\u78ba\u8a8d\u3057\u3066\u4e0b\u3055\u3044\u3002</li> <li>\u63a5\u7d9a\u3067\u304d\u306a\u3044\u5834\u5408\u306f\u3001\u63a5\u7d9a\u3055\u308c\u3066\u308b\u30bf\u30fc\u30df\u30ca\u30eb\u753b\u9762\u3067\u30b5\u30fc\u30d0\u30fc\u8a2d\u5b9a\u3092\u78ba\u8a8d\u3057\u3066\u4e0b\u3055\u3044\u3002</li> </ul>"},{"location":"setup/ubuntu-setup/#4","title":"4. \u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u6709\u52b9\u5316","text":"<p>\u6a19\u6e96\u306e\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\uff08UFW\uff09\u3092\u4f7f\u7528\u3057\u3066\u3001\u30a4\u30f3\u30d0\u30a6\u30f3\u30c9\u306e\u30a2\u30af\u30bb\u30b9\u53ef\u80fd\u306a\u30dd\u30fc\u30c8\u3092\u9650\u5b9a\u3057\u307e\u3059\u3002</p> <p>\u6ce8\u610f\u4e8b\u9805</p> <p>\u8a2d\u5b9a\u524d\u306e\u6ce8\u610f\u4e8b\u9805</p> <p>\u3054\u5229\u7528\u306eVPS\u306b\u3088\u3063\u3066\u306f\u7ba1\u7406\u753b\u9762\u304b\u3089\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u3092\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\uff08\u4f8bAWS\u7cfb\u306a\u3069\uff09 \u305d\u306e\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u884c\u308f\u305a\u3001VPS\u30de\u30a4\u30da\u30fc\u30b8\u7ba1\u7406\u753b\u9762\u306a\u3069\u304b\u3089\u500b\u5225\u306b\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u3055\u304f\u3089VPS\u3092\u3054\u5229\u7528\u306e\u5834\u5408</p> <p>\u7ba1\u7406\u753b\u9762\u304b\u3089\u30d1\u30b1\u30c3\u30c8\u30d5\u30a3\u30eb\u30bf\u30fc\u3092\u3001\u201d\u5229\u7528\u3057\u306a\u3044\u201d\u306b\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002    </p> <p>SSH\u30dd\u30fc\u30c8\u3092\u8a31\u53ef\u3057\u307e\u3059\u3002 <pre><code>SSH_PORT=$(sudo sshd -T | awk '$1==\"port\"{print $2}')\n</code></pre> <pre><code>echo \"\u6709\u52b9\u306aSSH\u30dd\u30fc\u30c8: ${SSH_PORT}\"\n</code></pre></p> <pre><code>sudo ufw allow ${SSH_PORT}/tcp\n</code></pre> <p>\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u3092\u6709\u52b9\u5316\u3057\u307e\u3059\u3002 <pre><code>sudo ufw enable\n</code></pre> \u4ee5\u4e0b\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u305f\u3089 <code>y</code> \u3092\u5165\u529b\u3057\u3066 <code>Enter</code></p> <p>Command may disrupt existing ssh connections. Proceed with operation (y|n)? y</p> <p>\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>sudo ufw status\n</code></pre> \u4ee5\u4e0b\u306e\u623b\u308a\u5024\u304c\u3042\u308c\u3070OK</p> <p>Status: active</p>"},{"location":"setup/ubuntu-setup/#5","title":"5. \u30b7\u30b9\u30c6\u30e0\u66f4\u65b0","text":"<p>\u91cd\u8981</p> <p>\u4e0d\u6b63\u30a2\u30af\u30bb\u30b9\u3092\u4e88\u9632\u3059\u308b\u306b\u306f\u3001\u30b7\u30b9\u30c6\u30e0\u306b\u6700\u65b0\u306e\u30d1\u30c3\u30c1\u3092\u9069\u7528\u3059\u308b\u3053\u3068\u304c\u91cd\u8981\u3067\u3059\u3002</p> <p>\u30d1\u30c3\u30b1\u30fc\u30b8\u30ea\u30b9\u30c8\u3092\u66f4\u65b0\u3057\u3001\u4f9d\u5b58\u95a2\u4fc2\u3092\u542b\u3081\u305f\u5305\u62ec\u7684\u306a\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002 <pre><code>sudo apt update -y &amp;&amp; sudo apt full-upgrade -y\n</code></pre></p> <p>\u4e0d\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u524a\u9664\u3057\u307e\u3059\u3002 <pre><code>sudo apt autoremove -y\n</code></pre></p> <p>\u30d1\u30c3\u30b1\u30fc\u30b8\u30ad\u30e3\u30c3\u30b7\u30e5\u3092\u6574\u7406\u3057\u307e\u3059\u3002 <pre><code>sudo apt autoclean -y\n</code></pre></p> <p>\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u66f4\u65b0\u306e\u81ea\u52d5\u9069\u7528\u3092\u6709\u52b9\u306b\u3057\u307e\u3059\u3002 <pre><code>sudo apt install unattended-upgrades\n</code></pre> <pre><code>sudo dpkg-reconfigure --priority=low unattended-upgrades\n</code></pre></p> <p><code>YES</code>\u3092\u9078\u629e\u3057\u3001Enter\u3092\u62bc\u4e0b</p>"},{"location":"setup/ubuntu-setup/#6-root","title":"6. root\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u7121\u52b9\u5316\u8a2d\u5b9a","text":"<p><code>root</code>\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u7121\u52b9\u5316\u3057\u307e\u3059\u3002</p> <p>\u30b5\u30fc\u30d0\u30fc\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u7dad\u6301\u306e\u305f\u3081\u3001\u983b\u7e41\u306b root \u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044\u3002</p> <p><code>root</code>\u30a2\u30ab\u30a6\u30f3\u30c8\u7121\u52b9</p> <pre><code>sudo passwd -l root\n</code></pre> <code>root</code>\u30a2\u30ab\u30a6\u30f3\u30c8\u6709\u52b9 <pre><code>sudo passwd -u root\n</code></pre> <p>\u4f55\u3089\u304b\u306e\u7406\u7531\u3067root\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u6709\u52b9\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u5834\u5408</p>"},{"location":"setup/ubuntu-setup/#7","title":"7. \u5171\u6709\u30e1\u30e2\u30ea\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u5f37\u5316","text":"<p>\u30b7\u30b9\u30c6\u30e0\u3067\u5171\u6709\u3055\u308c\u308b\u30e1\u30e2\u30ea\u3092\u4fdd\u8b77\u3057\u307e\u3059\u3002</p> <p>\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092<code>/etc/fstab</code>\u306e\u6700\u7d42\u884c\u306b\u8ffd\u8a18\u3057\u307e\u3059\u3002 <pre><code>echo 'tmpfs /dev/shm tmpfs ro,noexec,nosuid 0 0' | sudo tee -a /etc/fstab\n</code></pre></p> <p>\u8ffd\u8a18\u306e\u78ba\u8a8d\u3092\u3057\u307e\u3059\u3002 <pre><code>tail -n 1 /etc/fstab\n</code></pre></p> <p><code>tmpfs /dev/shm tmpfs ro,noexec,nosuid 0 0</code>\u304c\u6700\u7d42\u884c\u306b\u5165\u529b\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</p>"},{"location":"setup/ubuntu-setup/#8-fail2ban","title":"8. Fail2ban\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>Fail2ban\u306b\u3064\u3044\u3066</p> <p>Fail2ban\u306f\u3001\u30ed\u30b0\u30d5\u30a1\u30a4\u30eb\u3092\u76e3\u8996\u3057\u3001\u30ed\u30b0\u30a4\u30f3\u8a66\u884c\u306b\u5931\u6557\u3057\u305f\u7279\u5b9a\u306e\u30d1\u30bf\u30fc\u30f3\u3092\u76e3\u8996\u3059\u308b\u4fb5\u5165\u9632\u6b62\u30b7\u30b9\u30c6\u30e0\u3067\u3059\u3002 \u7279\u5b9a\u306eIP\u30a2\u30c9\u30ec\u30b9\u304b\u3089\u3001\u6307\u5b9a\u3055\u308c\u305f\u6642\u9593\u5185\u306b\u4e00\u5b9a\u6570\u306e\u30ed\u30b0\u30a4\u30f3\u5931\u6557\u304c\u691c\u77e5\u3055\u308c\u305f\u5834\u5408\u3001Fail2ban\u306f\u305d\u306eIP\u30a2\u30c9\u30ec\u30b9\u304b\u3089\u306e\u30a2\u30af\u30bb\u30b9\u3092\u30d6\u30ed\u30c3\u30af\u3057\u307e\u3059\u3002</p> <pre><code>sudo apt install nano fail2ban -y\n</code></pre> <p><code>nano</code>\u30a8\u30c7\u30a3\u30bf\u3082\u672a\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306a\u306e\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304d\u307e\u3059\u3002</p> <p>SSH\u30ed\u30b0\u30a4\u30f3\u3092\u76e3\u8996\u3059\u308b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u304d\u307e\u3059\u3002 <pre><code>sudo nano /etc/fail2ban/jail.local\n</code></pre></p> <p>\u30d5\u30a1\u30a4\u30eb\u306e\u6700\u5f8c\u306b\u6b21\u306e\u884c\u3092\u8ffd\u52a0\u3057\u4fdd\u5b58\u3057\u307e\u3059\u3002</p> <p>\u30b3\u30de\u30f3\u30c9\u4e2d\u306e (SSH\u30dd\u30fc\u30c8\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044) \u306b\u3064\u3044\u3066\u306f1-3\u3067\u8a2d\u5b9a\u3057\u305fSSH\u30dd\u30fc\u30c8\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002(**)\u306f\u4e0d\u8981\u3067\u3059\u3002</p> <pre><code>[sshd]\nenabled = true\nport = (SSH\u30dd\u30fc\u30c8\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044)\nfilter = sshd\nlogpath = /var/log/auth.log\nmaxretry = 6\n</code></pre> <p>\u81ea\u52d5\u8d77\u52d5\u3092\u6709\u52b9\u5316\u3057\u3001\u5373\u6642\u8d77\u52d5\u3057\u307e\u3059\u3002 <pre><code>sudo systemctl enable --now fail2ban\n</code></pre></p> <p>\u6709\u52b9\u5316\u3055\u308c\u3066\u3044\u308b\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>sudo systemctl status fail2ban --no-pager\n</code></pre></p> <p><code>Active: active (running)</code>\u3068\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"setup/ubuntu-setup/#9-chrony","title":"9. Chrony\u306e\u8a2d\u5b9a","text":"<p>chrony\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002 <pre><code>sudo apt install chrony -y\n</code></pre></p> <p><code>/etc/chrony/chrony.conf</code>\u3092\u66f4\u65b0\u3057\u307e\u3059\u3002</p> <p>\u4ee5\u4e0b\u3092\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <pre><code>cat &gt; $HOME/chrony.conf &lt;&lt; EOF\npool time.google.com       iburst minpoll 2 maxpoll 2 maxsources 3 maxdelay 0.3\npool time.facebook.com     iburst minpoll 2 maxpoll 2 maxsources 3 maxdelay 0.3\npool time.euro.apple.com   iburst minpoll 2 maxpoll 2 maxsources 3 maxdelay 0.3\npool time.apple.com        iburst minpoll 2 maxpoll 2 maxsources 3 maxdelay 0.3\npool ntp.ubuntu.com        iburst minpoll 2 maxpoll 2 maxsources 3 maxdelay 0.3\n\n# This directive specify the location of the file containing ID/key pairs for\n# NTP authentication.\nkeyfile /etc/chrony/chrony.keys\n\n# This directive specify the file into which chronyd will store the rate\n# information.\ndriftfile /var/lib/chrony/chrony.drift\n\n# Uncomment the following line to turn logging on.\n#log tracking measurements statistics\n\n# Log files location.\nlogdir /var/log/chrony\n\n# Stop bad estimates upsetting machine clock.\nmaxupdateskew 5.0\n\n# This directive enables kernel synchronisation (every 11 minutes) of the\n# real-time clock. Note that it can\u2019t be used along with the 'rtcfile' directive.\nrtcsync\n\n# Step the system clock instead of slewing it if the adjustment is larger than\n# one second, but only in the first three clock updates.\nmakestep 0.1 -1\n\n# Get TAI-UTC offset and leap seconds from the system tz database\nleapsectz right/UTC\n\n# Serve time even if not synchronized to a time source.\nlocal stratum 10\nEOF\n</code></pre> <p>\u4f5c\u6210\u3057\u305f<code>chrony.conf</code>\u3092<code>/etc/chrony/chrony.conf</code>\u306b\u79fb\u52d5\u3057\u307e\u3059\u3002 <pre><code>sudo mv $HOME/chrony.conf /etc/chrony/chrony.conf\n</code></pre></p> <p>UFW\u3067\u4ee5\u4e0b\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002 <pre><code>sudo ufw allow 123/udp\n</code></pre></p> <p>\u8a2d\u5b9a\u3092\u6709\u52b9\u306b\u3059\u308b\u306b\u306f\u3001Chrony\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002 <pre><code>sudo systemctl reload-or-restart chronyd.service\n</code></pre></p> <p>\u30d8\u30eb\u30d7\u30b3\u30de\u30f3\u30c9</p> <p>\u540c\u671f\u30c7\u30fc\u30bf\u306e\u30bd\u30fc\u30b9\u78ba\u8a8d <pre><code>chronyc sources\n</code></pre></p> <p>\u73fe\u5728\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u8868\u793a <pre><code>chronyc tracking\n</code></pre></p>"},{"location":"setup/ubuntu-setup/#ssh2","title":"\u88dc\u8db3\uff1aSSH2\u6bb5\u968e\u8a8d\u8a3c\uff08\u4efb\u610f\u4f5c\u696d\u30fb\u4e0a\u7d1a\u8005\u5411\u3051\uff09","text":"<p>\u6ce8\u610f</p> <p>\u672c\u8a2d\u5b9a\u306f\u5fc5\u9808\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002 \u305f\u3060\u3057\u3001\u672c\u624b\u9806\u3092\u5b9f\u65bd\u3057\u305f\u30b5\u30fc\u30d0\u30fc\u3067\u306f\u3001SSH\u30ed\u30b0\u30a4\u30f3\u306b2FA\u3092\u8981\u6c42\u3057\u307e\u3059\uff08= <code>Google Authenticator</code> \u672a\u8a2d\u5b9a\u30e6\u30fc\u30b6\u30fc\u306f\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u307e\u305b\u3093\uff09\u3002 \u672c\u756a\u30b5\u30fc\u30d0\u30fc\uff08VPS \u7b49\uff09\u3067\u9069\u7528\u3059\u308b\u5834\u5408\u306f\u3001\u5fc5\u305a\u5fa9\u65e7\u624b\u6bb5\uff08\u30af\u30e9\u30a6\u30c9\u30b3\u30f3\u30bd\u30fc\u30eb\u7b49\uff09\u3068\u4e88\u5099\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u78ba\u4fdd\u3057\u3066\u304b\u3089\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <code>Google Authenticator</code>\u3092\u7528\u3044\u305fSSH2\u6bb5\u968e\u8a2d\u5b9a\uff08\u4efb\u610f\uff09 <p>\u30b7\u30b9\u30c6\u30e0\u3092\u66f4\u65b0\u3057\u3066<code>libpam-google-authenticator</code>\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002 <pre><code>sudo apt update -y\n</code></pre> <pre><code>sudo apt install libpam-google-authenticator -y\n</code></pre></p> <p>google-authenticator\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002 <pre><code>google-authenticator\n</code></pre></p> <p>\u63a8\u5968\u8a2d\u5b9a</p> <p>\u8cea\u554f\u4e8b\u9805\u306b\u5bfe\u3057\u3066\u63a8\u5968\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002  </p> <p>\u6ce8\u610f</p> <p>\u30d7\u30ed\u30bb\u30b9\u4e2d\u306b\u5927\u304d\u306aQR\u30b3\u30fc\u30c9\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002 \u305d\u306e\u4e0b\u306b\u7dca\u6025\u6642\u306e\u30b9\u30af\u30e9\u30c3\u30c1\u30b3\u30fc\u30c9\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u306e\u3067\u3001\u5fd8\u308c\u305a\u306b\u66f8\u304d\u7559\u3081\u3066\u304a\u3044\u3066\u4e0b\u3055\u3044\u3002 \u30b9\u30de\u30fc\u30c8\u30d5\u30a9\u30f3\u3067Google\u8a8d\u8a3c\u30b7\u30b9\u30c6\u30e0\u30a2\u30d7\u30ea\u3092\u958b\u304d\u3001QR\u30b3\u30fc\u30c9\u3092\u8aad\u307f\u53d6\u308a2\u6bb5\u968e\u8a8d\u8a3c\u3092\u6a5f\u80fd\u3055\u305b\u3066\u304f\u3060\u3055\u3044\u3002</p> <ul> <li> <p><code>\u8a8d\u8a3c\u30c8\u30fc\u30af\u30f3\u3092\u6642\u9593\u30d9\u30fc\u30b9\u306b\u3057\u305f\u3044\u3067\u3059\u304b\uff1f</code>\u306b\u5bfe\u3057\u3066\u300c<code>y</code>\u300d\u3092\u5165\u529b\u3057\u307e\u3059\u3002</p> <p>\u8868\u793a\u3055\u308c\u308b <code>secret key</code> / <code>\u30b9\u30af\u30e9\u30c3\u30c1\u30b3\u30fc\u30c9</code> \u306f\u3001\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\u3067\u306f\u306a\u304f\u5b89\u5168\u306a\u4fdd\u7ba1\u65b9\u6cd5\uff08\u30aa\u30d5\u30e9\u30a4\u30f3\u4fdd\u7ba1\u7b49\uff09\u3067\u4fdd\u5b58\u3057\u3066\u304f\u3060\u3055\u3044\u3002 <pre><code>Do you want authentication tokens to be time-based (y/n) : y\n</code></pre></p> </li> <li> <p><code>Google Authenticator</code>\u3067QR\u30b3\u30fc\u30c9\u3092\u8aad\u307f\u8fbc\u307f\u3001\u8868\u793a\u3055\u308c\u305f6\u6841\u306e\u30b3\u30fc\u30c9\u3092\u5165\u529b <pre><code>Enter code from app (-1 to skip) : ******\n</code></pre></p> </li> <li> <p>\u30b9\u30af\u30e9\u30c3\u30c1\u30b3\u30fc\u30c9\u3082\u63a7\u3048\u3066\u304a\u304d\u307e\u3059\u3002 <pre><code>Code confirmed\nYour emergency scratch codes are : \n  ********\n  ********\n  ********\n  ********\n  ********\n</code></pre></p> </li> <li> <p><code>\u300c/home/$USER/.google_authenticator\u300d\u30d5\u30a1\u30a4\u30eb\u3092\u66f4\u65b0\u3057\u307e\u3059\u304b\uff1f</code>\u306b\u5bfe\u3057\u3066\u300c<code>y</code>\u300d\u3092\u5165\u529b <pre><code>Do you want me to update your \"/home/$USER/.google_authenticator\" file? (y/n) : y\n</code></pre></p> </li> <li> <p><code>\u540c\u3058\u8a8d\u8a3c\u30c8\u30fc\u30af\u30f3\u306e\u8907\u6570\u56de\u4f7f\u7528\u3092\u7981\u6b62\u3057\u307e\u3059\u304b\uff1f\u3053\u308c\u306b\u3088\u308a\u3001\u7d0430\u79d2\u3054\u3068\u306b1\u56de\u306e\u30ed\u30b0\u30a4\u30f3\u306b\u5236\u9650\u3055\u308c\u307e\u3059\u304c\u3001\u4e2d\u9593\u8005\u653b\u6483\u3092\u691c\u77e5\u3057\u305f\u308a\u3001\u9632\u6b62\u3057\u305f\u308a\u3059\u308b\u53ef\u80fd\u6027\u304c\u9ad8\u307e\u308a\u307e\u3059\u3002</code>\u306b\u5bfe\u3057\u3066\u300c<code>y</code>\u300d\u3092\u5165\u529b <pre><code>Do you want to disallow multiple uses of the same authentication\ntoken? This restricts you to one login about every 30s, but it increases\nyour chances to notice or even prevent man-in-the-middle attacks (y/n) : y\n</code></pre></p> </li> <li> <p><code>\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001\u30e2\u30d0\u30a4\u30eb\u30a2\u30d7\u30ea\u306b\u3088\u3063\u306630\u79d2\u3054\u3068\u306b\u65b0\u3057\u3044\u30c8\u30fc\u30af\u30f3\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3068\u30b5\u30fc\u30d0\u30fc\u9593\u306e\u6642\u523b\u306e\u305a\u308c\u3092\u88dc\u6b63\u3059\u308b\u305f\u3081\u3001\u73fe\u5728\u6642\u523b\u306e\u524d\u5f8c\u306b\u8ffd\u52a0\u306e\u30c8\u30fc\u30af\u30f3\u3092\u8a31\u53ef\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u8a8d\u8a3c\u30b5\u30fc\u30d0\u30fc\u3068\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u9593\u306e\u6642\u523b\u306e\u305a\u308c\u306f\u6700\u592730\u79d2\u307e\u3067\u8a31\u5bb9\u3055\u308c\u307e\u3059\u3002\u6642\u523b\u540c\u671f\u304c\u3046\u307e\u304f\u3044\u304b\u306a\u3044\u5834\u5408\u306f\u3001\u30a6\u30a3\u30f3\u30c9\u30a6\u30b5\u30a4\u30ba\u3092\u30c7\u30d5\u30a9\u30eb\u30c8\u306e3\u30b3\u30fc\u30c9\uff08\u524d\u306e\u30b3\u30fc\u30c91\u3064\u3001\u73fe\u5728\u306e\u30b3\u30fc\u30c9\u3001\u6b21\u306e\u30b3\u30fc\u30c9\uff09\u304b\u308917\u30b3\u30fc\u30c9\uff08\u524d\u306e\u30b3\u30fc\u30c98\u3064\u3001\u73fe\u5728\u306e\u30b3\u30fc\u30c9\u3001\u6b21\u306e\u30b3\u30fc\u30c98\u3064\uff09\u306b\u5897\u3084\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3068\u30b5\u30fc\u30d0\u30fc\u9593\u306e\u6642\u523b\u306e\u305a\u308c\u6700\u59274\u5206\u307e\u3067\u8a31\u5bb9\u3055\u308c\u307e\u3059\u3002\u3053\u308c\u3092\u5b9f\u884c\u3057\u307e\u3059\u304b\uff1f</code>\u306b\u5bfe\u3057\u3066\u300c<code>n</code>\u300d\u3092\u5165\u529b <pre><code>By default, a new token is generated every 30 seconds by the mobile app.\nIn order to compensate for possible time-skew between the client and the server,\nwe allow an extra token before and after the current time. This allows for a\ntime skew of up to 30 seconds between authentication server and client. If you\nexperience problems with poor time synchronization, you can increase the window\nfrom its default size of 3 permitted codes (one previous code, the current\ncode, the next code) to 17 permitted codes (the 8 previous codes, the current\ncode, and the 8 next codes). This will permit for a time skew of up to 4 minutes\nbetween client and server.\nDo you want to do so? (y/n) : n\n</code></pre></p> </li> <li> <p><code>\u30ed\u30b0\u30a4\u30f3\u5148\u306e\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u30fc\u304c\u30d6\u30eb\u30fc\u30c8\u30d5\u30a9\u30fc\u30b9\u653b\u6483\u306b\u3088\u308b\u30ed\u30b0\u30a4\u30f3\u8a66\u884c\u306b\u5bfe\u3057\u3066\u5f37\u5316\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u3001\u8a8d\u8a3c\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30ec\u30fc\u30c8\u5236\u9650\u3092\u6709\u52b9\u306b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001\u653b\u6483\u8005\u306b\u3088\u308b\u30ed\u30b0\u30a4\u30f3\u8a66\u884c\u306f30\u79d2\u3054\u3068\u306b3\u56de\u307e\u3067\u306b\u5236\u9650\u3055\u308c\u307e\u3059\u3002\u30ec\u30fc\u30c8\u5236\u9650\u3092\u6709\u52b9\u306b\u3057\u307e\u3059\u304b\uff1f</code>\u306b\u5bfe\u3057\u3066\u300c<code>y</code>\u300d\u3092\u5165\u529b <pre><code>If the computer that you are logging into isn't hardened against brute-force\nlogin attempts, you can enable rate-limiting for the authentication module.\nBy default, this limits attackers to no more than 3 login attempts every 30s.\nDo you want to enable rate-limiting? (y/n) : y\n</code></pre></p> </li> </ul> <p>PAM\u306e\u8a2d\u5b9a\uff08\u203b SSH \u5c02\u7528\u30fbOTP \u5fc5\u9808\u69cb\u6210\uff09</p> <p>\u672c\u624b\u9806\u3067\u306f <code>/etc/pam.d/sshd</code> \u306e <code>@include common-auth</code> \u3092\u7121\u52b9\u5316\u3057\u3001<code>pam_google_authenticator.so</code> \u3092\u5fc5\u9808\u8a8d\u8a3c\u3068\u3057\u3066\u8a2d\u5b9a\u3057\u307e\u3059\u3002</p> <pre><code>sudo sed -i '/pam_google_authenticator\\.so/d' /etc/pam.d/sshd\n</code></pre> <p><code>@include common-auth</code>\u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8 <pre><code>sudo sed -i -E 's/^[[:space:]]*@include[[:space:]]+common-auth[[:space:]]*$/# @include common-auth/' /etc/pam.d/sshd\n</code></pre></p> <p>\u8ffd\u8a18\u4f4d\u7f6e\u306e\u524d\u63d0\u306b\u4f9d\u5b58\u305b\u305a\u672b\u5c3e\u3078\u8ffd\u52a0 <pre><code>echo 'auth required pam_google_authenticator.so' | sudo tee -a /etc/pam.d/sshd &gt; /dev/null\n</code></pre></p> <p>\u78ba\u8a8d <pre><code>grep -n -E 'common-auth|pam_google_authenticator' /etc/pam.d/sshd\n</code></pre> <pre><code>4:# @include common-auth\n56:auth required pam_google_authenticator.so\n</code></pre></p> <p><code>02-2fa.conf</code>\u30d5\u30a1\u30a4\u30eb\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002 <pre><code>sudo tee /etc/ssh/sshd_config.d/02-2fa.conf &gt; /dev/null &lt;&lt; 'EOF'\nUsePAM yes\nKbdInteractiveAuthentication yes\nAuthenticationMethods publickey,keyboard-interactive\nPasswordAuthentication no\nEOF\n</code></pre></p> <p><code>AuthenticationMethods publickey,keyboard-interactive</code> \u306f\u3001\u300c\u516c\u958b\u9375\u8a8d\u8a3c \u304b\u3064 \u30ef\u30f3\u30bf\u30a4\u30e0\u30d1\u30b9\u30ef\u30fc\u30c9\u8a8d\u8a3c\u300d\u306e\u4e21\u65b9\u3092\u8981\u6c42\u3057\u307e\u3059\u3002</p> <p><code>KbdInteractiveAuthentication no</code> \u306e\u5b58\u5728\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>sudo grep -RIn --color=auto \\\n  -E '^\\s*KbdInteractiveAuthentication\\s+no\\b' \\\n  /etc/ssh/sshd_config /etc/ssh/sshd_config.d 2&gt;/dev/null\n</code></pre> <pre><code>/etc/ssh/sshd_config:61:KbdInteractiveAuthentication no\n/etc/ssh/sshd_config.d/01-custom-ssh.conf:2:KbdInteractiveAuthentication no\n</code></pre></p> <p><code>sshd_config</code> \u3068 <code>01-custom-ssh.conf</code> \u306b\u3042\u308b <code>KbdInteractiveAuthentication no</code> \u3092\u300c\u7121\u52b9\u5316\u300d\u3057\u307e\u3059\uff08\u5f8c\u7d9a\u306e <code>02-2fa.conf</code> \u306e <code>yes</code> \u3092\u78ba\u5b9f\u306b\u6709\u52b9\u306b\u3059\u308b\u305f\u3081\uff09\u3002 <pre><code>sudo sed -i \\\n  -e 's/^[[:space:]]*KbdInteractiveAuthentication[[:space:]]\\+no.*$/# KbdInteractiveAuthentication no/' \\\n  /etc/ssh/sshd_config \\\n  /etc/ssh/sshd_config.d/01-custom-ssh.conf\n</code></pre></p> <p>\u69cb\u6587\u30c1\u30a7\u30c3\u30af\u3057\u3001\u30ea\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002 <pre><code>sudo sshd -t\n</code></pre> <pre><code>sudo systemctl reload ssh\n</code></pre></p> <p>\u30b0\u30ed\u30fc\u30d0\u30eb\u8a2d\u5b9a\u306e\u5b9f\u52b9\u5024\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>sudo sshd -T | egrep -i 'usepam|kbdinteractiveauthentication|authenticationmethods|passwordauthentication'\n</code></pre> <pre><code>usepam yes\npasswordauthentication no\nkbdinteractiveauthentication yes\nauthenticationmethods publickey,keyboard-interactive\n</code></pre></p>"},{"location":"setup/ubuntu-setup/#_1","title":"\u6700\u7d42\u78ba\u8a8d\uff08\u5fc5\u9808\uff09","text":"<p>\u65e2\u5b58\u306e SSH \u30bb\u30c3\u30b7\u30e7\u30f3\u306f\u5207\u65ad\u305b\u305a\u3001\u5225\u30bf\u30fc\u30df\u30ca\u30eb\u304b\u3089\u65b0\u898f\u63a5\u7d9a\u3092\u884c\u3044\u3001\u4ee5\u4e0b\u3092\u5fc5\u305a\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <ul> <li>\u516c\u958b\u9375\u8a8d\u8a3c\u304c\u6210\u529f\u3059\u308b\u3053\u3068</li> <li>\u7d9a\u3044\u3066\u30ef\u30f3\u30bf\u30a4\u30e0\u30d1\u30b9\u30ef\u30fc\u30c9\uff08OTP\uff09\u304c\u8981\u6c42\u3055\u308c\u308b\u3053\u3068</li> <li>\u6b63\u3057\u3044\u30b3\u30fc\u30c9\u3067\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u308b\u3053\u3068</li> </ul> <p>\u4ee5\u4e0b\u306e\u5b9f\u52b9\u5024\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308c\u3070\u3001\u8a2d\u5b9a\u306f\u6b63\u3057\u304f\u53cd\u6620\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"setup/ubuntu-setup/#ssh-2fagoogle-authenticator","title":"SSH 2FA\uff08Google Authenticator\uff09\u5b8c\u5168\u30af\u30ea\u30fc\u30f3\u30a2\u30c3\u30d7","text":"<p>SSH \u5074\uff1a2FA \u5f37\u5236\u3092\u89e3\u9664 <pre><code>sudo mv /etc/ssh/sshd_config.d/02-2fa.conf \\\n    /etc/ssh/sshd_config.d/02-2fa.conf.bak\n</code></pre> <pre><code>sudo sshd -t\n</code></pre> <pre><code>sudo systemctl reload ssh\n</code></pre></p> <p>\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>sudo sshd -T | egrep -i 'authenticationmethods|kbdinteractiveauthentication'\n</code></pre> <pre><code>usepam yes\npasswordauthentication no\nkbdinteractiveauthentication yes\nauthenticationmethods any\n</code></pre></p> <p><code>kbdinteractiveauthentication yes</code> \u304c\u8868\u793a\u3055\u308c\u3066\u3044\u3066\u3082\u3001<code>authenticationmethods any</code> \u306e\u5834\u5408\u3001OTP \u306f\u8981\u6c42\u3055\u308c\u307e\u305b\u3093\u3002</p> <p>PAM \u5074\uff1aGoogle Authenticator \u3092\u524a\u9664 <pre><code>sudo sed -i '/pam_google_authenticator\\.so/d' /etc/pam.d/sshd\n</code></pre> <pre><code>sudo sed -i -E 's/^#\\s*@include\\s+common-auth/@include common-auth/' /etc/pam.d/sshd\n</code></pre></p> <p>\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>grep -n -E 'common-auth|pam_google_authenticator' /etc/pam.d/sshd\n</code></pre> <pre><code>4:@include common-auth\n</code></pre></p> <p>\u53cd\u6620 &amp; \u78ba\u8a8d <pre><code>sudo sshd -t\n</code></pre> <pre><code>sudo systemctl reload ssh\n</code></pre></p> <p>\u5225\u30bf\u30fc\u30df\u30ca\u30eb\u304b\u3089\u65b0\u898f SSH \u63a5\u7d9a\u3057\u3001OTP \u304c\u8981\u6c42\u3055\u308c\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d</p> <p>\u5b8c\u5168\u30af\u30ea\u30fc\u30f3\u30a2\u30c3\u30d7\u3057\u307e\u3059\u3002 <pre><code>sudo apt remove libpam-google-authenticator\n</code></pre> <pre><code>sudo apt autoremove\n</code></pre> <pre><code>rm -f ~/.google_authenticator\n</code></pre></p>"}]}